(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();function e(e){let t=Object.create(null);for(let n of e.split(`,`))t[n]=1;return e=>e in t}var t={},n=[],r=()=>{},i=()=>!1,a=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),o=e=>e.startsWith(`onUpdate:`),s=Object.assign,c=(e,t)=>{let n=e.indexOf(t);n>-1&&e.splice(n,1)},l=Object.prototype.hasOwnProperty,u=(e,t)=>l.call(e,t),d=Array.isArray,f=e=>ee(e)===`[object Map]`,p=e=>ee(e)===`[object Set]`,m=e=>ee(e)===`[object RegExp]`,h=e=>typeof e==`function`,g=e=>typeof e==`string`,_=e=>typeof e==`symbol`,v=e=>typeof e==`object`&&!!e,y=e=>(v(e)||h(e))&&h(e.then)&&h(e.catch),b=Object.prototype.toString,ee=e=>b.call(e),te=e=>ee(e).slice(8,-1),x=e=>ee(e)===`[object Object]`,ne=e=>g(e)&&e!==`NaN`&&e[0]!==`-`&&``+parseInt(e,10)===e,re=e(`,key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted`),ie=e=>{let t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},ae=/-\w/g,oe=ie(e=>e.replace(ae,e=>e.slice(1).toUpperCase())),se=/\B([A-Z])/g,ce=ie(e=>e.replace(se,`-$1`).toLowerCase()),le=ie(e=>e.charAt(0).toUpperCase()+e.slice(1)),ue=ie(e=>e?`on${le(e)}`:``),de=(e,t)=>!Object.is(e,t),fe=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},pe=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},me=e=>{let t=parseFloat(e);return isNaN(t)?e:t},he=e=>{let t=g(e)?Number(e):NaN;return isNaN(t)?e:t},ge,_e=()=>ge||=typeof globalThis<`u`?globalThis:typeof self<`u`?self:typeof window<`u`?window:typeof global<`u`?global:{};function ve(e){if(d(e)){let t={};for(let n=0;n<e.length;n++){let r=e[n],i=g(r)?Se(r):ve(r);if(i)for(let e in i)t[e]=i[e]}return t}else if(g(e)||v(e))return e}var ye=/;(?![^(]*\))/g,be=/:([^]+)/,xe=/\/\*[^]*?\*\//g;function Se(e){let t={};return e.replace(xe,``).split(ye).forEach(e=>{if(e){let n=e.split(be);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function S(e){let t=``;if(g(e))t=e;else if(d(e))for(let n=0;n<e.length;n++){let r=S(e[n]);r&&(t+=r+` `)}else if(v(e))for(let n in e)e[n]&&(t+=n+` `);return t.trim()}var Ce=`itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly`,we=e(Ce);Ce+``;function Te(e){return!!e||e===``}var Ee=e=>!!(e&&e.__v_isRef===!0),De=e=>g(e)?e:e==null?``:d(e)||v(e)&&(e.toString===b||!h(e.toString))?Ee(e)?De(e.value):JSON.stringify(e,Oe,2):String(e),Oe=(e,t)=>Ee(t)?Oe(e,t.value):f(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[t,n],r)=>(e[ke(t,r)+` =>`]=n,e),{})}:p(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>ke(e))}:_(t)?ke(t):v(t)&&!d(t)&&!x(t)?String(t):t,ke=(e,t=``)=>_(e)?`Symbol(${e.description??t})`:e,Ae,je=class{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ae,!e&&Ae&&(this.index=(Ae.scopes||=[]).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){let t=Ae;try{return Ae=this,e()}finally{Ae=t}}}on(){++this._on===1&&(this.prevScope=Ae,Ae=this)}off(){this._on>0&&--this._on===0&&(Ae=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(this.effects.length=0,t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){let e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0}}};function Me(e){return new je(e)}function Ne(){return Ae}function Pe(e,t=!1){Ae&&Ae.cleanups.push(e)}var C,Fe=new WeakSet,Ie=class{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ae&&Ae.active&&Ae.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Fe.has(this)&&(Fe.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Be(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,$e(this),Ue(this);let e=C,t=Ye;C=this,Ye=!0;try{return this.fn()}finally{We(this),C=e,Ye=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)qe(e);this.deps=this.depsTail=void 0,$e(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Fe.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ge(this)&&this.run()}get dirty(){return Ge(this)}},Le=0,Re,ze;function Be(e,t=!1){if(e.flags|=8,t){e.next=ze,ze=e;return}e.next=Re,Re=e}function Ve(){Le++}function He(){if(--Le>0)return;if(ze){let e=ze;for(ze=void 0;e;){let t=e.next;e.next=void 0,e.flags&=-9,e=t}}let e;for(;Re;){let t=Re;for(Re=void 0;t;){let n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(t){e||=t}t=n}}if(e)throw e}function Ue(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function We(e){let t,n=e.depsTail,r=n;for(;r;){let e=r.prevDep;r.version===-1?(r===n&&(n=e),qe(r),Je(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=e}e.deps=t,e.depsTail=n}function Ge(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Ke(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Ke(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===et)||(e.globalVersion=et,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Ge(e))))return;e.flags|=2;let t=e.dep,n=C,r=Ye;C=e,Ye=!0;try{Ue(e);let n=e.fn(e._value);(t.version===0||de(n,e._value))&&(e.flags|=128,e._value=n,t.version++)}catch(e){throw t.version++,e}finally{C=n,Ye=r,We(e),e.flags&=-3}}function qe(e,t=!1){let{dep:n,prevSub:r,nextSub:i}=e;if(r&&(r.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let e=n.computed.deps;e;e=e.nextDep)qe(e,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Je(e){let{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}var Ye=!0,Xe=[];function Ze(){Xe.push(Ye),Ye=!1}function Qe(){let e=Xe.pop();Ye=e===void 0?!0:e}function $e(e){let{cleanup:t}=e;if(e.cleanup=void 0,t){let e=C;C=void 0;try{t()}finally{C=e}}}var et=0,tt=class{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}},nt=class{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!C||!Ye||C===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==C)t=this.activeLink=new tt(C,this),C.deps?(t.prevDep=C.depsTail,C.depsTail.nextDep=t,C.depsTail=t):C.deps=C.depsTail=t,rt(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){let e=t.nextDep;e.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=e),t.prevDep=C.depsTail,t.nextDep=void 0,C.depsTail.nextDep=t,C.depsTail=t,C.deps===t&&(C.deps=e)}return t}trigger(e){this.version++,et++,this.notify(e)}notify(e){Ve();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{He()}}};function rt(e){if(e.dep.sc++,e.sub.flags&4){let t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let e=t.deps;e;e=e.nextDep)rt(e)}let n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}var it=new WeakMap,at=Symbol(``),ot=Symbol(``),st=Symbol(``);function ct(e,t,n){if(Ye&&C){let t=it.get(e);t||it.set(e,t=new Map);let r=t.get(n);r||(t.set(n,r=new nt),r.map=t,r.key=n),r.track()}}function lt(e,t,n,r,i,a){let o=it.get(e);if(!o){et++;return}let s=e=>{e&&e.trigger()};if(Ve(),t===`clear`)o.forEach(s);else{let i=d(e),a=i&&ne(n);if(i&&n===`length`){let e=Number(r);o.forEach((t,n)=>{(n===`length`||n===st||!_(n)&&n>=e)&&s(t)})}else switch((n!==void 0||o.has(void 0))&&s(o.get(n)),a&&s(o.get(st)),t){case`add`:i?a&&s(o.get(`length`)):(s(o.get(at)),f(e)&&s(o.get(ot)));break;case`delete`:i||(s(o.get(at)),f(e)&&s(o.get(ot)));break;case`set`:f(e)&&s(o.get(at));break}}He()}function ut(e,t){let n=it.get(e);return n&&n.get(t)}function dt(e){let t=w(e);return t===e?t:(ct(t,`iterate`,st),Xt(e)?t:t.map($t))}function ft(e){return ct(e=w(e),`iterate`,st),e}var pt={__proto__:null,[Symbol.iterator](){return mt(this,Symbol.iterator,$t)},concat(...e){return dt(this).concat(...e.map(e=>d(e)?dt(e):e))},entries(){return mt(this,`entries`,e=>(e[1]=$t(e[1]),e))},every(e,t){return gt(this,`every`,e,t,void 0,arguments)},filter(e,t){return gt(this,`filter`,e,t,e=>e.map($t),arguments)},find(e,t){return gt(this,`find`,e,t,$t,arguments)},findIndex(e,t){return gt(this,`findIndex`,e,t,void 0,arguments)},findLast(e,t){return gt(this,`findLast`,e,t,$t,arguments)},findLastIndex(e,t){return gt(this,`findLastIndex`,e,t,void 0,arguments)},forEach(e,t){return gt(this,`forEach`,e,t,void 0,arguments)},includes(...e){return vt(this,`includes`,e)},indexOf(...e){return vt(this,`indexOf`,e)},join(e){return dt(this).join(e)},lastIndexOf(...e){return vt(this,`lastIndexOf`,e)},map(e,t){return gt(this,`map`,e,t,void 0,arguments)},pop(){return yt(this,`pop`)},push(...e){return yt(this,`push`,e)},reduce(e,...t){return _t(this,`reduce`,e,t)},reduceRight(e,...t){return _t(this,`reduceRight`,e,t)},shift(){return yt(this,`shift`)},some(e,t){return gt(this,`some`,e,t,void 0,arguments)},splice(...e){return yt(this,`splice`,e)},toReversed(){return dt(this).toReversed()},toSorted(e){return dt(this).toSorted(e)},toSpliced(...e){return dt(this).toSpliced(...e)},unshift(...e){return yt(this,`unshift`,e)},values(){return mt(this,`values`,$t)}};function mt(e,t,n){let r=ft(e),i=r[t]();return r!==e&&!Xt(e)&&(i._next=i.next,i.next=()=>{let e=i._next();return e.done||(e.value=n(e.value)),e}),i}var ht=Array.prototype;function gt(e,t,n,r,i,a){let o=ft(e),s=o!==e&&!Xt(e),c=o[t];if(c!==ht[t]){let t=c.apply(e,a);return s?$t(t):t}let l=n;o!==e&&(s?l=function(t,r){return n.call(this,$t(t),r,e)}:n.length>2&&(l=function(t,r){return n.call(this,t,r,e)}));let u=c.call(o,l,r);return s&&i?i(u):u}function _t(e,t,n,r){let i=ft(e),a=n;return i!==e&&(Xt(e)?n.length>3&&(a=function(t,r,i){return n.call(this,t,r,i,e)}):a=function(t,r,i){return n.call(this,t,$t(r),i,e)}),i[t](a,...r)}function vt(e,t,n){let r=w(e);ct(r,`iterate`,st);let i=r[t](...n);return(i===-1||i===!1)&&Zt(n[0])?(n[0]=w(n[0]),r[t](...n)):i}function yt(e,t,n=[]){Ze(),Ve();let r=w(e)[t].apply(e,n);return He(),Qe(),r}var bt=e(`__proto__,__v_isRef,__isVue`),xt=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!==`arguments`&&e!==`caller`).map(e=>Symbol[e]).filter(_));function St(e){_(e)||(e=String(e));let t=w(this);return ct(t,`has`,e),t.hasOwnProperty(e)}var Ct=class{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){if(t===`__v_skip`)return e.__v_skip;let r=this._isReadonly,i=this._isShallow;if(t===`__v_isReactive`)return!r;if(t===`__v_isReadonly`)return r;if(t===`__v_isShallow`)return i;if(t===`__v_raw`)return n===(r?i?Vt:Bt:i?zt:Rt).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;let a=d(e);if(!r){let e;if(a&&(e=pt[t]))return e;if(t===`hasOwnProperty`)return St}let o=Reflect.get(e,t,tn(e)?e:n);if((_(t)?xt.has(t):bt(t))||(r||ct(e,`get`,t),i))return o;if(tn(o)){let e=a&&ne(t)?o:o.value;return r&&v(e)?Kt(e):e}return v(o)?r?Kt(o):Wt(o):o}},wt=class extends Ct{constructor(e=!1){super(!1,e)}set(e,t,n,r){let i=e[t];if(!this._isShallow){let t=Yt(i);if(!Xt(n)&&!Yt(n)&&(i=w(i),n=w(n)),!d(e)&&tn(i)&&!tn(n))return t||(i.value=n),!0}let a=d(e)&&ne(t)?Number(t)<e.length:u(e,t),o=Reflect.set(e,t,n,tn(e)?e:r);return e===w(r)&&(a?de(n,i)&&lt(e,`set`,t,n,i):lt(e,`add`,t,n)),o}deleteProperty(e,t){let n=u(e,t),r=e[t],i=Reflect.deleteProperty(e,t);return i&&n&&lt(e,`delete`,t,void 0,r),i}has(e,t){let n=Reflect.has(e,t);return(!_(t)||!xt.has(t))&&ct(e,`has`,t),n}ownKeys(e){return ct(e,`iterate`,d(e)?`length`:at),Reflect.ownKeys(e)}},Tt=class extends Ct{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}},Et=new wt,Dt=new Tt,Ot=new wt(!0),kt=e=>e,At=e=>Reflect.getPrototypeOf(e);function jt(e,t,n){return function(...r){let i=this.__v_raw,a=w(i),o=f(a),s=e===`entries`||e===Symbol.iterator&&o,c=e===`keys`&&o,l=i[e](...r),u=n?kt:t?en:$t;return!t&&ct(a,`iterate`,c?ot:at),{next(){let{value:e,done:t}=l.next();return t?{value:e,done:t}:{value:s?[u(e[0]),u(e[1])]:u(e),done:t}},[Symbol.iterator](){return this}}}}function Mt(e){return function(...t){return e===`delete`?!1:e===`clear`?void 0:this}}function Nt(e,t){let n={get(n){let r=this.__v_raw,i=w(r),a=w(n);e||(de(n,a)&&ct(i,`get`,n),ct(i,`get`,a));let{has:o}=At(i),s=t?kt:e?en:$t;if(o.call(i,n))return s(r.get(n));if(o.call(i,a))return s(r.get(a));r!==i&&r.get(n)},get size(){let t=this.__v_raw;return!e&&ct(w(t),`iterate`,at),t.size},has(t){let n=this.__v_raw,r=w(n),i=w(t);return e||(de(t,i)&&ct(r,`has`,t),ct(r,`has`,i)),t===i?n.has(t):n.has(t)||n.has(i)},forEach(n,r){let i=this,a=i.__v_raw,o=w(a),s=t?kt:e?en:$t;return!e&&ct(o,`iterate`,at),a.forEach((e,t)=>n.call(r,s(e),s(t),i))}};return s(n,e?{add:Mt(`add`),set:Mt(`set`),delete:Mt(`delete`),clear:Mt(`clear`)}:{add(e){!t&&!Xt(e)&&!Yt(e)&&(e=w(e));let n=w(this);return At(n).has.call(n,e)||(n.add(e),lt(n,`add`,e,e)),this},set(e,n){!t&&!Xt(n)&&!Yt(n)&&(n=w(n));let r=w(this),{has:i,get:a}=At(r),o=i.call(r,e);o||=(e=w(e),i.call(r,e));let s=a.call(r,e);return r.set(e,n),o?de(n,s)&&lt(r,`set`,e,n,s):lt(r,`add`,e,n),this},delete(e){let t=w(this),{has:n,get:r}=At(t),i=n.call(t,e);i||=(e=w(e),n.call(t,e));let a=r?r.call(t,e):void 0,o=t.delete(e);return i&&lt(t,`delete`,e,void 0,a),o},clear(){let e=w(this),t=e.size!==0,n=e.clear();return t&&lt(e,`clear`,void 0,void 0,void 0),n}}),[`keys`,`values`,`entries`,Symbol.iterator].forEach(r=>{n[r]=jt(r,e,t)}),n}function Pt(e,t){let n=Nt(e,t);return(t,r,i)=>r===`__v_isReactive`?!e:r===`__v_isReadonly`?e:r===`__v_raw`?t:Reflect.get(u(n,r)&&r in t?n:t,r,i)}var Ft={get:Pt(!1,!1)},It={get:Pt(!1,!0)},Lt={get:Pt(!0,!1)},Rt=new WeakMap,zt=new WeakMap,Bt=new WeakMap,Vt=new WeakMap;function Ht(e){switch(e){case`Object`:case`Array`:return 1;case`Map`:case`Set`:case`WeakMap`:case`WeakSet`:return 2;default:return 0}}function Ut(e){return e.__v_skip||!Object.isExtensible(e)?0:Ht(te(e))}function Wt(e){return Yt(e)?e:qt(e,!1,Et,Ft,Rt)}function Gt(e){return qt(e,!1,Ot,It,zt)}function Kt(e){return qt(e,!0,Dt,Lt,Bt)}function qt(e,t,n,r,i){if(!v(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;let a=Ut(e);if(a===0)return e;let o=i.get(e);if(o)return o;let s=new Proxy(e,a===2?r:n);return i.set(e,s),s}function Jt(e){return Yt(e)?Jt(e.__v_raw):!!(e&&e.__v_isReactive)}function Yt(e){return!!(e&&e.__v_isReadonly)}function Xt(e){return!!(e&&e.__v_isShallow)}function Zt(e){return e?!!e.__v_raw:!1}function w(e){let t=e&&e.__v_raw;return t?w(t):e}function Qt(e){return!u(e,`__v_skip`)&&Object.isExtensible(e)&&pe(e,`__v_skip`,!0),e}var $t=e=>v(e)?Wt(e):e,en=e=>v(e)?Kt(e):e;function tn(e){return e?e.__v_isRef===!0:!1}function T(e){return rn(e,!1)}function nn(e){return rn(e,!0)}function rn(e,t){return tn(e)?e:new an(e,t)}var an=class{constructor(e,t){this.dep=new nt,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:w(e),this._value=t?e:$t(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){let t=this._rawValue,n=this.__v_isShallow||Xt(e)||Yt(e);e=n?e:w(e),de(e,t)&&(this._rawValue=e,this._value=n?e:$t(e),this.dep.trigger())}};function E(e){return tn(e)?e.value:e}var on={get:(e,t,n)=>t===`__v_raw`?e:E(Reflect.get(e,t,n)),set:(e,t,n,r)=>{let i=e[t];return tn(i)&&!tn(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function sn(e){return Jt(e)?e:new Proxy(e,on)}function cn(e){let t=d(e)?Array(e.length):{};for(let n in e)t[n]=un(e,n);return t}var ln=class{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){let e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return ut(w(this._object),this._key)}};function un(e,t,n){let r=e[t];return tn(r)?r:new ln(e,t,n)}var dn=class{constructor(e,t,n){this.fn=e,this.setter=t,this._value=void 0,this.dep=new nt(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=et-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&C!==this)return Be(this,!0),!0}get value(){let e=this.dep.track();return Ke(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}};function fn(e,t,n=!1){let r,i;return h(e)?r=e:(r=e.get,i=e.set),new dn(r,i,n)}var pn={},mn=new WeakMap,hn=void 0;function gn(e,t=!1,n=hn){if(n){let t=mn.get(n);t||mn.set(n,t=[]),t.push(e)}}function _n(e,n,i=t){let{immediate:a,deep:o,once:s,scheduler:l,augmentJob:u,call:f}=i,p=e=>o?e:Xt(e)||o===!1||o===0?vn(e,1):vn(e),m,g,_,v,y=!1,b=!1;if(tn(e)?(g=()=>e.value,y=Xt(e)):Jt(e)?(g=()=>p(e),y=!0):d(e)?(b=!0,y=e.some(e=>Jt(e)||Xt(e)),g=()=>e.map(e=>{if(tn(e))return e.value;if(Jt(e))return p(e);if(h(e))return f?f(e,2):e()})):g=h(e)?n?f?()=>f(e,2):e:()=>{if(_){Ze();try{_()}finally{Qe()}}let t=hn;hn=m;try{return f?f(e,3,[v]):e(v)}finally{hn=t}}:r,n&&o){let e=g,t=o===!0?1/0:o;g=()=>vn(e(),t)}let ee=Ne(),te=()=>{m.stop(),ee&&ee.active&&c(ee.effects,m)};if(s&&n){let e=n;n=(...t)=>{e(...t),te()}}let x=b?Array(e.length).fill(pn):pn,ne=e=>{if(!(!(m.flags&1)||!m.dirty&&!e))if(n){let e=m.run();if(o||y||(b?e.some((e,t)=>de(e,x[t])):de(e,x))){_&&_();let t=hn;hn=m;try{let t=[e,x===pn?void 0:b&&x[0]===pn?[]:x,v];x=e,f?f(n,3,t):n(...t)}finally{hn=t}}}else m.run()};return u&&u(ne),m=new Ie(g),m.scheduler=l?()=>l(ne,!1):ne,v=e=>gn(e,!1,m),_=m.onStop=()=>{let e=mn.get(m);if(e){if(f)f(e,4);else for(let t of e)t();mn.delete(m)}},n?a?ne(!0):x=m.run():l?l(ne.bind(null,!0),!0):m.run(),te.pause=m.pause.bind(m),te.resume=m.resume.bind(m),te.stop=te,te}function vn(e,t=1/0,n){if(t<=0||!v(e)||e.__v_skip||(n||=new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,tn(e))vn(e.value,t,n);else if(d(e))for(let r=0;r<e.length;r++)vn(e[r],t,n);else if(p(e)||f(e))e.forEach(e=>{vn(e,t,n)});else if(x(e)){for(let r in e)vn(e[r],t,n);for(let r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&vn(e[r],t,n)}return e}function yn(e,t,n,r){try{return r?e(...r):e()}catch(e){bn(e,t,n)}}function D(e,t,n,r){if(h(e)){let i=yn(e,t,n,r);return i&&y(i)&&i.catch(e=>{bn(e,t,n)}),i}if(d(e)){let i=[];for(let a=0;a<e.length;a++)i.push(D(e[a],t,n,r));return i}}function bn(e,n,r,i=!0){let a=n?n.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:s}=n&&n.appContext.config||t;if(n){let t=n.parent,i=n.proxy,a=`https://vuejs.org/error-reference/#runtime-${r}`;for(;t;){let n=t.ec;if(n){for(let t=0;t<n.length;t++)if(n[t](e,i,a)===!1)return}t=t.parent}if(o){Ze(),yn(o,null,10,[e,i,a]),Qe();return}}xn(e,r,a,i,s)}function xn(e,t,n,r=!0,i=!1){if(i)throw e;console.error(e)}var Sn=[],Cn=-1,wn=[],Tn=null,En=0,Dn=Promise.resolve(),On=null;function kn(e){let t=On||Dn;return e?t.then(this?e.bind(this):e):t}function An(e){let t=Cn+1,n=Sn.length;for(;t<n;){let r=t+n>>>1,i=Sn[r],a=In(i);a<e||a===e&&i.flags&2?t=r+1:n=r}return t}function jn(e){if(!(e.flags&1)){let t=In(e),n=Sn[Sn.length-1];!n||!(e.flags&2)&&t>=In(n)?Sn.push(e):Sn.splice(An(t),0,e),e.flags|=1,Mn()}}function Mn(){On||=Dn.then(Ln)}function Nn(e){d(e)?wn.push(...e):Tn&&e.id===-1?Tn.splice(En+1,0,e):e.flags&1||(wn.push(e),e.flags|=1),Mn()}function Pn(e,t,n=Cn+1){for(;n<Sn.length;n++){let t=Sn[n];if(t&&t.flags&2){if(e&&t.id!==e.uid)continue;Sn.splice(n,1),n--,t.flags&4&&(t.flags&=-2),t(),t.flags&4||(t.flags&=-2)}}}function Fn(e){if(wn.length){let e=[...new Set(wn)].sort((e,t)=>In(e)-In(t));if(wn.length=0,Tn){Tn.push(...e);return}for(Tn=e,En=0;En<Tn.length;En++){let e=Tn[En];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}Tn=null,En=0}}var In=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Ln(e){try{for(Cn=0;Cn<Sn.length;Cn++){let e=Sn[Cn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),yn(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Cn<Sn.length;Cn++){let e=Sn[Cn];e&&(e.flags&=-2)}Cn=-1,Sn.length=0,Fn(e),On=null,(Sn.length||wn.length)&&Ln(e)}}var Rn=null,zn=null;function Bn(e){let t=Rn;return Rn=e,zn=e&&e.type.__scopeId||null,t}function O(e,t=Rn,n){if(!t||e._n)return e;let r=(...n)=>{r._d&&ga(-1);let i=Bn(t),a;try{a=e(...n)}finally{Bn(i),r._d&&ga(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function Vn(e,n){if(Rn===null)return e;let r=Za(Rn),i=e.dirs||=[];for(let e=0;e<n.length;e++){let[a,o,s,c=t]=n[e];a&&(h(a)&&(a={mounted:a,updated:a}),a.deep&&vn(o),i.push({dir:a,instance:r,value:o,oldValue:void 0,arg:s,modifiers:c}))}return e}function Hn(e,t,n,r){let i=e.dirs,a=t&&t.dirs;for(let o=0;o<i.length;o++){let s=i[o];a&&(s.oldValue=a[o].value);let c=s.dir[r];c&&(Ze(),D(c,n,8,[e.el,s,e,t]),Qe())}}var Un=Symbol(`_vte`),Wn=e=>e.__isTeleport,Gn=Symbol(`_leaveCb`),Kn=Symbol(`_enterCb`);function qn(){let e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Cr(()=>{e.isMounted=!0}),Er(()=>{e.isUnmounting=!0}),e}var Jn=[Function,Array],Yn={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Jn,onEnter:Jn,onAfterEnter:Jn,onEnterCancelled:Jn,onBeforeLeave:Jn,onLeave:Jn,onAfterLeave:Jn,onLeaveCancelled:Jn,onBeforeAppear:Jn,onAppear:Jn,onAfterAppear:Jn,onAppearCancelled:Jn},Xn=e=>{let t=e.subTree;return t.component?Xn(t.component):t},Zn={name:`BaseTransition`,props:Yn,setup(e,{slots:t}){let n=Ia(),r=qn();return()=>{let i=t.default&&ar(t.default(),!0);if(!i||!i.length)return;let a=Qn(i),o=w(e),{mode:s}=o;if(r.isLeaving)return nr(a);let c=rr(a);if(!c)return nr(a);let l=tr(c,o,r,n,e=>l=e);c.type!==ua&&ir(c,l);let u=n.subTree&&rr(n.subTree);if(u&&u.type!==ua&&!ya(u,c)&&Xn(n).type!==ua){let e=tr(u,o,r,n);if(ir(u,e),s===`out-in`&&c.type!==ua)return r.isLeaving=!0,e.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete e.afterLeave,u=void 0},nr(a);s===`in-out`&&c.type!==ua?e.delayLeave=(e,t,n)=>{let i=er(r,u);i[String(u.key)]=u,e[Gn]=()=>{t(),e[Gn]=void 0,delete l.delayedLeave,u=void 0},l.delayedLeave=()=>{n(),delete l.delayedLeave,u=void 0}}:u=void 0}else u&&=void 0;return a}}};function Qn(e){let t=e[0];if(e.length>1){for(let n of e)if(n.type!==ua){t=n;break}}return t}var $n=Zn;function er(e,t){let{leavingVNodes:n}=e,r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function tr(e,t,n,r,i){let{appear:a,mode:o,persisted:s=!1,onBeforeEnter:c,onEnter:l,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:p,onLeave:m,onAfterLeave:h,onLeaveCancelled:g,onBeforeAppear:_,onAppear:v,onAfterAppear:y,onAppearCancelled:b}=t,ee=String(e.key),te=er(n,e),x=(e,t)=>{e&&D(e,r,9,t)},ne=(e,t)=>{let n=t[1];x(e,t),d(e)?e.every(e=>e.length<=1)&&n():e.length<=1&&n()},re={mode:o,persisted:s,beforeEnter(t){let r=c;if(!n.isMounted)if(a)r=_||c;else return;t[Gn]&&t[Gn](!0);let i=te[ee];i&&ya(e,i)&&i.el[Gn]&&i.el[Gn](),x(r,[t])},enter(e){let t=l,r=u,i=f;if(!n.isMounted)if(a)t=v||l,r=y||u,i=b||f;else return;let o=!1,s=e[Kn]=t=>{o||(o=!0,x(t?i:r,[e]),re.delayedLeave&&re.delayedLeave(),e[Kn]=void 0)};t?ne(t,[e,s]):s()},leave(t,r){let i=String(e.key);if(t[Kn]&&t[Kn](!0),n.isUnmounting)return r();x(p,[t]);let a=!1,o=t[Gn]=n=>{a||(a=!0,r(),x(n?g:h,[t]),t[Gn]=void 0,te[i]===e&&delete te[i])};te[i]=e,m?ne(m,[t,o]):o()},clone(e){let a=tr(e,t,n,r,i);return i&&i(a),a}};return re}function nr(e){if(dr(e))return e=wa(e),e.children=null,e}function rr(e){if(!dr(e))return Wn(e.type)&&e.children?Qn(e.children):e;if(e.component)return e.component.subTree;let{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&h(n.default))return n.default()}}function ir(e,t){e.shapeFlag&6&&e.component?(e.transition=t,ir(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function ar(e,t=!1,n){let r=[],i=0;for(let a=0;a<e.length;a++){let o=e[a],s=n==null?o.key:String(n)+String(o.key==null?a:o.key);o.type===A?(o.patchFlag&128&&i++,r=r.concat(ar(o.children,t,s))):(t||o.type!==ua)&&r.push(s==null?o:wa(o,{key:s}))}if(i>1)for(let e=0;e<r.length;e++)r[e].patchFlag=-2;return r}function k(e,t){return h(e)?(()=>s({name:e.name},t,{setup:e}))():e}function or(e){e.ids=[e.ids[0]+ e.ids[2]+++`-`,0,0]}var sr=new WeakMap;function cr(e,n,r,a,o=!1){if(d(e)){e.forEach((e,t)=>cr(e,n&&(d(n)?n[t]:n),r,a,o));return}if(ur(a)&&!o){a.shapeFlag&512&&a.type.__asyncResolved&&a.component.subTree.component&&cr(e,n,r,a.component.subTree);return}let s=a.shapeFlag&4?Za(a.component):a.el,l=o?null:s,{i:f,r:p}=e,m=n&&n.r,_=f.refs===t?f.refs={}:f.refs,v=f.setupState,y=w(v),b=v===t?i:e=>u(y,e),ee=e=>!0;if(m!=null&&m!==p){if(lr(n),g(m))_[m]=null,b(m)&&(v[m]=null);else if(tn(m)){ee(m)&&(m.value=null);let e=n;e.k&&(_[e.k]=null)}}if(h(p))yn(p,f,12,[l,_]);else{let t=g(p),n=tn(p);if(t||n){let i=()=>{if(e.f){let n=t?b(p)?v[p]:_[p]:ee(p)||!e.k?p.value:_[e.k];if(o)d(n)&&c(n,s);else if(d(n))n.includes(s)||n.push(s);else if(t)_[p]=[s],b(p)&&(v[p]=_[p]);else{let t=[s];ee(p)&&(p.value=t),e.k&&(_[e.k]=t)}}else t?(_[p]=l,b(p)&&(v[p]=l)):n&&(ee(p)&&(p.value=l),e.k&&(_[e.k]=l))};if(l){let t=()=>{i(),sr.delete(e)};t.id=-1,sr.set(e,t),Pi(t,r)}else lr(e),i()}}}function lr(e){let t=sr.get(e);t&&(t.flags|=8,sr.delete(e))}_e().requestIdleCallback,_e().cancelIdleCallback;var ur=e=>!!e.type.__asyncLoader,dr=e=>e.type.__isKeepAlive,fr={name:`KeepAlive`,__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){let n=Ia(),r=n.ctx;if(!r.renderer)return()=>{let e=t.default&&t.default();return e&&e.length===1?e[0]:e};let i=new Map,a=new Set,o=null,s=n.suspense,{renderer:{p:c,m:l,um:u,o:{createElement:d}}}=r,f=d(`div`);r.activate=(e,t,n,r,i)=>{let a=e.component;l(e,t,n,0,s),c(a.vnode,e,t,n,a,s,r,e.slotScopeIds,i),Pi(()=>{a.isDeactivated=!1,a.a&&fe(a.a);let t=e.props&&e.props.onVnodeMounted;t&&ja(t,a.parent,e)},s)},r.deactivate=e=>{let t=e.component;Ui(t.m),Ui(t.a),l(e,f,null,1,s),Pi(()=>{t.da&&fe(t.da);let n=e.props&&e.props.onVnodeUnmounted;n&&ja(n,t.parent,e),t.isDeactivated=!0},s)};function p(e){vr(e),u(e,n,s,!0)}function m(e){i.forEach((t,n)=>{let r=Qa(t.type);r&&!e(r)&&h(n)})}function h(e){let t=i.get(e);t&&(!o||!ya(t,o))?p(t):o&&vr(o),i.delete(e),a.delete(e)}Ki(()=>[e.include,e.exclude],([e,t])=>{e&&m(t=>pr(e,t)),t&&m(e=>!pr(t,e))},{flush:`post`,deep:!0});let g=null,_=()=>{g!=null&&(sa(n.subTree.type)?Pi(()=>{i.set(g,yr(n.subTree))},n.subTree.suspense):i.set(g,yr(n.subTree)))};return Cr(_),Tr(_),Er(()=>{i.forEach(e=>{let{subTree:t,suspense:r}=n,i=yr(t);if(e.type===i.type&&e.key===i.key){vr(i);let e=i.component.da;e&&Pi(e,r);return}p(e)})}),()=>{if(g=null,!t.default)return o=null;let n=t.default(),r=n[0];if(n.length>1)return o=null,n;if(!va(r)||!(r.shapeFlag&4)&&!(r.shapeFlag&128))return o=null,r;let s=yr(r);if(s.type===ua)return o=null,s;let c=s.type,l=Qa(ur(s)?s.type.__asyncResolved||{}:c),{include:u,exclude:d,max:f}=e;if(u&&(!l||!pr(u,l))||d&&l&&pr(d,l))return s.shapeFlag&=-257,o=s,r;let p=s.key==null?c:s.key,m=i.get(p);return s.el&&(s=wa(s),r.shapeFlag&128&&(r.ssContent=s)),g=p,m?(s.el=m.el,s.component=m.component,s.transition&&ir(s,s.transition),s.shapeFlag|=512,a.delete(p),a.add(p)):(a.add(p),f&&a.size>parseInt(f,10)&&h(a.values().next().value)),s.shapeFlag|=256,o=s,sa(r.type)?r:s}}};function pr(e,t){return d(e)?e.some(e=>pr(e,t)):g(e)?e.split(`,`).includes(t):m(e)?(e.lastIndex=0,e.test(t)):!1}function mr(e,t){gr(e,`a`,t)}function hr(e,t){gr(e,`da`,t)}function gr(e,t,n=Fa){let r=e.__wdc||=()=>{let t=n;for(;t;){if(t.isDeactivated)return;t=t.parent}return e()};if(br(t,r,n),n){let e=n.parent;for(;e&&e.parent;)dr(e.parent.vnode)&&_r(r,t,n,e),e=e.parent}}function _r(e,t,n,r){let i=br(t,e,r,!0);Dr(()=>{c(r[t],i)},n)}function vr(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function yr(e){return e.shapeFlag&128?e.ssContent:e}function br(e,t,n=Fa,r=!1){if(n){let i=n[e]||(n[e]=[]),a=t.__weh||=(...r)=>{Ze();let i=za(n),a=D(t,n,e,r);return i(),Qe(),a};return r?i.unshift(a):i.push(a),a}}var xr=e=>(t,n=Fa)=>{(!Ha||e===`sp`)&&br(e,(...e)=>t(...e),n)},Sr=xr(`bm`),Cr=xr(`m`),wr=xr(`bu`),Tr=xr(`u`),Er=xr(`bum`),Dr=xr(`um`),Or=xr(`sp`),kr=xr(`rtg`),Ar=xr(`rtc`);function jr(e,t=Fa){br(`ec`,e,t)}var Mr=`components`,Nr=`directives`;function Pr(e,t){return Rr(Mr,e,!0,t)||e}var Fr=Symbol.for(`v-ndc`);function Ir(e){return g(e)?Rr(Mr,e,!1)||e:e||Fr}function Lr(e){return Rr(Nr,e)}function Rr(e,t,n=!0,r=!1){let i=Rn||Fa;if(i){let n=i.type;if(e===Mr){let e=Qa(n,!1);if(e&&(e===t||e===oe(t)||e===le(oe(t))))return n}let a=zr(i[e]||n[e],t)||zr(i.appContext[e],t);return!a&&r?n:a}}function zr(e,t){return e&&(e[t]||e[oe(t)]||e[le(oe(t))])}function Br(e,t,n,r){let i,a=n&&n[r],o=d(e);if(o||g(e)){let n=o&&Jt(e),r=!1,s=!1;n&&(r=!Xt(e),s=Yt(e),e=ft(e)),i=Array(e.length);for(let n=0,o=e.length;n<o;n++)i[n]=t(r?s?en($t(e[n])):$t(e[n]):e[n],n,void 0,a&&a[n])}else if(typeof e==`number`){i=Array(e);for(let n=0;n<e;n++)i[n]=t(n+1,n,void 0,a&&a[n])}else if(v(e))if(e[Symbol.iterator])i=Array.from(e,(e,n)=>t(e,n,void 0,a&&a[n]));else{let n=Object.keys(e);i=Array(n.length);for(let r=0,o=n.length;r<o;r++){let o=n[r];i[r]=t(e[o],o,r,a&&a[r])}}else i=[];return n&&(n[r]=i),i}function Vr(e,t,n={},r,i){if(Rn.ce||Rn.parent&&ur(Rn.parent)&&Rn.parent.ce){let e=Object.keys(n).length>0;return t!==`default`&&(n.name=t),j(),N(A,null,[F(`slot`,n,r&&r())],e?-2:64)}let a=e[t];a&&a._c&&(a._d=!1),j();let o=a&&Hr(a(n)),s=n.key||o&&o.key,c=N(A,{key:(s&&!_(s)?s:`_${t}`)+(!o&&r?`_fb`:``)},o||(r?r():[]),o&&e._===1?64:-2);return!i&&c.scopeId&&(c.slotScopeIds=[c.scopeId+`-s`]),a&&a._c&&(a._d=!0),c}function Hr(e){return e.some(e=>va(e)?!(e.type===ua||e.type===A&&!Hr(e.children)):!0)?e:null}var Ur=e=>e?Va(e)?Za(e):Ur(e.parent):null,Wr=s(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ur(e.parent),$root:e=>Ur(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>$r(e),$forceUpdate:e=>e.f||=()=>{jn(e.update)},$nextTick:e=>e.n||=kn.bind(e.proxy),$watch:e=>Ji.bind(e)}),Gr=(e,n)=>e!==t&&!e.__isScriptSetup&&u(e,n),Kr={get({_:e},n){if(n===`__v_skip`)return!0;let{ctx:r,setupState:i,data:a,props:o,accessCache:s,type:c,appContext:l}=e,d;if(n[0]!==`$`){let c=s[n];if(c!==void 0)switch(c){case 1:return i[n];case 2:return a[n];case 4:return r[n];case 3:return o[n]}else if(Gr(i,n))return s[n]=1,i[n];else if(a!==t&&u(a,n))return s[n]=2,a[n];else if((d=e.propsOptions[0])&&u(d,n))return s[n]=3,o[n];else if(r!==t&&u(r,n))return s[n]=4,r[n];else Jr&&(s[n]=0)}let f=Wr[n],p,m;if(f)return n===`$attrs`&&ct(e.attrs,`get`,``),f(e);if((p=c.__cssModules)&&(p=p[n]))return p;if(r!==t&&u(r,n))return s[n]=4,r[n];if(m=l.config.globalProperties,u(m,n))return m[n]},set({_:e},n,r){let{data:i,setupState:a,ctx:o}=e;return Gr(a,n)?(a[n]=r,!0):i!==t&&u(i,n)?(i[n]=r,!0):u(e.props,n)||n[0]===`$`&&n.slice(1)in e?!1:(o[n]=r,!0)},has({_:{data:e,setupState:n,accessCache:r,ctx:i,appContext:a,propsOptions:o,type:s}},c){let l,d;return!!(r[c]||e!==t&&c[0]!==`$`&&u(e,c)||Gr(n,c)||(l=o[0])&&u(l,c)||u(i,c)||u(Wr,c)||u(a.config.globalProperties,c)||(d=s.__cssModules)&&d[c])},defineProperty(e,t,n){return n.get==null?u(n,`value`)&&this.set(e,t,n.value,null):e._.accessCache[t]=0,Reflect.defineProperty(e,t,n)}};function qr(e){return d(e)?e.reduce((e,t)=>(e[t]=null,e),{}):e}var Jr=!0;function Yr(e){let t=$r(e),n=e.proxy,i=e.ctx;Jr=!1,t.beforeCreate&&Zr(t.beforeCreate,e,`bc`);let{data:a,computed:o,methods:s,watch:c,provide:l,inject:u,created:f,beforeMount:p,mounted:m,beforeUpdate:g,updated:_,activated:y,deactivated:b,beforeDestroy:ee,beforeUnmount:te,destroyed:x,unmounted:ne,render:re,renderTracked:ie,renderTriggered:ae,errorCaptured:oe,serverPrefetch:se,expose:ce,inheritAttrs:le,components:ue,directives:de,filters:fe}=t;if(u&&Xr(u,i,null),s)for(let e in s){let t=s[e];h(t)&&(i[e]=t.bind(n))}if(a){let t=a.call(n,n);v(t)&&(e.data=Wt(t))}if(Jr=!0,o)for(let e in o){let t=o[e],a=I({get:h(t)?t.bind(n,n):h(t.get)?t.get.bind(n,n):r,set:!h(t)&&h(t.set)?t.set.bind(n):r});Object.defineProperty(i,e,{enumerable:!0,configurable:!0,get:()=>a.value,set:e=>a.value=e})}if(c)for(let e in c)Qr(c[e],i,n,e);if(l){let e=h(l)?l.call(n):l;Reflect.ownKeys(e).forEach(t=>{pi(t,e[t])})}f&&Zr(f,e,`c`);function pe(e,t){d(t)?t.forEach(t=>e(t.bind(n))):t&&e(t.bind(n))}if(pe(Sr,p),pe(Cr,m),pe(wr,g),pe(Tr,_),pe(mr,y),pe(hr,b),pe(jr,oe),pe(Ar,ie),pe(kr,ae),pe(Er,te),pe(Dr,ne),pe(Or,se),d(ce))if(ce.length){let t=e.exposed||={};ce.forEach(e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t,enumerable:!0})})}else e.exposed||={};re&&e.render===r&&(e.render=re),le!=null&&(e.inheritAttrs=le),ue&&(e.components=ue),de&&(e.directives=de),se&&or(e)}function Xr(e,t,n=r){for(let n in d(e)&&(e=ii(e)),e){let r=e[n],i;i=v(r)?`default`in r?mi(r.from||n,r.default,!0):mi(r.from||n):mi(r),tn(i)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:e=>i.value=e}):t[n]=i}}function Zr(e,t,n){D(d(e)?e.map(e=>e.bind(t.proxy)):e.bind(t.proxy),t,n)}function Qr(e,t,n,r){let i=r.includes(`.`)?Yi(n,r):()=>n[r];if(g(e)){let n=t[e];h(n)&&Ki(i,n)}else if(h(e))Ki(i,e.bind(n));else if(v(e))if(d(e))e.forEach(e=>Qr(e,t,n,r));else{let r=h(e.handler)?e.handler.bind(n):t[e.handler];h(r)&&Ki(i,r,e)}}function $r(e){let t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:a,config:{optionMergeStrategies:o}}=e.appContext,s=a.get(t),c;return s?c=s:!i.length&&!n&&!r?c=t:(c={},i.length&&i.forEach(e=>ei(c,e,o,!0)),ei(c,t,o)),v(t)&&a.set(t,c),c}function ei(e,t,n,r=!1){let{mixins:i,extends:a}=t;for(let o in a&&ei(e,a,n,!0),i&&i.forEach(t=>ei(e,t,n,!0)),t)if(!(r&&o===`expose`)){let r=ti[o]||n&&n[o];e[o]=r?r(e[o],t[o]):t[o]}return e}var ti={data:ni,props:si,emits:si,methods:oi,computed:oi,beforeCreate:ai,created:ai,beforeMount:ai,mounted:ai,beforeUpdate:ai,updated:ai,beforeDestroy:ai,beforeUnmount:ai,destroyed:ai,unmounted:ai,activated:ai,deactivated:ai,errorCaptured:ai,serverPrefetch:ai,components:oi,directives:oi,watch:ci,provide:ni,inject:ri};function ni(e,t){return t?e?function(){return s(h(e)?e.call(this,this):e,h(t)?t.call(this,this):t)}:t:e}function ri(e,t){return oi(ii(e),ii(t))}function ii(e){if(d(e)){let t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ai(e,t){return e?[...new Set([].concat(e,t))]:t}function oi(e,t){return e?s(Object.create(null),e,t):t}function si(e,t){return e?d(e)&&d(t)?[...new Set([...e,...t])]:s(Object.create(null),qr(e),qr(t??{})):t}function ci(e,t){if(!e)return t;if(!t)return e;let n=s(Object.create(null),e);for(let r in t)n[r]=ai(e[r],t[r]);return n}function li(){return{app:null,config:{isNativeTag:i,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}var ui=0;function di(e,t){return function(n,r=null){h(n)||(n=s({},n)),r!=null&&!v(r)&&(r=null);let i=li(),a=new WeakSet,o=[],c=!1,l=i.app={_uid:ui++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:to,get config(){return i.config},set config(e){},use(e,...t){return a.has(e)||(e&&h(e.install)?(a.add(e),e.install(l,...t)):h(e)&&(a.add(e),e(l,...t))),l},mixin(e){return i.mixins.includes(e)||i.mixins.push(e),l},component(e,t){return t?(i.components[e]=t,l):i.components[e]},directive(e,t){return t?(i.directives[e]=t,l):i.directives[e]},mount(a,o,s){if(!c){let u=l._ceVNode||F(n,r);return u.appContext=i,s===!0?s=`svg`:s===!1&&(s=void 0),o&&t?t(u,a):e(u,a,s),c=!0,l._container=a,a.__vue_app__=l,Za(u.component)}},onUnmount(e){o.push(e)},unmount(){c&&(D(o,l._instance,16),e(null,l._container),delete l._container.__vue_app__)},provide(e,t){return i.provides[e]=t,l},runWithContext(e){let t=fi;fi=l;try{return e()}finally{fi=t}}};return l}}var fi=null;function pi(e,t){if(Fa){let n=Fa.provides,r=Fa.parent&&Fa.parent.provides;r===n&&(n=Fa.provides=Object.create(r)),n[e]=t}}function mi(e,t,n=!1){let r=Ia();if(r||fi){let i=fi?fi._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&h(t)?t.call(r&&r.proxy):t}}function hi(){return!!(Ia()||fi)}var gi={},_i=()=>Object.create(gi),vi=e=>Object.getPrototypeOf(e)===gi;function yi(e,t,n,r=!1){let i={},a=_i();for(let n in e.propsDefaults=Object.create(null),xi(e,t,i,a),e.propsOptions[0])n in i||(i[n]=void 0);n?e.props=r?i:Gt(i):e.type.props?e.props=i:e.props=a,e.attrs=a}function bi(e,t,n,r){let{props:i,attrs:a,vnode:{patchFlag:o}}=e,s=w(i),[c]=e.propsOptions,l=!1;if((r||o>0)&&!(o&16)){if(o&8){let n=e.vnode.dynamicProps;for(let r=0;r<n.length;r++){let o=n[r];if(ea(e.emitsOptions,o))continue;let d=t[o];if(c)if(u(a,o))d!==a[o]&&(a[o]=d,l=!0);else{let t=oe(o);i[t]=Si(c,s,t,d,e,!1)}else d!==a[o]&&(a[o]=d,l=!0)}}}else{xi(e,t,i,a)&&(l=!0);let r;for(let a in s)(!t||!u(t,a)&&((r=ce(a))===a||!u(t,r)))&&(c?n&&(n[a]!==void 0||n[r]!==void 0)&&(i[a]=Si(c,s,a,void 0,e,!0)):delete i[a]);if(a!==s)for(let e in a)(!t||!u(t,e))&&(delete a[e],l=!0)}l&&lt(e.attrs,`set`,``)}function xi(e,n,r,i){let[a,o]=e.propsOptions,s=!1,c;if(n)for(let t in n){if(re(t))continue;let l=n[t],d;a&&u(a,d=oe(t))?!o||!o.includes(d)?r[d]=l:(c||={})[d]=l:ea(e.emitsOptions,t)||(!(t in i)||l!==i[t])&&(i[t]=l,s=!0)}if(o){let n=w(r),i=c||t;for(let t=0;t<o.length;t++){let s=o[t];r[s]=Si(a,n,s,i[s],e,!u(i,s))}}return s}function Si(e,t,n,r,i,a){let o=e[n];if(o!=null){let e=u(o,`default`);if(e&&r===void 0){let e=o.default;if(o.type!==Function&&!o.skipFactory&&h(e)){let{propsDefaults:a}=i;if(n in a)r=a[n];else{let o=za(i);r=a[n]=e.call(null,t),o()}}else r=e;i.ce&&i.ce._setProp(n,r)}o[0]&&(a&&!e?r=!1:o[1]&&(r===``||r===ce(n))&&(r=!0))}return r}var Ci=new WeakMap;function wi(e,r,i=!1){let a=i?Ci:r.propsCache,o=a.get(e);if(o)return o;let c=e.props,l={},f=[],p=!1;if(!h(e)){let t=e=>{p=!0;let[t,n]=wi(e,r,!0);s(l,t),n&&f.push(...n)};!i&&r.mixins.length&&r.mixins.forEach(t),e.extends&&t(e.extends),e.mixins&&e.mixins.forEach(t)}if(!c&&!p)return v(e)&&a.set(e,n),n;if(d(c))for(let e=0;e<c.length;e++){let n=oe(c[e]);Ti(n)&&(l[n]=t)}else if(c)for(let e in c){let t=oe(e);if(Ti(t)){let n=c[e],r=l[t]=d(n)||h(n)?{type:n}:s({},n),i=r.type,a=!1,o=!0;if(d(i))for(let e=0;e<i.length;++e){let t=i[e],n=h(t)&&t.name;if(n===`Boolean`){a=!0;break}else n===`String`&&(o=!1)}else a=h(i)&&i.name===`Boolean`;r[0]=a,r[1]=o,(a||u(r,`default`))&&f.push(t)}}let m=[l,f];return v(e)&&a.set(e,m),m}function Ti(e){return e[0]!==`$`&&!re(e)}var Ei=e=>e===`_`||e===`_ctx`||e===`$stable`,Di=e=>d(e)?e.map(Da):[Da(e)],Oi=(e,t,n)=>{if(t._n)return t;let r=O((...e)=>Di(t(...e)),n);return r._c=!1,r},ki=(e,t,n)=>{let r=e._ctx;for(let n in e){if(Ei(n))continue;let i=e[n];if(h(i))t[n]=Oi(n,i,r);else if(i!=null){let e=Di(i);t[n]=()=>e}}},Ai=(e,t)=>{let n=Di(t);e.slots.default=()=>n},ji=(e,t,n)=>{for(let r in t)(n||!Ei(r))&&(e[r]=t[r])},Mi=(e,t,n)=>{let r=e.slots=_i();if(e.vnode.shapeFlag&32){let e=t._;e?(ji(r,t,n),n&&pe(r,`_`,e,!0)):ki(t,r)}else t&&Ai(e,t)},Ni=(e,n,r)=>{let{vnode:i,slots:a}=e,o=!0,s=t;if(i.shapeFlag&32){let e=n._;e?r&&e===1?o=!1:ji(a,n,r):(o=!n.$stable,ki(n,a)),s=n}else n&&(Ai(e,n),s={default:1});if(o)for(let e in a)!Ei(e)&&s[e]==null&&delete a[e]},Pi=ca;function Fi(e){return Ii(e)}function Ii(e,i){let a=_e();a.__VUE__=!0;let{insert:o,remove:s,patchProp:c,createElement:l,createText:u,createComment:d,setText:f,setElementText:p,parentNode:m,nextSibling:h,setScopeId:g=r,insertStaticContent:_}=e,v=(e,t,n,r=null,i=null,a=null,o=void 0,s=null,c=!!t.dynamicChildren)=>{if(e===t)return;e&&!ya(e,t)&&(r=Ee(e),Se(e,i,a,!0),e=null),t.patchFlag===-2&&(c=!1,t.dynamicChildren=null);let{type:l,ref:u,shapeFlag:d}=t;switch(l){case la:y(e,t,n,r);break;case ua:b(e,t,n,r);break;case da:e??ee(t,n,r,o);break;case A:ue(e,t,n,r,i,a,o,s,c);break;default:d&1?ne(e,t,n,r,i,a,o,s,c):d&6?de(e,t,n,r,i,a,o,s,c):(d&64||d&128)&&l.process(e,t,n,r,i,a,o,s,c,ke)}u!=null&&i?cr(u,e&&e.ref,a,t||e,!t):u==null&&e&&e.ref!=null&&cr(e.ref,null,a,e,!0)},y=(e,t,n,r)=>{if(e==null)o(t.el=u(t.children),n,r);else{let n=t.el=e.el;t.children!==e.children&&f(n,t.children)}},b=(e,t,n,r)=>{e==null?o(t.el=d(t.children||``),n,r):t.el=e.el},ee=(e,t,n,r)=>{[e.el,e.anchor]=_(e.children,t,n,r,e.el,e.anchor)},te=({el:e,anchor:t},n,r)=>{let i;for(;e&&e!==t;)i=h(e),o(e,n,r),e=i;o(t,n,r)},x=({el:e,anchor:t})=>{let n;for(;e&&e!==t;)n=h(e),s(e),e=n;s(t)},ne=(e,t,n,r,i,a,o,s,c)=>{if(t.type===`svg`?o=`svg`:t.type===`math`&&(o=`mathml`),e==null)ie(t,n,r,i,a,o,s,c);else{let n=e.el&&e.el._isVueCE?e.el:null;try{n&&n._beginPatch(),se(e,t,i,a,o,s,c)}finally{n&&n._endPatch()}}},ie=(e,t,n,r,i,a,s,u)=>{let d,f,{props:m,shapeFlag:h,transition:g,dirs:_}=e;if(d=e.el=l(e.type,a,m&&m.is,m),h&8?p(d,e.children):h&16&&oe(e.children,d,null,r,i,Li(e,a),s,u),_&&Hn(e,null,r,`created`),ae(d,e,e.scopeId,s,r),m){for(let e in m)e!==`value`&&!re(e)&&c(d,e,null,m[e],a,r);`value`in m&&c(d,`value`,null,m.value,a),(f=m.onVnodeBeforeMount)&&ja(f,r,e)}_&&Hn(e,null,r,`beforeMount`);let v=zi(i,g);v&&g.beforeEnter(d),o(d,t,n),((f=m&&m.onVnodeMounted)||v||_)&&Pi(()=>{f&&ja(f,r,e),v&&g.enter(d),_&&Hn(e,null,r,`mounted`)},i)},ae=(e,t,n,r,i)=>{if(n&&g(e,n),r)for(let t=0;t<r.length;t++)g(e,r[t]);if(i){let n=i.subTree;if(t===n||sa(n.type)&&(n.ssContent===t||n.ssFallback===t)){let t=i.vnode;ae(e,t,t.scopeId,t.slotScopeIds,i.parent)}}},oe=(e,t,n,r,i,a,o,s,c=0)=>{for(let l=c;l<e.length;l++)v(null,e[l]=s?Oa(e[l]):Da(e[l]),t,n,r,i,a,o,s)},se=(e,n,r,i,a,o,s)=>{let l=n.el=e.el,{patchFlag:u,dynamicChildren:d,dirs:f}=n;u|=e.patchFlag&16;let m=e.props||t,h=n.props||t,g;if(r&&Ri(r,!1),(g=h.onVnodeBeforeUpdate)&&ja(g,r,n,e),f&&Hn(n,e,r,`beforeUpdate`),r&&Ri(r,!0),(m.innerHTML&&h.innerHTML==null||m.textContent&&h.textContent==null)&&p(l,``),d?ce(e.dynamicChildren,d,l,r,i,Li(n,a),o):s||ve(e,n,l,null,r,i,Li(n,a),o,!1),u>0){if(u&16)le(l,m,h,r,a);else if(u&2&&m.class!==h.class&&c(l,`class`,null,h.class,a),u&4&&c(l,`style`,m.style,h.style,a),u&8){let e=n.dynamicProps;for(let t=0;t<e.length;t++){let n=e[t],i=m[n],o=h[n];(o!==i||n===`value`)&&c(l,n,i,o,a,r)}}u&1&&e.children!==n.children&&p(l,n.children)}else !s&&d==null&&le(l,m,h,r,a);((g=h.onVnodeUpdated)||f)&&Pi(()=>{g&&ja(g,r,n,e),f&&Hn(n,e,r,`updated`)},i)},ce=(e,t,n,r,i,a,o)=>{for(let s=0;s<t.length;s++){let c=e[s],l=t[s];v(c,l,c.el&&(c.type===A||!ya(c,l)||c.shapeFlag&198)?m(c.el):n,null,r,i,a,o,!0)}},le=(e,n,r,i,a)=>{if(n!==r){if(n!==t)for(let t in n)!re(t)&&!(t in r)&&c(e,t,n[t],null,a,i);for(let t in r){if(re(t))continue;let o=r[t],s=n[t];o!==s&&t!==`value`&&c(e,t,s,o,a,i)}`value`in r&&c(e,`value`,n.value,r.value,a)}},ue=(e,t,n,r,i,a,s,c,l)=>{let d=t.el=e?e.el:u(``),f=t.anchor=e?e.anchor:u(``),{patchFlag:p,dynamicChildren:m,slotScopeIds:h}=t;h&&(c=c?c.concat(h):h),e==null?(o(d,n,r),o(f,n,r),oe(t.children||[],n,f,i,a,s,c,l)):p>0&&p&64&&m&&e.dynamicChildren?(ce(e.dynamicChildren,m,n,i,a,s,c),(t.key!=null||i&&t===i.subTree)&&Bi(e,t,!0)):ve(e,t,n,f,i,a,s,c,l)},de=(e,t,n,r,i,a,o,s,c)=>{t.slotScopeIds=s,e==null?t.shapeFlag&512?i.ctx.activate(t,n,r,o,c):pe(t,n,r,i,a,o,c):me(e,t,c)},pe=(e,t,n,r,i,a,o)=>{let s=e.component=Pa(e,r,i);if(dr(e)&&(s.ctx.renderer=ke),Ua(s,!1,o),s.asyncDep){if(i&&i.registerDep(s,he,o),!e.el){let r=s.subTree=F(ua);b(null,r,t,n),e.placeholder=r.el}}else he(s,e,t,n,i,a,o)},me=(e,t,n)=>{let r=t.component=e.component;if(ia(e,t,n))if(r.asyncDep&&!r.asyncResolved){ge(r,t,n);return}else r.next=t,r.update();else t.el=e.el,r.vnode=t},he=(e,t,n,r,i,a,o)=>{let s=()=>{if(e.isMounted){let{next:t,bu:n,u:r,parent:c,vnode:l}=e;{let n=Hi(e);if(n){t&&(t.el=l.el,ge(e,t,o)),n.asyncDep.then(()=>{e.isUnmounted||s()});return}}let u=t,d;Ri(e,!1),t?(t.el=l.el,ge(e,t,o)):t=l,n&&fe(n),(d=t.props&&t.props.onVnodeBeforeUpdate)&&ja(d,c,t,l),Ri(e,!0);let f=ta(e),p=e.subTree;e.subTree=f,v(p,f,m(p.el),Ee(p),e,i,a),t.el=f.el,u===null&&oa(e,f.el),r&&Pi(r,i),(d=t.props&&t.props.onVnodeUpdated)&&Pi(()=>ja(d,c,t,l),i)}else{let o,{el:s,props:c}=t,{bm:l,m:u,parent:d,root:f,type:p}=e,m=ur(t);if(Ri(e,!1),l&&fe(l),!m&&(o=c&&c.onVnodeBeforeMount)&&ja(o,d,t),Ri(e,!0),s&&je){let t=()=>{e.subTree=ta(e),je(s,e.subTree,e,i,null)};m&&p.__asyncHydrate?p.__asyncHydrate(s,e,t):t()}else{f.ce&&f.ce._def.shadowRoot!==!1&&f.ce._injectChildStyle(p);let o=e.subTree=ta(e);v(null,o,n,r,e,i,a),t.el=o.el}if(u&&Pi(u,i),!m&&(o=c&&c.onVnodeMounted)){let e=t;Pi(()=>ja(o,d,e),i)}(t.shapeFlag&256||d&&ur(d.vnode)&&d.vnode.shapeFlag&256)&&e.a&&Pi(e.a,i),e.isMounted=!0,t=n=r=null}};e.scope.on();let c=e.effect=new Ie(s);e.scope.off();let l=e.update=c.run.bind(c),u=e.job=c.runIfDirty.bind(c);u.i=e,u.id=e.uid,c.scheduler=()=>jn(u),Ri(e,!0),l()},ge=(e,t,n)=>{t.component=e;let r=e.vnode.props;e.vnode=t,e.next=null,bi(e,t.props,r,n),Ni(e,t.children,n),Ze(),Pn(e),Qe()},ve=(e,t,n,r,i,a,o,s,c=!1)=>{let l=e&&e.children,u=e?e.shapeFlag:0,d=t.children,{patchFlag:f,shapeFlag:m}=t;if(f>0){if(f&128){be(l,d,n,r,i,a,o,s,c);return}else if(f&256){ye(l,d,n,r,i,a,o,s,c);return}}m&8?(u&16&&Te(l,i,a),d!==l&&p(n,d)):u&16?m&16?be(l,d,n,r,i,a,o,s,c):Te(l,i,a,!0):(u&8&&p(n,``),m&16&&oe(d,n,r,i,a,o,s,c))},ye=(e,t,r,i,a,o,s,c,l)=>{e||=n,t||=n;let u=e.length,d=t.length,f=Math.min(u,d),p;for(p=0;p<f;p++){let n=t[p]=l?Oa(t[p]):Da(t[p]);v(e[p],n,r,null,a,o,s,c,l)}u>d?Te(e,a,o,!0,!1,f):oe(t,r,i,a,o,s,c,l,f)},be=(e,t,r,i,a,o,s,c,l)=>{let u=0,d=t.length,f=e.length-1,p=d-1;for(;u<=f&&u<=p;){let n=e[u],i=t[u]=l?Oa(t[u]):Da(t[u]);if(ya(n,i))v(n,i,r,null,a,o,s,c,l);else break;u++}for(;u<=f&&u<=p;){let n=e[f],i=t[p]=l?Oa(t[p]):Da(t[p]);if(ya(n,i))v(n,i,r,null,a,o,s,c,l);else break;f--,p--}if(u>f){if(u<=p){let e=p+1,n=e<d?t[e].el:i;for(;u<=p;)v(null,t[u]=l?Oa(t[u]):Da(t[u]),r,n,a,o,s,c,l),u++}}else if(u>p)for(;u<=f;)Se(e[u],a,o,!0),u++;else{let m=u,h=u,g=new Map;for(u=h;u<=p;u++){let e=t[u]=l?Oa(t[u]):Da(t[u]);e.key!=null&&g.set(e.key,u)}let _,y=0,b=p-h+1,ee=!1,te=0,x=Array(b);for(u=0;u<b;u++)x[u]=0;for(u=m;u<=f;u++){let n=e[u];if(y>=b){Se(n,a,o,!0);continue}let i;if(n.key!=null)i=g.get(n.key);else for(_=h;_<=p;_++)if(x[_-h]===0&&ya(n,t[_])){i=_;break}i===void 0?Se(n,a,o,!0):(x[i-h]=u+1,i>=te?te=i:ee=!0,v(n,t[i],r,null,a,o,s,c,l),y++)}let ne=ee?Vi(x):n;for(_=ne.length-1,u=b-1;u>=0;u--){let e=h+u,n=t[e],f=t[e+1],p=e+1<d?f.el||f.placeholder:i;x[u]===0?v(null,n,r,p,a,o,s,c,l):ee&&(_<0||u!==ne[_]?xe(n,r,p,2):_--)}}},xe=(e,t,n,r,i=null)=>{let{el:a,type:c,transition:l,children:u,shapeFlag:d}=e;if(d&6){xe(e.component.subTree,t,n,r);return}if(d&128){e.suspense.move(t,n,r);return}if(d&64){c.move(e,t,n,ke);return}if(c===A){o(a,t,n);for(let e=0;e<u.length;e++)xe(u[e],t,n,r);o(e.anchor,t,n);return}if(c===da){te(e,t,n);return}if(r!==2&&d&1&&l)if(r===0)l.beforeEnter(a),o(a,t,n),Pi(()=>l.enter(a),i);else{let{leave:r,delayLeave:i,afterLeave:c}=l,u=()=>{e.ctx.isUnmounted?s(a):o(a,t,n)},d=()=>{a._isLeaving&&a[Gn](!0),r(a,()=>{u(),c&&c()})};i?i(a,u,d):d()}else o(a,t,n)},Se=(e,t,n,r=!1,i=!1)=>{let{type:a,props:o,ref:s,children:c,dynamicChildren:l,shapeFlag:u,patchFlag:d,dirs:f,cacheIndex:p}=e;if(d===-2&&(i=!1),s!=null&&(Ze(),cr(s,null,n,e,!0),Qe()),p!=null&&(t.renderCache[p]=void 0),u&256){t.ctx.deactivate(e);return}let m=u&1&&f,h=!ur(e),g;if(h&&(g=o&&o.onVnodeBeforeUnmount)&&ja(g,t,e),u&6)we(e.component,n,r);else{if(u&128){e.suspense.unmount(n,r);return}m&&Hn(e,null,t,`beforeUnmount`),u&64?e.type.remove(e,t,n,ke,r):l&&!l.hasOnce&&(a!==A||d>0&&d&64)?Te(l,t,n,!1,!0):(a===A&&d&384||!i&&u&16)&&Te(c,t,n),r&&S(e)}(h&&(g=o&&o.onVnodeUnmounted)||m)&&Pi(()=>{g&&ja(g,t,e),m&&Hn(e,null,t,`unmounted`)},n)},S=e=>{let{type:t,el:n,anchor:r,transition:i}=e;if(t===A){Ce(n,r);return}if(t===da){x(e);return}let a=()=>{s(n),i&&!i.persisted&&i.afterLeave&&i.afterLeave()};if(e.shapeFlag&1&&i&&!i.persisted){let{leave:t,delayLeave:r}=i,o=()=>t(n,a);r?r(e.el,a,o):o()}else a()},Ce=(e,t)=>{let n;for(;e!==t;)n=h(e),s(e),e=n;s(t)},we=(e,t,n)=>{let{bum:r,scope:i,job:a,subTree:o,um:s,m:c,a:l}=e;Ui(c),Ui(l),r&&fe(r),i.stop(),a&&(a.flags|=8,Se(o,e,t,n)),s&&Pi(s,t),Pi(()=>{e.isUnmounted=!0},t)},Te=(e,t,n,r=!1,i=!1,a=0)=>{for(let o=a;o<e.length;o++)Se(e[o],t,n,r,i)},Ee=e=>{if(e.shapeFlag&6)return Ee(e.component.subTree);if(e.shapeFlag&128)return e.suspense.next();let t=h(e.anchor||e.el),n=t&&t[Un];return n?h(n):t},De=!1,Oe=(e,t,n)=>{e==null?t._vnode&&Se(t._vnode,null,null,!0):v(t._vnode||null,e,t,null,null,null,n),t._vnode=e,De||=(De=!0,Pn(),Fn(),!1)},ke={p:v,um:Se,m:xe,r:S,mt:pe,mc:oe,pc:ve,pbc:ce,n:Ee,o:e},Ae,je;return i&&([Ae,je]=i(ke)),{render:Oe,hydrate:Ae,createApp:di(Oe,Ae)}}function Li({type:e,props:t},n){return n===`svg`&&e===`foreignObject`||n===`mathml`&&e===`annotation-xml`&&t&&t.encoding&&t.encoding.includes(`html`)?void 0:n}function Ri({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function zi(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Bi(e,t,n=!1){let r=e.children,i=t.children;if(d(r)&&d(i))for(let e=0;e<r.length;e++){let t=r[e],a=i[e];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[e]=Oa(i[e]),a.el=t.el),!n&&a.patchFlag!==-2&&Bi(t,a)),a.type===la&&a.patchFlag!==-1&&(a.el=t.el),a.type===ua&&!a.el&&(a.el=t.el)}}function Vi(e){let t=e.slice(),n=[0],r,i,a,o,s,c=e.length;for(r=0;r<c;r++){let c=e[r];if(c!==0){if(i=n[n.length-1],e[i]<c){t[r]=i,n.push(r);continue}for(a=0,o=n.length-1;a<o;)s=a+o>>1,e[n[s]]<c?a=s+1:o=s;c<e[n[a]]&&(a>0&&(t[r]=n[a-1]),n[a]=r)}}for(a=n.length,o=n[a-1];a-- >0;)n[a]=o,o=t[o];return n}function Hi(e){let t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Hi(t)}function Ui(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}var Wi=Symbol.for(`v-scx`),Gi=()=>mi(Wi);function Ki(e,t,n){return qi(e,t,n)}function qi(e,n,i=t){let{immediate:a,deep:o,flush:c,once:l}=i,u=s({},i),d=n&&a||!n&&c!==`post`,f;if(Ha){if(c===`sync`){let e=Gi();f=e.__watcherHandles||=[]}else if(!d){let e=()=>{};return e.stop=r,e.resume=r,e.pause=r,e}}let p=Fa;u.call=(e,t,n)=>D(e,p,t,n);let m=!1;c===`post`?u.scheduler=e=>{Pi(e,p&&p.suspense)}:c!==`sync`&&(m=!0,u.scheduler=(e,t)=>{t?e():jn(e)}),u.augmentJob=e=>{n&&(e.flags|=4),m&&(e.flags|=2,p&&(e.id=p.uid,e.i=p))};let h=_n(e,n,u);return Ha&&(f?f.push(h):d&&h()),h}function Ji(e,t,n){let r=this.proxy,i=g(e)?e.includes(`.`)?Yi(r,e):()=>r[e]:e.bind(r,r),a;h(t)?a=t:(a=t.handler,n=t);let o=za(this),s=qi(i,a.bind(r),n);return o(),s}function Yi(e,t){let n=t.split(`.`);return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}var Xi=(e,t)=>t===`modelValue`||t===`model-value`?e.modelModifiers:e[`${t}Modifiers`]||e[`${oe(t)}Modifiers`]||e[`${ce(t)}Modifiers`];function Zi(e,n,...r){if(e.isUnmounted)return;let i=e.vnode.props||t,a=r,o=n.startsWith(`update:`),s=o&&Xi(i,n.slice(7));s&&(s.trim&&(a=r.map(e=>g(e)?e.trim():e)),s.number&&(a=r.map(me)));let c,l=i[c=ue(n)]||i[c=ue(oe(n))];!l&&o&&(l=i[c=ue(ce(n))]),l&&D(l,e,6,a);let u=i[c+`Once`];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[c])return;e.emitted[c]=!0,D(u,e,6,a)}}var Qi=new WeakMap;function $i(e,t,n=!1){let r=n?Qi:t.emitsCache,i=r.get(e);if(i!==void 0)return i;let a=e.emits,o={},c=!1;if(!h(e)){let r=e=>{let n=$i(e,t,!0);n&&(c=!0,s(o,n))};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}return!a&&!c?(v(e)&&r.set(e,null),null):(d(a)?a.forEach(e=>o[e]=null):s(o,a),v(e)&&r.set(e,o),o)}function ea(e,t){return!e||!a(t)?!1:(t=t.slice(2).replace(/Once$/,``),u(e,t[0].toLowerCase()+t.slice(1))||u(e,ce(t))||u(e,t))}function ta(e){let{type:t,vnode:n,proxy:r,withProxy:i,propsOptions:[a],slots:s,attrs:c,emit:l,render:u,renderCache:d,props:f,data:p,setupState:m,ctx:h,inheritAttrs:g}=e,_=Bn(e),v,y;try{if(n.shapeFlag&4){let e=i||r,t=e;v=Da(u.call(t,e,d,f,m,p,h)),y=c}else{let e=t;v=Da(e.length>1?e(f,{attrs:c,slots:s,emit:l}):e(f,null)),y=t.props?c:na(c)}}catch(t){fa.length=0,bn(t,e,1),v=F(ua)}let b=v;if(y&&g!==!1){let e=Object.keys(y),{shapeFlag:t}=b;e.length&&t&7&&(a&&e.some(o)&&(y=ra(y,a)),b=wa(b,y,!1,!0))}return n.dirs&&(b=wa(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&ir(b,n.transition),v=b,Bn(_),v}var na=e=>{let t;for(let n in e)(n===`class`||n===`style`||a(n))&&((t||={})[n]=e[n]);return t},ra=(e,t)=>{let n={};for(let r in e)(!o(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function ia(e,t,n){let{props:r,children:i,component:a}=e,{props:o,children:s,patchFlag:c}=t,l=a.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?aa(r,o,l):!!o;if(c&8){let e=t.dynamicProps;for(let t=0;t<e.length;t++){let n=e[t];if(o[n]!==r[n]&&!ea(l,n))return!0}}}else return(i||s)&&(!s||!s.$stable)?!0:r===o?!1:r?o?aa(r,o,l):!0:!!o;return!1}function aa(e,t,n){let r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){let a=r[i];if(t[a]!==e[a]&&!ea(n,a))return!0}return!1}function oa({vnode:e,parent:t},n){for(;t;){let r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}var sa=e=>e.__isSuspense;function ca(e,t){t&&t.pendingBranch?d(e)?t.effects.push(...e):t.effects.push(e):Nn(e)}var A=Symbol.for(`v-fgt`),la=Symbol.for(`v-txt`),ua=Symbol.for(`v-cmt`),da=Symbol.for(`v-stc`),fa=[],pa=null;function j(e=!1){fa.push(pa=e?null:[])}function ma(){fa.pop(),pa=fa[fa.length-1]||null}var ha=1;function ga(e,t=!1){ha+=e,e<0&&pa&&t&&(pa.hasOnce=!0)}function _a(e){return e.dynamicChildren=ha>0?pa||n:null,ma(),ha>0&&pa&&pa.push(e),e}function M(e,t,n,r,i,a){return _a(P(e,t,n,r,i,a,!0))}function N(e,t,n,r,i){return _a(F(e,t,n,r,i,!0))}function va(e){return e?e.__v_isVNode===!0:!1}function ya(e,t){return e.type===t.type&&e.key===t.key}var ba=({key:e})=>e??null,xa=({ref:e,ref_key:t,ref_for:n})=>(typeof e==`number`&&(e=``+e),e==null?null:g(e)||tn(e)||h(e)?{i:Rn,r:e,k:t,f:!!n}:e);function P(e,t=null,n=null,r=0,i=null,a=e===A?0:1,o=!1,s=!1){let c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&ba(t),ref:t&&xa(t),scopeId:zn,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Rn};return s?(ka(c,n),a&128&&e.normalize(c)):n&&(c.shapeFlag|=g(n)?8:16),ha>0&&!o&&pa&&(c.patchFlag>0||a&6)&&c.patchFlag!==32&&pa.push(c),c}var F=Sa;function Sa(e,t=null,n=null,r=0,i=null,a=!1){if((!e||e===Fr)&&(e=ua),va(e)){let r=wa(e,t,!0);return n&&ka(r,n),ha>0&&!a&&pa&&(r.shapeFlag&6?pa[pa.indexOf(e)]=r:pa.push(r)),r.patchFlag=-2,r}if($a(e)&&(e=e.__vccOpts),t){t=Ca(t);let{class:e,style:n}=t;e&&!g(e)&&(t.class=S(e)),v(n)&&(Zt(n)&&!d(n)&&(n=s({},n)),t.style=ve(n))}let o=g(e)?1:sa(e)?128:Wn(e)?64:v(e)?4:h(e)?2:0;return P(e,t,n,r,i,o,a,!0)}function Ca(e){return e?Zt(e)||vi(e)?s({},e):e:null}function wa(e,t,n=!1,r=!1){let{props:i,ref:a,patchFlag:o,children:s,transition:c}=e,l=t?Aa(i||{},t):i,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&ba(l),ref:t&&t.ref?n&&a?d(a)?a.concat(xa(t)):[a,xa(t)]:xa(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==A?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&wa(e.ssContent),ssFallback:e.ssFallback&&wa(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&r&&ir(u,c.clone(u)),u}function Ta(e=` `,t=0){return F(la,null,e,t)}function Ea(e=``,t=!1){return t?(j(),N(ua,null,e)):F(ua,null,e)}function Da(e){return e==null||typeof e==`boolean`?F(ua):d(e)?F(A,null,e.slice()):va(e)?Oa(e):F(la,null,String(e))}function Oa(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:wa(e)}function ka(e,t){let n=0,{shapeFlag:r}=e;if(t==null)t=null;else if(d(t))n=16;else if(typeof t==`object`)if(r&65){let n=t.default;n&&(n._c&&(n._d=!1),ka(e,n()),n._c&&(n._d=!0));return}else{n=32;let r=t._;!r&&!vi(t)?t._ctx=Rn:r===3&&Rn&&(Rn.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else h(t)?(t={default:t,_ctx:Rn},n=32):(t=String(t),r&64?(n=16,t=[Ta(t)]):n=8);e.children=t,e.shapeFlag|=n}function Aa(...e){let t={};for(let n=0;n<e.length;n++){let r=e[n];for(let e in r)if(e===`class`)t.class!==r.class&&(t.class=S([t.class,r.class]));else if(e===`style`)t.style=ve([t.style,r.style]);else if(a(e)){let n=t[e],i=r[e];i&&n!==i&&!(d(n)&&n.includes(i))&&(t[e]=n?[].concat(n,i):i)}else e!==``&&(t[e]=r[e])}return t}function ja(e,t,n,r=null){D(e,t,7,[n,r])}var Ma=li(),Na=0;function Pa(e,n,r){let i=e.type,a=(n?n.appContext:e.appContext)||Ma,o={uid:Na++,vnode:e,type:i,parent:n,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new je(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(a.provides),ids:n?n.ids:[``,0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:wi(i,a),emitsOptions:$i(i,a),emit:null,emitted:null,propsDefaults:t,inheritAttrs:i.inheritAttrs,ctx:t,data:t,props:t,attrs:t,slots:t,refs:t,setupState:t,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=n?n.root:o,o.emit=Zi.bind(null,o),e.ce&&e.ce(o),o}var Fa=null,Ia=()=>Fa||Rn,La,Ra;{let e=_e(),t=(t,n)=>{let r;return(r=e[t])||(r=e[t]=[]),r.push(n),e=>{r.length>1?r.forEach(t=>t(e)):r[0](e)}};La=t(`__VUE_INSTANCE_SETTERS__`,e=>Fa=e),Ra=t(`__VUE_SSR_SETTERS__`,e=>Ha=e)}var za=e=>{let t=Fa;return La(e),e.scope.on(),()=>{e.scope.off(),La(t)}},Ba=()=>{Fa&&Fa.scope.off(),La(null)};function Va(e){return e.vnode.shapeFlag&4}var Ha=!1;function Ua(e,t=!1,n=!1){t&&Ra(t);let{props:r,children:i}=e.vnode,a=Va(e);yi(e,r,a,t),Mi(e,i,n||t);let o=a?Wa(e,t):void 0;return t&&Ra(!1),o}function Wa(e,t){let n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Kr);let{setup:r}=n;if(r){Ze();let n=e.setupContext=r.length>1?Xa(e):null,i=za(e),a=yn(r,e,0,[e.props,n]),o=y(a);if(Qe(),i(),(o||e.sp)&&!ur(e)&&or(e),o){if(a.then(Ba,Ba),t)return a.then(n=>{Ga(e,n,t)}).catch(t=>{bn(t,e,0)});e.asyncDep=a}else Ga(e,a,t)}else Ja(e,t)}function Ga(e,t,n){h(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:v(t)&&(e.setupState=sn(t)),Ja(e,n)}var Ka,qa;function Ja(e,t,n){let i=e.type;if(!e.render){if(!t&&Ka&&!i.render){let t=i.template||$r(e).template;if(t){let{isCustomElement:n,compilerOptions:r}=e.appContext.config,{delimiters:a,compilerOptions:o}=i;i.render=Ka(t,s(s({isCustomElement:n,delimiters:a},r),o))}}e.render=i.render||r,qa&&qa(e)}{let t=za(e);Ze();try{Yr(e)}finally{Qe(),t()}}}var Ya={get(e,t){return ct(e,`get`,``),e[t]}};function Xa(e){return{attrs:new Proxy(e.attrs,Ya),slots:e.slots,emit:e.emit,expose:t=>{e.exposed=t||{}}}}function Za(e){return e.exposed?e.exposeProxy||=new Proxy(sn(Qt(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Wr)return Wr[n](e)},has(e,t){return t in e||t in Wr}}):e.proxy}function Qa(e,t=!0){return h(e)?e.displayName||e.name:e.name||t&&e.__name}function $a(e){return h(e)&&`__vccOpts`in e}var I=(e,t)=>fn(e,t,Ha);function eo(e,t,n){try{ga(-1);let r=arguments.length;return r===2?v(t)&&!d(t)?va(t)?F(e,null,[t]):F(e,t):F(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&va(n)&&(n=[n]),F(e,t,n))}finally{ga(1)}}var to=`3.5.24`,no=void 0,ro=typeof window<`u`&&window.trustedTypes;if(ro)try{no=ro.createPolicy(`vue`,{createHTML:e=>e})}catch{}var io=no?e=>no.createHTML(e):e=>e,ao=`http://www.w3.org/2000/svg`,oo=`http://www.w3.org/1998/Math/MathML`,so=typeof document<`u`?document:null,co=so&&so.createElement(`template`),lo={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{let t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{let i=t===`svg`?so.createElementNS(ao,e):t===`mathml`?so.createElementNS(oo,e):n?so.createElement(e,{is:n}):so.createElement(e);return e===`select`&&r&&r.multiple!=null&&i.setAttribute(`multiple`,r.multiple),i},createText:e=>so.createTextNode(e),createComment:e=>so.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>so.querySelector(e),setScopeId(e,t){e.setAttribute(t,``)},insertStaticContent(e,t,n,r,i,a){let o=n?n.previousSibling:t.lastChild;if(i&&(i===a||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===a||!(i=i.nextSibling)););else{co.innerHTML=io(r===`svg`?`<svg>${e}</svg>`:r===`mathml`?`<math>${e}</math>`:e);let i=co.content;if(r===`svg`||r===`mathml`){let e=i.firstChild;for(;e.firstChild;)i.appendChild(e.firstChild);i.removeChild(e)}t.insertBefore(i,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},uo=`transition`,fo=`animation`,po=Symbol(`_vtc`),mo={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},ho=s({},Yn,mo),go=(e=>(e.displayName=`Transition`,e.props=ho,e))((e,{slots:t})=>eo($n,yo(e),t)),_o=(e,t=[])=>{d(e)?e.forEach(e=>e(...t)):e&&e(...t)},vo=e=>e?d(e)?e.some(e=>e.length>1):e.length>1:!1;function yo(e){let t={};for(let n in e)n in mo||(t[n]=e[n]);if(e.css===!1)return t;let{name:n=`v`,type:r,duration:i,enterFromClass:a=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:c=`${n}-enter-to`,appearFromClass:l=a,appearActiveClass:u=o,appearToClass:d=c,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=e,h=bo(i),g=h&&h[0],_=h&&h[1],{onBeforeEnter:v,onEnter:y,onEnterCancelled:b,onLeave:ee,onLeaveCancelled:te,onBeforeAppear:x=v,onAppear:ne=y,onAppearCancelled:re=b}=t,ie=(e,t,n,r)=>{e._enterCancelled=r,Co(e,t?d:c),Co(e,t?u:o),n&&n()},ae=(e,t)=>{e._isLeaving=!1,Co(e,f),Co(e,m),Co(e,p),t&&t()},oe=e=>(t,n)=>{let i=e?ne:y,o=()=>ie(t,e,n);_o(i,[t,o]),wo(()=>{Co(t,e?l:a),So(t,e?d:c),vo(i)||Eo(t,r,g,o)})};return s(t,{onBeforeEnter(e){_o(v,[e]),So(e,a),So(e,o)},onBeforeAppear(e){_o(x,[e]),So(e,l),So(e,u)},onEnter:oe(!1),onAppear:oe(!0),onLeave(e,t){e._isLeaving=!0;let n=()=>ae(e,t);So(e,f),e._enterCancelled?(So(e,p),Ao(e)):(Ao(e),So(e,p)),wo(()=>{e._isLeaving&&(Co(e,f),So(e,m),vo(ee)||Eo(e,r,_,n))}),_o(ee,[e,n])},onEnterCancelled(e){ie(e,!1,void 0,!0),_o(b,[e])},onAppearCancelled(e){ie(e,!0,void 0,!0),_o(re,[e])},onLeaveCancelled(e){ae(e),_o(te,[e])}})}function bo(e){if(e==null)return null;if(v(e))return[xo(e.enter),xo(e.leave)];{let t=xo(e);return[t,t]}}function xo(e){return he(e)}function So(e,t){t.split(/\s+/).forEach(t=>t&&e.classList.add(t)),(e[po]||(e[po]=new Set)).add(t)}function Co(e,t){t.split(/\s+/).forEach(t=>t&&e.classList.remove(t));let n=e[po];n&&(n.delete(t),n.size||(e[po]=void 0))}function wo(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}var To=0;function Eo(e,t,n,r){let i=e._endId=++To,a=()=>{i===e._endId&&r()};if(n!=null)return setTimeout(a,n);let{type:o,timeout:s,propCount:c}=Do(e,t);if(!o)return r();let l=o+`end`,u=0,d=()=>{e.removeEventListener(l,f),a()},f=t=>{t.target===e&&++u>=c&&d()};setTimeout(()=>{u<c&&d()},s+1),e.addEventListener(l,f)}function Do(e,t){let n=window.getComputedStyle(e),r=e=>(n[e]||``).split(`, `),i=r(`${uo}Delay`),a=r(`${uo}Duration`),o=Oo(i,a),s=r(`${fo}Delay`),c=r(`${fo}Duration`),l=Oo(s,c),u=null,d=0,f=0;t===uo?o>0&&(u=uo,d=o,f=a.length):t===fo?l>0&&(u=fo,d=l,f=c.length):(d=Math.max(o,l),u=d>0?o>l?uo:fo:null,f=u?u===uo?a.length:c.length:0);let p=u===uo&&/\b(?:transform|all)(?:,|$)/.test(r(`${uo}Property`).toString());return{type:u,timeout:d,propCount:f,hasTransform:p}}function Oo(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((t,n)=>ko(t)+ko(e[n])))}function ko(e){return e===`auto`?0:Number(e.slice(0,-1).replace(`,`,`.`))*1e3}function Ao(e){return(e?e.ownerDocument:document).body.offsetHeight}function jo(e,t,n){let r=e[po];r&&(t=(t?[t,...r]:[...r]).join(` `)),t==null?e.removeAttribute(`class`):n?e.setAttribute(`class`,t):e.className=t}var Mo=Symbol(`_vod`),No=Symbol(`_vsh`),Po={name:`show`,beforeMount(e,{value:t},{transition:n}){e[Mo]=e.style.display===`none`?``:e.style.display,n&&t?n.beforeEnter(e):Fo(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),Fo(e,!0),r.enter(e)):r.leave(e,()=>{Fo(e,!1)}):Fo(e,t))},beforeUnmount(e,{value:t}){Fo(e,t)}};function Fo(e,t){e.style.display=t?e[Mo]:`none`,e[No]=!t}var Io=Symbol(``),Lo=/(?:^|;)\s*display\s*:/;function Ro(e,t,n){let r=e.style,i=g(n),a=!1;if(n&&!i){if(t)if(g(t))for(let e of t.split(`;`)){let t=e.slice(0,e.indexOf(`:`)).trim();n[t]??Bo(r,t,``)}else for(let e in t)n[e]??Bo(r,e,``);for(let e in n)e===`display`&&(a=!0),Bo(r,e,n[e])}else if(i){if(t!==n){let e=r[Io];e&&(n+=`;`+e),r.cssText=n,a=Lo.test(n)}}else t&&e.removeAttribute(`style`);Mo in e&&(e[Mo]=a?r.display:``,e[No]&&(r.display=`none`))}var zo=/\s*!important$/;function Bo(e,t,n){if(d(n))n.forEach(n=>Bo(e,t,n));else if(n??=``,t.startsWith(`--`))e.setProperty(t,n);else{let r=Uo(e,t);zo.test(n)?e.setProperty(ce(r),n.replace(zo,``),`important`):e[r]=n}}var Vo=[`Webkit`,`Moz`,`ms`],Ho={};function Uo(e,t){let n=Ho[t];if(n)return n;let r=oe(t);if(r!==`filter`&&r in e)return Ho[t]=r;r=le(r);for(let n=0;n<Vo.length;n++){let i=Vo[n]+r;if(i in e)return Ho[t]=i}return t}var Wo=`http://www.w3.org/1999/xlink`;function Go(e,t,n,r,i,a=we(t)){r&&t.startsWith(`xlink:`)?n==null?e.removeAttributeNS(Wo,t.slice(6,t.length)):e.setAttributeNS(Wo,t,n):n==null||a&&!Te(n)?e.removeAttribute(t):e.setAttribute(t,a?``:_(n)?String(n):n)}function Ko(e,t,n,r,i){if(t===`innerHTML`||t===`textContent`){n!=null&&(e[t]=t===`innerHTML`?io(n):n);return}let a=e.tagName;if(t===`value`&&a!==`PROGRESS`&&!a.includes(`-`)){let r=a===`OPTION`?e.getAttribute(`value`)||``:e.value,i=n==null?e.type===`checkbox`?`on`:``:String(n);(r!==i||!(`_value`in e))&&(e.value=i),n??e.removeAttribute(t),e._value=n;return}let o=!1;if(n===``||n==null){let r=typeof e[t];r===`boolean`?n=Te(n):n==null&&r===`string`?(n=``,o=!0):r===`number`&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(i||t)}function qo(e,t,n,r){e.addEventListener(t,n,r)}function Jo(e,t,n,r){e.removeEventListener(t,n,r)}var Yo=Symbol(`_vei`);function Xo(e,t,n,r,i=null){let a=e[Yo]||(e[Yo]={}),o=a[t];if(r&&o)o.value=r;else{let[n,s]=Qo(t);r?qo(e,n,a[t]=ns(r,i),s):o&&(Jo(e,n,o,s),a[t]=void 0)}}var Zo=/(?:Once|Passive|Capture)$/;function Qo(e){let t;if(Zo.test(e)){t={};let n;for(;n=e.match(Zo);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===`:`?e.slice(3):ce(e.slice(2)),t]}var $o=0,es=Promise.resolve(),ts=()=>$o||=(es.then(()=>$o=0),Date.now());function ns(e,t){let n=e=>{if(!e._vts)e._vts=Date.now();else if(e._vts<=n.attached)return;D(rs(e,n.value),t,5,[e])};return n.value=e,n.attached=ts(),n}function rs(e,t){if(d(t)){let n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(e=>t=>!t._stopped&&e&&e(t))}else return t}var is=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,as=(e,t,n,r,i,s)=>{let c=i===`svg`;t===`class`?jo(e,r,c):t===`style`?Ro(e,n,r):a(t)?o(t)||Xo(e,t,n,r,s):(t[0]===`.`?(t=t.slice(1),!0):t[0]===`^`?(t=t.slice(1),!1):os(e,t,r,c))?(Ko(e,t,r),!e.tagName.includes(`-`)&&(t===`value`||t===`checked`||t===`selected`)&&Go(e,t,r,c,s,t!==`value`)):e._isVueCE&&(/[A-Z]/.test(t)||!g(r))?Ko(e,oe(t),r,s,t):(t===`true-value`?e._trueValue=r:t===`false-value`&&(e._falseValue=r),Go(e,t,r,c))};function os(e,t,n,r){if(r)return!!(t===`innerHTML`||t===`textContent`||t in e&&is(t)&&h(n));if(t===`spellcheck`||t===`draggable`||t===`translate`||t===`autocorrect`||t===`sandbox`&&e.tagName===`IFRAME`||t===`form`||t===`list`&&e.tagName===`INPUT`||t===`type`&&e.tagName===`TEXTAREA`)return!1;if(t===`width`||t===`height`){let t=e.tagName;if(t===`IMG`||t===`VIDEO`||t===`CANVAS`||t===`SOURCE`)return!1}return is(t)&&g(n)?!1:t in e}var ss=e=>{let t=e.props[`onUpdate:modelValue`]||!1;return d(t)?e=>fe(t,e):t};function cs(e){e.target.composing=!0}function ls(e){let t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event(`input`)))}var us=Symbol(`_assign`);function ds(e,t,n){return t&&(e=e.trim()),n&&(e=me(e)),e}var fs={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e[us]=ss(i);let a=r||i.props&&i.props.type===`number`;qo(e,t?`change`:`input`,t=>{t.target.composing||e[us](ds(e.value,n,a))}),(n||a)&&qo(e,`change`,()=>{e.value=ds(e.value,n,a)}),t||(qo(e,`compositionstart`,cs),qo(e,`compositionend`,ls),qo(e,`change`,ls))},mounted(e,{value:t}){e.value=t??``},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:i,number:a}},o){if(e[us]=ss(o),e.composing)return;let s=(a||e.type===`number`)&&!/^0\d/.test(e.value)?me(e.value):e.value,c=t??``;s!==c&&(document.activeElement===e&&e.type!==`range`&&(r&&t===n||i&&e.value.trim()===c)||(e.value=c))}},ps=[`ctrl`,`shift`,`alt`,`meta`],ms={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>`button`in e&&e.button!==0,middle:e=>`button`in e&&e.button!==1,right:e=>`button`in e&&e.button!==2,exact:(e,t)=>ps.some(n=>e[`${n}Key`]&&!t.includes(n))},hs=(e,t)=>{let n=e._withMods||={},r=t.join(`.`);return n[r]||(n[r]=((n,...r)=>{for(let e=0;e<t.length;e++){let r=ms[t[e]];if(r&&r(n,t))return}return e(n,...r)}))},gs={esc:`escape`,space:` `,up:`arrow-up`,left:`arrow-left`,right:`arrow-right`,down:`arrow-down`,delete:`backspace`},_s=(e,t)=>{let n=e._withKeys||={},r=t.join(`.`);return n[r]||(n[r]=(n=>{if(!(`key`in n))return;let r=ce(n.key);if(t.some(e=>e===r||gs[e]===r))return e(n)}))},vs=s({patchProp:as},lo),ys;function bs(){return ys||=Fi(vs)}var xs=((...e)=>{let t=bs().createApp(...e),{mount:n}=t;return t.mount=e=>{let r=Cs(e);if(!r)return;let i=t._component;!h(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent=``);let a=n(r,!1,Ss(r));return r instanceof Element&&(r.removeAttribute(`v-cloak`),r.setAttribute(`data-v-app`,``)),a},t});function Ss(e){if(e instanceof SVGElement)return`svg`;if(typeof MathMLElement==`function`&&e instanceof MathMLElement)return`mathml`}function Cs(e){return g(e)?document.querySelector(e):e}var ws=typeof window<`u`,Ts,Es=e=>Ts=e,Ds=Symbol();function Os(e){return e&&typeof e==`object`&&Object.prototype.toString.call(e)===`[object Object]`&&typeof e.toJSON!=`function`}var ks;(function(e){e.direct=`direct`,e.patchObject=`patch object`,e.patchFunction=`patch function`})(ks||={});var As=(()=>typeof window==`object`&&window.window===window?window:typeof self==`object`&&self.self===self?self:typeof global==`object`&&global.global===global?global:typeof globalThis==`object`?globalThis:{HTMLElement:null})();function js(e,{autoBom:t=!1}={}){return t&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([``,e],{type:e.type}):e}function Ms(e,t,n){let r=new XMLHttpRequest;r.open(`GET`,e),r.responseType=`blob`,r.onload=function(){Ls(r.response,t,n)},r.onerror=function(){console.error(`could not download file`)},r.send()}function Ns(e){let t=new XMLHttpRequest;t.open(`HEAD`,e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Ps(e){try{e.dispatchEvent(new MouseEvent(`click`))}catch{let t=new MouseEvent(`click`,{bubbles:!0,cancelable:!0,view:window,detail:0,screenX:80,screenY:20,clientX:80,clientY:20,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null});e.dispatchEvent(t)}}var Fs=typeof navigator==`object`?navigator:{userAgent:``},Is=(()=>/Macintosh/.test(Fs.userAgent)&&/AppleWebKit/.test(Fs.userAgent)&&!/Safari/.test(Fs.userAgent))(),Ls=ws?typeof HTMLAnchorElement<`u`&&`download`in HTMLAnchorElement.prototype&&!Is?Rs:`msSaveOrOpenBlob`in Fs?zs:Bs:()=>{};function Rs(e,t=`download`,n){let r=document.createElement(`a`);r.download=t,r.rel=`noopener`,typeof e==`string`?(r.href=e,r.origin===location.origin?Ps(r):Ns(r.href)?Ms(e,t,n):(r.target=`_blank`,Ps(r))):(r.href=URL.createObjectURL(e),setTimeout(function(){URL.revokeObjectURL(r.href)},4e4),setTimeout(function(){Ps(r)},0))}function zs(e,t=`download`,n){if(typeof e==`string`)if(Ns(e))Ms(e,t,n);else{let t=document.createElement(`a`);t.href=e,t.target=`_blank`,setTimeout(function(){Ps(t)})}else navigator.msSaveOrOpenBlob(js(e,n),t)}function Bs(e,t,n,r){if(r||=open(``,`_blank`),r&&(r.document.title=r.document.body.innerText=`downloading...`),typeof e==`string`)return Ms(e,t,n);let i=e.type===`application/octet-stream`,a=/constructor/i.test(String(As.HTMLElement))||`safari`in As,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&a||Is)&&typeof FileReader<`u`){let t=new FileReader;t.onloadend=function(){let e=t.result;if(typeof e!=`string`)throw r=null,Error(`Wrong reader.result type`);e=o?e:e.replace(/^data:[^;]*;/,`data:attachment/file;`),r?r.location.href=e:location.assign(e),r=null},t.readAsDataURL(e)}else{let t=URL.createObjectURL(e);r?r.location.assign(t):location.href=t,r=null,setTimeout(function(){URL.revokeObjectURL(t)},4e4)}}var{assign:Vs}=Object;function Hs(){let e=Me(!0),t=e.run(()=>T({})),n=[],r=[],i=Qt({install(e){Es(i),i._a=e,e.provide(Ds,i),e.config.globalProperties.$pinia=i,r.forEach(e=>n.push(e)),r=[]},use(e){return this._a?n.push(e):r.push(e),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return i}var Us=()=>{};function Ws(e,t,n,r=Us){e.add(t);let i=()=>{e.delete(t)&&r()};return!n&&Ne()&&Pe(i),i}function Gs(e,...t){e.forEach(e=>{e(...t)})}var Ks=e=>e(),qs=Symbol(),Js=Symbol();function Ys(e,t){for(let n in e instanceof Map&&t instanceof Map?t.forEach((t,n)=>e.set(n,t)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e),t){if(!t.hasOwnProperty(n))continue;let r=t[n],i=e[n];Os(i)&&Os(r)&&e.hasOwnProperty(n)&&!tn(r)&&!Jt(r)?e[n]=Ys(i,r):e[n]=r}return e}var Xs=Symbol();function Zs(e){return!Os(e)||!Object.prototype.hasOwnProperty.call(e,Xs)}var{assign:Qs}=Object;function $s(e){return!!(tn(e)&&e.effect)}function ec(e,t,n,r){let{state:i,actions:a,getters:o}=t,s=n.state.value[e],c;function l(){return s||(n.state.value[e]=i?i():{}),Qs(cn(n.state.value[e]),a,Object.keys(o||{}).reduce((t,r)=>(t[r]=Qt(I(()=>{Es(n);let t=n._s.get(e);return o[r].call(t,t)})),t),{}))}return c=tc(e,l,t,n,r,!0),c}function tc(e,t,n={},r,i,a){let o,s=Qs({actions:{}},n),c={deep:!0},l,u,d=new Set,f=new Set,p=r.state.value[e];!a&&!p&&(r.state.value[e]={}),T({});let m;function h(t){let n;l=u=!1,typeof t==`function`?(t(r.state.value[e]),n={type:ks.patchFunction,storeId:e,events:void 0}):(Ys(r.state.value[e],t),n={type:ks.patchObject,payload:t,storeId:e,events:void 0});let i=m=Symbol();kn().then(()=>{m===i&&(l=!0)}),u=!0,Gs(d,n,r.state.value[e])}let g=a?function(){let{state:e}=n,t=e?e():{};this.$patch(e=>{Qs(e,t)})}:Us;function _(){o.stop(),d.clear(),f.clear(),r._s.delete(e)}let v=(t,n=``)=>{if(qs in t)return t[Js]=n,t;let i=function(){Es(r);let n=Array.from(arguments),a=new Set,o=new Set;function s(e){a.add(e)}function c(e){o.add(e)}Gs(f,{args:n,name:i[Js],store:y,after:s,onError:c});let l;try{l=t.apply(this&&this.$id===e?this:y,n)}catch(e){throw Gs(o,e),e}return l instanceof Promise?l.then(e=>(Gs(a,e),e)).catch(e=>(Gs(o,e),Promise.reject(e))):(Gs(a,l),l)};return i[qs]=!0,i[Js]=n,i},y=Wt({_p:r,$id:e,$onAction:Ws.bind(null,f),$patch:h,$reset:g,$subscribe(t,n={}){let i=Ws(d,t,n.detached,()=>a()),a=o.run(()=>Ki(()=>r.state.value[e],r=>{(n.flush===`sync`?u:l)&&t({storeId:e,type:ks.direct,events:void 0},r)},Qs({},c,n)));return i},$dispose:_});r._s.set(e,y);let b=(r._a&&r._a.runWithContext||Ks)(()=>r._e.run(()=>(o=Me()).run(()=>t({action:v}))));for(let t in b){let n=b[t];tn(n)&&!$s(n)||Jt(n)?a||(p&&Zs(n)&&(tn(n)?n.value=p[t]:Ys(n,p[t])),r.state.value[e][t]=n):typeof n==`function`&&(b[t]=v(n,t),s.actions[t]=n)}return Qs(y,b),Qs(w(y),b),Object.defineProperty(y,`$state`,{get:()=>r.state.value[e],set:e=>{h(t=>{Qs(t,e)})}}),r._p.forEach(e=>{Qs(y,o.run(()=>e({store:y,app:r._a,pinia:r,options:s})))}),p&&a&&n.hydrate&&n.hydrate(y.$state,p),l=!0,u=!0,y}function nc(e,t,n){let r,i=typeof t==`function`;r=i?n:t;function a(n,a){let o=hi();return n||=o?mi(Ds,null):null,n&&Es(n),n=Ts,n._s.has(e)||(i?tc(e,t,r,n):ec(e,r,n)),n._s.get(e)}return a.$id=e,a}var rc={mounted(e,t){let{getMoreFilms:n}=t.value;new IntersectionObserver(e=>{e[0]?.isIntersecting&&n()},{rootMargin:`0px`,threshold:1}).observe(e)}},ic=e=>{document.title=e},ac={mounted(e,t){ic(t.value||e.innerText)},beforeUpdate(e,t){ic(t.value||e.innerText)},updated(e,t){ic(t.value||e.innerText)}},oc=()=>void 0,sc=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)==55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)==56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},cc=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let a=e[n++];t[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){let a=e[n++],o=e[n++],s=e[n++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|s&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{let a=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return t.join(``)},lc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`,get ENCODED_VALS(){return this.ENCODED_VALS_BASE+`+/=`},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+`-_.`},HAS_NATIVE_SUPPORT:typeof atob==`function`,encodeByteArray(e,t){if(!Array.isArray(e))throw Error(`encodeByteArray takes an array as a parameter`);this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){let i=e[t],a=t+1<e.length,o=a?e[t+1]:0,s=t+2<e.length,c=s?e[t+2]:0,l=i>>2,u=(i&3)<<4|o>>4,d=(o&15)<<2|c>>6,f=c&63;s||(f=64,a||(d=64)),r.push(n[l],n[u],n[d],n[f])}return r.join(``)},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(sc(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):cc(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){let i=n[e.charAt(t++)],a=t<e.length?n[e.charAt(t)]:0;++t;let o=t<e.length?n[e.charAt(t)]:64;++t;let s=t<e.length?n[e.charAt(t)]:64;if(++t,i==null||a==null||o==null||s==null)throw new uc;let c=i<<2|a>>4;if(r.push(c),o!==64){let e=a<<4&240|o>>2;if(r.push(e),s!==64){let e=o<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},uc=class extends Error{constructor(){super(...arguments),this.name=`DecodeBase64StringError`}},dc=function(e){let t=sc(e);return lc.encodeByteArray(t,!0)},fc=function(e){return dc(e).replace(/\./g,``)},pc=function(e){try{return lc.decodeString(e,!0)}catch(e){console.error(`base64Decode failed: `,e)}return null};function mc(){if(typeof self<`u`)return self;if(typeof window<`u`)return window;if(typeof global<`u`)return global;throw Error(`Unable to locate global object.`)}var hc=()=>mc().__FIREBASE_DEFAULTS__,gc=()=>{if(typeof process>`u`)return;let e={}.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},_c=()=>{if(typeof document>`u`)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&pc(e[1]);return t&&JSON.parse(t)},vc=()=>{try{return oc()||hc()||gc()||_c()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},yc=e=>vc()?.emulatorHosts?.[e],bc=e=>{let t=yc(e);if(!t)return;let n=t.lastIndexOf(`:`);if(n<=0||n+1===t.length)throw Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(n+1),10);return t[0]===`[`?[t.substring(1,n-1),r]:[t.substring(0,n),r]},xc=()=>vc()?.config,Sc=e=>vc()?.[`_${e}`],Cc=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e==`function`&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}};function wc(e){try{return(e.startsWith(`http://`)||e.startsWith(`https://`)?new URL(e).hostname:e).endsWith(`.cloudworkstations.dev`)}catch{return!1}}async function Tc(e){return(await fetch(e,{credentials:`include`})).ok}function Ec(e,t){if(e.uid)throw Error(`The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.`);let n={alg:`none`,type:`JWT`},r=t||`demo-project`,i=e.iat||0,a=e.sub||e.user_id;if(!a)throw Error(`mockUserToken must contain 'sub' or 'user_id' field!`);let o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:`custom`,identities:{}},...e};return[fc(JSON.stringify(n)),fc(JSON.stringify(o)),``].join(`.`)}var Dc={};function Oc(){let e={prod:[],emulator:[]};for(let t of Object.keys(Dc))Dc[t]?e.emulator.push(t):e.prod.push(t);return e}function kc(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement(`div`),t.setAttribute(`id`,e),n=!0),{created:n,element:t}}var Ac=!1;function jc(e,t){if(typeof window>`u`||typeof document>`u`||!wc(window.location.host)||Dc[e]===t||Dc[e]||Ac)return;Dc[e]=t;function n(e){return`__firebase__banner__${e}`}let r=`__firebase__banner`,i=Oc().prod.length>0;function a(){let e=document.getElementById(r);e&&e.remove()}function o(e){e.style.display=`flex`,e.style.background=`#7faaf0`,e.style.position=`fixed`,e.style.bottom=`5px`,e.style.left=`5px`,e.style.padding=`.5em`,e.style.borderRadius=`5px`,e.style.alignItems=`center`}function s(e,t){e.setAttribute(`width`,`24`),e.setAttribute(`id`,t),e.setAttribute(`height`,`24`),e.setAttribute(`viewBox`,`0 0 24 24`),e.setAttribute(`fill`,`none`),e.style.marginLeft=`-6px`}function c(){let e=document.createElement(`span`);return e.style.cursor=`pointer`,e.style.marginLeft=`16px`,e.style.fontSize=`24px`,e.innerHTML=` &times;`,e.onclick=()=>{Ac=!0,a()},e}function l(e,t){e.setAttribute(`id`,t),e.innerText=`Learn more`,e.href=`https://firebase.google.com/docs/studio/preview-apps#preview-backend`,e.setAttribute(`target`,`__blank`),e.style.paddingLeft=`5px`,e.style.textDecoration=`underline`}function u(){let e=kc(r),t=n(`text`),a=document.getElementById(t)||document.createElement(`span`),u=n(`learnmore`),d=document.getElementById(u)||document.createElement(`a`),f=n(`preprendIcon`),p=document.getElementById(f)||document.createElementNS(`http://www.w3.org/2000/svg`,`svg`);if(e.created){let t=e.element;o(t),l(d,u);let n=c();s(p,f),t.append(p,a,d,n),document.body.appendChild(t)}i?(a.innerText=`Preview backend disconnected.`,p.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(p.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,a.innerText=`Preview backend running in this workspace.`),a.setAttribute(`id`,t)}document.readyState===`loading`?window.addEventListener(`DOMContentLoaded`,u):u()}function Mc(){return typeof navigator<`u`&&typeof navigator.userAgent==`string`?navigator.userAgent:``}function Nc(){return typeof window<`u`&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mc())}function Pc(){let e=vc()?.forceEnvironment;if(e===`node`)return!0;if(e===`browser`)return!1;try{return Object.prototype.toString.call(global.process)===`[object process]`}catch{return!1}}function Fc(){return typeof navigator<`u`&&navigator.userAgent===`Cloudflare-Workers`}function Ic(){let e=typeof chrome==`object`?chrome.runtime:typeof browser==`object`?browser.runtime:void 0;return typeof e==`object`&&e.id!==void 0}function Lc(){return typeof navigator==`object`&&navigator.product===`ReactNative`}function Rc(){let e=Mc();return e.indexOf(`MSIE `)>=0||e.indexOf(`Trident/`)>=0}function zc(){return!Pc()&&!!navigator.userAgent&&navigator.userAgent.includes(`Safari`)&&!navigator.userAgent.includes(`Chrome`)}function Bc(){try{return typeof indexedDB==`object`}catch{return!1}}function Vc(){return new Promise((e,t)=>{try{let n=!0,r=`validate-browser-context-for-indexeddb-analytics-module`,i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||``)}}catch(e){t(e)}})}var Hc=`FirebaseError`,Uc=class e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=Hc,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wc.prototype.create)}},Wc=class{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){let n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],a=i?Gc(i,n):`Error`;return new Uc(r,`${this.serviceName}: ${a} (${r}).`,n)}};function Gc(e,t){return e.replace(Kc,(e,n)=>{let r=t[n];return r==null?`<${n}?>`:String(r)})}var Kc=/\{\$([^}]+)}/g;function qc(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Jc(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let i of n){if(!r.includes(i))return!1;let n=e[i],a=t[i];if(Yc(n)&&Yc(a)){if(!Jc(n,a))return!1}else if(n!==a)return!1}for(let e of r)if(!n.includes(e))return!1;return!0}function Yc(e){return typeof e==`object`&&!!e}function Xc(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+`=`+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+`=`+encodeURIComponent(r));return t.length?`&`+t.join(`&`):``}function Zc(e){let t={};return e.replace(/^\?/,``).split(`&`).forEach(e=>{if(e){let[n,r]=e.split(`=`);t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function Qc(e){let t=e.indexOf(`?`);if(!t)return``;let n=e.indexOf(`#`,t);return e.substring(t,n>0?n:void 0)}function $c(e,t){let n=new el(e,t);return n.subscribe.bind(n)}var el=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(e===void 0&&t===void 0&&n===void 0)throw Error(`Missing Observer.`);r=tl(e,[`next`,`error`,`complete`])?e:{next:e,error:t,complete:n},r.next===void 0&&(r.next=nl),r.error===void 0&&(r.error=nl),r.complete===void 0&&(r.complete=nl);let i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],--this.observerCount,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(e){typeof console<`u`&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function tl(e,t){if(typeof e!=`object`||!e)return!1;for(let n of t)if(n in e&&typeof e[n]==`function`)return!0;return!1}function nl(){}function rl(e){return e&&e._delegate?e._delegate:e}var il=class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode=`LAZY`,this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}},al=`[DEFAULT]`,ol=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new Cc;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(e){if(n)return null;throw e}else if(n)return null;else throw Error(`Service ${this.name} is not available`)}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(cl(e))try{this.getOrInitializeService({instanceIdentifier:al})}catch{}for(let[e,t]of this.instancesDeferred.entries()){let n=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch{}}}}clearInstance(e=al){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>`INTERNAL`in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>`_delete`in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=al){return this.instances.has(e)}getOptions(e=al){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(let[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){let n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);let i=this.instances.get(n);return i&&e(i,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){let n=this.onInitCallbacks.get(t);if(n)for(let r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:sl(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=al){return this.component?this.component.multipleInstances?e:al:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!==`EXPLICIT`}};function sl(e){return e===al?void 0:e}function cl(e){return e.instantiationMode===`EAGER`}var ll=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new ol(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}},ul=[],L;(function(e){e[e.DEBUG=0]=`DEBUG`,e[e.VERBOSE=1]=`VERBOSE`,e[e.INFO=2]=`INFO`,e[e.WARN=3]=`WARN`,e[e.ERROR=4]=`ERROR`,e[e.SILENT=5]=`SILENT`})(L||={});var dl={debug:L.DEBUG,verbose:L.VERBOSE,info:L.INFO,warn:L.WARN,error:L.ERROR,silent:L.SILENT},fl=L.INFO,pl={[L.DEBUG]:`log`,[L.VERBOSE]:`log`,[L.INFO]:`info`,[L.WARN]:`warn`,[L.ERROR]:`error`},ml=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=pl[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)},hl=class{constructor(e){this.name=e,this._logLevel=fl,this._logHandler=ml,this._userLogHandler=null,ul.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in L))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e==`string`?dl[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!=`function`)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,L.DEBUG,...e),this._logHandler(this,L.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,L.VERBOSE,...e),this._logHandler(this,L.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,L.INFO,...e),this._logHandler(this,L.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,L.WARN,...e),this._logHandler(this,L.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,L.ERROR,...e),this._logHandler(this,L.ERROR,...e)}},gl=(e,t)=>t.some(t=>e instanceof t),_l,vl;function yl(){return _l||=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]}function bl(){return vl||=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]}var xl=new WeakMap,Sl=new WeakMap,Cl=new WeakMap,wl=new WeakMap,Tl=new WeakMap;function El(e){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`success`,i),e.removeEventListener(`error`,a)},i=()=>{t(Ml(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener(`success`,i),e.addEventListener(`error`,a)});return t.then(t=>{t instanceof IDBCursor&&xl.set(t,e)}).catch(()=>{}),Tl.set(t,e),t}function Dl(e){if(Sl.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`complete`,i),e.removeEventListener(`error`,a),e.removeEventListener(`abort`,a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException(`AbortError`,`AbortError`)),r()};e.addEventListener(`complete`,i),e.addEventListener(`error`,a),e.addEventListener(`abort`,a)});Sl.set(e,t)}var Ol={get(e,t,n){if(e instanceof IDBTransaction){if(t===`done`)return Sl.get(e);if(t===`objectStoreNames`)return e.objectStoreNames||Cl.get(e);if(t===`store`)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ml(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t===`done`||t===`store`)?!0:t in e}};function kl(e){Ol=e(Ol)}function Al(e){return e===IDBDatabase.prototype.transaction&&!(`objectStoreNames`in IDBTransaction.prototype)?function(t,...n){let r=e.call(Nl(this),t,...n);return Cl.set(r,t.sort?t.sort():[t]),Ml(r)}:bl().includes(e)?function(...t){return e.apply(Nl(this),t),Ml(xl.get(this))}:function(...t){return Ml(e.apply(Nl(this),t))}}function jl(e){return typeof e==`function`?Al(e):(e instanceof IDBTransaction&&Dl(e),gl(e,yl())?new Proxy(e,Ol):e)}function Ml(e){if(e instanceof IDBRequest)return El(e);if(wl.has(e))return wl.get(e);let t=jl(e);return t!==e&&(wl.set(e,t),Tl.set(t,e)),t}var Nl=e=>Tl.get(e);function Pl(e,t,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){let o=indexedDB.open(e,t),s=Ml(o);return r&&o.addEventListener(`upgradeneeded`,e=>{r(Ml(o.result),e.oldVersion,e.newVersion,Ml(o.transaction),e)}),n&&o.addEventListener(`blocked`,e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{a&&e.addEventListener(`close`,()=>a()),i&&e.addEventListener(`versionchange`,e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}var Fl=[`get`,`getKey`,`getAll`,`getAllKeys`,`count`],Il=[`put`,`add`,`delete`,`clear`],Ll=new Map;function Rl(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t==`string`))return;if(Ll.get(t))return Ll.get(t);let n=t.replace(/FromIndex$/,``),r=t!==n,i=Il.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Fl.includes(n)))return;let a=async function(e,...t){let a=this.transaction(e,i?`readwrite`:`readonly`),o=a.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&a.done]))[0]};return Ll.set(t,a),a}kl(e=>({...e,get:(t,n,r)=>Rl(t,n)||e.get(t,n,r),has:(t,n)=>!!Rl(t,n)||e.has(t,n)}));var zl=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(Bl(e)){let t=e.getImmediate();return`${t.library}/${t.version}`}else return null}).filter(e=>e).join(` `)}};function Bl(e){return e.getComponent()?.type===`VERSION`}var Vl=`@firebase/app`,Hl=`0.14.6`,Ul=new hl(`@firebase/app`),Wl=`@firebase/app-compat`,Gl=`@firebase/analytics-compat`,Kl=`@firebase/analytics`,ql=`@firebase/app-check-compat`,Jl=`@firebase/app-check`,Yl=`@firebase/auth`,Xl=`@firebase/auth-compat`,Zl=`@firebase/database`,Ql=`@firebase/data-connect`,$l=`@firebase/database-compat`,eu=`@firebase/functions`,tu=`@firebase/functions-compat`,nu=`@firebase/installations`,ru=`@firebase/installations-compat`,iu=`@firebase/messaging`,au=`@firebase/messaging-compat`,ou=`@firebase/performance`,su=`@firebase/performance-compat`,cu=`@firebase/remote-config`,lu=`@firebase/remote-config-compat`,uu=`@firebase/storage`,du=`@firebase/storage-compat`,fu=`@firebase/firestore`,pu=`@firebase/ai`,mu=`@firebase/firestore-compat`,hu=`firebase`,gu=`12.6.0`,_u=`[DEFAULT]`,vu={[Vl]:`fire-core`,[Wl]:`fire-core-compat`,[Kl]:`fire-analytics`,[Gl]:`fire-analytics-compat`,[Jl]:`fire-app-check`,[ql]:`fire-app-check-compat`,[Yl]:`fire-auth`,[Xl]:`fire-auth-compat`,[Zl]:`fire-rtdb`,[Ql]:`fire-data-connect`,[$l]:`fire-rtdb-compat`,[eu]:`fire-fn`,[tu]:`fire-fn-compat`,[nu]:`fire-iid`,[ru]:`fire-iid-compat`,[iu]:`fire-fcm`,[au]:`fire-fcm-compat`,[ou]:`fire-perf`,[su]:`fire-perf-compat`,[cu]:`fire-rc`,[lu]:`fire-rc-compat`,[uu]:`fire-gcs`,[du]:`fire-gcs-compat`,[fu]:`fire-fst`,[mu]:`fire-fst-compat`,[pu]:`fire-vertex`,"fire-js":`fire-js`,[hu]:`fire-js-all`},yu=new Map,bu=new Map,xu=new Map;function Su(e,t){try{e.container.addComponent(t)}catch(n){Ul.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Cu(e){let t=e.name;if(xu.has(t))return Ul.debug(`There were multiple attempts to register component ${t}.`),!1;xu.set(t,e);for(let t of yu.values())Su(t,e);for(let t of bu.values())Su(t,e);return!0}function wu(e,t){let n=e.container.getProvider(`heartbeat`).getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Tu(e){return e==null?!1:e.settings!==void 0}var Eu=new Wc(`app`,`Firebase`,{"no-app":`No Firebase App '{$appName}' has been created - call initializeApp() first`,"bad-app-name":`Illegal App name: '{$appName}'`,"duplicate-app":`Firebase App named '{$appName}' already exists with different options or config`,"app-deleted":`Firebase App named '{$appName}' already deleted`,"server-app-deleted":`Firebase Server App has been deleted`,"no-options":`Need to provide options, when not being deployed to hosting via source.`,"invalid-app-argument":`firebase.{$appName}() takes either no argument or a Firebase App instance.`,"invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":`Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.`,"idb-get":`Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.`,"idb-set":`Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.`,"idb-delete":`Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.`,"finalization-registry-not-supported":`FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.`,"invalid-server-app-environment":`FirebaseServerApp is not for use in browser environments.`}),Du=class{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new il(`app`,()=>this,`PUBLIC`))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Eu.create(`app-deleted`,{appName:this._name})}},Ou=gu;function ku(e,t={}){let n=e;typeof t!=`object`&&(t={name:t});let r={name:_u,automaticDataCollectionEnabled:!0,...t},i=r.name;if(typeof i!=`string`||!i)throw Eu.create(`bad-app-name`,{appName:String(i)});if(n||=xc(),!n)throw Eu.create(`no-options`);let a=yu.get(i);if(a){if(Jc(n,a.options)&&Jc(r,a.config))return a;throw Eu.create(`duplicate-app`,{appName:i})}let o=new ll(i);for(let e of xu.values())o.addComponent(e);let s=new Du(n,r,o);return yu.set(i,s),s}function Au(e=_u){let t=yu.get(e);if(!t&&e===`[DEFAULT]`&&xc())return ku();if(!t)throw Eu.create(`no-app`,{appName:e});return t}function ju(e,t,n){let r=vu[e]??e;n&&(r+=`-${n}`);let i=r.match(/\s|\//),a=t.match(/\s|\//);if(i||a){let e=[`Unable to register library "${r}" with version "${t}":`];i&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&e.push(`and`),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ul.warn(e.join(` `));return}Cu(new il(`${r}-version`,()=>({library:r,version:t}),`VERSION`))}var Mu=`firebase-heartbeat-database`,Nu=1,Pu=`firebase-heartbeat-store`,Fu=null;function Iu(){return Fu||=Pl(Mu,Nu,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Pu)}catch(e){console.warn(e)}}}}).catch(e=>{throw Eu.create(`idb-open`,{originalErrorMessage:e.message})}),Fu}async function Lu(e){try{let t=(await Iu()).transaction(Pu),n=await t.objectStore(Pu).get(zu(e));return await t.done,n}catch(e){if(e instanceof Uc)Ul.warn(e.message);else{let t=Eu.create(`idb-get`,{originalErrorMessage:e?.message});Ul.warn(t.message)}}}async function Ru(e,t){try{let n=(await Iu()).transaction(Pu,`readwrite`);await n.objectStore(Pu).put(t,zu(e)),await n.done}catch(e){if(e instanceof Uc)Ul.warn(e.message);else{let t=Eu.create(`idb-set`,{originalErrorMessage:e?.message});Ul.warn(t.message)}}}function zu(e){return`${e.name}!${e.options.appId}`}var Bu=1024,Vu=30,Hu=class{constructor(e){this.container=e,this._heartbeatsCache=null,this._storage=new Gu(this.container.getProvider(`app`).getImmediate()),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{let e=this.container.getProvider(`platform-logger`).getImmediate().getPlatformInfoString(),t=Uu();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>Vu){let e=qu(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ul.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return``;let e=Uu(),{heartbeatsToSend:t,unsentEntries:n}=Wu(this._heartbeatsCache.heartbeats),r=fc(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Ul.warn(e),``}}};function Uu(){return new Date().toISOString().substring(0,10)}function Wu(e,t=Bu){let n=[],r=e.slice();for(let i of e){let e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Ku(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ku(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Gu=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Bc()?Vc().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let e=await Lu(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return Ru(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return Ru(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}else return}};function Ku(e){return fc(JSON.stringify({version:2,heartbeats:e})).length}function qu(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}function Ju(e){Cu(new il(`platform-logger`,e=>new zl(e),`PRIVATE`)),Cu(new il(`heartbeat`,e=>new Hu(e),`PRIVATE`)),ju(Vl,Hl,e),ju(Vl,Hl,`esm2020`),ju(`fire-js`,``)}Ju(``),ju(`firebase`,`12.6.0`,`app`);var Yu=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},Xu={},Zu,Qu;(function(){var e;function t(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(e,t,n){n||=0;let r=Array(16);if(typeof t==`string`)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let a=e.g[3],o;o=t+(a^n&(i^a))+r[0]+3614090360&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[1]+3905402710&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[2]+606105819&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[5]+1200080426&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[6]+2821735955&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[9]+2336552879&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[10]+4294925233&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[13]+4254626195&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[14]+2792965006&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(i^a&(n^i))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[6]+3225465664&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[11]+643717713&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[10]+38016083&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[15]+3634488961&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[14]+3275163606&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[3]+4107603335&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[2]+4243563512&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[7]+1735328473&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(n^i^a)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[8]+2272392833&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[11]+1839030562&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[4]+1272893353&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[7]+4139469664&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[0]+3936430074&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[3]+3572445317&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[12]+3873151461&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[15]+530742520&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(i^(n|~a))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[7]+1126891415&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[14]+2878612391&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[3]+2399980690&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[10]+4293915773&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[15]+4264355552&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[6]+2734768916&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[11]+3174756917&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[2]+718787259&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}r.prototype.v=function(e,t){t===void 0&&(t=e.length);let n=t-this.blockSize,r=this.C,a=this.h,o=0;for(;o<t;){if(a==0)for(;o<=n;)i(this,e,o),o+=this.blockSize;if(typeof e==`string`){for(;o<t;)if(r[a++]=e.charCodeAt(o++),a==this.blockSize){i(this,r),a=0;break}}else for(;o<t;)if(r[a++]=e[o++],a==this.blockSize){i(this,r),a=0;break}}this.h=a,this.o+=t},r.prototype.A=function(){var e=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=this.o*8;for(var n=e.length-8;n<e.length;++n)e[n]=t&255,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};function a(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}function o(e,t){this.h=t;let n=[],r=!0;for(let i=e.length-1;i>=0;i--){let a=e[i]|0;r&&a==t||(n[i]=a,r=!1)}this.g=n}var s={};function c(e){return-128<=e&&e<128?a(e,function(e){return new o([e|0],e<0?-1:0)}):new o([e|0],e<0?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return d;if(e<0)return g(l(-e));let t=[],n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new o(t,0)}function u(e,t){if(e.length==0)throw Error(`number format error: empty string`);if(t||=10,t<2||36<t)throw Error(`radix out of range: `+t);if(e.charAt(0)==`-`)return g(u(e.substring(1),t));if(e.indexOf(`-`)>=0)throw Error(`number format error: interior "-" character`);let n=l(t**8),r=d;for(let a=0;a<e.length;a+=8){var i=Math.min(8,e.length-a);let o=parseInt(e.substring(a,a+i),t);i<8?(i=l(t**+i),r=r.j(i).add(l(o))):(r=r.j(n),r=r.add(l(o)))}return r}var d=c(0),f=c(1),p=c(16777216);e=o.prototype,e.m=function(){if(h(this))return-g(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){let r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(e||=10,e<2||36<e)throw Error(`radix out of range: `+e);if(m(this))return`0`;if(h(this))return`-`+g(this).toString(e);let t=l(e**6);var n=this;let r=``;for(;;){let i=b(n,t).g;n=_(n,i.j(t));let a=((n.g.length>0?n.g[0]:n.h)>>>0).toString(e);if(n=i,m(n))return a+r;for(;a.length<6;)a=`0`+a;r=a+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h};function m(e){if(e.h!=0)return!1;for(let t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function h(e){return e.h==-1}e.l=function(e){return e=_(this,e),h(e)?-1:m(e)?0:1};function g(e){let t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new o(n,~e.h).add(f)}e.abs=function(){return h(this)?g(this):this},e.add=function(e){let t=Math.max(this.g.length,e.g.length),n=[],r=0;for(let i=0;i<=t;i++){let t=r+(this.i(i)&65535)+(e.i(i)&65535),a=(t>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=a>>>16,t&=65535,a&=65535,n[i]=a<<16|t}return new o(n,n[n.length-1]&-2147483648?-1:0)};function _(e,t){return e.add(g(t))}e.j=function(e){if(m(this)||m(e))return d;if(h(this))return h(e)?g(this).j(g(e)):g(g(this).j(e));if(h(e))return g(this.j(g(e)));if(this.l(p)<0&&e.l(p)<0)return l(this.m()*e.m());let t=this.g.length+e.g.length,n=[];for(var r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(let t=0;t<e.g.length;t++){let i=this.i(r)>>>16,a=this.i(r)&65535,o=e.i(t)>>>16,s=e.i(t)&65535;n[2*r+2*t]+=a*s,v(n,2*r+2*t),n[2*r+2*t+1]+=i*s,v(n,2*r+2*t+1),n[2*r+2*t+1]+=a*o,v(n,2*r+2*t+1),n[2*r+2*t+2]+=i*o,v(n,2*r+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new o(n,0)};function v(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function y(e,t){this.g=e,this.h=t}function b(e,t){if(m(t))throw Error(`division by zero`);if(m(e))return new y(d,d);if(h(e))return t=b(g(e),t),new y(g(t.g),g(t.h));if(h(t))return t=b(e,g(t)),new y(g(t.g),t.h);if(e.g.length>30){if(h(e)||h(t))throw Error(`slowDivide_ only works with positive integers.`);for(var n=f,r=t;r.l(e)<=0;)n=ee(n),r=ee(r);var i=te(n,1),a=te(r,1);for(r=te(r,2),n=te(n,2);!m(r);){var o=a.add(r);o.l(e)<=0&&(i=i.add(n),a=o),r=te(r,1),n=te(n,1)}return t=_(e,i.j(t)),new y(i,t)}for(i=d;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=Math.ceil(Math.log(n)/Math.LN2),r=r<=48?1:2**(r-48),a=l(n),o=a.j(t);h(o)||o.l(e)>0;)n-=r,a=l(n),o=a.j(t);m(a)&&(a=f),i=i.add(a),e=_(e,o)}return new y(i,e)}e.B=function(e){return b(this,e).h},e.and=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new o(n,this.h&e.h)},e.or=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new o(n,this.h|e.h)},e.xor=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new o(n,this.h^e.h)};function ee(e){let t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new o(n,e.h)}function te(e,t){let n=t>>5;t%=32;let r=e.g.length-n,i=[];for(let a=0;a<r;a++)i[a]=t>0?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new o(i,e.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Qu=Xu.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,Zu=Xu.Integer=o}).apply(Yu===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:Yu);var $u=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},ed={},td,nd,rd,id,ad,od,sd,cd;(function(){var e,t=Object.defineProperty;function n(e){e=[typeof globalThis==`object`&&globalThis,e,typeof window==`object`&&window,typeof self==`object`&&self,typeof $u==`object`&&$u];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error(`Cannot find global object`)}var r=n(this);function i(e,n){if(n)a:{var i=r;e=e.split(`.`);for(var a=0;a<e.length-1;a++){var o=e[a];if(!(o in i))break a;i=i[o]}e=e[e.length-1],a=i[e],n=n(a),n!=a&&n!=null&&t(i,e,{configurable:!0,writable:!0,value:n})}}i(`Symbol.dispose`,function(e){return e||Symbol(`Symbol.dispose`)}),i(`Array.prototype.values`,function(e){return e||function(){return this[Symbol.iterator]()}}),i(`Object.entries`,function(e){return e||function(e){var t=[],n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push([n,e[n]]);return t}});var a=a||{},o=this||self;function s(e){var t=typeof e;return t==`object`&&e!=null||t==`function`}function c(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return l=c,l.apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}var f=typeof AsyncContext<`u`&&typeof AsyncContext.Snapshot==`function`?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function p(e){let t=e.length;if(t>0){let n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function m(e,t){for(let t=1;t<arguments.length;t++){let r=arguments[t];var n=typeof r;if(n=n==`object`?r?Array.isArray(r)?`array`:n:`null`:n,n==`array`||n==`object`&&typeof r.length==`number`){n=e.length||0;let t=r.length||0;e.length=n+t;for(let i=0;i<t;i++)e[n+i]=r[i]}else e.push(r)}}class h{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function g(e){o.setTimeout(()=>{throw e},0)}function _(){var e=x;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class v{constructor(){this.h=this.g=null}add(e,t){let n=y.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}var y=new h(()=>new b,e=>e.reset());class b{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,te=!1,x=new v,ne=()=>{let e=Promise.resolve(void 0);ee=()=>{e.then(re)}};function re(){for(var e;e=_();){try{e.h.call(e.g)}catch(e){g(e)}var t=y;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}te=!1}function ie(){this.u=this.u,this.C=this.C}ie.prototype.u=!1,ie.prototype.dispose=function(){this.u||(this.u=!0,this.N())},ie.prototype[Symbol.dispose]=function(){this.dispose()},ie.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var oe=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},`passive`,{get:function(){e=!0}});try{let e=()=>{};o.addEventListener(`test`,e,t),o.removeEventListener(`test`,e,t)}catch{}return e}();function se(e){return/^[\s\xa0]*$/.test(e)}function ce(e,t){ae.call(this,e?e.type:``),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key=``,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType=``,this.i=null,e&&this.init(e,t)}d(ce,ae),ce.prototype.init=function(e,t){let n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget,t||(n==`mouseover`?t=e.fromElement:n==`mouseout`&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=r.clientX===void 0?r.pageX:r.clientX,this.clientY=r.clientY===void 0?r.pageY:r.clientY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX===void 0?e.pageX:e.clientX,this.clientY=e.clientY===void 0?e.pageY:e.clientY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||``,this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&ce.Z.h.call(this)},ce.prototype.h=function(){ce.Z.h.call(this);let e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var le=`closure_listenable_`+(Math.random()*1e6|0),ue=0;function de(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++ue,this.da=this.fa=!1}function fe(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function pe(e,t,n){for(let r in e)t.call(n,e[r],r,e)}function me(e,t){for(let n in e)t.call(void 0,e[n],n,e)}function he(e){let t={};for(let n in e)t[n]=e[n];return t}let ge=`constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf`.split(` `);function _e(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<ge.length;t++)n=ge[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ve(e){this.src=e,this.g={},this.h=0}ve.prototype.add=function(e,t,n,r,i){let a=e.toString();e=this.g[a],e||(e=this.g[a]=[],this.h++);let o=be(e,t,r,i);return o>-1?(t=e[o],n||(t.fa=!1)):(t=new de(t,this.src,a,!!r,i),t.fa=n,e.push(t)),t};function ye(e,t){let n=t.type;if(n in e.g){var r=e.g[n],i=Array.prototype.indexOf.call(r,t,void 0),a;(a=i>=0)&&Array.prototype.splice.call(r,i,1),a&&(fe(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function be(e,t,n,r){for(let i=0;i<e.length;++i){let a=e[i];if(!a.da&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}var xe=`closure_lm_`+(Math.random()*1e6|0),Se={};function S(e,t,n,r,i){if(r&&r.once)return Te(e,t,n,r,i);if(Array.isArray(t)){for(let a=0;a<t.length;a++)S(e,t[a],n,r,i);return null}return n=Me(n),e&&e[le]?e.J(t,n,s(r)?!!r.capture:!!r,i):Ce(e,t,n,!1,r,i)}function Ce(e,t,n,r,i,a){if(!t)throw Error(`Invalid event type`);let o=s(i)?!!i.capture:!!i,c=Ae(e);if(c||(e[xe]=c=new ve(e)),n=c.add(t,n,r,o,a),n.proxy)return n;if(r=we(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)oe||(i=o),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Oe(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error(`addEventListener and attachEvent are unavailable.`);return n}function we(){function e(n){return t.call(e.src,e.listener,n)}let t=ke;return e}function Te(e,t,n,r,i){if(Array.isArray(t)){for(let a=0;a<t.length;a++)Te(e,t[a],n,r,i);return null}return n=Me(n),e&&e[le]?e.K(t,n,s(r)?!!r.capture:!!r,i):Ce(e,t,n,!0,r,i)}function Ee(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Ee(e,t[a],n,r,i);else r=s(r)?!!r.capture:!!r,n=Me(n),e&&e[le]?(e=e.i,a=String(t).toString(),a in e.g&&(t=e.g[a],n=be(t,n,r,i),n>-1&&(fe(t[n]),Array.prototype.splice.call(t,n,1),t.length==0&&(delete e.g[a],e.h--)))):(e&&=Ae(e))&&(t=e.g[t.toString()],e=-1,t&&(e=be(t,n,r,i)),(n=e>-1?t[e]:null)&&De(n))}function De(e){if(typeof e!=`number`&&e&&!e.da){var t=e.src;if(t&&t[le])ye(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Oe(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ae(t))?(ye(n,e),n.h==0&&(n.src=null,t[xe]=null)):fe(e)}}}function Oe(e){return e in Se?Se[e]:Se[e]=`on`+e}function ke(e,t){if(e.da)e=!0;else{t=new ce(t,this);let n=e.listener,r=e.ha||e.src;e.fa&&De(e),e=n.call(r,t)}return e}function Ae(e){return e=e[xe],e instanceof ve?e:null}var je=`__closure_events_fn_`+(Math.random()*1e9>>>0);function Me(e){return typeof e==`function`?e:(e[je]||(e[je]=function(t){return e.handleEvent(t)}),e[je])}function Ne(){ie.call(this),this.i=new ve(this),this.M=this,this.G=null}d(Ne,ie),Ne.prototype[le]=!0,Ne.prototype.removeEventListener=function(e,t,n,r){Ee(this,e,t,n,r)};function Pe(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,typeof t==`string`)t=new ae(t,e);else if(t instanceof ae)t.target=t.target||e;else{var i=t;t=new ae(r,e),_e(t,i)}i=!0;let a,o;if(n)for(o=n.length-1;o>=0;o--)a=t.g=n[o],i=C(a,r,!0,t)&&i;if(a=t.g=e,i=C(a,r,!0,t)&&i,i=C(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)a=t.g=n[o],i=C(a,r,!1,t)&&i}Ne.prototype.N=function(){if(Ne.Z.N.call(this),this.i){var e=this.i;for(let t in e.g){let n=e.g[t];for(let e=0;e<n.length;e++)fe(n[e]);delete e.g[t],e.h--}}this.G=null},Ne.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function C(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();let i=!0;for(let a=0;a<t.length;++a){let o=t[a];if(o&&!o.da&&o.capture==n){let t=o.listener,n=o.ha||o.src;o.fa&&ye(e.i,o),i=t.call(n,r)!==!1&&i}}return i&&!r.defaultPrevented}function Fe(e,t){if(typeof e!=`function`)if(e&&typeof e.handleEvent==`function`)e=l(e.handleEvent,e);else throw Error(`Invalid listener argument`);return Number(t)>2147483647?-1:o.setTimeout(e,t||0)}function Ie(e){e.g=Fe(()=>{e.g=null,e.i&&(e.i=!1,Ie(e))},e.l);let t=e.h;e.h=null,e.m.apply(null,t)}class Le extends ie{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:Ie(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Re(e){ie.call(this),this.h=e,this.g={}}d(Re,ie);var ze=[];function Be(e){pe(e.g,function(e,t){this.g.hasOwnProperty(t)&&De(e)},e),e.g={}}Re.prototype.N=function(){Re.Z.N.call(this),Be(this)},Re.prototype.handleEvent=function(){throw Error(`EventHandler.handleEvent not implemented`)};var Ve=o.JSON.stringify,He=o.JSON.parse,Ue=class{stringify(e){return o.JSON.stringify(e,void 0)}parse(e){return o.JSON.parse(e,void 0)}};function We(){}function Ge(){}var Ke={OPEN:`a`,hb:`b`,ERROR:`c`,tb:`d`};function qe(){ae.call(this,`d`)}d(qe,ae);function Je(){ae.call(this,`c`)}d(Je,ae);var Ye={},Xe=null;function Ze(){return Xe||=new Ne}Ye.Ia=`serverreachability`;function Qe(e){ae.call(this,Ye.Ia,e)}d(Qe,ae);function $e(e){let t=Ze();Pe(t,new Qe(t))}Ye.STAT_EVENT=`statevent`;function et(e,t){ae.call(this,Ye.STAT_EVENT,e),this.stat=t}d(et,ae);function tt(e){let t=Ze();Pe(t,new et(t,e))}Ye.Ja=`timingevent`;function nt(e,t){ae.call(this,Ye.Ja,e),this.size=t}d(nt,ae);function rt(e,t){if(typeof e!=`function`)throw Error(`Fn must not be null and must be a function`);return o.setTimeout(function(){e()},t)}function it(){this.g=!0}it.prototype.ua=function(){this.g=!1};function at(e,t,n,r,i,a){e.info(function(){if(e.g)if(a){var o=``,s=a.split(`&`);for(let e=0;e<s.length;e++){var c=s[e].split(`=`);if(c.length>1){let e=c[0];c=c[1];let t=e.split(`_`);o=t.length>=2&&t[1]==`type`?o+(e+`=`+c+`&`):o+(e+`=redacted&`)}}}else o=null;else o=a;return`XMLHTTP REQ (`+r+`) [attempt `+i+`]: `+t+`
`+n+`
`+o})}function ot(e,t,n,r,i,a,o){e.info(function(){return`XMLHTTP RESP (`+r+`) [ attempt `+i+`]: `+t+`
`+n+`
`+a+` `+o})}function st(e,t,n,r){e.info(function(){return`XMLHTTP TEXT (`+t+`): `+lt(e,n)+(r?` `+r:``)})}function ct(e,t){e.info(function(){return`TIMEOUT: `+t})}it.prototype.info=function(){};function lt(e,t){if(!e.g)return t;if(!t)return null;try{let a=JSON.parse(t);if(a){for(e=0;e<a.length;e++)if(Array.isArray(a[e])){var n=a[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if(i!=`noop`&&i!=`stop`&&i!=`close`)for(let e=1;e<r.length;e++)r[e]=``}}}}return Ve(a)}catch{return t}}var ut={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},dt={ib:`complete`,Fb:`success`,ERROR:`error`,Ga:`abort`,xb:`ready`,yb:`readystatechange`,TIMEOUT:`timeout`,sb:`incrementaldata`,wb:`progress`,lb:`downloadprogress`,Nb:`uploadprogress`},ft;function pt(){}d(pt,We),pt.prototype.g=function(){return new XMLHttpRequest},ft=new pt;function mt(e){return encodeURIComponent(String(e))}function ht(e){var t=1;e=e.split(`:`);let n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(`:`)),n}function gt(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new Re(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new _t}function _t(){this.i=null,this.g=``,this.h=!1}var vt={},yt={};function bt(e,t,n){e.M=1,e.A=qt(Ht(t)),e.u=n,e.R=!0,xt(e,null)}function xt(e,t){e.F=Date.now(),Tt(e),e.B=Ht(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),E(n.i,`t`,r),e.C=0,n=e.j.L,e.h=new _t,e.g=Jn(e.j,n?t:null,!e.u),e.P>0&&(e.O=new Le(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i=`readystatechange`;Array.isArray(i)||(i&&(ze[0]=i.toString()),i=ze);for(let e=0;e<i.length;e++){let a=S(n,i[e],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.J?he(e.J):{},e.u?(e.v||=`POST`,t[`Content-Type`]=`application/x-www-form-urlencoded`,e.g.ea(e.B,e.v,e.u,t)):(e.v=`GET`,e.g.ea(e.B,e.v,null,t)),$e(),at(e.i,e.v,e.B,e.l,e.S,e.u)}gt.prototype.ba=function(e){e=e.target;let t=this.O;t&&En(e)==3?t.j():this.Y(e)},gt.prototype.Y=function(e){try{if(e==this.g)a:{let s=En(this.g),c=this.g.ya(),l=this.g.ca();if(!(s<3)&&(s!=3||this.g&&(this.h.h||this.g.la()||Dn(this.g)))){this.K||s!=4||c==7||$e(c==8||l<=0?3:2),Dt(this);var t=this.g.ca();this.X=t;var n=St(this);if(this.o=t==200,ot(this.i,this.v,this.B,this.l,this.S,s,t),this.o){if(this.U&&!this.L){b:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader(`X-HTTP-Initial-Response`):null)&&!se(r)){var a=r;break b}}a=null}if(e=a)st(this.i,this.l,e,`Initial handshake response via X-HTTP-Initial-Response`),this.L=!0,At(this,e);else{this.o=!1,this.m=3,tt(12),kt(this),Ot(this);break a}}if(this.R){e=!0;let t;for(;!this.K&&this.C<n.length;)if(t=wt(this,n),t==yt){s==4&&(this.m=4,tt(14),e=!1),st(this.i,this.l,null,`[Incomplete Response]`);break}else if(t==vt){this.m=4,tt(15),st(this.i,this.l,n,`[Invalid Chunk]`),e=!1;break}else st(this.i,this.l,t,null),At(this,t);if(Ct(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),s!=4||n.length!=0||this.h.h||(this.m=1,tt(16),e=!1),this.o=this.o&&e,!e)st(this.i,this.l,n,`[Invalid Chunked Response]`),kt(this),Ot(this);else if(n.length>0&&!this.W){this.W=!0;var o=this.j;o.g==this&&o.aa&&!o.P&&(o.j.info(`Great, no buffering proxy detected. Bytes received: `+n.length),O(o),o.P=!0,tt(11))}}else st(this.i,this.l,n,null),At(this,n);s==4&&kt(this),this.o&&!this.K&&(s==4?Un(this.j,this):(this.o=!1,Tt(this)))}else On(this.g),t==400&&n.indexOf(`Unknown SID`)>0?(this.m=3,tt(12)):(this.m=0,tt(13)),kt(this),Ot(this)}}}catch{}};function St(e){if(!Ct(e))return e.g.la();let t=Dn(e.g);if(t===``)return``;let n=``,r=t.length,i=En(e.g)==4;if(!e.h.i){if(typeof TextDecoder>`u`)return kt(e),Ot(e),``;e.h.i=new o.TextDecoder}for(let a=0;a<r;a++)e.h.h=!0,n+=e.h.i.decode(t[a],{stream:!(i&&a==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}function Ct(e){return e.g?e.v==`GET`&&e.M!=2&&e.j.Aa:!1}function wt(e,t){var n=e.C,r=t.indexOf(`
`,n);return r==-1?yt:(n=Number(t.substring(n,r)),isNaN(n)?vt:(r+=1,r+n>t.length?yt:(t=t.slice(r,r+n),e.C=r+n,t)))}gt.prototype.cancel=function(){this.K=!0,kt(this)};function Tt(e){e.T=Date.now()+e.H,Et(e,e.H)}function Et(e,t){if(e.D!=null)throw Error(`WatchDog timer not null`);e.D=rt(l(e.aa,e),t)}function Dt(e){e.D&&=(o.clearTimeout(e.D),null)}gt.prototype.aa=function(){this.D=null;let e=Date.now();e-this.T>=0?(ct(this.i,this.B),this.M!=2&&($e(),tt(17)),kt(this),this.m=2,Ot(this)):Et(this,this.T-e)};function Ot(e){e.j.I==0||e.K||Un(e.j,e)}function kt(e){Dt(e);var t=e.O;t&&typeof t.dispose==`function`&&t.dispose(),e.O=null,Be(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function At(e,t){try{var n=e.j;if(n.I!=0&&(n.g==e||Ft(n.h,e))){if(!e.L&&Ft(n.h,e)&&n.I==3){try{var r=n.Ba.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){a:if(!n.v){if(n.g)if(n.g.F+3e3<e.F)Hn(n),Mn(n);else break a;Bn(n),tt(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&n.A==0&&!n.C&&(n.C=rt(l(n.Va,n),6e3));Pt(n.h)<=1&&n.ta&&(n.ta=void 0)}else Gn(n,11)}else if((e.L||n.g==e)&&Hn(n),!se(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t],u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],n.I==2)if(l[0]==`c`){n.M=l[1],n.ba=l[2];let t=l[3];t!=null&&(n.ka=t,n.j.info(`VER=`+n.ka));let i=l[4];i!=null&&(n.za=i,n.j.info(`SVER=`+n.za));let u=l[5];u!=null&&typeof u==`number`&&u>0&&(r=1.5*u,n.O=r,n.j.info(`backChannelRequestTimeoutMs_=`+r)),r=n;let d=e.g;if(d){let e=d.g?d.g.getResponseHeader(`X-Client-Wire-Protocol`):null;if(e){var a=r.h;a.g||e.indexOf(`spdy`)==-1&&e.indexOf(`quic`)==-1&&e.indexOf(`h2`)==-1||(a.j=a.l,a.g=new Set,a.h&&=(It(a,a.h),null))}if(r.G){let e=d.g?d.g.getResponseHeader(`X-HTTP-Session-Id`):null;e&&(r.wa=e,Kt(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info(`Handshake RTT: `+n.T+`ms`)),r=n;var o=e;if(r.na=qn(r,r.L?r.ba:null,r.W),o.L){Lt(r.h,o);var s=o,c=r.O;c&&(s.H=c),s.D&&(Dt(s),Tt(s)),r.g=o}else zn(r);n.i.length>0&&Pn(n)}else l[0]!=`stop`&&l[0]!=`close`||Gn(n,7);else n.I==3&&(l[0]==`stop`||l[0]==`close`?l[0]==`stop`?Gn(n,7):jn(n):l[0]!=`noop`&&n.l&&n.l.qa(l),n.A=0)}}$e(4)}catch{}}var jt=class{constructor(e,t){this.g=e,this.map=t}};function Mt(e){this.l=e||10,o.PerformanceNavigationTiming?(e=o.performance.getEntriesByType(`navigation`),e=e.length>0&&(e[0].nextHopProtocol==`hq`||e[0].nextHopProtocol==`h2`)):e=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Nt(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function Pt(e){return e.h?1:e.g?e.g.size:0}function Ft(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function It(e,t){e.g?e.g.add(t):e.h=t}function Lt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}Mt.prototype.cancel=function(){if(this.i=Rt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let e of this.g.values())e.cancel();this.g.clear()}};function Rt(e){if(e.h!=null)return e.i.concat(e.h.G);if(e.g!=null&&e.g.size!==0){let t=e.i;for(let n of e.g.values())t=t.concat(n.G);return t}return p(e.i)}var zt=RegExp(`^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$`);function Bt(e,t){if(e){e=e.split(`&`);for(let n=0;n<e.length;n++){let r=e[n].indexOf(`=`),i,a=null;r>=0?(i=e[n].substring(0,r),a=e[n].substring(r+1)):i=e[n],t(i,a?decodeURIComponent(a.replace(/\+/g,` `)):``)}}}function Vt(e){this.g=this.o=this.j=``,this.u=null,this.m=this.h=``,this.l=!1;let t;e instanceof Vt?(this.l=e.l,Ut(this,e.j),this.o=e.o,this.g=e.g,Wt(this,e.u),this.h=e.h,Gt(this,on(e.i)),this.m=e.m):e&&(t=String(e).match(zt))?(this.l=!1,Ut(this,t[1]||``,!0),this.o=Jt(t[2]||``),this.g=Jt(t[3]||``,!0),Wt(this,t[4]),this.h=Jt(t[5]||``,!0),Gt(this,t[6]||``,!0),this.m=Jt(t[7]||``)):(this.l=!1,this.i=new tn(null,this.l))}Vt.prototype.toString=function(){let e=[];var t=this.j;t&&e.push(Yt(t,Zt,!0),`:`);var n=this.g;return(n||t==`file`)&&(e.push(`//`),(t=this.o)&&e.push(Yt(t,Zt,!0),`@`),e.push(mt(n).replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),n=this.u,n!=null&&e.push(`:`,String(n))),(n=this.h)&&(this.g&&n.charAt(0)!=`/`&&e.push(`/`),e.push(Yt(n,n.charAt(0)==`/`?Qt:w,!0))),(n=this.i.toString())&&e.push(`?`,n),(n=this.m)&&e.push(`#`,Yt(n,en)),e.join(``)},Vt.prototype.resolve=function(e){let t=Ht(this),n=!!e.j;n?Ut(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=e.u!=null;var r=e.h;if(n)Wt(t,e.u);else if(n=!!e.h){if(r.charAt(0)!=`/`)if(this.g&&!this.h)r=`/`+r;else{var i=t.h.lastIndexOf(`/`);i!=-1&&(r=t.h.slice(0,i+1)+r)}if(i=r,i==`..`||i==`.`)r=``;else if(i.indexOf(`./`)!=-1||i.indexOf(`/.`)!=-1){r=i.lastIndexOf(`/`,0)==0,i=i.split(`/`);let e=[];for(let t=0;t<i.length;){let n=i[t++];n==`.`?r&&t==i.length&&e.push(``):n==`..`?((e.length>1||e.length==1&&e[0]!=``)&&e.pop(),r&&t==i.length&&e.push(``)):(e.push(n),r=!0)}r=e.join(`/`)}else r=i}return n?t.h=r:n=e.i.toString()!==``,n?Gt(t,on(e.i)):n=!!e.m,n&&(t.m=e.m),t};function Ht(e){return new Vt(e)}function Ut(e,t,n){e.j=n?Jt(t,!0):t,e.j&&=e.j.replace(/:$/,``)}function Wt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error(`Bad port number `+t);e.u=t}else e.u=null}function Gt(e,t,n){t instanceof tn?(e.i=t,cn(e.i,e.l)):(n||(t=Yt(t,$t)),e.i=new tn(t,e.l))}function Kt(e,t,n){e.i.set(t,n)}function qt(e){return Kt(e,`zx`,Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),e}function Jt(e,t){return e?t?decodeURI(e.replace(/%25/g,`%2525`)):decodeURIComponent(e):``}function Yt(e,t,n){return typeof e==`string`?(e=encodeURI(e).replace(t,Xt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),e):null}function Xt(e){return e=e.charCodeAt(0),`%`+(e>>4&15).toString(16)+(e&15).toString(16)}var Zt=/[#\/\?@]/g,w=/[#\?:]/g,Qt=/[#\?]/g,$t=/[#\?@]/g,en=/#/g;function tn(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function T(e){e.g||(e.g=new Map,e.h=0,e.i&&Bt(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g,` `)),n)}))}e=tn.prototype,e.add=function(e,t){T(this),this.i=null,e=sn(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function nn(e,t){T(e),t=sn(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function rn(e,t){return T(e),t=sn(e,t),e.g.has(t)}e.forEach=function(e,t){T(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)};function an(e,t){T(e);let n=[];if(typeof t==`string`)rn(e,t)&&(n=n.concat(e.g.get(sn(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}e.set=function(e,t){return T(this),this.i=null,e=sn(this,e),rn(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e?(e=an(this,e),e.length>0?String(e[0]):t):t};function E(e,t,n){nn(e,t),n.length>0&&(e.i=null,e.g.set(sn(e,t),p(n)),e.h+=n.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return``;let e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];let i=mt(n);n=an(this,n);for(let t=0;t<n.length;t++){let r=i;n[t]!==``&&(r+=`=`+mt(n[t])),e.push(r)}}return this.i=e.join(`&`)};function on(e){let t=new tn;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function sn(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function cn(e,t){t&&!e.j&&(T(e),e.i=null,e.g.forEach(function(e,t){let n=t.toLowerCase();t!=n&&(nn(this,t),E(this,n,e))},e)),e.j=t}function ln(e,t){let n=new it;if(o.Image){let r=new Image;r.onload=u(dn,n,`TestLoadImage: loaded`,!0,t,r),r.onerror=u(dn,n,`TestLoadImage: error`,!1,t,r),r.onabort=u(dn,n,`TestLoadImage: abort`,!1,t,r),r.ontimeout=u(dn,n,`TestLoadImage: timeout`,!1,t,r),o.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function un(e,t){let n=new it,r=new AbortController,i=setTimeout(()=>{r.abort(),dn(n,`TestPingServer: timeout`,!1,t)},1e4);fetch(e,{signal:r.signal}).then(e=>{clearTimeout(i),e.ok?dn(n,`TestPingServer: ok`,!0,t):dn(n,`TestPingServer: server error`,!1,t)}).catch(()=>{clearTimeout(i),dn(n,`TestPingServer: error`,!1,t)})}function dn(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch{}}function fn(){this.g=new Ue}function pn(e){this.i=e.Sb||null,this.h=e.ab||!1}d(pn,We),pn.prototype.g=function(){return new mn(this.i,this.h)};function mn(e,t){Ne.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText=``,this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F=`GET`,this.D=``,this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(mn,Ne),e=mn.prototype,e.open=function(e,t){if(this.readyState!=0)throw this.abort(),Error(`Error reopening a connection`);this.F=e,this.D=t,this.readyState=1,_n(this)},e.send=function(e){if(this.readyState!=1)throw this.abort(),Error(`need to call open() first. `);if(this.v.signal.aborted)throw this.abort(),Error(`Request was aborted.`);this.g=!0;let t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||o).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText=``,this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel(`Request was aborted.`).catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,gn(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,_n(this)),this.g&&(this.readyState=3,_n(this),this.g)))if(this.responseType===`arraybuffer`)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(o.ReadableStream!==void 0&&`body`in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error(`responseType must be empty for "streamBinaryChunks" mode responses.`);this.response=[]}else this.response=this.responseText=``,this.B=new TextDecoder;hn(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))};function hn(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array;(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?gn(this):_n(this),this.readyState==3&&hn(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,gn(this))},e.Na=function(e){this.g&&(this.response=e,gn(this))},e.ga=function(){this.g&&gn(this)};function gn(e){e.readyState=4,e.l=null,e.j=null,e.B=null,_n(e)}e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||``},e.getAllResponseHeaders=function(){if(!this.h)return``;let e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+`: `+n[1]),n=t.next();return e.join(`\r
`)};function _n(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(mn.prototype,`withCredentials`,{get:function(){return this.m===`include`},set:function(e){this.m=e?`include`:`same-origin`}});function vn(e){let t=``;return pe(e,function(e,n){t+=n,t+=`:`,t+=e,t+=`\r
`}),t}function yn(e,t,n){a:{for(r in n){var r=!1;break a}r=!0}r||(n=vn(n),typeof e==`string`||Kt(e,t,n))}function D(e){Ne.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D=``,this.o=0,this.l=``,this.j=this.B=this.v=this.A=!1,this.m=null,this.F=``,this.H=!1}d(D,Ne);var bn=/^https?$/i,xn=[`POST`,`PUT`];e=D.prototype,e.Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error(`[goog.net.XhrIo] Object is active with another request=`+this.D+`; newUri=`+e);t=t?t.toUpperCase():`GET`,this.D=e,this.l=``,this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ft.g(),this.g.onreadystatechange=f(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(e){Sn(this,e);return}if(e=n||``,n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys==`function`&&typeof r.get==`function`)for(let e of r.keys())n.set(e,r.get(e));else throw Error(`Unknown input type for opt_headers: `+String(r));r=Array.from(n.keys()).find(e=>e.toLowerCase()==`content-type`),i=o.FormData&&e instanceof o.FormData,!(Array.prototype.indexOf.call(xn,t,void 0)>=0)||r||i||n.set(`Content-Type`,`application/x-www-form-urlencoded;charset=utf-8`);for(let[e,t]of n)this.g.setRequestHeader(e,t);this.F&&(this.g.responseType=this.F),`withCredentials`in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&=(clearTimeout(this.m),null),this.v=!0,this.g.send(e),this.v=!1}catch(e){Sn(this,e)}};function Sn(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Cn(e),Tn(e)}function Cn(e){e.A||(e.A=!0,Pe(e,`complete`),Pe(e,`error`))}e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,Pe(this,`complete`),Pe(this,`abort`),Tn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tn(this,!0)),D.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?wn(this):this.Xa())},e.Xa=function(){wn(this)};function wn(e){if(e.h&&a!==void 0){if(e.v&&En(e)==4)setTimeout(e.Ca.bind(e),0);else if(Pe(e,`readystatechange`),En(e)==4){e.h=!1;try{let a=e.ca();a:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break a;default:t=!1}var n;if(!(n=t)){var r;if(r=a===0){let t=String(e.D).match(zt)[1]||null;!t&&o.self&&o.self.location&&(t=o.self.location.protocol.slice(0,-1)),r=!bn.test(t?t.toLowerCase():``)}n=r}if(n)Pe(e,`complete`),Pe(e,`success`);else{e.o=6;try{var i=En(e)>2?e.g.statusText:``}catch{i=``}e.l=i+` [`+e.ca()+`]`,Cn(e)}}finally{Tn(e)}}}}function Tn(e,t){if(e.g){e.m&&=(clearTimeout(e.m),null);let n=e.g;e.g=null,t||Pe(e,`ready`);try{n.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function En(e){return e.g?e.g.readyState:0}e.ca=function(){try{return En(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:``}catch{return``}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),He(t)}};function Dn(e){try{if(!e.g)return null;if(`response`in e.g)return e.g.response;switch(e.F){case``:case`text`:return e.g.responseText;case`arraybuffer`:if(`mozResponseArrayBuffer`in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function On(e){let t={};e=(e.g&&En(e)>=2&&e.g.getAllResponseHeaders()||``).split(`\r
`);for(let r=0;r<e.length;r++){if(se(e[r]))continue;var n=ht(e[r]);let i=n[0];if(n=n[1],typeof n!=`string`)continue;n=n.trim();let a=t[i]||[];t[i]=a,a.push(n)}me(t,function(e){return e.join(`, `)})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l==`string`?this.l:String(this.l)};function kn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function An(e){this.za=0,this.i=[],this.j=new it,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=kn(`failFast`,!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=kn(`baseRetryDelayMs`,5e3,e),this.Za=kn(`retryDelaySeedMs`,1e4,e),this.Ta=kn(`forwardChannelMaxRetries`,2,e),this.va=kn(`forwardChannelRequestTimeoutMs`,2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M=``,this.h=new Mt(e&&e.concurrentRequestLimit),this.Ba=new fn,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=An.prototype,e.ka=8,e.I=1,e.connect=function(e,t,n,r){tt(0),this.W=e,this.H=t||{},n&&r!==void 0&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=qn(this,null,this.W),Pn(this)};function jn(e){if(Nn(e),e.I==3){var t=e.V++,n=Ht(e.J);if(Kt(n,`SID`,e.M),Kt(n,`RID`,t),Kt(n,`TYPE`,`terminate`),Ln(e,n),t=new gt(e,e.j,t),t.M=2,t.A=qt(Ht(n)),n=!1,o.navigator&&o.navigator.sendBeacon)try{n=o.navigator.sendBeacon(t.A.toString(),``)}catch{}!n&&o.Image&&(new Image().src=t.A,n=!0),n||(t.g=Jn(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Tt(t)}Kn(e)}function Mn(e){e.g&&=(O(e),e.g.cancel(),null)}function Nn(e){Mn(e),e.v&&=(o.clearTimeout(e.v),null),Hn(e),e.h.cancel(),e.m&&=(typeof e.m==`number`&&o.clearTimeout(e.m),null)}function Pn(e){if(!Nt(e.h)&&!e.m){e.m=!0;var t=e.Ea;ee||ne(),te||=(ee(),!0),x.add(t,e),e.D=0}}function Fn(e,t){return Pt(e.h)>=e.h.j-(e.m?1:0)?!1:e.m?(e.i=t.G.concat(e.i),!0):e.I==1||e.I==2||e.D>=(e.Sa?0:e.Ta)?!1:(e.m=rt(l(e.Ea,e,t),Wn(e,e.D)),e.D++,!0)}e.Ea=function(e){if(this.m)if(this.m=null,this.I==1){if(!e){this.V=Math.floor(Math.random()*1e5),e=this.V++;let i=new gt(this,this.j,e),a=this.o;if(this.U&&(a?(a=he(a),_e(a,this.U)):a=this.U),this.u!==null||this.R||(i.J=a,a=null),this.S)a:{for(var t=0,n=0;n<this.i.length;n++){b:{var r=this.i[n];if(`__data__`in r.map&&(r=r.map.__data__,typeof r==`string`)){r=r.length;break b}r=void 0}if(r===void 0)break;if(t+=r,t>4096){t=n;break a}if(t===4096||n===this.i.length-1){t=n+1;break a}}t=1e3}else t=1e3;t=Rn(this,i,t),n=Ht(this.J),Kt(n,`RID`,e),Kt(n,`CVER`,22),this.G&&Kt(n,`X-HTTP-Session-Id`,this.G),Ln(this,n),a&&(this.R?t=`headers=`+mt(vn(a))+`&`+t:this.u&&yn(n,this.u,a)),It(this.h,i),this.Ra&&Kt(n,`TYPE`,`init`),this.S?(Kt(n,`$req`,t),Kt(n,`SID`,`null`),i.U=!0,bt(i,n,null)):bt(i,n,t),this.I=2}}else this.I==3&&(e?In(this,e):this.i.length==0||Nt(this.h)||In(this))};function In(e,t){var n=t?t.l:e.V++;let r=Ht(e.J);Kt(r,`SID`,e.M),Kt(r,`RID`,n),Kt(r,`AID`,e.K),Ln(e,r),e.u&&e.o&&yn(r,e.u,e.o),n=new gt(e,e.j,n,e.D+1),e.u===null&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Rn(e,n,1e3),n.H=Math.round(e.va*.5)+Math.round(e.va*.5*Math.random()),It(e.h,n),bt(n,r,t)}function Ln(e,t){e.H&&pe(e.H,function(e,n){Kt(t,n,e)}),e.l&&pe({},function(e,n){Kt(t,n,e)})}function Rn(e,t,n){n=Math.min(e.i.length,n);let r=e.l?l(e.l.Ka,e.l,e):null;a:{var i=e.i;let t=-1;for(;;){let e=[`count=`+n];t==-1?n>0?(t=i[0].g,e.push(`ofs=`+t)):t=0:e.push(`ofs=`+t);let c=!0;for(let l=0;l<n;l++){var a=i[l].g;let n=i[l].map;if(a-=t,a<0)t=Math.max(0,i[l].g-100),c=!1;else try{a=`req`+a+`_`||``;try{var o=n instanceof Map?n:Object.entries(n);for(let[t,n]of o){let r=n;s(n)&&(r=Ve(n)),e.push(a+t+`=`+encodeURIComponent(r))}}catch(t){throw e.push(a+`type=_badmap`),t}}catch{r&&r(n)}}if(c){o=e.join(`&`);break a}}o=void 0}return e=e.i.splice(0,n),t.G=e,o}function zn(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;ee||ne(),te||=(ee(),!0),x.add(t,e),e.A=0}}function Bn(e){return e.g||e.v||e.A>=3?!1:(e.Y++,e.v=rt(l(e.Da,e),Wn(e,e.A)),e.A++,!0)}e.Da=function(){if(this.v=null,Vn(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var e=4*this.T;this.j.info(`BP detection timer enabled: `+e),this.B=rt(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info(`BP detection timeout reached.`),this.j.info(`Buffering proxy detected and switch to long-polling!`),this.F=!1,this.P=!0,tt(10),Mn(this),Vn(this))};function O(e){e.B!=null&&(o.clearTimeout(e.B),e.B=null)}function Vn(e){e.g=new gt(e,e.j,`rpc`,e.Y),e.u===null&&(e.g.J=e.o),e.g.P=0;var t=Ht(e.na);Kt(t,`RID`,`rpc`),Kt(t,`SID`,e.M),Kt(t,`AID`,e.K),Kt(t,`CI`,e.F?`0`:`1`),!e.F&&e.ia&&Kt(t,`TO`,e.ia),Kt(t,`TYPE`,`xmlhttp`),Ln(e,t),e.u&&e.o&&yn(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=qt(Ht(t)),n.u=null,n.R=!0,xt(n,e)}e.Va=function(){this.C!=null&&(this.C=null,Mn(this),Bn(this),tt(19))};function Hn(e){e.C!=null&&(o.clearTimeout(e.C),e.C=null)}function Un(e,t){var n=null;if(e.g==t){Hn(e),O(e),e.g=null;var r=2}else if(Ft(e.h,t))n=t.G,Lt(e.h,t),r=1;else return;if(e.I!=0){if(t.o)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;r=Ze(),Pe(r,new nt(r,n)),Pn(e)}else zn(e);else if(i=t.m,i==3||i==0&&t.X>0||!(r==1&&Fn(e,t)||r==2&&Bn(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Gn(e,5);break;case 4:Gn(e,10);break;case 3:Gn(e,6);break;default:Gn(e,2)}}}function Wn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function Gn(e,t){if(e.j.info(`Error code `+t),t==2){var n=l(e.bb,e),r=e.Ua;let t=!r;r=new Vt(r||`//www.google.com/images/cleardot.gif`),o.location&&o.location.protocol==`http`||Ut(r,`https`),qt(r),t?ln(r.toString(),n):un(r.toString(),n)}else tt(2);e.I=0,e.l&&e.l.pa(t),Kn(e),Nn(e)}e.bb=function(e){e?(this.j.info(`Successfully pinged google.com`),tt(2)):(this.j.info(`Failed to ping google.com`),tt(1))};function Kn(e){if(e.I=0,e.ja=[],e.l){let t=Rt(e.h);(t.length!=0||e.i.length!=0)&&(m(e.ja,t),m(e.ja,e.i),e.h.i.length=0,p(e.i),e.i.length=0),e.l.oa()}}function qn(e,t,n){var r=n instanceof Vt?Ht(n):new Vt(n);if(r.g!=``)t&&(r.g=t+`.`+r.g),Wt(r,r.u);else{var i=o.location;r=i.protocol,t=t?t+`.`+i.hostname:i.hostname,i=+i.port;let e=new Vt(null);r&&Ut(e,r),t&&(e.g=t),i&&Wt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&Kt(r,n,t),Kt(r,`VER`,e.ka),Ln(e,r),r}function Jn(e,t,n){if(t&&!e.L)throw Error(`Can't create secondary domain capable XhrIo object.`);return t=e.Aa&&!e.ma?new D(new pn({ab:n})):new D(e.ma),t.Fa(e.L),t}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yn(){}e=Yn.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function Xn(){}Xn.prototype.g=function(e,t){return new Zn(e,t)};function Zn(e,t){Ne.call(this),this.g=new An(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e[`X-Client-Protocol`]=`webchannel`:e={"X-Client-Protocol":`webchannel`}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e[`X-WebChannel-Content-Type`]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e[`X-WebChannel-Client-Profile`]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!se(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t&&=t.httpSessionIdParam)&&!se(t)&&(this.g.G=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new er(this)}d(Zn,Ne),Zn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Zn.prototype.close=function(){jn(this.g)},Zn.prototype.o=function(e){var t=this.g;if(typeof e==`string`){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=Ve(e),e=n);t.i.push(new jt(t.Ya++,e)),t.I==3&&Pn(t)},Zn.prototype.N=function(){this.g.l=null,delete this.j,jn(this.g),delete this.g,Zn.Z.N.call(this)};function Qn(e){qe.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){a:{for(let n in t){e=n;break a}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}d(Qn,qe);function $n(){Je.call(this),this.status=1}d($n,Je);function er(e){this.g=e}d(er,Yn),er.prototype.ra=function(){Pe(this.g,`a`)},er.prototype.qa=function(e){Pe(this.g,new Qn(e))},er.prototype.pa=function(e){Pe(this.g,new $n)},er.prototype.oa=function(){Pe(this.g,`b`)},Xn.prototype.createWebChannel=Xn.prototype.g,Zn.prototype.send=Zn.prototype.o,Zn.prototype.open=Zn.prototype.m,Zn.prototype.close=Zn.prototype.close,cd=ed.createWebChannelTransport=function(){return new Xn},sd=ed.getStatEventTarget=function(){return Ze()},od=ed.Event=Ye,ad=ed.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ut.NO_ERROR=0,ut.TIMEOUT=8,ut.HTTP_ERROR=6,id=ed.ErrorCode=ut,dt.COMPLETE=`complete`,rd=ed.EventType=dt,Ge.EventType=Ke,Ke.OPEN=`a`,Ke.CLOSE=`b`,Ke.ERROR=`c`,Ke.MESSAGE=`d`,Ne.prototype.listen=Ne.prototype.J,nd=ed.WebChannel=Ge,ed.FetchXmlHttpFactory=pn,D.prototype.listenOnce=D.prototype.K,D.prototype.getLastError=D.prototype.Ha,D.prototype.getLastErrorCode=D.prototype.ya,D.prototype.getStatus=D.prototype.ca,D.prototype.getResponseJson=D.prototype.La,D.prototype.getResponseText=D.prototype.la,D.prototype.send=D.prototype.ea,D.prototype.setWithCredentials=D.prototype.Fa,td=ed.XhrIo=D}).apply($u===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:$u);var ld=`@firebase/firestore`,ud=`4.9.2`,dd=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?`uid:`+this.uid:`anonymous-user`}isEqual(e){return e.uid===this.uid}};dd.UNAUTHENTICATED=new dd(null),dd.GOOGLE_CREDENTIALS=new dd(`google-credentials-uid`),dd.FIRST_PARTY=new dd(`first-party-uid`),dd.MOCK_USER=new dd(`mock-user`);var fd=`12.3.0`,pd=new hl(`@firebase/firestore`);function md(){return pd.logLevel}function R(e,...t){if(pd.logLevel<=L.DEBUG){let n=t.map(_d);pd.debug(`Firestore (${fd}): ${e}`,...n)}}function hd(e,...t){if(pd.logLevel<=L.ERROR){let n=t.map(_d);pd.error(`Firestore (${fd}): ${e}`,...n)}}function gd(e,...t){if(pd.logLevel<=L.WARN){let n=t.map(_d);pd.warn(`Firestore (${fd}): ${e}`,...n)}}function _d(e){if(typeof e==`string`)return e;try{return function(e){return JSON.stringify(e)}(e)}catch{return e}}function z(e,t,n){let r=`Unexpected state`;typeof t==`string`?r=t:n=t,vd(e,r,n)}function vd(e,t,n){let r=`FIRESTORE (${fd}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=` CONTEXT: `+JSON.stringify(n)}catch{r+=` CONTEXT: `+n}throw hd(r),Error(r)}function B(e,t,n,r){let i=`Unexpected state`;typeof n==`string`?i=n:r=n,e||vd(t,i,r)}function V(e,t){return e}var H={OK:`ok`,CANCELLED:`cancelled`,UNKNOWN:`unknown`,INVALID_ARGUMENT:`invalid-argument`,DEADLINE_EXCEEDED:`deadline-exceeded`,NOT_FOUND:`not-found`,ALREADY_EXISTS:`already-exists`,PERMISSION_DENIED:`permission-denied`,UNAUTHENTICATED:`unauthenticated`,RESOURCE_EXHAUSTED:`resource-exhausted`,FAILED_PRECONDITION:`failed-precondition`,ABORTED:`aborted`,OUT_OF_RANGE:`out-of-range`,UNIMPLEMENTED:`unimplemented`,INTERNAL:`internal`,UNAVAILABLE:`unavailable`,DATA_LOSS:`data-loss`},U=class extends Uc{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}},yd=class{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}},bd=class{constructor(e,t){this.user=t,this.type=`OAuth`,this.headers=new Map,this.headers.set(`Authorization`,`Bearer ${e}`)}},xd=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(dd.UNAUTHENTICATED)))}shutdown(){}},Sd=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}},Cd=class{constructor(e){this.t=e,this.currentUser=dd.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){B(this.o===void 0,42304);let n=this.i,r=e=>this.i===n?Promise.resolve():(n=this.i,t(e)),i=new yd;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new yd,e.enqueueRetryable((()=>r(this.currentUser)))};let a=()=>{let t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{R(`FirebaseAuthCredentialsProvider`,`Auth detected`),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){let e=this.t.getImmediate({optional:!0});e?o(e):(R(`FirebaseAuthCredentialsProvider`,`Auth not yet detected`),i.resolve(),i=new yd)}}),0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i===e?t?(B(typeof t.accessToken==`string`,31837,{l:t}),new bd(t.accessToken,this.currentUser)):null:(R(`FirebaseAuthCredentialsProvider`,`getToken aborted due to token change.`),this.getToken()))):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return B(e===null||typeof e==`string`,2055,{h:e}),new dd(e)}},wd=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type=`FirstParty`,this.user=dd.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set(`X-Goog-AuthUser`,this.P);let e=this.R();return e&&this.A.set(`Authorization`,e),this.T&&this.A.set(`X-Goog-Iam-Authorization-Token`,this.T),this.A}},Td=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new wd(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(dd.FIRST_PARTY)))}shutdown(){}invalidateToken(){}},Ed=class{constructor(e){this.value=e,this.type=`AppCheck`,this.headers=new Map,e&&e.length>0&&this.headers.set(`x-firebase-appcheck`,this.value)}},Dd=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Tu(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){B(this.o===void 0,3512);let n=e=>{e.error!=null&&R(`FirebaseAppCheckTokenProvider`,`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let n=e.token!==this.m;return this.m=e.token,R(`FirebaseAppCheckTokenProvider`,`Received ${n?`new`:`existing`} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};let r=e=>{R(`FirebaseAppCheckTokenProvider`,`AppCheck detected`),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){let e=this.V.getImmediate({optional:!0});e?r(e):R(`FirebaseAppCheckTokenProvider`,`AppCheck not yet detected`)}}),0)}getToken(){if(this.p)return Promise.resolve(new Ed(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(B(typeof e.token==`string`,44558,{tokenResult:e}),this.m=e.token,new Ed(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Od(e){let t=typeof self<`u`&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues==`function`)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}var kd=class{static newId(){let e=``;for(;e.length<20;){let t=Od(40);for(let n=0;n<t.length;++n)e.length<20&&t[n]<248&&(e+=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`.charAt(t[n]%62))}return e}};function W(e,t){return e<t?-1:e>t?1:0}function Ad(e,t){let n=Math.min(e.length,t.length);for(let r=0;r<n;r++){let n=e.charAt(r),i=t.charAt(r);if(n!==i)return Nd(n)===Nd(i)?W(n,i):Nd(n)?1:-1}return W(e.length,t.length)}var jd=55296,Md=57343;function Nd(e){let t=e.charCodeAt(0);return t>=jd&&t<=Md}function Pd(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}var Fd=`__name__`,Id=class e{constructor(e,t,n){t===void 0?t=0:t>e.length&&z(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&z(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(t){return e.comparator(this,t)===0}child(t){let n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((e=>{n.push(e)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){let r=Math.min(t.length,n.length);for(let i=0;i<r;i++){let r=e.compareSegments(t.get(i),n.get(i));if(r!==0)return r}return W(t.length,n.length)}static compareSegments(t,n){let r=e.isNumericId(t),i=e.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?e.extractNumericId(t).compare(e.extractNumericId(n)):Ad(t,n)}static isNumericId(e){return e.startsWith(`__id`)&&e.endsWith(`__`)}static extractNumericId(e){return Zu.fromString(e.substring(4,e.length-2))}},Ld=class e extends Id{construct(t,n,r){return new e(t,n,r)}canonicalString(){return this.toArray().join(`/`)}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join(`/`)}static fromString(...t){let n=[];for(let e of t){if(e.indexOf(`//`)>=0)throw new U(H.INVALID_ARGUMENT,`Invalid segment (${e}). Paths must not contain // in them.`);n.push(...e.split(`/`).filter((e=>e.length>0)))}return new e(n)}static emptyPath(){return new e([])}},Rd=/^[_a-zA-Z][_a-zA-Z0-9]*$/,zd=class e extends Id{construct(t,n,r){return new e(t,n,r)}static isValidIdentifier(e){return Rd.test(e)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,`\\\\`).replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(`.`)}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Fd}static keyField(){return new e([Fd])}static fromServerFormat(t){let n=[],r=``,i=0,a=()=>{if(r.length===0)throw new U(H.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=``},o=!1;for(;i<t.length;){let e=t[i];if(e===`\\`){if(i+1===t.length)throw new U(H.INVALID_ARGUMENT,`Path has trailing escape character: `+t);let e=t[i+1];if(e!==`\\`&&e!==`.`&&e!=="`")throw new U(H.INVALID_ARGUMENT,`Path has invalid escape sequence: `+t);r+=e,i+=2}else e==="`"?(o=!o,i++):e!==`.`||o?(r+=e,i++):(a(),i++)}if(a(),o)throw new U(H.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)}static emptyPath(){return new e([])}},G=class e{constructor(e){this.path=e}static fromPath(t){return new e(Ld.fromString(t))}static fromName(t){return new e(Ld.fromString(t).popFirst(5))}static empty(){return new e(Ld.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ld.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ld.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(t){return new e(new Ld(t.slice()))}};function Bd(e,t,n){if(!n)throw new U(H.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Vd(e,t,n,r){if(!0===t&&!0===r)throw new U(H.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Hd(e){if(!G.isDocumentKey(e))throw new U(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Ud(e){return typeof e==`object`&&!!e&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Wd(e){if(e===void 0)return`undefined`;if(e===null)return`null`;if(typeof e==`string`)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e==`number`||typeof e==`boolean`)return``+e;if(typeof e==`object`){if(e instanceof Array)return`an array`;{let t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:`an object`}}return typeof e==`function`?`a function`:z(12329,{type:typeof e})}function Gd(e,t){if(`_delegate`in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new U(H.INVALID_ARGUMENT,`Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?`);{let n=Wd(e);throw new U(H.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Kd(e,t){let n={typeString:e};return t&&(n.value=t),n}function qd(e,t){if(!Ud(e))throw new U(H.INVALID_ARGUMENT,`JSON must be an object`);let n;for(let r in t)if(t[r]){let i=t[r].typeString,a=`value`in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}let o=e[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new U(H.INVALID_ARGUMENT,n);return!0}var Jd=-62135596800,Yd=1e6,Xd=class e{static now(){return e.fromMillis(Date.now())}static fromDate(t){return e.fromMillis(t.getTime())}static fromMillis(t){let n=Math.floor(t/1e3);return new e(n,Math.floor((t-1e3*n)*Yd))}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new U(H.INVALID_ARGUMENT,`Timestamp nanoseconds out of range: `+t);if(e<Jd||e>=253402300800)throw new U(H.INVALID_ARGUMENT,`Timestamp seconds out of range: `+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Yd}_compareTo(e){return this.seconds===e.seconds?W(this.nanoseconds,e.nanoseconds):W(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return`Timestamp(seconds=`+this.seconds+`, nanoseconds=`+this.nanoseconds+`)`}toJSON(){return{type:e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(qd(t,e._jsonSchema))return new e(t.seconds,t.nanoseconds)}valueOf(){let e=this.seconds-Jd;return String(e).padStart(12,`0`)+`.`+String(this.nanoseconds).padStart(9,`0`)}};Xd._jsonSchemaVersion=`firestore/timestamp/1.0`,Xd._jsonSchema={type:Kd(`string`,Xd._jsonSchemaVersion),seconds:Kd(`number`),nanoseconds:Kd(`number`)};var K=class e{static fromTimestamp(t){return new e(t)}static min(){return new e(new Xd(0,0))}static max(){return new e(new Xd(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return`SnapshotVersion(`+this.timestamp.toString()+`)`}toTimestamp(){return this.timestamp}},Zd=-1,Qd=class{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}};Qd.UNKNOWN_ID=-1;function $d(e,t){let n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1;return new tf(K.fromTimestamp(r===1e9?new Xd(n+1,0):new Xd(n,r)),G.empty(),t)}function ef(e){return new tf(e.readTime,e.key,Zd)}var tf=class e{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new e(K.min(),G.empty(),Zd)}static max(){return new e(K.max(),G.empty(),Zd)}};function nf(e,t){let n=e.readTime.compareTo(t.readTime);return n===0?(n=G.comparator(e.documentKey,t.documentKey),n===0?W(e.largestBatchId,t.largestBatchId):n):n}var rf=`The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.`,af=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}};async function of(e){if(e.code!==H.FAILED_PRECONDITION||e.message!==rf)throw e;R(`LocalStore`,`Unexpectedly lost primary lease`)}var q=class e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(t,n){return this.callbackAttached&&z(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(((e,r)=>{this.nextCallback=n=>{this.wrapSuccess(t,n).next(e,r)},this.catchCallback=t=>{this.wrapFailure(n,t).next(e,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(t){try{let n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):e.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):e.reject(n)}static resolve(t){return new e(((e,n)=>{e(t)}))}static reject(t){return new e(((e,n)=>{n(t)}))}static waitFor(t){return new e(((e,n)=>{let r=0,i=0,a=!1;t.forEach((t=>{++r,t.next((()=>{++i,a&&i===r&&e()}),(e=>n(e)))})),a=!0,i===r&&e()}))}static or(t){let n=e.resolve(!1);for(let r of t)n=n.next((t=>t?e.resolve(t):r()));return n}static forEach(e,t){let n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(t,n){return new e(((e,r)=>{let i=t.length,a=Array(i),o=0;for(let s=0;s<i;s++){let c=s;n(t[c]).next((t=>{a[c]=t,++o,o===i&&e(a)}),(e=>r(e)))}}))}static doWhile(t,n){return new e(((e,r)=>{let i=()=>{!0===t()?n().next((()=>{i()}),r):e()};i()}))}};function sf(e){let t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(`.`).slice(0,2).join(`.`):`-1`;return Number(n)}function cf(e){return e.name===`IndexedDbTransactionError`}var lf=class{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.ue&&this.ue(e),e}};lf.ce=-1;var uf=-1;function df(e){return e==null}function ff(e){return e===0&&1/e==-1/0}function pf(e){return typeof e==`number`&&Number.isInteger(e)&&!ff(e)&&e<=2**53-1&&e>=-(2**53-1)}var mf=``;function hf(e){let t=``;for(let n=0;n<e.length;n++)t.length>0&&(t=_f(t)),t=gf(e.get(n),t);return _f(t)}function gf(e,t){let n=t,r=e.length;for(let t=0;t<r;t++){let r=e.charAt(t);switch(r){case`\0`:n+=``;break;case mf:n+=``;break;default:n+=r}}return n}function _f(e){return e+mf+``}function vf(e){let t=0;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function yf(e,t){for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function bf(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var xf=class e{constructor(e,t){this.comparator=e,this.root=t||Cf.EMPTY}insert(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Cf.BLACK,null,null))}remove(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Cf.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){let e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(`, `)}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sf(this.root,e,this.comparator,!0)}},Sf=class{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Cf=class e{constructor(t,n,r,i,a){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??e.EMPTY,this.right=a??e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,a){return new e(t??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this,i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):i===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){return 2**this.check()<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw z(43730,{key:this.key,value:this.value});if(this.right.isRed())throw z(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw z(27949);return e+(this.isRed()?0:1)}};Cf.EMPTY=null,Cf.RED=!0,Cf.BLACK=!1,Cf.EMPTY=new class{constructor(){this.size=0}get key(){throw z(57766)}get value(){throw z(16141)}get color(){throw z(16727)}get left(){throw z(29726)}get right(){throw z(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new Cf(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var wf=class e{constructor(e){this.comparator=e,this.data=new xf(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){let n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){let r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=t===void 0?this.data.getIterator():this.data.getIteratorFrom(t);n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Tf(this.data.getIterator())}getIteratorFrom(e){return new Tf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){let e=n.getNext().key,t=r.getNext().key;if(this.comparator(e,t)!==0)return!1}return!0}toArray(){let e=[];return this.forEach((t=>{e.push(t)})),e}toString(){let e=[];return this.forEach((t=>e.push(t))),`SortedSet(`+e.toString()+`)`}copy(t){let n=new e(this.comparator);return n.data=t,n}},Tf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}},Ef=class e{constructor(e){this.fields=e,e.sort(zd.comparator)}static empty(){return new e([])}unionWith(t){let n=new wf(zd.comparator);for(let e of this.fields)n=n.add(e);for(let e of t)n=n.add(e);return new e(n.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Pd(this.fields,e.fields,((e,t)=>e.isEqual(t)))}},Df=class extends Error{constructor(){super(...arguments),this.name=`Base64DecodeError`}},Of=class e{constructor(e){this.binaryString=e}static fromBase64String(t){return new e(function(e){try{return atob(e)}catch(e){throw typeof DOMException<`u`&&e instanceof DOMException?new Df(`Invalid base64 string: `+e):e}}(t))}static fromUint8Array(t){return new e(function(e){let t=``;for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return W(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Of.EMPTY_BYTE_STRING=new Of(``);var kf=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Af(e){if(B(!!e,39018),typeof e==`string`){let t=0,n=kf.exec(e);if(B(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+`000000000`).substr(0,9),t=Number(e)}let r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:jf(e.seconds),nanos:jf(e.nanos)}}function jf(e){return typeof e==`number`?e:typeof e==`string`?Number(e):0}function Mf(e){return typeof e==`string`?Of.fromBase64String(e):Of.fromUint8Array(e)}var Nf=`server_timestamp`,Pf=`__type__`,Ff=`__previous_value__`,If=`__local_write_time__`;function Lf(e){return(e?.mapValue?.fields||{})[Pf]?.stringValue===Nf}function Rf(e){let t=e.mapValue.fields[Ff];return Lf(t)?Rf(t):t}function zf(e){let t=Af(e.mapValue.fields[If].timestampValue);return new Xd(t.seconds,t.nanos)}var Bf=class{constructor(e,t,n,r,i,a,o,s,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=s,this.useFetchStreams=c,this.isUsingEmulator=l}},Vf=`(default)`,Hf=class e{constructor(e,t){this.projectId=e,this.database=t||Vf}static empty(){return new e(``,``)}get isDefaultDatabase(){return this.database===Vf}isEqual(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}},Uf=`__type__`,Wf=`__max__`,Gf={mapValue:{fields:{__type__:{stringValue:Wf}}}},Kf=`__vector__`,qf=`value`;function Jf(e){return`nullValue`in e?0:`booleanValue`in e?1:`integerValue`in e||`doubleValue`in e?2:`timestampValue`in e?3:`stringValue`in e?5:`bytesValue`in e?6:`referenceValue`in e?7:`geoPointValue`in e?8:`arrayValue`in e?9:`mapValue`in e?Lf(e)?4:up(e)?9007199254740991:cp(e)?10:11:z(28295,{value:e})}function Yf(e,t){if(e===t)return!0;let n=Jf(e);if(n!==Jf(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return zf(e).isEqual(zf(t));case 3:return function(e,t){if(typeof e.timestampValue==`string`&&typeof t.timestampValue==`string`&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let n=Af(e.timestampValue),r=Af(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Mf(e.bytesValue).isEqual(Mf(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return jf(e.geoPointValue.latitude)===jf(t.geoPointValue.latitude)&&jf(e.geoPointValue.longitude)===jf(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if(`integerValue`in e&&`integerValue`in t)return jf(e.integerValue)===jf(t.integerValue);if(`doubleValue`in e&&`doubleValue`in t){let n=jf(e.doubleValue),r=jf(t.doubleValue);return n===r?ff(n)===ff(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Pd(e.arrayValue.values||[],t.arrayValue.values||[],Yf);case 10:case 11:return function(e,t){let n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(vf(n)!==vf(r))return!1;for(let e in n)if(n.hasOwnProperty(e)&&(r[e]===void 0||!Yf(n[e],r[e])))return!1;return!0}(e,t);default:return z(52216,{left:e})}}function Xf(e,t){return(e.values||[]).find((e=>Yf(e,t)))!==void 0}function Zf(e,t){if(e===t)return 0;let n=Jf(e),r=Jf(t);if(n!==r)return W(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return W(e.booleanValue,t.booleanValue);case 2:return function(e,t){let n=jf(e.integerValue||e.doubleValue),r=jf(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Qf(e.timestampValue,t.timestampValue);case 4:return Qf(zf(e),zf(t));case 5:return Ad(e.stringValue,t.stringValue);case 6:return function(e,t){let n=Mf(e),r=Mf(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){let n=e.split(`/`),r=t.split(`/`);for(let e=0;e<n.length&&e<r.length;e++){let t=W(n[e],r[e]);if(t!==0)return t}return W(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){let n=W(jf(e.latitude),jf(t.latitude));return n===0?W(jf(e.longitude),jf(t.longitude)):n}(e.geoPointValue,t.geoPointValue);case 9:return $f(e.arrayValue,t.arrayValue);case 10:return function(e,t){let n=e.fields||{},r=t.fields||{},i=n[qf]?.arrayValue,a=r[qf]?.arrayValue,o=W(i?.values?.length||0,a?.values?.length||0);return o===0?$f(i,a):o}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Gf.mapValue&&t===Gf.mapValue)return 0;if(e===Gf.mapValue)return 1;if(t===Gf.mapValue)return-1;let n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(let e=0;e<r.length&&e<a.length;++e){let t=Ad(r[e],a[e]);if(t!==0)return t;let o=Zf(n[r[e]],i[a[e]]);if(o!==0)return o}return W(r.length,a.length)}(e.mapValue,t.mapValue);default:throw z(23264,{he:n})}}function Qf(e,t){if(typeof e==`string`&&typeof t==`string`&&e.length===t.length)return W(e,t);let n=Af(e),r=Af(t),i=W(n.seconds,r.seconds);return i===0?W(n.nanos,r.nanos):i}function $f(e,t){let n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){let t=Zf(n[e],r[e]);if(t)return t}return W(n.length,r.length)}function ep(e){return tp(e)}function tp(e){return`nullValue`in e?`null`:`booleanValue`in e?``+e.booleanValue:`integerValue`in e?``+e.integerValue:`doubleValue`in e?``+e.doubleValue:`timestampValue`in e?function(e){let t=Af(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):`stringValue`in e?e.stringValue:`bytesValue`in e?function(e){return Mf(e).toBase64()}(e.bytesValue):`referenceValue`in e?function(e){return G.fromName(e).toString()}(e.referenceValue):`geoPointValue`in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):`arrayValue`in e?function(e){let t=`[`,n=!0;for(let r of e.values||[])n?n=!1:t+=`,`,t+=tp(r);return t+`]`}(e.arrayValue):`mapValue`in e?function(e){let t=Object.keys(e.fields||{}).sort(),n=`{`,r=!0;for(let i of t)r?r=!1:n+=`,`,n+=`${i}:${tp(e.fields[i])}`;return n+`}`}(e.mapValue):z(61005,{value:e})}function np(e){switch(Jf(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let t=Rf(e);return t?16+np(t):16;case 5:return 2*e.stringValue.length;case 6:return Mf(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+np(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return yf(e.fields,((e,n)=>{t+=e.length+np(n)})),t}(e.mapValue);default:throw z(13486,{value:e})}}function rp(e){return!!e&&`integerValue`in e}function ip(e){return!!e&&`arrayValue`in e}function ap(e){return!!e&&`nullValue`in e}function op(e){return!!e&&`doubleValue`in e&&isNaN(Number(e.doubleValue))}function sp(e){return!!e&&`mapValue`in e}function cp(e){return(e?.mapValue?.fields||{})[Uf]?.stringValue===Kf}function lp(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue==`object`)return{timestampValue:{...e.timestampValue}};if(e.mapValue){let t={mapValue:{fields:{}}};return yf(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=lp(n))),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=lp(e.arrayValue.values[n]);return t}return{...e}}function up(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Wf}var dp=class e{constructor(e){this.value=e}static empty(){return new e({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!sp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lp(t)}setAll(e){let t=zd.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){let e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=lp(e):r.push(i.lastSegment())}));let i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){let t=this.field(e.popLast());sp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yf(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];sp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){yf(t,((t,n)=>e[t]=n));for(let t of n)delete e[t]}clone(){return new e(lp(this.value))}};function fp(e){let t=[];return yf(e.fields,((e,n)=>{let r=new zd([e]);if(sp(n)){let e=fp(n.mapValue).fields;if(e.length===0)t.push(r);else for(let n of e)t.push(r.child(n))}else t.push(r)})),new Ef(t)}var pp=class e{constructor(e,t,n,r,i,a,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(t){return new e(t,0,K.min(),K.min(),K.min(),dp.empty(),0)}static newFoundDocument(t,n,r,i){return new e(t,1,n,K.min(),r,i,0)}static newNoDocument(t,n){return new e(t,2,n,K.min(),K.min(),dp.empty(),0)}static newUnknownDocument(t,n){return new e(t,3,n,K.min(),K.min(),dp.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(K.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dp.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dp.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=K.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}},mp=class{constructor(e,t){this.position=e,this.inclusive=t}};function hp(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){let a=t[i],o=e.position[i];if(r=a.field.isKeyField()?G.comparator(G.fromName(o.referenceValue),n.key):Zf(o,n.data.field(a.field)),a.dir===`desc`&&(r*=-1),r!==0)break}return r}function gp(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Yf(e.position[n],t.position[n]))return!1;return!0}var _p=class{constructor(e,t=`asc`){this.field=e,this.dir=t}};function vp(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var yp=class{},bp=class e extends yp{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(t,n,r){return t.isKeyField()?n===`in`||n===`not-in`?this.createKeyFieldInFilter(t,n,r):new Op(t,n,r):n===`array-contains`?new Mp(t,r):n===`in`?new Np(t,r):n===`not-in`?new Pp(t,r):n===`array-contains-any`?new Fp(t,r):new e(t,n,r)}static createKeyFieldInFilter(e,t,n){return t===`in`?new kp(e,n):new Ap(e,n)}matches(e){let t=e.data.field(this.field);return this.op===`!=`?t!==null&&t.nullValue===void 0&&this.matchesComparison(Zf(t,this.value)):t!==null&&Jf(this.value)===Jf(t)&&this.matchesComparison(Zf(t,this.value))}matchesComparison(e){switch(this.op){case`<`:return e<0;case`<=`:return e<=0;case`==`:return e===0;case`!=`:return e!==0;case`>`:return e>0;case`>=`:return e>=0;default:return z(47266,{operator:this.op})}}isInequality(){return[`<`,`<=`,`>`,`>=`,`!=`,`not-in`].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},xp=class e extends yp{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(t,n){return new e(t,n)}matches(e){return Sp(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function Sp(e){return e.op===`and`}function Cp(e){return wp(e)&&Sp(e)}function wp(e){for(let t of e.filters)if(t instanceof xp)return!1;return!0}function Tp(e){if(e instanceof bp)return e.field.canonicalString()+e.op.toString()+ep(e.value);if(Cp(e))return e.filters.map((e=>Tp(e))).join(`,`);{let t=e.filters.map((e=>Tp(e))).join(`,`);return`${e.op}(${t})`}}function Ep(e,t){return e instanceof bp?function(e,t){return t instanceof bp&&e.op===t.op&&e.field.isEqual(t.field)&&Yf(e.value,t.value)}(e,t):e instanceof xp?function(e,t){return t instanceof xp&&e.op===t.op&&e.filters.length===t.filters.length?e.filters.reduce(((e,n,r)=>e&&Ep(n,t.filters[r])),!0):!1}(e,t):void z(19439)}function Dp(e){return e instanceof bp?function(e){return`${e.field.canonicalString()} ${e.op} ${ep(e.value)}`}(e):e instanceof xp?function(e){return e.op.toString()+` {`+e.getFilters().map(Dp).join(` ,`)+`}`}(e):`Filter`}var Op=class extends bp{constructor(e,t,n){super(e,t,n),this.key=G.fromName(n.referenceValue)}matches(e){let t=G.comparator(e.key,this.key);return this.matchesComparison(t)}},kp=class extends bp{constructor(e,t){super(e,`in`,t),this.keys=jp(`in`,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}},Ap=class extends bp{constructor(e,t){super(e,`not-in`,t),this.keys=jp(`not-in`,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}};function jp(e,t){return(t.arrayValue?.values||[]).map((e=>G.fromName(e.referenceValue)))}var Mp=class extends bp{constructor(e,t){super(e,`array-contains`,t)}matches(e){let t=e.data.field(this.field);return ip(t)&&Xf(t.arrayValue,this.value)}},Np=class extends bp{constructor(e,t){super(e,`in`,t)}matches(e){let t=e.data.field(this.field);return t!==null&&Xf(this.value.arrayValue,t)}},Pp=class extends bp{constructor(e,t){super(e,`not-in`,t)}matches(e){if(Xf(this.value.arrayValue,{nullValue:`NULL_VALUE`}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Xf(this.value.arrayValue,t)}},Fp=class extends bp{constructor(e,t){super(e,`array-contains-any`,t)}matches(e){let t=e.data.field(this.field);return!(!ip(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Xf(this.value.arrayValue,e)))}},Ip=class{constructor(e,t=null,n=[],r=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=a,this.endAt=o,this.Te=null}};function Lp(e,t=null,n=[],r=[],i=null,a=null,o=null){return new Ip(e,t,n,r,i,a,o)}function Rp(e){let t=V(e);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+=`|cg:`+t.collectionGroup),e+=`|f:`,e+=t.filters.map((e=>Tp(e))).join(`,`),e+=`|ob:`,e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(`,`),df(t.limit)||(e+=`|l:`,e+=t.limit),t.startAt&&(e+=`|lb:`,e+=t.startAt.inclusive?`b:`:`a:`,e+=t.startAt.position.map((e=>ep(e))).join(`,`)),t.endAt&&(e+=`|ub:`,e+=t.endAt.inclusive?`a:`:`b:`,e+=t.endAt.position.map((e=>ep(e))).join(`,`)),t.Te=e}return t.Te}function zp(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!vp(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Ep(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!gp(e.startAt,t.startAt)&&gp(e.endAt,t.endAt)}function Bp(e){return G.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}var Vp=class{constructor(e,t=null,n=[],r=[],i=null,a=`F`,o=null,s=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=s,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function Hp(e,t,n,r,i,a,o,s){return new Vp(e,t,n,r,i,a,o,s)}function Up(e){return new Vp(e)}function Wp(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Gp(e){return e.collectionGroup!==null}function Kp(e){let t=V(e);if(t.Ie===null){t.Ie=[];let e=new Set;for(let n of t.explicitOrderBy)t.Ie.push(n),e.add(n.field.canonicalString());let n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:`asc`;(function(e){let t=new wf(zd.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t})(t).forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new _p(r,n))})),e.has(zd.keyField().canonicalString())||t.Ie.push(new _p(zd.keyField(),n))}return t.Ie}function qp(e){let t=V(e);return t.Ee||=Jp(t,Kp(e)),t.Ee}function Jp(e,t){if(e.limitType===`F`)return Lp(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{let t=e.dir===`desc`?`asc`:`desc`;return new _p(e.field,t)}));let n=e.endAt?new mp(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new mp(e.startAt.position,e.startAt.inclusive):null;return Lp(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Yp(e,t,n){return new Vp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Xp(e,t){return zp(qp(e),qp(t))&&e.limitType===t.limitType}function Zp(e){return`${Rp(qp(e))}|lt:${e.limitType}`}function Qp(e){return`Query(target=${function(e){let t=e.path.canonicalString();return e.collectionGroup!==null&&(t+=` collectionGroup=`+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>Dp(e))).join(`, `)}]`),df(e.limit)||(t+=`, limit: `+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(`, `)}]`),e.startAt&&(t+=`, startAt: `,t+=e.startAt.inclusive?`b:`:`a:`,t+=e.startAt.position.map((e=>ep(e))).join(`,`)),e.endAt&&(t+=`, endAt: `,t+=e.endAt.inclusive?`a:`:`b:`,t+=e.endAt.position.map((e=>ep(e))).join(`,`)),`Target(${t})`}(qp(e))}; limitType=${e.limitType})`}function $p(e,t){return t.isFoundDocument()&&function(e,t){let n=t.key.path;return e.collectionGroup===null?G.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n):t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n)}(e,t)&&function(e,t){for(let n of Kp(e))if(!n.field.isKeyField()&&t.data.field(n.field)===null)return!1;return!0}(e,t)&&function(e,t){for(let n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){let r=hp(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Kp(e),t)||e.endAt&&!function(e,t,n){let r=hp(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Kp(e),t))}(e,t)}function em(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function tm(e){return(t,n)=>{let r=!1;for(let i of Kp(e)){let e=nm(i,t,n);if(e!==0)return e;r||=i.field.isKeyField()}return 0}}function nm(e,t,n){let r=e.field.isKeyField()?G.comparator(t.key,n.key):function(e,t,n){let r=t.data.field(e),i=n.data.field(e);return r!==null&&i!==null?Zf(r,i):z(42886)}(e.field,t,n);switch(e.dir){case`asc`:return r;case`desc`:return-1*r;default:return z(19790,{direction:e.dir})}}var rm=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(let[t,r]of n)if(this.equalsFn(t,e))return r}}has(e){return this.get(e)!==void 0}set(e,t){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){yf(this.inner,((t,n)=>{for(let[t,r]of n)e(t,r)}))}isEmpty(){return bf(this.inner)}size(){return this.innerSize}},im=new xf(G.comparator);function am(){return im}var om=new xf(G.comparator);function sm(...e){let t=om;for(let n of e)t=t.insert(n.key,n);return t}function cm(e){let t=om;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function lm(){return dm()}function um(){return dm()}function dm(){return new rm((e=>e.toString()),((e,t)=>e.isEqual(t)))}var fm=new xf(G.comparator),pm=new wf(G.comparator);function J(...e){let t=pm;for(let n of e)t=t.add(n);return t}var mm=new wf(W);function hm(){return mm}function gm(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:`NaN`};if(t===1/0)return{doubleValue:`Infinity`};if(t===-1/0)return{doubleValue:`-Infinity`}}return{doubleValue:ff(t)?`-0`:t}}function _m(e){return{integerValue:``+e}}function vm(e,t){return pf(t)?_m(t):gm(e,t)}var ym=class{constructor(){this._=void 0}};function bm(e,t,n){return e instanceof Cm?function(e,t){let n={fields:{[Pf]:{stringValue:Nf},[If]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Lf(t)&&(t=Rf(t)),t&&(n.fields[Ff]=t),{mapValue:n}}(n,t):e instanceof wm?Tm(e,t):e instanceof Em?Dm(e,t):function(e,t){let n=Sm(e,t),r=km(n)+km(e.Ae);return rp(n)&&rp(e.Ae)?_m(r):gm(e.serializer,r)}(e,t)}function xm(e,t,n){return e instanceof wm?Tm(e,t):e instanceof Em?Dm(e,t):n}function Sm(e,t){return e instanceof Om?function(e){return rp(e)||function(e){return!!e&&`doubleValue`in e}(e)}(t)?t:{integerValue:0}:null}var Cm=class extends ym{},wm=class extends ym{constructor(e){super(),this.elements=e}};function Tm(e,t){let n=Am(t);for(let t of e.elements)n.some((e=>Yf(e,t)))||n.push(t);return{arrayValue:{values:n}}}var Em=class extends ym{constructor(e){super(),this.elements=e}};function Dm(e,t){let n=Am(t);for(let t of e.elements)n=n.filter((e=>!Yf(e,t)));return{arrayValue:{values:n}}}var Om=class extends ym{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function km(e){return jf(e.integerValue||e.doubleValue)}function Am(e){return ip(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function jm(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof wm&&t instanceof wm||e instanceof Em&&t instanceof Em?Pd(e.elements,t.elements,Yf):e instanceof Om&&t instanceof Om?Yf(e.Ae,t.Ae):e instanceof Cm&&t instanceof Cm}(e.transform,t.transform)}var Mm=class{constructor(e,t){this.version=e,this.transformResults=t}},Nm=class e{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new e}static exists(t){return new e(void 0,t)}static updateTime(t){return new e(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Pm(e,t){return e.updateTime===void 0?e.exists===void 0||e.exists===t.isFoundDocument():t.isFoundDocument()&&t.version.isEqual(e.updateTime)}var Fm=class{};function Im(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Km(e.key,Nm.none()):new Vm(e.key,e.data,Nm.none());{let n=e.data,r=dp.empty(),i=new wf(zd.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);t===null&&e.length>1&&(e=e.popLast(),t=n.field(e)),t===null?r.delete(e):r.set(e,t),i=i.add(e)}return new Hm(e.key,r,new Ef(i.toArray()),Nm.none())}}function Lm(e,t,n){e instanceof Vm?function(e,t,n){let r=e.value.clone(),i=Wm(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Hm?function(e,t,n){if(!Pm(e.precondition,t))return void t.convertToUnknownDocument(n.version);let r=Wm(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Um(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Rm(e,t,n,r){return e instanceof Vm?function(e,t,n,r){if(!Pm(e.precondition,t))return n;let i=e.value.clone(),a=Gm(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Hm?function(e,t,n,r){if(!Pm(e.precondition,t))return n;let i=Gm(e.fieldTransforms,r,t),a=t.data;return a.setAll(Um(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),n===null?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Pm(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function zm(e,t){let n=null;for(let r of e.fieldTransforms){let e=t.data.field(r.field),i=Sm(r.transform,e||null);i!=null&&(n===null&&(n=dp.empty()),n.set(r.field,i))}return n||null}function Bm(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return e===void 0&&t===void 0||!(!e||!t)&&Pd(e,t,((e,t)=>jm(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Vm=class extends Fm{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Hm=class extends Fm{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}};function Um(e){let t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){let r=e.data.field(n);t.set(n,r)}})),t}function Wm(e,t,n){let r=new Map;B(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){let a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,xm(o,s,n[i]))}return r}function Gm(e,t,n){let r=new Map;for(let i of e){let e=i.transform,a=n.data.field(i.field);r.set(i.field,bm(e,a,t))}return r}var Km=class extends Fm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},qm=class extends Fm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}},Jm=class{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){let n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let r=this.mutations[t];r.key.isEqual(e.key)&&Lm(r,e,n[t])}}applyToLocalView(e,t){for(let n of this.baseMutations)n.key.isEqual(e.key)&&(t=Rm(n,e,t,this.localWriteTime));for(let n of this.mutations)n.key.isEqual(e.key)&&(t=Rm(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let n=um();return this.mutations.forEach((r=>{let i=e.get(r.key),a=i.overlayedDocument,o=this.applyToLocalView(a,i.mutatedFields);o=t.has(r.key)?null:o;let s=Im(a,o);s!==null&&n.set(r.key,s),a.isValidDocument()||a.convertToNoDocument(K.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),J())}isEqual(e){return this.batchId===e.batchId&&Pd(this.mutations,e.mutations,((e,t)=>Bm(e,t)))&&Pd(this.baseMutations,e.baseMutations,((e,t)=>Bm(e,t)))}},Ym=class e{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(t,n,r){B(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let i=function(){return fm}(),a=t.mutations;for(let e=0;e<a.length;e++)i=i.insert(a[e].key,r[e].version);return new e(t,n,r,i)}},Xm=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}},Zm=class{constructor(e,t){this.count=e,this.unchangedNames=t}},Qm,Y;function $m(e){switch(e){case H.OK:return z(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return z(15467,{code:e})}}function eh(e){if(e===void 0)return hd(`GRPC error has no .code`),H.UNKNOWN;switch(e){case Qm.OK:return H.OK;case Qm.CANCELLED:return H.CANCELLED;case Qm.UNKNOWN:return H.UNKNOWN;case Qm.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case Qm.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case Qm.INTERNAL:return H.INTERNAL;case Qm.UNAVAILABLE:return H.UNAVAILABLE;case Qm.UNAUTHENTICATED:return H.UNAUTHENTICATED;case Qm.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case Qm.NOT_FOUND:return H.NOT_FOUND;case Qm.ALREADY_EXISTS:return H.ALREADY_EXISTS;case Qm.PERMISSION_DENIED:return H.PERMISSION_DENIED;case Qm.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case Qm.ABORTED:return H.ABORTED;case Qm.OUT_OF_RANGE:return H.OUT_OF_RANGE;case Qm.UNIMPLEMENTED:return H.UNIMPLEMENTED;case Qm.DATA_LOSS:return H.DATA_LOSS;default:return z(39323,{code:e})}}(Y=Qm||={})[Y.OK=0]=`OK`,Y[Y.CANCELLED=1]=`CANCELLED`,Y[Y.UNKNOWN=2]=`UNKNOWN`,Y[Y.INVALID_ARGUMENT=3]=`INVALID_ARGUMENT`,Y[Y.DEADLINE_EXCEEDED=4]=`DEADLINE_EXCEEDED`,Y[Y.NOT_FOUND=5]=`NOT_FOUND`,Y[Y.ALREADY_EXISTS=6]=`ALREADY_EXISTS`,Y[Y.PERMISSION_DENIED=7]=`PERMISSION_DENIED`,Y[Y.UNAUTHENTICATED=16]=`UNAUTHENTICATED`,Y[Y.RESOURCE_EXHAUSTED=8]=`RESOURCE_EXHAUSTED`,Y[Y.FAILED_PRECONDITION=9]=`FAILED_PRECONDITION`,Y[Y.ABORTED=10]=`ABORTED`,Y[Y.OUT_OF_RANGE=11]=`OUT_OF_RANGE`,Y[Y.UNIMPLEMENTED=12]=`UNIMPLEMENTED`,Y[Y.INTERNAL=13]=`INTERNAL`,Y[Y.UNAVAILABLE=14]=`UNAVAILABLE`,Y[Y.DATA_LOSS=15]=`DATA_LOSS`;var th=null;function nh(){return new TextEncoder}var rh=new Zu([4294967295,4294967295],0);function ih(e){let t=nh().encode(e),n=new Qu;return n.update(t),new Uint8Array(n.digest())}function ah(e){let t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Zu([n,r],0),new Zu([i,a],0)]}var oh=class e{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new sh(`Invalid padding: ${t}`);if(n<0||e.length>0&&this.hashCount===0)throw new sh(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new sh(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Zu.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(Zu.fromNumber(n)));return r.compare(rh)===1&&(r=new Zu([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let[t,n]=ah(ih(e));for(let e=0;e<this.hashCount;e++){let r=this.ye(t,n,e);if(!this.we(r))return!1}return!0}static create(t,n,r){let i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((e=>a.insert(e))),a}insert(e){if(this.ge===0)return;let[t,n]=ah(ih(e));for(let e=0;e<this.hashCount;e++){let r=this.ye(t,n,e);this.Se(r)}}Se(e){let t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}},sh=class extends Error{constructor(){super(...arguments),this.name=`BloomFilterError`}},ch=class e{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){let i=new Map;return i.set(t,lh.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(K.min(),i,new xf(W),am(),J())}},lh=class e{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new e(r,n,J(),J(),J())}},uh=class{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}},dh=class{constructor(e,t){this.targetId=e,this.Ce=t}},fh=class{constructor(e,t,n=Of.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}},ph=class{constructor(){this.ve=0,this.Fe=gh(),this.Me=Of.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=J(),t=J(),n=J();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:z(38017,{changeType:i})}})),new lh(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=gh()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){--this.ve,B(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},mh=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=am(),this.Je=hh(),this.He=hh(),this.Ye=new xf(W)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{let n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:z(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((e,n)=>{this.rt(n)&&t(n)}))}st(e){let t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){let i=r.target;if(Bp(i))if(n===0){let e=new G(i.path);this.et(t,e,pp.newNoDocument(e,K.min()))}else B(n===1,20013,{expectedCount:n});else{let r=this._t(t);if(r!==n){let n=this.ut(e),i=n?this.ct(n,e,r):1;if(i!==0){this.it(t);let e=i===2?`TargetPurposeExistenceFilterMismatchBloom`:`TargetPurposeExistenceFilterMismatch`;this.Ye=this.Ye.insert(t,e)}th?.lt(function(e,t,n,r,i){let a={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},o=t.unchangedNames;return o&&(a.bloomFilter={applied:i===0,hashCount:o?.hashCount??0,bitmapLength:o?.bits?.bitmap?.length??0,padding:o?.bits?.padding??0,mightContain:e=>r?.mightContain(e)??!1}),a}(r,e.Ce,this.Ge.ht(),n,i))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:n=``,padding:r=0},hashCount:i=0}=t,a,o;try{a=Mf(n).toUint8Array()}catch(e){if(e instanceof Df)return gd(`Decoding the base64 bloom filter in existence filter failed (`+e.message+`); ignoring the bloom filter and falling back to full re-query.`),null;throw e}try{o=new oh(a,r,i)}catch(e){return gd(e instanceof sh?`BloomFilter error: `:`Applying bloom filter failed: `,e),null}return o.ge===0?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){let n=this.Ge.getRemoteKeysForTarget(t),r=0;return n.forEach((n=>{let i=this.Ge.ht(),a=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(a)||(this.et(t,n,null),r++)})),r}Tt(e){let t=new Map;this.ze.forEach(((n,r)=>{let i=this.ot(r);if(i){if(n.current&&Bp(i.target)){let t=new G(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,pp.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}}));let n=J();this.He.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{let t=this.ot(e);return!t||t.purpose===`TargetPurposeLimboResolution`||(r=!1,!1)})),r&&(n=n.add(e))})),this.je.forEach(((t,n)=>n.setReadTime(e)));let r=new ch(e,t,this.Ye,this.je,n);return this.je=am(),this.Je=hh(),this.He=hh(),this.Ye=new xf(W),r}Xe(e,t){if(!this.rt(e))return;let n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;let r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new ph,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new wf(W),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new wf(W),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||R(`WatchChangeAggregator`,`Detected inactive target`,e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ph),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function hh(){return new xf(G.comparator)}function gh(){return new xf(G.comparator)}var _h=(()=>({asc:`ASCENDING`,desc:`DESCENDING`}))(),vh=(()=>({"<":`LESS_THAN`,"<=":`LESS_THAN_OR_EQUAL`,">":`GREATER_THAN`,">=":`GREATER_THAN_OR_EQUAL`,"==":`EQUAL`,"!=":`NOT_EQUAL`,"array-contains":`ARRAY_CONTAINS`,in:`IN`,"not-in":`NOT_IN`,"array-contains-any":`ARRAY_CONTAINS_ANY`}))(),yh=(()=>({and:`AND`,or:`OR`}))(),bh=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function xh(e,t){return e.useProto3Json||df(t)?t:{value:t}}function Sh(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,``).replace(`Z`,``)}.${(`000000000`+t.nanoseconds).slice(-9)}Z`:{seconds:``+t.seconds,nanos:t.nanoseconds}}function Ch(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function wh(e,t){return Sh(e,t.toTimestamp())}function Th(e){return B(!!e,49232),K.fromTimestamp(function(e){let t=Af(e);return new Xd(t.seconds,t.nanos)}(e))}function Eh(e,t){return Dh(e,t).canonicalString()}function Dh(e,t){let n=function(e){return new Ld([`projects`,e.projectId,`databases`,e.database])}(e).child(`documents`);return t===void 0?n:n.child(t)}function Oh(e){let t=Ld.fromString(e);return B(Zh(t),10190,{key:t.toString()}),t}function kh(e,t){return Eh(e.databaseId,t.path)}function Ah(e,t){let n=Oh(t);if(n.get(1)!==e.databaseId.projectId)throw new U(H.INVALID_ARGUMENT,`Tried to deserialize key from different project: `+n.get(1)+` vs `+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new U(H.INVALID_ARGUMENT,`Tried to deserialize key from different database: `+n.get(3)+` vs `+e.databaseId.database);return new G(Ph(n))}function jh(e,t){return Eh(e.databaseId,t)}function Mh(e){let t=Oh(e);return t.length===4?Ld.emptyPath():Ph(t)}function Nh(e){return new Ld([`projects`,e.databaseId.projectId,`databases`,e.databaseId.database]).canonicalString()}function Ph(e){return B(e.length>4&&e.get(4)===`documents`,29091,{key:e.toString()}),e.popFirst(5)}function Fh(e,t,n){return{name:kh(e,t),fields:n.value.mapValue.fields}}function Ih(e,t){let n;if(`targetChange`in t){t.targetChange;let r=function(e){return e===`NO_CHANGE`?0:e===`ADD`?1:e===`REMOVE`?2:e===`CURRENT`?3:e===`RESET`?4:z(39313,{state:e})}(t.targetChange.targetChangeType||`NO_CHANGE`),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(B(t===void 0||typeof t==`string`,58123),Of.fromBase64String(t||``)):(B(t===void 0||t instanceof Buffer||t instanceof Uint8Array,16193),Of.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause;n=new fh(r,i,a,o&&function(e){return new U(e.code===void 0?H.UNKNOWN:eh(e.code),e.message||``)}(o)||null)}else if(`documentChange`in t){t.documentChange;let r=t.documentChange;r.document,r.document.name,r.document.updateTime;let i=Ah(e,r.document.name),a=Th(r.document.updateTime),o=r.document.createTime?Th(r.document.createTime):K.min(),s=new dp({mapValue:{fields:r.document.fields}}),c=pp.newFoundDocument(i,a,o,s);n=new uh(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if(`documentDelete`in t){t.documentDelete;let r=t.documentDelete;r.document;let i=Ah(e,r.document),a=r.readTime?Th(r.readTime):K.min(),o=pp.newNoDocument(i,a);n=new uh([],r.removedTargetIds||[],o.key,o)}else if(`documentRemove`in t){t.documentRemove;let r=t.documentRemove;r.document;let i=Ah(e,r.document);n=new uh([],r.removedTargetIds||[],i,null)}else{if(!(`filter`in t))return z(11601,{Rt:t});{t.filter;let e=t.filter;e.targetId;let{count:r=0,unchangedNames:i}=e,a=new Zm(r,i),o=e.targetId;n=new dh(o,a)}}return n}function Lh(e,t){let n;if(t instanceof Vm)n={update:Fh(e,t.key,t.value)};else if(t instanceof Km)n={delete:kh(e,t.key)};else if(t instanceof Hm)n={update:Fh(e,t.key,t.data),updateMask:Xh(t.fieldMask)};else{if(!(t instanceof qm))return z(16599,{Vt:t.type});n={verify:kh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){let n=t.transform;if(n instanceof Cm)return{fieldPath:t.field.canonicalString(),setToServerValue:`REQUEST_TIME`};if(n instanceof wm)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Em)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Om)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw z(20930,{transform:t.transform})}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return t.updateTime===void 0?t.exists===void 0?z(27497):{exists:t.exists}:{updateTime:wh(e,t.updateTime)}}(e,t.precondition)),n}function Rh(e,t){return e&&e.length>0?(B(t!==void 0,14353),e.map((e=>function(e,t){let n=e.updateTime?Th(e.updateTime):Th(t);return n.isEqual(K.min())&&(n=Th(t)),new Mm(n,e.transformResults||[])}(e,t)))):[]}function zh(e,t){return{documents:[jh(e,t.path)]}}function Bh(e,t){let n={structuredQuery:{}},r=t.path,i;t.collectionGroup===null?(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]):(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]),n.parent=jh(e,i);let a=function(e){if(e.length!==0)return Yh(xp.create(e,`and`))}(t.filters);a&&(n.structuredQuery.where=a);let o=function(e){if(e.length!==0)return e.map((e=>function(e){return{field:qh(e.field),direction:Wh(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);let s=xh(e,t.limit);return s!==null&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function Vh(e){let t=Mh(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){B(r===1,65062);let e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let a=[];n.where&&(a=function(e){let t=Uh(e);return t instanceof xp&&Cp(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new _p(Jh(e.field),function(e){switch(e){case`ASCENDING`:return`asc`;case`DESCENDING`:return`desc`;default:return}}(e.direction))}(e)))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t=typeof e==`object`?e.value:e,df(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){let t=!!e.before;return new mp(e.values||[],t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){let t=!e.before;return new mp(e.values||[],t)}(n.endAt)),Hp(t,i,o,a,s,`F`,c,l)}function Hh(e,t){let n=function(e){switch(e){case`TargetPurposeListen`:return null;case`TargetPurposeExistenceFilterMismatch`:return`existence-filter-mismatch`;case`TargetPurposeExistenceFilterMismatchBloom`:return`existence-filter-mismatch-bloom`;case`TargetPurposeLimboResolution`:return`limbo-document`;default:return z(28987,{purpose:e})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Uh(e){return e.unaryFilter===void 0?e.fieldFilter===void 0?e.compositeFilter===void 0?z(30097,{filter:e}):function(e){return xp.create(e.compositeFilter.filters.map((e=>Uh(e))),function(e){switch(e){case`AND`:return`and`;case`OR`:return`or`;default:return z(1026)}}(e.compositeFilter.op))}(e):function(e){return bp.create(Jh(e.fieldFilter.field),function(e){switch(e){case`EQUAL`:return`==`;case`NOT_EQUAL`:return`!=`;case`GREATER_THAN`:return`>`;case`GREATER_THAN_OR_EQUAL`:return`>=`;case`LESS_THAN`:return`<`;case`LESS_THAN_OR_EQUAL`:return`<=`;case`ARRAY_CONTAINS`:return`array-contains`;case`IN`:return`in`;case`NOT_IN`:return`not-in`;case`ARRAY_CONTAINS_ANY`:return`array-contains-any`;case`OPERATOR_UNSPECIFIED`:return z(58110);default:return z(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):function(e){switch(e.unaryFilter.op){case`IS_NAN`:let t=Jh(e.unaryFilter.field);return bp.create(t,`==`,{doubleValue:NaN});case`IS_NULL`:let n=Jh(e.unaryFilter.field);return bp.create(n,`==`,{nullValue:`NULL_VALUE`});case`IS_NOT_NAN`:let r=Jh(e.unaryFilter.field);return bp.create(r,`!=`,{doubleValue:NaN});case`IS_NOT_NULL`:let i=Jh(e.unaryFilter.field);return bp.create(i,`!=`,{nullValue:`NULL_VALUE`});case`OPERATOR_UNSPECIFIED`:return z(61313);default:return z(60726)}}(e)}function Wh(e){return _h[e]}function Gh(e){return vh[e]}function Kh(e){return yh[e]}function qh(e){return{fieldPath:e.canonicalString()}}function Jh(e){return zd.fromServerFormat(e.fieldPath)}function Yh(e){return e instanceof bp?function(e){if(e.op===`==`){if(op(e.value))return{unaryFilter:{field:qh(e.field),op:`IS_NAN`}};if(ap(e.value))return{unaryFilter:{field:qh(e.field),op:`IS_NULL`}}}else if(e.op===`!=`){if(op(e.value))return{unaryFilter:{field:qh(e.field),op:`IS_NOT_NAN`}};if(ap(e.value))return{unaryFilter:{field:qh(e.field),op:`IS_NOT_NULL`}}}return{fieldFilter:{field:qh(e.field),op:Gh(e.op),value:e.value}}}(e):e instanceof xp?function(e){let t=e.getFilters().map((e=>Yh(e)));return t.length===1?t[0]:{compositeFilter:{op:Kh(e.op),filters:t}}}(e):z(54877,{filter:e})}function Xh(e){let t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Zh(e){return e.length>=4&&e.get(0)===`projects`&&e.get(2)===`databases`}var Qh=class e{constructor(e,t,n,r,i=K.min(),a=K.min(),o=Of.EMPTY_BYTE_STRING,s=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=s}withSequenceNumber(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}},$h=class{constructor(e){this.yt=e}};function eg(e){let t=Vh({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType===`LAST`?Yp(t,t.limit,`L`):t}var tg=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if(`nullValue`in e)this.Ft(t,5);else if(`booleanValue`in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if(`integerValue`in e)this.Ft(t,15),t.Mt(jf(e.integerValue));else if(`doubleValue`in e){let n=jf(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),ff(n)?t.Mt(0):t.Mt(n))}else if(`timestampValue`in e){let n=e.timestampValue;this.Ft(t,20),typeof n==`string`&&(n=Af(n)),t.xt(`${n.seconds||``}`),t.Mt(n.nanos||0)}else if(`stringValue`in e)this.Ot(e.stringValue,t),this.Nt(t);else if(`bytesValue`in e)this.Ft(t,30),t.Bt(Mf(e.bytesValue)),this.Nt(t);else if(`referenceValue`in e)this.Lt(e.referenceValue,t);else if(`geoPointValue`in e){let n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else `mapValue`in e?up(e)?this.Ft(t,2**53-1):cp(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):`arrayValue`in e?(this.Qt(e.arrayValue,t),this.Nt(t)):z(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let n=e.fields||{};this.Ft(t,55);for(let e of Object.keys(n))this.Ot(e,t),this.Ct(n[e],t)}kt(e,t){let n=e.fields||{};this.Ft(t,53);let r=qf,i=n[r].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(jf(i)),this.Ot(r,t),this.Ct(n[r],t)}Qt(e,t){let n=e.values||[];this.Ft(t,50);for(let e of n)this.Ct(e,t)}Lt(e,t){this.Ft(t,37),G.fromName(e).path.forEach((e=>{this.Ft(t,60),this.Ut(e,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};tg.Kt=new tg;var ng=class{constructor(){this.Cn=new rg}addToCollectionParentIndex(e,t){return this.Cn.add(t),q.resolve()}getCollectionParents(e,t){return q.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return q.resolve()}deleteFieldIndex(e,t){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,t){return q.resolve()}getDocumentsMatchingTarget(e,t){return q.resolve(null)}getIndexType(e,t){return q.resolve(0)}getFieldIndexes(e,t){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,t){return q.resolve(tf.min())}getMinOffsetFromCollectionGroup(e,t){return q.resolve(tf.min())}updateCollectionGroup(e,t,n){return q.resolve()}updateIndexEntries(e,t){return q.resolve()}},rg=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new wf(Ld.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new wf(Ld.comparator)).toArray()}};new Uint8Array;var ig={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ag=41943040,og=class e{static withCacheSize(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}};og.DEFAULT_COLLECTION_PERCENTILE=10,og.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,og.DEFAULT=new og(ag,og.DEFAULT_COLLECTION_PERCENTILE,og.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),og.DISABLED=new og(-1,0,0);var sg=class e{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new e(0)}static cr(){return new e(-1)}},cg=`LruGarbageCollector`,lg=1048576;function ug([e,t],[n,r]){let i=W(e,n);return i===0?W(t,r):i}var dg=class{constructor(e){this.Ir=e,this.buffer=new wf(ug),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let e=this.buffer.last();ug(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}},fg=class{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&=(this.Rr.cancel(),null)}get started(){return this.Rr!==null}Vr(e){R(cg,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay(`lru_garbage_collection`,e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){cf(e)?R(cg,`Ignoring IndexedDB error during garbage collection: `,e):await of(e)}await this.Vr(3e5)}))}},pg=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(t===0)return q.resolve(lf.ce);let n=new dg(t);return this.mr.forEachTarget(e,(e=>n.Ar(e.sequenceNumber))).next((()=>this.mr.pr(e,(e=>n.Ar(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(R(`LruGarbageCollector`,`Garbage collection skipped; disabled`),q.resolve(ig)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(R(`LruGarbageCollector`,`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ig):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,a,o,s,c,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(R(`LruGarbageCollector`,`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,s=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),md()<=L.DEBUG&&R(`LruGarbageCollector`,`LRU Garbage Collection\n\tCounted targets in ${a-l}ms\n\tDetermined least recently used ${r} in `+(o-a)+`ms
\tRemoved ${i} targets in `+(s-o)+`ms
\tRemoved ${e} documents in `+(c-s)+`ms
Total Duration: ${c-l}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}};function mg(e,t){return new pg(e,t)}var hg=class{constructor(){this.changes=new rm((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pp.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let n=this.changes.get(t);return n===void 0?this.getFromCache(e,t):q.resolve(n)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}},gg=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}},_g=class{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(n!==null&&Rm(n.mutation,e,Ef.empty(),Xd.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,J()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=J()){let r=lm();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=sm();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){let n=lm();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,J())))}populateOverlays(e,t,n){let r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=am(),a=dm(),o=function(){return dm()}();return t.forEach(((e,t)=>{let o=n.get(t.key);r.has(t.key)&&(o===void 0||o.mutation instanceof Hm)?i=i.insert(t.key,t):o===void 0?a.set(t.key,Ef.empty()):(a.set(t.key,o.mutation.getFieldMask()),Rm(o.mutation,t,o.mutation.getFieldMask(),Xd.now()))})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>a.set(e,t))),t.forEach(((e,t)=>o.set(e,new gg(t,a.get(e)??null)))),o)))}recalculateAndSaveOverlays(e,t){let n=dm(),r=new xf(((e,t)=>e-t)),i=J();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(let i of e)i.keys().forEach((e=>{let a=t.get(e);if(a===null)return;let o=n.get(e)||Ef.empty();o=i.applyToLocalView(a,o),n.set(e,o);let s=(r.get(i.batchId)||J()).add(e);r=r.insert(i.batchId,s)}))})).next((()=>{let a=[],o=r.getReverseIterator();for(;o.hasNext();){let r=o.getNext(),s=r.key,c=r.value,l=um();c.forEach((e=>{if(!i.has(e)){let r=Im(t.get(e),n.get(e));r!==null&&l.set(e,r),i=i.add(e)}})),a.push(this.documentOverlayCache.saveOverlays(e,s,l))}return q.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return G.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Gp(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{let a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):q.resolve(lm()),o=Zd,s=i;return a.next((t=>q.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?q.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{s=s.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,s,t,J()))).next((e=>({batchId:o,changes:cm(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new G(t)).next((e=>{let t=sm();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){let i=t.collectionGroup,a=sm();return this.indexManager.getCollectionParents(e,i).next((o=>q.forEach(o,(o=>{let s=function(e,t){return new Vp(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next((e=>{e.forEach(((e,t)=>{a=a.insert(e,t)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{let r=n.getKey();e.get(r)===null&&(e=e.insert(r,pp.newInvalidDocument(r)))}));let n=sm();return e.forEach(((e,r)=>{let a=i.get(e);a!==void 0&&Rm(a.mutation,r,Ef.empty(),Xd.now()),$p(t,r)&&(n=n.insert(e,r))})),n}))}},vg=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return q.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Th(e.createTime)}}(t)),q.resolve()}getNamedQuery(e,t){return q.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:eg(e.bundledQuery),readTime:Th(e.readTime)}}(t)),q.resolve()}},yg=class{constructor(){this.overlays=new xf(G.comparator),this.qr=new Map}getOverlay(e,t){return q.resolve(this.overlays.get(t))}getOverlays(e,t){let n=lm();return q.forEach(t,(t=>this.getOverlay(e,t).next((e=>{e!==null&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.St(e,t,r)})),q.resolve()}removeOverlaysForBatchId(e,t,n){let r=this.qr.get(n);return r!==void 0&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.qr.delete(n)),q.resolve()}getOverlaysForCollection(e,t,n){let r=lm(),i=t.length+1,a=new G(t.child(``)),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){let e=o.getNext().value,a=e.getKey();if(!t.isPrefixOf(a.path))break;a.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return q.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new xf(((e,t)=>e-t)),a=this.overlays.getIterator();for(;a.hasNext();){let e=a.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);t===null&&(t=lm(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let o=lm(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return q.resolve(o)}St(e,t,n){let r=this.overlays.get(n.key);if(r!==null){let e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Xm(t,n));let i=this.qr.get(t);i===void 0&&(i=J(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}},bg=class{constructor(){this.sessionToken=Of.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,q.resolve()}},xg=class{constructor(){this.Qr=new wf(Sg.$r),this.Ur=new wf(Sg.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let n=new Sg(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Gr(new Sg(e,t))}zr(e,t){e.forEach((e=>this.removeReference(e,t)))}jr(e){let t=new G(new Ld([])),n=new Sg(t,e),r=new Sg(t,e+1),i=[];return this.Ur.forEachInRange([n,r],(e=>{this.Gr(e),i.push(e.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new G(new Ld([])),n=new Sg(t,e),r=new Sg(t,e+1),i=J();return this.Ur.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){let t=new Sg(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}},Sg=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return G.comparator(e.key,t.key)||W(e.Yr,t.Yr)}static Kr(e,t){return W(e.Yr,t.Yr)||G.comparator(e.key,t.key)}},Cg=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new wf(Sg.$r)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,r){let i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new Jm(i,t,n,r);this.mutationQueue.push(a);for(let t of r)this.Zr=this.Zr.add(new Sg(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return q.resolve(a)}lookupMutationBatch(e,t){return q.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let n=t+1,r=this.ei(n),i=r<0?0:r;return q.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?uf:this.tr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let n=new Sg(t,0),r=new Sg(t,1/0),i=[];return this.Zr.forEachInRange([n,r],(e=>{let t=this.Xr(e.Yr);i.push(t)})),q.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new wf(W);return t.forEach((e=>{let t=new Sg(e,0),r=new Sg(e,1/0);this.Zr.forEachInRange([t,r],(e=>{n=n.add(e.Yr)}))})),q.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){let n=t.path,r=n.length+1,i=n;G.isDocumentKey(i)||(i=i.child(``));let a=new Sg(new G(i),0),o=new wf(W);return this.Zr.forEachWhile((e=>{let t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Yr)),!0)}),a),q.resolve(this.ti(o))}ti(e){let t=[];return e.forEach((e=>{let n=this.Xr(e);n!==null&&t.push(n)})),t}removeMutationBatch(e,t){B(this.ni(t.batchId,`removed`)===0,55003),this.mutationQueue.shift();let n=this.Zr;return q.forEach(t.mutations,(r=>{let i=new Sg(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){let n=new Sg(t,0),r=this.Zr.firstAfterOrEqual(n);return q.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}},wg=class{constructor(e){this.ri=e,this.docs=function(){return new xf(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let n=this.docs.get(t);return q.resolve(n?n.document.mutableCopy():pp.newInvalidDocument(t))}getEntries(e,t){let n=am();return t.forEach((e=>{let t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():pp.newInvalidDocument(e))})),q.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=am(),a=t.path,o=new G(a.child(`__id-9223372036854775808__`)),s=this.docs.getIteratorFrom(o);for(;s.hasNext();){let{key:e,value:{document:o}}=s.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||nf(ef(o),n)<=0||(r.has(o.key)||$p(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return q.resolve(i)}getAllFromCollectionGroup(e,t,n,r){z(9500)}ii(e,t){return q.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Tg(this)}getSize(e){return q.resolve(this.size)}},Tg=class extends hg{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)})),q.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}},Eg=class{constructor(e){this.persistence=e,this.si=new rm((e=>Rp(e)),zp),this.lastRemoteSnapshotVersion=K.min(),this.highestTargetId=0,this.oi=0,this._i=new xg,this.targetCount=0,this.ai=sg.ur()}forEachTarget(e,t){return this.si.forEach(((e,n)=>t(n))),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),q.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new sg(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,q.resolve()}updateTargetData(e,t){return this.Pr(t),q.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),--this.targetCount,q.resolve()}removeTargets(e,t,n){let r=0,i=[];return this.si.forEach(((a,o)=>{o.sequenceNumber<=t&&n.get(o.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),q.waitFor(i).next((()=>r))}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,t){let n=this.si.get(t)||null;return q.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),q.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);let r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),q.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),q.resolve()}getMatchingKeysForTargetId(e,t){let n=this._i.Hr(t);return q.resolve(n)}containsKey(e,t){return q.resolve(this._i.containsKey(t))}},Dg=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new lf(0),this.li=!1,this.li=!0,this.hi=new bg,this.referenceDelegate=e(this),this.Pi=new Eg(this),this.indexManager=new ng,this.remoteDocumentCache=function(e){return new wg(e)}((e=>this.referenceDelegate.Ti(e))),this.serializer=new $h(t),this.Ii=new vg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new yg,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new Cg(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){R(`MemoryPersistence`,`Starting transaction:`,e);let r=new Og(this.ci.next());return this.referenceDelegate.Ei(),n(r).next((e=>this.referenceDelegate.di(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ai(e,t){return q.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}},Og=class extends af{constructor(e){super(),this.currentSequenceNumber=e}},kg=class e{constructor(e){this.persistence=e,this.Ri=new xg,this.Vi=null}static mi(t){return new e(t)}get fi(){if(this.Vi)return this.Vi;throw z(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),q.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),q.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),q.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((e=>this.fi.add(e.toString())));let n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.fi.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.fi,(n=>{let r=G.fromPath(n);return this.gi(e,r).next((e=>{e||t.removeEntry(r,K.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return q.or([()=>q.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},Ag=class e{constructor(e,t){this.persistence=e,this.pi=new rm((e=>hf(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=mg(this,t)}static mi(t,n){return new e(t,n)}Ei(){}di(e){return q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}wr(e){let t=0;return this.pr(e,(e=>{t++})).next((()=>t))}pr(e,t){return q.forEach(this.pi,((n,r)=>this.br(e,n,r).next((e=>e?q.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0,r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,(r=>this.br(e,r,t).next((e=>{e||(n++,i.removeEntry(r,K.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),q.resolve()}removeTarget(e,t){let n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),q.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),q.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=np(e.data.value)),t}br(e,t,n){return q.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let e=this.pi.get(t);return q.resolve(e!==void 0&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}},jg=class e{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(t,n){let r=J(),i=J();for(let e of n.docChanges)switch(e.type){case 0:r=r.add(e.doc.key);break;case 1:i=i.add(e.doc.key)}return new e(t,n.fromCache,r,i)}},Mg=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}},Ng=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return zc()?8:sf(Mc())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){let i={result:null};return this.ys(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ws(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;let n=new Mg;return this.Ss(e,t,n).next((r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)}))})).next((()=>i.result))}bs(e,t,n,r){return n.documentReadCount<this.fs?(md()<=L.DEBUG&&R(`QueryEngine`,`SDK will not create cache indexes for query:`,Qp(t),`since it only creates cache indexes for collection contains`,`more than or equal to`,this.fs,`documents`),q.resolve()):(md()<=L.DEBUG&&R(`QueryEngine`,`Query:`,Qp(t),`scans`,n.documentReadCount,`local documents and returns`,r,`documents as results.`),n.documentReadCount>this.gs*r?(md()<=L.DEBUG&&R(`QueryEngine`,`The SDK decides to create cache indexes for query:`,Qp(t),`as using cache indexes may help improve performance.`),this.indexManager.createTargetIndexes(e,qp(t))):q.resolve())}ys(e,t){if(Wp(t))return q.resolve(null);let n=qp(t);return this.indexManager.getIndexType(e,n).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=Yp(t,null,`F`),n=qp(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{let i=J(...r);return this.ps.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{let a=this.Ds(t,r);return this.Cs(t,a,i,n.readTime)?this.ys(e,Yp(t,null,`F`)):this.vs(e,a,t,n)}))))})))))}ws(e,t,n,r){return Wp(t)||r.isEqual(K.min())?q.resolve(null):this.ps.getDocuments(e,n).next((i=>{let a=this.Ds(t,i);return this.Cs(t,a,n,r)?q.resolve(null):(md()<=L.DEBUG&&R(`QueryEngine`,`Re-using previous result from %s to execute query: %s`,r.toString(),Qp(t)),this.vs(e,a,t,$d(r,Zd)).next((e=>e)))}))}Ds(e,t){let n=new wf(tm(e));return t.forEach(((t,r)=>{$p(e,r)&&(n=n.add(r))})),n}Cs(e,t,n,r){if(e.limit===null)return!1;if(n.size!==t.size)return!0;let i=e.limitType===`F`?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return md()<=L.DEBUG&&R(`QueryEngine`,`Using full collection scan to execute query:`,Qp(t)),this.ps.getDocumentsMatchingQuery(e,t,tf.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}},Pg=`LocalStore`,Fg=3e8,Ig=class{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new xf(W),this.xs=new rm((e=>Rp(e)),zp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _g(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction(`Collect garbage`,`readwrite-primary`,(t=>e.collect(t,this.Ms)))}};function Lg(e,t,n,r){return new Ig(e,t,n,r)}async function Rg(e,t){let n=V(e);return await n.persistence.runTransaction(`Handle user change`,`readonly`,(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{let i=[],a=[],o=J();for(let e of r){i.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}for(let e of t){a.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({Ls:e,removedBatchIds:i,addedBatchIds:a})))}))}))}function zg(e,t){let n=V(e);return n.persistence.runTransaction(`Acknowledge batch`,`readwrite-primary`,(e=>{let r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){let i=n.batch,a=i.keys(),o=q.resolve();return a.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{let a=n.docVersions.get(e);B(a!==null,48541),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=J();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}function Bg(e){let t=V(e);return t.persistence.runTransaction(`Get last remote snapshot version`,`readonly`,(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function Vg(e,t){let n=V(e),r=t.snapshotVersion,i=n.Ms;return n.persistence.runTransaction(`Apply remote event`,`readwrite-primary`,(e=>{let a=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;let o=[];t.targetChanges.forEach(((a,s)=>{let c=i.get(s);if(!c)return;o.push(n.Pi.removeMatchingKeys(e,a.removedDocuments,s).next((()=>n.Pi.addMatchingKeys(e,a.addedDocuments,s))));let l=c.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.get(s)===null?a.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(a.resumeToken,r)):l=l.withResumeToken(Of.EMPTY_BYTE_STRING,K.min()).withLastLimboFreeSnapshotVersion(K.min()),i=i.insert(s,l),function(e,t,n){return e.resumeToken.approximateByteSize()===0||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=Fg?!0:n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,a)&&o.push(n.Pi.updateTargetData(e,l))}));let s=am(),c=J();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Hg(e,a,t.documentUpdates).next((e=>{s=e.ks,c=e.qs}))),!r.isEqual(K.min())){let t=n.Pi.getLastRemoteSnapshotVersion(e).next((t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return q.waitFor(o).next((()=>a.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,s,c))).next((()=>s))})).then((e=>(n.Ms=i,e)))}function Hg(e,t,n){let r=J(),i=J();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=am();return n.forEach(((n,a)=>{let o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(K.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||a.version.compareTo(o.version)===0&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):R(Pg,`Ignoring outdated watch update for `,n,`. Current version:`,o.version,` Watch version:`,a.version)})),{ks:r,qs:i}}))}function Ug(e,t){let n=V(e);return n.persistence.runTransaction(`Get next mutation batch`,`readonly`,(e=>(t===void 0&&(t=uf),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Wg(e,t){let n=V(e);return n.persistence.runTransaction(`Allocate target`,`readwrite`,(e=>{let r;return n.Pi.getTargetData(e,t).next((i=>i?(r=i,q.resolve(r)):n.Pi.allocateTargetId(e).next((i=>(r=new Qh(t,i,`TargetPurposeListen`,e.currentSequenceNumber),n.Pi.addTargetData(e,r).next((()=>r)))))))})).then((e=>{let r=n.Ms.get(e.targetId);return(r===null||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e}))}async function Gg(e,t,n){let r=V(e),i=r.Ms.get(t),a=n?`readwrite`:`readwrite-primary`;try{n||await r.persistence.runTransaction(`Release target`,a,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!cf(e))throw e;R(Pg,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function Kg(e,t,n){let r=V(e),i=K.min(),a=J();return r.persistence.runTransaction(`Execute query`,`readwrite`,(e=>function(e,t,n){let r=V(e),i=r.xs.get(n);return i===void 0?r.Pi.getTargetData(t,n):q.resolve(r.Ms.get(i))}(r,e,qp(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next((e=>{a=e}))})).next((()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:K.min(),n?a:J()))).next((e=>(qg(r,em(t),e),{documents:e,Qs:a})))))}function qg(e,t,n){let r=e.Os.get(t)||K.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Os.set(t,r)}var Jg=class{constructor(){this.activeTargetIds=hm()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Yg=class{constructor(){this.Mo=new Jg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||`not-current`}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Jg,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}},Xg=class{Oo(e){}shutdown(){}},Zg=`ConnectivityMonitor`,Qg=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener(`online`,this.No),window.removeEventListener(`offline`,this.Lo)}Qo(){window.addEventListener(`online`,this.No),window.addEventListener(`offline`,this.Lo)}Bo(){R(Zg,`Network connectivity changed: AVAILABLE`);for(let e of this.qo)e(0)}ko(){R(Zg,`Network connectivity changed: UNAVAILABLE`);for(let e of this.qo)e(1)}static v(){return typeof window<`u`&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}},$g=null;function e_(){return $g===null?$g=function(){return 268435456+Math.round(2147483648*Math.random())}():$g++,`0x`+$g.toString(16)}var t_=`RestConnection`,n_={BatchGetDocuments:`batchGet`,Commit:`commit`,RunQuery:`runQuery`,RunAggregationQuery:`runAggregationQuery`},r_=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?`https`:`http`,n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+`://`+e.host,this.Ko=`projects/${n}/databases/${r}`,this.Wo=this.databaseId.database===Vf?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Go(e,t,n,r,i){let a=e_(),o=this.zo(e,t.toUriEncodedString());R(t_,`Sending RPC '${e}' ${a}:`,o,n);let s={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(s,r,i);let{host:c}=new URL(o),l=wc(c);return this.Jo(e,o,s,n,l).then((t=>(R(t_,`Received RPC '${e}' ${a}: `,t),t)),(t=>{throw gd(t_,`RPC '${e}' ${a} failed with error: `,t,`url: `,o,`request:`,n),t}))}Ho(e,t,n,r,i,a){return this.Go(e,t,n,r,i)}jo(e,t,n){e[`X-Goog-Api-Client`]=function(){return`gl-js/ fire/`+fd}(),e[`Content-Type`]=`text/plain`,this.databaseInfo.appId&&(e[`X-Firebase-GMPID`]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}zo(e,t){let n=n_[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}},i_=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}},a_=`WebChannelConnection`,o_=class extends r_{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){let a=e_();return new Promise(((i,o)=>{let s=new td;s.setWithCredentials(!0),s.listenOnce(rd.COMPLETE,(()=>{try{switch(s.getLastErrorCode()){case id.NO_ERROR:let t=s.getResponseJson();R(a_,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(t)),i(t);break;case id.TIMEOUT:R(a_,`RPC '${e}' ${a} timed out`),o(new U(H.DEADLINE_EXCEEDED,`Request time out`));break;case id.HTTP_ERROR:let n=s.getStatus();if(R(a_,`RPC '${e}' ${a} failed with status:`,n,`response text:`,s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);let t=e?.error;t&&t.status&&t.message?o(new U(function(e){let t=e.toLowerCase().replace(/_/g,`-`);return Object.values(H).indexOf(t)>=0?t:H.UNKNOWN}(t.status),t.message)):o(new U(H.UNKNOWN,`Server responded with status `+s.getStatus()))}else o(new U(H.UNAVAILABLE,`Connection failed.`));break;default:z(9055,{l_:e,streamId:a,h_:s.getLastErrorCode(),P_:s.getLastError()})}}finally{R(a_,`RPC '${e}' ${a} completed.`)}}));let c=JSON.stringify(r);R(a_,`RPC '${e}' ${a} sending request:`,r),s.send(t,`POST`,c,n,15)}))}T_(e,t,n){let r=e_(),i=[this.Uo,`/`,`google.firestore.v1.Firestore`,`/`,e,`/channel`],a=cd(),o=sd(),s={httpSessionIdParam:`gsessionid`,initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(s.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(s.useFetchStreams=!0),this.jo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;let l=i.join(``);R(a_,`Creating RPC '${e}' stream ${r}: ${l}`,s);let u=a.createWebChannel(l,s);this.I_(u);let d=!1,f=!1,p=new i_({Yo:t=>{f?R(a_,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||=(R(a_,`Opening RPC '${e}' stream ${r} transport.`),u.open(),!0),R(a_,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Zo:()=>u.close()}),m=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return m(u,nd.EventType.OPEN,(()=>{f||(R(a_,`RPC '${e}' stream ${r} transport opened.`),p.o_())})),m(u,nd.EventType.CLOSE,(()=>{f||(f=!0,R(a_,`RPC '${e}' stream ${r} transport closed`),p.a_(),this.E_(u))})),m(u,nd.EventType.ERROR,(t=>{f||(f=!0,gd(a_,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,`Message:`,t.message),p.a_(new U(H.UNAVAILABLE,`The operation could not be completed`)))})),m(u,nd.EventType.MESSAGE,(t=>{if(!f){let n=t.data[0];B(!!n,16349);let i=n,a=i?.error||i[0]?.error;if(a){R(a_,`RPC '${e}' stream ${r} received error:`,a);let t=a.status,n=function(e){let t=Qm[e];if(t!==void 0)return eh(t)}(t),i=a.message;n===void 0&&(n=H.INTERNAL,i=`Unknown error status: `+t+` with message `+a.message),f=!0,p.a_(new U(n,i)),u.close()}else R(a_,`RPC '${e}' stream ${r} received:`,n),p.u_(n)}})),m(o,od.STAT_EVENT,(t=>{t.stat===ad.PROXY?R(a_,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===ad.NOPROXY&&R(a_,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{p.__()}),0),p}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}};function s_(){return typeof document<`u`?document:null}function c_(e){return new bh(e,!0)}var l_=class{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&R(`ExponentialBackoff`,`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}},u_=`PersistentStream`,d_=class{constructor(e,t,n,r,i,a,o,s){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=s,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new l_(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state===4?this.N_():this.auth()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&=(this.C_.cancel(),null)}U_(){this.v_&&=(this.v_.cancel(),null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e===4?t&&t.code===H.RESOURCE_EXHAUSTED?(hd(t.toString()),hd(`Using maximum backoff delay to prevent overloading the backend.`),this.M_.g_()):t&&t.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()):this.M_.reset(),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.D_===t&&this.G_(e,n)}),(t=>{e((()=>{let e=new U(H.UNKNOWN,`Fetching auth token failed: `+t.message);return this.z_(e)}))}))}G_(e,t){let n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((e=>{n((()=>this.z_(e)))})),this.stream.onMessage((e=>{n((()=>++this.F_==1?this.J_(e):this.onNext(e)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return R(u_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(R(u_,`stream callback skipped by getCloseGuardedDispatcher.`),Promise.resolve())))}}},f_=class extends d_{constructor(e,t,n,r,i,a){super(e,`listen_stream_connection_backoff`,`listen_stream_idle`,`health_check_timeout`,t,n,r,a),this.serializer=i}j_(e,t){return this.connection.T_(`Listen`,e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=Ih(this.serializer,e),n=function(e){if(!(`targetChange`in e))return K.min();let t=e.targetChange;return t.targetIds&&t.targetIds.length?K.min():t.readTime?Th(t.readTime):K.min()}(e);return this.listener.H_(t,n)}Y_(e){let t={};t.database=Nh(this.serializer),t.addTarget=function(e,t){let n,r=t.target;if(n=Bp(r)?{documents:zh(e,r)}:{query:Bh(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Ch(e,t.resumeToken);let r=xh(e,t.expectedCount);r!==null&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(K.min())>0){n.readTime=Sh(e,t.snapshotVersion.toTimestamp());let r=xh(e,t.expectedCount);r!==null&&(n.expectedCount=r)}return n}(this.serializer,e);let n=Hh(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){let t={};t.database=Nh(this.serializer),t.removeTarget=e,this.q_(t)}},p_=class extends d_{constructor(e,t,n,r,i,a){super(e,`write_stream_connection_backoff`,`write_stream_idle`,`health_check_timeout`,t,n,r,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_(`Write`,e,t)}J_(e){return B(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,B(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){B(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=Rh(e.writeResults,e.commitTime),n=Th(e.commitTime);return this.listener.na(n,t)}ra(){let e={};e.database=Nh(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map((e=>Lh(this.serializer,e)))};this.q_(t)}},m_=class{},h_=class extends m_{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new U(H.FAILED_PRECONDITION,`The client has already been terminated.`)}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Go(e,Dh(t,n),r,i,a))).catch((e=>{throw e.name===`FirebaseError`?(e.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new U(H.UNKNOWN,e.toString())}))}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Ho(e,Dh(t,n),r,a,o,i))).catch((e=>{throw e.name===`FirebaseError`?(e.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new U(H.UNKNOWN,e.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}},g_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=`Unknown`,this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca(`Unknown`),this._a=this.asyncQueue.enqueueAfterDelay(`online_state_timeout`,1e4,(()=>(this._a=null,this.la(`Backend didn't respond within 10 seconds.`),this.ca(`Offline`),Promise.resolve()))))}ha(e){this.state===`Online`?this.ca(`Unknown`):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca(`Offline`)))}set(e){this.Pa(),this.oa=0,e===`Online`&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(hd(t),this.aa=!1):R(`OnlineStateTracker`,t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}},__=`RemoteStore`,v_=class{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((e=>{n.enqueueAndForget((async()=>{D_(this)&&(R(__,`Restarting streams for network reachability change.`),await async function(e){let t=V(e);t.Ea.add(4),await b_(t),t.Ra.set(`Unknown`),t.Ea.delete(4),await y_(t)}(this))}))})),this.Ra=new g_(n,r)}};async function y_(e){if(D_(e))for(let t of e.da)await t(!0)}async function b_(e){for(let t of e.da)await t(!1)}function x_(e,t){let n=V(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),E_(n)?T_(n):K_(n).O_()&&C_(n,t))}function S_(e,t){let n=V(e),r=K_(n);n.Ia.delete(t),r.O_()&&w_(n,t),n.Ia.size===0&&(r.O_()?r.L_():D_(n)&&n.Ra.set(`Unknown`))}function C_(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(K.min())>0){let n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}K_(e).Y_(t)}function w_(e,t){e.Va.Ue(t),K_(e).Z_(t)}function T_(e){e.Va=new mh({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),K_(e).start(),e.Ra.ua()}function E_(e){return D_(e)&&!K_(e).x_()&&e.Ia.size>0}function D_(e){return V(e).Ea.size===0}function O_(e){e.Va=void 0}async function k_(e){e.Ra.set(`Online`)}async function A_(e){e.Ia.forEach(((t,n)=>{C_(e,t)}))}async function j_(e,t){O_(e),E_(e)?(e.Ra.ha(t),T_(e)):e.Ra.set(`Unknown`)}async function M_(e,t,n){if(e.Ra.set(`Online`),t instanceof fh&&t.state===2&&t.cause)try{await async function(e,t){let n=t.cause;for(let r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){R(__,`Failed to remove targets %s: %s `,t.targetIds.join(`,`),n),await N_(e,n)}else if(t instanceof uh?e.Va.Ze(t):t instanceof dh?e.Va.st(t):e.Va.tt(t),!n.isEqual(K.min()))try{let t=await Bg(e.localStore);n.compareTo(t)>=0&&await function(e,t){let n=e.Va.Tt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){let i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{let r=e.Ia.get(t);r&&(e.Ia.set(t,r.withResumeToken(Of.EMPTY_BYTE_STRING,r.snapshotVersion)),w_(e,t),C_(e,new Qh(r.target,t,n,r.sequenceNumber)))})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){R(__,`Failed to raise snapshot:`,t),await N_(e,t)}}async function N_(e,t,n){if(!cf(t))throw t;e.Ea.add(1),await b_(e),e.Ra.set(`Offline`),n||=()=>Bg(e.localStore),e.asyncQueue.enqueueRetryable((async()=>{R(__,`Retrying IndexedDB access`),await n(),e.Ea.delete(1),await y_(e)}))}function P_(e,t){return t().catch((n=>N_(e,n,t)))}async function F_(e){let t=V(e),n=q_(t),r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:uf;for(;I_(t);)try{let e=await Ug(t.localStore,r);if(e===null){t.Ta.length===0&&n.L_();break}r=e.batchId,L_(t,e)}catch(e){await N_(t,e)}R_(t)&&z_(t)}function I_(e){return D_(e)&&e.Ta.length<10}function L_(e,t){e.Ta.push(t);let n=q_(e);n.O_()&&n.X_&&n.ea(t.mutations)}function R_(e){return D_(e)&&!q_(e).x_()&&e.Ta.length>0}function z_(e){q_(e).start()}async function B_(e){q_(e).ra()}async function V_(e){let t=q_(e);for(let n of e.Ta)t.ea(n.mutations)}async function H_(e,t,n){let r=e.Ta.shift(),i=Ym.from(r,t,n);await P_(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await F_(e)}async function U_(e,t){t&&q_(e).X_&&await async function(e,t){if(function(e){return $m(e)&&e!==H.ABORTED}(t.code)){let n=e.Ta.shift();q_(e).B_(),await P_(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await F_(e)}}(e,t),R_(e)&&z_(e)}async function W_(e,t){let n=V(e);n.asyncQueue.verifyOperationInProgress(),R(__,`RemoteStore received new credentials`);let r=D_(n);n.Ea.add(3),await b_(n),r&&n.Ra.set(`Unknown`),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await y_(n)}async function G_(e,t){let n=V(e);t?(n.Ea.delete(2),await y_(n)):t||(n.Ea.add(2),await b_(n),n.Ra.set(`Unknown`))}function K_(e){return e.ma||(e.ma=function(e,t,n){let r=V(e);return r.sa(),new f_(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:k_.bind(null,e),t_:A_.bind(null,e),r_:j_.bind(null,e),H_:M_.bind(null,e)}),e.da.push((async t=>{t?(e.ma.B_(),E_(e)?T_(e):e.Ra.set(`Unknown`)):(await e.ma.stop(),O_(e))}))),e.ma}function q_(e){return e.fa||(e.fa=function(e,t,n){let r=V(e);return r.sa(),new p_(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:B_.bind(null,e),r_:U_.bind(null,e),ta:V_.bind(null,e),na:H_.bind(null,e)}),e.da.push((async t=>{t?(e.fa.B_(),await F_(e)):(await e.fa.stop(),e.Ta.length>0&&(R(__,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))}))),e.fa}var J_=class e{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new yd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,a){let o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new U(H.CANCELLED,`Operation cancelled`+(e?`: `+e:``))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle===null?Promise.resolve():(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e))))))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Y_(e,t){if(hd(`AsyncQueue`,`${t}: ${e}`),cf(e))return new U(H.UNAVAILABLE,`${t}: ${e}`);throw e}var X_=class e{static emptySet(t){return new e(t.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||G.comparator(t.key,n.key):(e,t)=>G.comparator(e.key,t.key),this.keyedMap=sm(),this.sortedSet=new xf(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){let e=n.getNext().key,t=r.getNext().key;if(!e.isEqual(t))return!1}return!0}toString(){let e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?`DocumentSet ()`:`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(t,n){let r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}},Z_=class{constructor(){this.ga=new xf(G.comparator)}track(e){let t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):z(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}},Q_=class e{constructor(e,t,n,r,i,a,o,s,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=s,this.hasCachedResults=c}static fromInitialDocuments(t,n,r,i,a){let o=[];return n.forEach((e=>{o.push({type:0,doc:e})})),new e(t,n,X_.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}},$_=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}},ev=class{constructor(){this.queries=tv(),this.onlineState=`Unknown`,this.Ca=new Set}terminate(){(function(e,t){let n=V(e),r=n.queries;n.queries=tv(),r.forEach(((e,n)=>{for(let e of n.Sa)e.onError(t)}))})(this,new U(H.ABORTED,`Firestore shutting down`))}};function tv(){return new rm((e=>Zp(e)),Xp)}async function nv(e,t){let n=V(e),r=3,i=t.query,a=n.queries.get(i);a?!a.ba()&&t.Da()&&(r=2):(a=new $_,r=t.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){let n=Y_(e,`Initialization of query '${Qp(t.query)}' failed`);t.onError(n);return}n.queries.set(i,a),a.Sa.push(t),t.va(n.onlineState),a.wa&&t.Fa(a.wa)&&ov(n)}async function rv(e,t){let n=V(e),r=t.query,i=3,a=n.queries.get(r);if(a){let e=a.Sa.indexOf(t);e>=0&&(a.Sa.splice(e,1),a.Sa.length===0?i=t.Da()?0:1:!a.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function iv(e,t){let n=V(e),r=!1;for(let e of t){let t=e.query,i=n.queries.get(t);if(i){for(let t of i.Sa)t.Fa(e)&&(r=!0);i.wa=e}}r&&ov(n)}function av(e,t,n){let r=V(e),i=r.queries.get(t);if(i)for(let e of i.Sa)e.onError(n);r.queries.delete(t)}function ov(e){e.Ca.forEach((e=>{e.next()}))}var sv,cv;(cv=sv||={}).Ma=`default`,cv.Cache=`cache`;var lv=class{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState=`Unknown`,this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){let t=[];for(let n of e.docChanges)n.type!==3&&t.push(n);e=new Q_(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let n=t!==`Offline`;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t===`Offline`)}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Q_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==sv.Cache}},uv=class{constructor(e){this.key=e}},dv=class{constructor(e){this.key=e}},fv=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=J(),this.mutatedKeys=J(),this.eu=tm(e),this.tu=new X_(this.eu)}get nu(){return this.Ya}ru(e,t){let n=t?t.iu:new Z_,r=t?t.tu:this.tu,i=t?t.mutatedKeys:this.mutatedKeys,a=r,o=!1,s=this.query.limitType===`F`&&r.size===this.query.limit?r.last():null,c=this.query.limitType===`L`&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{let l=r.get(e),u=$p(this.query,t)?t:null,d=!!l&&this.mutatedKeys.has(l.key),f=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations),p=!1;l&&u?l.data.isEqual(u.data)?d!==f&&(n.track({type:3,doc:u}),p=!0):this.su(l,u)||(n.track({type:2,doc:u}),p=!0,(s&&this.eu(u,s)>0||c&&this.eu(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),p=!0):l&&!u&&(n.track({type:1,doc:l}),p=!0,(s||c)&&(o=!0)),p&&(u?(a=a.add(u),i=f?i.add(e):i.delete(e)):(a=a.delete(e),i=i.delete(e)))})),this.query.limit!==null)for(;a.size>this.query.limit;){let e=this.query.limitType===`F`?a.last():a.first();a=a.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:a,iu:n,Cs:o,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){let i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let a=e.iu.ya();a.sort(((e,t)=>function(e,t){let n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc))),this.ou(n),r??=!1;let o=t&&!r?this._u():[],s=this.Xa.size===0&&this.current&&!r?1:0,c=s!==this.Za;return this.Za=s,a.length!==0||c?{snapshot:new Q_(this.query,e.tu,i,a,e.mutatedKeys,s===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e===`Offline`?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Z_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=J(),this.tu.forEach((e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))}));let t=[];return e.forEach((e=>{this.Xa.has(e)||t.push(new dv(e))})),this.Xa.forEach((n=>{e.has(n)||t.push(new uv(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=J();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Q_.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},pv=`SyncEngine`,mv=class{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}},hv=class{constructor(e){this.key=e,this.hu=!1}},gv=class{constructor(e,t,n,r,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new rm((e=>Zp(e)),Xp),this.Iu=new Map,this.Eu=new Set,this.du=new xf(G.comparator),this.Au=new Map,this.Ru=new xg,this.Vu={},this.mu=new Map,this.fu=sg.cr(),this.onlineState=`Unknown`,this.gu=void 0}get isPrimaryClient(){return!0===this.gu}};async function _v(e,t,n=!0){let r=zv(e),i,a=r.Tu.get(t);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await yv(r,t,n,!0),i}async function vv(e,t){await yv(zv(e),t,!0,!1)}async function yv(e,t,n,r){let i=await Wg(e.localStore,qp(t)),a=i.targetId,o=e.sharedClientState.addLocalQueryTarget(a,n),s;return r&&(s=await bv(e,t,a,o===`current`,i.resumeToken)),e.isPrimaryClient&&n&&x_(e.remoteStore,i),s}async function bv(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await Kg(e.localStore,t.query,!1).then((({documents:e})=>t.view.ru(e,i))));let a=r&&r.targetChanges.get(t.targetId),o=r&&r.targetMismatches.get(t.targetId)!=null,s=t.view.applyChanges(i,e.isPrimaryClient,a,o);return Nv(e,t.targetId,s.au),s.snapshot}(e,t,n,r);let a=await Kg(e.localStore,t,!0),o=new fv(t,a.Qs),s=o.ru(a.documents),c=lh.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!==`Offline`,i),l=o.applyChanges(s,e.isPrimaryClient,c);Nv(e,n,l.au);let u=new mv(t,n,o);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),l.snapshot}async function xv(e,t,n){let r=V(e),i=r.Tu.get(t),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((e=>!Xp(e,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Gg(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&S_(r.remoteStore,i.targetId),jv(r,i.targetId)})).catch(of)):(jv(r,i.targetId),await Gg(r.localStore,i.targetId,!0))}async function Sv(e,t){let n=V(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),S_(n.remoteStore,r.targetId))}async function Cv(e,t,n){let r=Bv(e);try{let e=await function(e,t){let n=V(e),r=Xd.now(),i=t.reduce(((e,t)=>e.add(t.key)),J()),a,o;return n.persistence.runTransaction(`Locally write mutations`,`readwrite`,(e=>{let s=am(),c=J();return n.Ns.getEntries(e,i).next((e=>{s=e,s.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,s))).next((i=>{a=i;let o=[];for(let e of t){let t=zm(e,a.get(e.key).overlayedDocument);t!=null&&o.push(new Hm(e.key,t,fp(t.value.mapValue),Nm.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;let r=t.applyToLocalDocumentSet(a,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:cm(a)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||=new xf(W),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Iv(r,e.changes),await F_(r.remoteStore)}catch(e){let t=Y_(e,`Failed to persist write`);n.reject(t)}}async function wv(e,t){let n=V(e);try{let e=await Vg(n.localStore,t);t.targetChanges.forEach(((e,t)=>{let r=n.Au.get(t);r&&(B(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?B(r.hu,14607):e.removedDocuments.size>0&&(B(r.hu,42227),r.hu=!1))})),await Iv(n,e,t)}catch(e){await of(e)}}function Tv(e,t,n){let r=V(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let e=[];r.Tu.forEach(((n,r)=>{let i=r.view.va(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){let n=V(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(let e of n.Sa)e.va(t)&&(r=!0)})),r&&ov(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Ev(e,t,n){let r=V(e);r.sharedClientState.updateQueryState(t,`rejected`,n);let i=r.Au.get(t),a=i&&i.key;if(a){let e=new xf(G.comparator);e=e.insert(a,pp.newNoDocument(a,K.min()));let n=J().add(a);await wv(r,new ch(K.min(),new Map,new xf(W),e,n)),r.du=r.du.remove(a),r.Au.delete(t),Fv(r)}else await Gg(r.localStore,t,!1).then((()=>jv(r,t,n))).catch(of)}async function Dv(e,t){let n=V(e),r=t.batch.batchId;try{let e=await zg(n.localStore,t);Av(n,r,null),kv(n,r),n.sharedClientState.updateMutationState(r,`acknowledged`),await Iv(n,e)}catch(e){await of(e)}}async function Ov(e,t,n){let r=V(e);try{let e=await function(e,t){let n=V(e);return n.persistence.runTransaction(`Reject batch`,`readwrite-primary`,(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(B(t!==null,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Av(r,t,n),kv(r,t),r.sharedClientState.updateMutationState(t,`rejected`,n),await Iv(r,e)}catch(e){await of(e)}}function kv(e,t){(e.mu.get(t)||[]).forEach((e=>{e.resolve()})),e.mu.delete(t)}function Av(e,t,n){let r=V(e),i=r.Vu[r.currentUser.toKey()];if(i){let e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function jv(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(let r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach((t=>{e.Ru.containsKey(t)||Mv(e,t)}))}function Mv(e,t){e.Eu.delete(t.path.canonicalString());let n=e.du.get(t);n!==null&&(S_(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Fv(e))}function Nv(e,t,n){for(let r of n)r instanceof uv?(e.Ru.addReference(r.key,t),Pv(e,r)):r instanceof dv?(R(pv,`Document no longer in limbo: `+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||Mv(e,r.key)):z(19791,{wu:r})}function Pv(e,t){let n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(R(pv,`New document in limbo: `+n),e.Eu.add(r),Fv(e))}function Fv(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){let t=e.Eu.values().next().value;e.Eu.delete(t);let n=new G(Ld.fromString(t)),r=e.fu.next();e.Au.set(r,new hv(n)),e.du=e.du.insert(n,r),x_(e.remoteStore,new Qh(qp(Up(n.path)),r,`TargetPurposeLimboResolution`,lf.ce))}}async function Iv(e,t,n){let r=V(e),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((e,s)=>{o.push(r.pu(s,t,n).then((e=>{if((e||n)&&r.isPrimaryClient){let t=e?!e.fromCache:n?.targetChanges.get(s.targetId)?.current;r.sharedClientState.updateQueryState(s.targetId,t?`current`:`not-current`)}if(e){i.push(e);let t=jg.As(s.targetId,e);a.push(t)}})))})),await Promise.all(o),r.Pu.H_(i),await async function(e,t){let n=V(e);try{await n.persistence.runTransaction(`notifyLocalViewChanges`,`readwrite`,(e=>q.forEach(t,(t=>q.forEach(t.Es,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>q.forEach(t.ds,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!cf(e))throw e;R(Pg,`Failed to update sequence numbers: `+e)}for(let e of t){let t=e.targetId;if(!e.fromCache){let e=n.Ms.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(t,i)}}}(r.localStore,a))}async function Lv(e,t){let n=V(e);if(!n.currentUser.isEqual(t)){R(pv,`User change. New user:`,t.toKey());let e=await Rg(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach((e=>{e.forEach((e=>{e.reject(new U(H.CANCELLED,t))}))})),e.mu.clear()}(n,`'waitForPendingWrites' promise is rejected due to a user change.`),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Iv(n,e.Ls)}}function Rv(e,t){let n=V(e),r=n.Au.get(t);if(r&&r.hu)return J().add(r.key);{let e=J(),r=n.Iu.get(t);if(!r)return e;for(let t of r){let r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function zv(e){let t=V(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=wv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Rv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Ev.bind(null,t),t.Pu.H_=iv.bind(null,t.eventManager),t.Pu.yu=av.bind(null,t.eventManager),t}function Bv(e){let t=V(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Dv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ov.bind(null,t),t}var Vv=class{constructor(){this.kind=`memory`,this.synchronizeTabs=!1}async initialize(e){this.serializer=c_(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Lg(this.persistence,new Ng,e.initialUser,this.serializer)}Cu(e){return new Dg(kg.mi,this.serializer)}Du(e){return new Yg}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}};Vv.provider={build:()=>new Vv};var Hv=class extends Vv{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){B(this.persistence.referenceDelegate instanceof Ag,46915);let n=this.persistence.referenceDelegate.garbageCollector;return new fg(n,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes===void 0?og.DEFAULT:og.withCacheSize(this.cacheSizeBytes);return new Dg((e=>Ag.mi(e,t)),this.serializer)}},Uv=class{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Tv(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Lv.bind(null,this.syncEngine),await G_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new ev}()}createDatastore(e){let t=c_(e.databaseInfo.databaseId),n=function(e){return new o_(e)}(e.databaseInfo);return function(e,t,n,r){return new h_(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new v_(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Tv(this.syncEngine,e,0)),function(){return Qg.v()?new Qg:new Xg}())}createSyncEngine(e,t){return function(e,t,n,r,i,a,o){let s=new gv(e,t,n,r,i,a);return o&&(s.gu=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(e){let t=V(e);R(__,`RemoteStore shutting down.`),t.Ea.add(5),await b_(t),t.Aa.shutdown(),t.Ra.set(`Unknown`)}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}};Uv.provider={build:()=>new Uv};var Wv=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):hd(`Uncaught Error in snapshot listener:`,e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}},Gv=`FirestoreClient`,Kv=class{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=dd.UNAUTHENTICATED,this.clientId=kd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{R(Gv,`Received user=`,e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(R(Gv,`Received new app check token=`,e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new yd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let n=Y_(t,`Failed to shutdown persistence`);e.reject(n)}})),e.promise}};async function qv(e,t){e.asyncQueue.verifyOperationInProgress(),R(Gv,`Initializing OfflineComponentProvider`);let n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Rg(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Jv(e,t){e.asyncQueue.verifyOperationInProgress();let n=await Yv(e);R(Gv,`Initializing OnlineComponentProvider`),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>W_(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>W_(t.remoteStore,n))),e._onlineComponents=t}async function Yv(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){R(Gv,`Using user provided OfflineComponentProvider`);try{await qv(e,e._uninitializedComponentsProvider._offline)}catch(t){let n=t;if(!function(e){return e.name===`FirebaseError`?e.code===H.FAILED_PRECONDITION||e.code===H.UNIMPLEMENTED:!(typeof DOMException<`u`&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}(n))throw n;gd(`Error using user provided cache. Falling back to memory cache: `+n),await qv(e,new Vv)}}else R(Gv,`Using default OfflineComponentProvider`),await qv(e,new Hv(void 0));return e._offlineComponents}async function Xv(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(R(Gv,`Using user provided OnlineComponentProvider`),await Jv(e,e._uninitializedComponentsProvider._online)):(R(Gv,`Using default OnlineComponentProvider`),await Jv(e,new Uv))),e._onlineComponents}function Zv(e){return Xv(e).then((e=>e.syncEngine))}async function Qv(e){let t=await Xv(e),n=t.eventManager;return n.onListen=_v.bind(null,t.syncEngine),n.onUnlisten=xv.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=vv.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Sv.bind(null,t.syncEngine),n}function $v(e,t,n={}){let r=new yd;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){let a=new Wv({next:s=>{a.Nu(),t.enqueueAndForget((()=>rv(e,o)));let c=s.docs.has(n);!c&&s.fromCache?i.reject(new U(H.UNAVAILABLE,`Failed to get document because the client is offline.`)):c&&s.fromCache&&r&&r.source===`server`?i.reject(new U(H.UNAVAILABLE,`Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)`)):i.resolve(s)},error:e=>i.reject(e)}),o=new lv(Up(n.path),a,{includeMetadataChanges:!0,qa:!0});return nv(e,o)}(await Qv(e),e.asyncQueue,t,n,r))),r.promise}function ey(e){let t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}var ty=new Map,ny=`firestore.googleapis.com`,ry=!0,iy=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new U(H.INVALID_ARGUMENT,`Can't provide ssl option if host option is not set`);this.host=ny,this.ssl=ry}else this.host=e.host,this.ssl=e.ssl??ry;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ag;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lg)throw new U(H.INVALID_ARGUMENT,`cacheSizeBytes must be at least 1048576`);this.cacheSizeBytes=e.cacheSizeBytes}Vd(`experimentalForceLongPolling`,e.experimentalForceLongPolling,`experimentalAutoDetectLongPolling`,e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ey(e.experimentalLongPollingOptions??{}),function(e){if(e.timeoutSeconds!==void 0){if(isNaN(e.timeoutSeconds))throw new U(H.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new U(H.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new U(H.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ay=class{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type=`firestore-lite`,this._persistenceKey=`(lite)`,this._settings=new iy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask=`notTerminated`}get app(){if(!this._app)throw new U(H.FAILED_PRECONDITION,`Firestore was not initialized using the Firebase SDK. 'app' is not available`);return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==`notTerminated`}_setSettings(e){if(this._settingsFrozen)throw new U(H.FAILED_PRECONDITION,`Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.`);this._settings=new iy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(e){if(!e)return new xd;switch(e.type){case`firstParty`:return new Td(e.sessionIndex||`0`,e.iamToken||null,e.authTokenFactory||null);case`provider`:return e.client;default:throw new U(H.INVALID_ARGUMENT,`makeAuthCredentialsProvider failed due to invalid credential type`)}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask===`notTerminated`&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask===`notTerminated`?await this._terminate():this._terminateTask=`notTerminated`}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let t=ty.get(e);t&&(R(`ComponentProvider`,`Removing Datastore`),ty.delete(e),t.terminate())}(this),Promise.resolve()}};function oy(e,t,n,r={}){e=Gd(e,ay);let i=wc(t),a=e._getSettings(),o={...a,emulatorOptions:e._getEmulatorOptions()},s=`${t}:${n}`;i&&(Tc(`https://${s}`),jc(`Firestore`,!0)),a.host!==ny&&a.host!==s&&gd(`Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.`);let c={...a,host:s,ssl:i,emulatorOptions:r};if(!Jc(c,o)&&(e._setSettings(c),r.mockUserToken)){let t,n;if(typeof r.mockUserToken==`string`)t=r.mockUserToken,n=dd.MOCK_USER;else{t=Ec(r.mockUserToken,e._app?.options.projectId);let i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new U(H.INVALID_ARGUMENT,`mockUserToken must contain 'sub' or 'user_id' field!`);n=new dd(i)}e._authCredentials=new Sd(new bd(t,n))}}var sy=class e{constructor(e,t,n){this.converter=t,this._query=n,this.type=`query`,this.firestore=e}withConverter(t){return new e(this.firestore,t,this._query)}},cy=class e{constructor(e,t,n){this.converter=t,this._key=n,this.type=`document`,this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ly(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new e(this.firestore,t,this._key)}toJSON(){return{type:e._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(qd(n,e._jsonSchema))return new e(t,r||null,new G(Ld.fromString(n.referencePath)))}};cy._jsonSchemaVersion=`firestore/documentReference/1.0`,cy._jsonSchema={type:Kd(`string`,cy._jsonSchemaVersion),referencePath:Kd(`string`)};var ly=class e extends sy{constructor(e,t,n){super(e,t,Up(n)),this._path=n,this.type=`collection`}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new cy(this.firestore,null,new G(e))}withConverter(t){return new e(this.firestore,t,this._path)}};function uy(e,t,...n){if(e=rl(e),arguments.length===1&&(t=kd.newId()),Bd(`doc`,`path`,t),e instanceof ay){let r=Ld.fromString(t,...n);return Hd(r),new cy(e,null,new G(r))}{if(!(e instanceof cy||e instanceof ly))throw new U(H.INVALID_ARGUMENT,`Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore`);let r=e._path.child(Ld.fromString(t,...n));return Hd(r),new cy(e.firestore,e instanceof ly?e.converter:null,new G(r))}}var dy=`AsyncQueue`,fy=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new l_(this,`async_queue_retry`),this._c=()=>{let e=s_();e&&R(dy,`Visibility state changed to `+e.visibilityState),this.M_.w_()},this.ac=e;let t=s_();t&&typeof t.addEventListener==`function`&&t.addEventListener(`visibilitychange`,this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=s_();t&&typeof t.removeEventListener==`function`&&t.removeEventListener(`visibilitychange`,this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));let t=new yd;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!cf(e))throw e;R(dy,`Operation failed with retryable error: `+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){let t=this.ac.then((()=>(this.rc=!0,e().catch((e=>{throw this.nc=e,this.rc=!1,hd(`INTERNAL UNHANDLED ERROR: `,py(e)),e})).then((e=>(this.rc=!1,e))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let r=J_.createAndSchedule(this,e,t,n,(e=>this.hc(e)));return this.tc.push(r),r}uc(){this.nc&&z(47125,{Pc:py(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(let t of this.tc)if(t.skipDelay(),e!==`all`&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function py(e){let t=e.message||``;return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}var my=class extends ay{constructor(e,t,n,r){super(e,t,n,r),this.type=`firestore`,this._queue=new fy,this._persistenceKey=r?.name||`[DEFAULT]`}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new fy(e),this._firestoreClient=void 0,await e}}};function hy(e,t){let n=typeof e==`object`?e:Au(),r=typeof e==`string`?e:t||Vf,i=wu(n,`firestore`).getImmediate({identifier:r});if(!i._initialized){let e=bc(`firestore`);e&&oy(i,...e)}return i}function gy(e){if(e._terminated)throw new U(H.FAILED_PRECONDITION,`The client has already been terminated.`);return e._firestoreClient||_y(e),e._firestoreClient}function _y(e){let t=e._freezeSettings(),n=function(e,t,n,r){return new Bf(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,ey(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,e._app?.options.appId||``,e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new Kv(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(e){let t=e?._online.build();return{_offline:e?._offline.build(t),_online:t}}(e._componentsProvider))}var vy=class e{constructor(e){this._byteString=e}static fromBase64String(t){try{return new e(Of.fromBase64String(t))}catch(e){throw new U(H.INVALID_ARGUMENT,`Failed to construct data from Base64 string: `+e)}}static fromUint8Array(t){return new e(Of.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return`Bytes(base64: `+this.toBase64()+`)`}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:e._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(qd(t,e._jsonSchema))return e.fromBase64String(t.bytes)}};vy._jsonSchemaVersion=`firestore/bytes/1.0`,vy._jsonSchema={type:Kd(`string`,vy._jsonSchemaVersion),bytes:Kd(`string`)};var yy=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new U(H.INVALID_ARGUMENT,`Invalid field name at argument $(i + 1). Field names must not be empty.`);this._internalPath=new zd(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}},by=class{constructor(e){this._methodName=e}},xy=class e{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new U(H.INVALID_ARGUMENT,`Latitude must be a number between -90 and 90, but was: `+e);if(!isFinite(t)||t<-180||t>180)throw new U(H.INVALID_ARGUMENT,`Longitude must be a number between -180 and 180, but was: `+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return W(this._lat,e._lat)||W(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:e._jsonSchemaVersion}}static fromJSON(t){if(qd(t,e._jsonSchema))return new e(t.latitude,t.longitude)}};xy._jsonSchemaVersion=`firestore/geoPoint/1.0`,xy._jsonSchema={type:Kd(`string`,xy._jsonSchemaVersion),latitude:Kd(`number`),longitude:Kd(`number`)};var Sy=class e{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:e._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(qd(t,e._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e==`number`)))return new e(t.vectorValues);throw new U(H.INVALID_ARGUMENT,`Expected 'vectorValues' field to be a number array`)}}};Sy._jsonSchemaVersion=`firestore/vectorValue/1.0`,Sy._jsonSchema={type:Kd(`string`,Sy._jsonSchemaVersion),vectorValues:Kd(`object`)};var Cy=/^__.*__$/,wy=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask===null?new Vm(e,this.data,t,this.fieldTransforms):new Hm(e,this.data,this.fieldMask,t,this.fieldTransforms)}},Ty=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Hm(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function Ey(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z(40011,{Ac:e})}}var Dy=class e{constructor(e,t,n,r,i,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new e({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){let t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Vy(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc(`Document fields must not be empty`);if(Ey(this.Ac)&&Cy.test(e))throw this.Sc(`Document fields cannot begin and end with "__"`)}},Oy=class{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||c_(e)}Cc(e,t,n,r=!1){return new Dy({Ac:e,methodName:t,Dc:n,path:zd.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ky(e){let t=e._freezeSettings(),n=c_(e._databaseId);return new Oy(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Ay(e,t,n,r,i,a={}){let o=e.Cc(a.merge||a.mergeFields?2:0,t,n,i);Ly(`Data must be an object, but it was:`,o,r);let s=Fy(r,o),c,l;if(a.merge)c=new Ef(o.fieldMask),l=o.fieldTransforms;else if(a.mergeFields){let e=[];for(let r of a.mergeFields){let i=Ry(t,r,n);if(!o.contains(i))throw new U(H.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Hy(e,i)||e.push(i)}c=new Ef(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new wy(new dp(s),c,l)}var jy=class e extends by{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(t){return t instanceof e}};function My(e,t,n,r){let i=e.Cc(1,t,n);Ly(`Data must be an object, but it was:`,i,r);let a=[],o=dp.empty();return yf(r,((e,r)=>{let s=By(t,e,n);r=rl(r);let c=i.yc(s);if(r instanceof jy)a.push(s);else{let e=Py(r,c);e!=null&&(a.push(s),o.set(s,e))}})),new Ty(o,new Ef(a),i.fieldTransforms)}function Ny(e,t,n,r,i,a){let o=e.Cc(1,t,n),s=[Ry(t,r,n)],c=[i];if(a.length%2!=0)throw new U(H.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<a.length;e+=2)s.push(Ry(t,a[e])),c.push(a[e+1]);let l=[],u=dp.empty();for(let e=s.length-1;e>=0;--e)if(!Hy(l,s[e])){let t=s[e],n=c[e];n=rl(n);let r=o.yc(t);if(n instanceof jy)l.push(t);else{let e=Py(n,r);e!=null&&(l.push(t),u.set(t,e))}}return new Ty(u,new Ef(l),o.fieldTransforms)}function Py(e,t){if(Iy(e=rl(e)))return Ly(`Unsupported field value:`,t,e),Fy(e,t);if(e instanceof by)return function(e,t){if(!Ey(t.Ac))throw t.Sc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Sc(`${e._methodName}() is not currently supported inside arrays`);let n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc(`Nested arrays are not supported`);return function(e,t){let n=[],r=0;for(let i of e){let e=Py(i,t.wc(r));e??={nullValue:`NULL_VALUE`},n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if((e=rl(e))===null)return{nullValue:`NULL_VALUE`};if(typeof e==`number`)return vm(t.serializer,e);if(typeof e==`boolean`)return{booleanValue:e};if(typeof e==`string`)return{stringValue:e};if(e instanceof Date){let n=Xd.fromDate(e);return{timestampValue:Sh(t.serializer,n)}}if(e instanceof Xd){let n=new Xd(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Sh(t.serializer,n)}}if(e instanceof xy)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof vy)return{bytesValue:Ch(t.serializer,e._byteString)};if(e instanceof cy){let n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Eh(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Sy)return function(e,t){return{mapValue:{fields:{[Uf]:{stringValue:Kf},[qf]:{arrayValue:{values:e.toArray().map((e=>{if(typeof e!=`number`)throw t.Sc(`VectorValues must only contain numeric values.`);return gm(t.serializer,e)}))}}}}}}(e,t);throw t.Sc(`Unsupported field value: ${Wd(e)}`)}(e,t)}function Fy(e,t){let n={};return bf(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):yf(e,((e,r)=>{let i=Py(r,t.mc(e));i!=null&&(n[e]=i)})),{mapValue:{fields:n}}}function Iy(e){return!(typeof e!=`object`||!e||e instanceof Array||e instanceof Date||e instanceof Xd||e instanceof xy||e instanceof vy||e instanceof cy||e instanceof by||e instanceof Sy)}function Ly(e,t,n){if(!Iy(n)||!Ud(n)){let r=Wd(n);throw r===`an object`?t.Sc(e+` a custom object`):t.Sc(e+` `+r)}}function Ry(e,t,n){if((t=rl(t))instanceof yy)return t._internalPath;if(typeof t==`string`)return By(e,t);throw Vy(`Field path arguments must be of type string or `,e,!1,void 0,n)}var zy=RegExp(`[~\\*/\\[\\]]`);function By(e,t,n){if(t.search(zy)>=0)throw Vy(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new yy(...t.split(`.`))._internalPath}catch{throw Vy(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Vy(e,t,n,r,i){let a=r&&!r.isEmpty(),o=i!==void 0,s=`Function ${t}() called with invalid data`;n&&(s+=" (via `toFirestore()`)"),s+=`. `;let c=``;return(a||o)&&(c+=` (found`,a&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=`)`),new U(H.INVALID_ARGUMENT,s+e+c)}function Hy(e,t){return e.some((e=>e.isEqual(t)))}var Uy=class{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new cy(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Wy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Gy(`DocumentSnapshot.get`,e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Wy=class extends Uy{data(){return super.data()}};function Gy(e,t){return typeof t==`string`?By(e,t):t instanceof yy?t._internalPath:t._delegate._internalPath}var Ky=class{convertValue(e,t=`none`){switch(Jf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jf(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Mf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw z(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t=`none`){let n={};return yf(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){let t=e.fields?.[qf].arrayValue?.values?.map((e=>jf(e.doubleValue)));return new Sy(t)}convertGeoPoint(e){return new xy(jf(e.latitude),jf(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case`previous`:let n=Rf(e);return n==null?null:this.convertValue(n,t);case`estimate`:return this.convertTimestamp(zf(e));default:return null}}convertTimestamp(e){let t=Af(e);return new Xd(t.seconds,t.nanos)}convertDocumentKey(e,t){let n=Ld.fromString(e);B(Zh(n),9688,{name:e});let r=new Hf(n.get(1),n.get(3)),i=new G(n.popFirst(5));return r.isEqual(t)||hd(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}};function qy(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}var Jy=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Yy=class e extends Uy{constructor(e,t,n,r,i,a){super(e,t,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Xy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let n=this._document.data.field(Gy(`DocumentSnapshot.get`,e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new U(H.FAILED_PRECONDITION,`DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t=this._document,n={};return n.type=e._jsonSchemaVersion,n.bundle=``,n.bundleSource=`DocumentSnapshot`,n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,`previous`),n.bundle=(this._firestore,this.ref.path,`NOT SUPPORTED`),n)}};Yy._jsonSchemaVersion=`firestore/documentSnapshot/1.0`,Yy._jsonSchema={type:Kd(`string`,Yy._jsonSchemaVersion),bundleSource:Kd(`string`,`DocumentSnapshot`),bundleName:Kd(`string`),bundle:Kd(`string`)};var Xy=class extends Yy{data(e={}){return super.data(e)}},Zy=class e{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Jy(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){let e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Xy(this._firestore,this._userDataWriter,n.key,n,new Jy(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new U(H.INVALID_ARGUMENT,`To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().`);return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{let r=new Xy(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Jy(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:`added`,doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||e.type!==3)).map((t=>{let r=new Xy(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Jy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return t.type!==0&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),t.type!==1&&(n=n.add(t.doc),a=n.indexOf(t.doc.key)),{type:Qy(t.type),doc:r,oldIndex:i,newIndex:a}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new U(H.FAILED_PRECONDITION,`QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t={};t.type=e._jsonSchemaVersion,t.bundleSource=`QuerySnapshot`,t.bundleName=kd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach((e=>{e._document!==null&&(n.push(e._document),r.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,`previous`)),i.push(e.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,`NOT SUPPORTED`),t}};function Qy(e){switch(e){case 0:return`added`;case 2:case 3:return`modified`;case 1:return`removed`;default:return z(61501,{type:e})}}function $y(e){e=Gd(e,cy);let t=Gd(e.firestore,my);return $v(gy(t),e._key).then((n=>ib(t,e,n)))}Zy._jsonSchemaVersion=`firestore/querySnapshot/1.0`,Zy._jsonSchema={type:Kd(`string`,Zy._jsonSchemaVersion),bundleSource:Kd(`string`,`QuerySnapshot`),bundleName:Kd(`string`),bundle:Kd(`string`)};var eb=class extends Ky{constructor(e){super(),this.firestore=e}convertBytes(e){return new vy(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new cy(this.firestore,null,t)}};function tb(e,t,n){e=Gd(e,cy);let r=Gd(e.firestore,my),i=qy(e.converter,t,n);return rb(r,[Ay(ky(r),`setDoc`,e._key,i,e.converter!==null,n).toMutation(e._key,Nm.none())])}function nb(e,t,n,...r){e=Gd(e,cy);let i=Gd(e.firestore,my),a=ky(i),o;return o=typeof(t=rl(t))==`string`||t instanceof yy?Ny(a,`updateDoc`,e._key,t,n,r):My(a,`updateDoc`,e._key,t),rb(i,[o.toMutation(e._key,Nm.exists(!0))])}function rb(e,t){return function(e,t){let n=new yd;return e.asyncQueue.enqueueAndForget((async()=>Cv(await Zv(e),t,n))),n.promise}(gy(e),t)}function ib(e,t,n){let r=n.docs.get(t._key);return new Yy(e,new eb(e),t._key,r,new Jy(n.hasPendingWrites,n.fromCache),t.converter)}(function(e,t=!0){(function(e){fd=e})(Ou),Cu(new il(`firestore`,((e,{instanceIdentifier:n,options:r})=>{let i=e.getProvider(`app`).getImmediate(),a=new my(new Cd(e.getProvider(`auth-internal`)),new Dd(i,e.getProvider(`app-check-internal`)),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,[`projectId`]))throw new U(H.INVALID_ARGUMENT,`"projectId" not provided in firebase.initializeApp.`);return new Hf(e.options.projectId,t)}(i,n),i);return r={useFetchStreams:t,...r},a._setSettings(r),a}),`PUBLIC`).setMultipleInstances(!0)),ju(ld,ud,e),ju(ld,ud,`esm2020`)})();const ab=hy(ku({apiKey:`AIzaSyDapqMH_oM7h6CDKM0laMGrLIlDVDyb_gY`,authDomain:`hometv-c10f8.firebaseapp.com`,projectId:`hometv-c10f8`,storageBucket:`hometv-c10f8.appspot.com`,messagingSenderId:`452296723769`,appId:`1:452296723769:web:982a4288b9cf4e189bace8`}));function ob(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var sb=ob,cb=new Wc(`auth`,`Firebase`,ob()),lb=new hl(`@firebase/auth`);function ub(e,...t){lb.logLevel<=L.WARN&&lb.warn(`Auth (${Ou}): ${e}`,...t)}function db(e,...t){lb.logLevel<=L.ERROR&&lb.error(`Auth (${Ou}): ${e}`,...t)}function fb(e,...t){throw gb(e,...t)}function pb(e,...t){return gb(e,...t)}function mb(e,t,n){return new Wc(`auth`,`Firebase`,{...sb(),[t]:n}).create(t,{appName:e.name})}function hb(e){return mb(e,`operation-not-supported-in-this-environment`,`Operations that alter the current user are not supported in conjunction with FirebaseServerApp`)}function gb(e,...t){if(typeof e!=`string`){let n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return cb.create(e,...t)}function X(e,t,...n){if(!e)throw gb(t,...n)}function _b(e){let t=`INTERNAL ASSERTION FAILED: `+e;throw db(t),Error(t)}function vb(e,t){e||_b(t)}function yb(){return typeof self<`u`&&self.location?.href||``}function bb(){return xb()===`http:`||xb()===`https:`}function xb(){return typeof self<`u`&&self.location?.protocol||null}function Sb(){return typeof navigator<`u`&&navigator&&`onLine`in navigator&&typeof navigator.onLine==`boolean`&&(bb()||Ic()||`connection`in navigator)?navigator.onLine:!0}function Cb(){if(typeof navigator>`u`)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}var wb=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,vb(t>e,`Short delay should be less than long delay!`),this.isMobile=Nc()||Lc()}get(){return Sb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Tb(e,t){vb(e.emulator,`Emulator should always be set here`);let{url:n}=e.emulator;return t?`${n}${t.startsWith(`/`)?t.slice(1):t}`:n}var Eb=class{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<`u`&&`fetch`in self)return self.fetch;if(typeof globalThis<`u`&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<`u`)return fetch;_b(`Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<`u`&&`Headers`in self)return self.Headers;if(typeof globalThis<`u`&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<`u`)return Headers;_b(`Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<`u`&&`Response`in self)return self.Response;if(typeof globalThis<`u`&&globalThis.Response)return globalThis.Response;if(typeof Response<`u`)return Response;_b(`Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}},Db={CREDENTIAL_MISMATCH:`custom-token-mismatch`,MISSING_CUSTOM_TOKEN:`internal-error`,INVALID_IDENTIFIER:`invalid-email`,MISSING_CONTINUE_URI:`internal-error`,INVALID_PASSWORD:`wrong-password`,MISSING_PASSWORD:`missing-password`,INVALID_LOGIN_CREDENTIALS:`invalid-credential`,EMAIL_EXISTS:`email-already-in-use`,PASSWORD_LOGIN_DISABLED:`operation-not-allowed`,INVALID_IDP_RESPONSE:`invalid-credential`,INVALID_PENDING_TOKEN:`invalid-credential`,FEDERATED_USER_ID_ALREADY_LINKED:`credential-already-in-use`,MISSING_REQ_TYPE:`internal-error`,EMAIL_NOT_FOUND:`user-not-found`,RESET_PASSWORD_EXCEED_LIMIT:`too-many-requests`,EXPIRED_OOB_CODE:`expired-action-code`,INVALID_OOB_CODE:`invalid-action-code`,MISSING_OOB_CODE:`internal-error`,CREDENTIAL_TOO_OLD_LOGIN_AGAIN:`requires-recent-login`,INVALID_ID_TOKEN:`invalid-user-token`,TOKEN_EXPIRED:`user-token-expired`,USER_NOT_FOUND:`user-token-expired`,TOO_MANY_ATTEMPTS_TRY_LATER:`too-many-requests`,PASSWORD_DOES_NOT_MEET_REQUIREMENTS:`password-does-not-meet-requirements`,INVALID_CODE:`invalid-verification-code`,INVALID_SESSION_INFO:`invalid-verification-id`,INVALID_TEMPORARY_PROOF:`invalid-credential`,MISSING_SESSION_INFO:`missing-verification-id`,SESSION_EXPIRED:`code-expired`,MISSING_ANDROID_PACKAGE_NAME:`missing-android-pkg-name`,UNAUTHORIZED_DOMAIN:`unauthorized-continue-uri`,INVALID_OAUTH_CLIENT_ID:`invalid-oauth-client-id`,ADMIN_ONLY_OPERATION:`admin-restricted-operation`,INVALID_MFA_PENDING_CREDENTIAL:`invalid-multi-factor-session`,MFA_ENROLLMENT_NOT_FOUND:`multi-factor-info-not-found`,MISSING_MFA_ENROLLMENT_ID:`missing-multi-factor-info`,MISSING_MFA_PENDING_CREDENTIAL:`missing-multi-factor-session`,SECOND_FACTOR_EXISTS:`second-factor-already-in-use`,SECOND_FACTOR_LIMIT_EXCEEDED:`maximum-second-factor-count-exceeded`,BLOCKING_FUNCTION_ERROR_RESPONSE:`internal-error`,RECAPTCHA_NOT_ENABLED:`recaptcha-not-enabled`,MISSING_RECAPTCHA_TOKEN:`missing-recaptcha-token`,INVALID_RECAPTCHA_TOKEN:`invalid-recaptcha-token`,INVALID_RECAPTCHA_ACTION:`invalid-recaptcha-action`,MISSING_CLIENT_TYPE:`missing-client-type`,MISSING_RECAPTCHA_VERSION:`missing-recaptcha-version`,INVALID_RECAPTCHA_VERSION:`invalid-recaptcha-version`,INVALID_REQ_TYPE:`invalid-req-type`},Ob=[`/v1/accounts:signInWithCustomToken`,`/v1/accounts:signInWithEmailLink`,`/v1/accounts:signInWithIdp`,`/v1/accounts:signInWithPassword`,`/v1/accounts:signInWithPhoneNumber`,`/v1/token`],kb=new wb(3e4,6e4);function Ab(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function jb(e,t,n,r,i={}){return Mb(e,i,async()=>{let i={},a={};r&&(t===`GET`?a=r:i={body:JSON.stringify(r)});let o=Xc({key:e.config.apiKey,...a}).slice(1),s=await e._getAdditionalHeaders();s[`Content-Type`]=`application/json`,e.languageCode&&(s[`X-Firebase-Locale`]=e.languageCode);let c={method:t,headers:s,...i};return Fc()||(c.referrerPolicy=`no-referrer`),e.emulatorConfig&&wc(e.emulatorConfig.host)&&(c.credentials=`include`),Eb.fetch()(await Pb(e,e.config.apiHost,n,o),c)})}async function Mb(e,t,n){e._canInitEmulator=!1;let r={...Db,...t};try{let t=new Ib(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();let a=await i.json();if(`needConfirmation`in a)throw Lb(e,`account-exists-with-different-credential`,a);if(i.ok&&!(`errorMessage`in a))return a;{let[t,n]=(i.ok?a.errorMessage:a.error.message).split(` : `);if(t===`FEDERATED_USER_ID_ALREADY_LINKED`)throw Lb(e,`credential-already-in-use`,a);if(t===`EMAIL_EXISTS`)throw Lb(e,`email-already-in-use`,a);if(t===`USER_DISABLED`)throw Lb(e,`user-disabled`,a);let o=r[t]||t.toLowerCase().replace(/[_\s]+/g,`-`);if(n)throw mb(e,o,n);fb(e,o)}}catch(t){if(t instanceof Uc)throw t;fb(e,`network-request-failed`,{message:String(t)})}}async function Nb(e,t,n,r,i={}){let a=await jb(e,t,n,r,i);return`mfaPendingCredential`in a&&fb(e,`multi-factor-auth-required`,{_serverResponse:a}),a}async function Pb(e,t,n,r){let i=`${t}${n}?${r}`,a=e,o=a.config.emulator?Tb(e.config,i):`${e.config.apiScheme}://${i}`;return Ob.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()===`COOKIE`)?a._getPersistence()._getFinalTarget(o).toString():o}function Fb(e){switch(e){case`ENFORCE`:return`ENFORCE`;case`AUDIT`:return`AUDIT`;case`OFF`:return`OFF`;default:return`ENFORCEMENT_STATE_UNSPECIFIED`}}var Ib=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(pb(this.auth,`network-request-failed`)),kb.get())})}};function Lb(e,t,n){let r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=pb(e,t,r);return i.customData._tokenResponse=n,i}function Rb(e){return e!==void 0&&e.enterprise!==void 0}var zb=class{constructor(e){if(this.siteKey=``,this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw Error(`recaptchaKey undefined`);this.siteKey=e.recaptchaKey.split(`/`)[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Fb(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)===`ENFORCE`||this.getProviderEnforcementState(e)===`AUDIT`}isAnyProviderEnabled(){return this.isProviderEnabled(`EMAIL_PASSWORD_PROVIDER`)||this.isProviderEnabled(`PHONE_PROVIDER`)}};async function Bb(e,t){return jb(e,`GET`,`/v2/recaptchaConfig`,Ab(e,t))}async function Vb(e,t){return jb(e,`POST`,`/v1/accounts:delete`,t)}async function Hb(e,t){return jb(e,`POST`,`/v1/accounts:lookup`,t)}function Ub(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Wb(e,t=!1){let n=rl(e),r=await n.getIdToken(t),i=Kb(r);X(i&&i.exp&&i.auth_time&&i.iat,n.auth,`internal-error`);let a=typeof i.firebase==`object`?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:r,authTime:Ub(Gb(i.auth_time)),issuedAtTime:Ub(Gb(i.iat)),expirationTime:Ub(Gb(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Gb(e){return Number(e)*1e3}function Kb(e){let[t,n,r]=e.split(`.`);if(t===void 0||n===void 0||r===void 0)return db(`JWT malformed, contained fewer than 3 sections`),null;try{let e=pc(n);return e?JSON.parse(e):(db(`Failed to decode base64 JWT payload`),null)}catch(e){return db(`Caught error parsing JWT payload as JSON`,e?.toString()),null}}function qb(e){let t=Kb(e);return X(t,`internal-error`),X(t.exp!==void 0,`internal-error`),X(t.iat!==void 0,`internal-error`),Number(t.exp)-Number(t.iat)}async function Jb(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof Uc&&Yb(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}function Yb({code:e}){return e===`auth/user-disabled`||e===`auth/user-token-expired`}var Xb=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;let e=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code===`auth/network-request-failed`&&this.schedule(!0);return}this.schedule()}},Zb=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ub(this.lastLoginAt),this.creationTime=Ub(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Qb(e){let t=e.auth,n=await Jb(e,Hb(t,{idToken:await e.getIdToken()}));X(n?.users.length,t,`internal-error`);let r=n.users[0];e._notifyReloadListener(r);let i=r.providerUserInfo?.length?tx(r.providerUserInfo):[],a=ex(e.providerData,i),o=e.isAnonymous,s=!(e.email&&r.passwordHash)&&!a?.length,c=o?s:!1,l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Zb(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(e,l)}async function $b(e){let t=rl(e);await Qb(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function ex(e,t){return[...e.filter(e=>!t.some(t=>t.providerId===e.providerId)),...t]}function tx(e){return e.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||``,displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function nx(e,t){let n=await Mb(e,{},async()=>{let n=Xc({grant_type:`refresh_token`,refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,a=await Pb(e,r,`/v1/token`,`key=${i}`),o=await e._getAdditionalHeaders();o[`Content-Type`]=`application/x-www-form-urlencoded`;let s={method:`POST`,headers:o,body:n};return e.emulatorConfig&&wc(e.emulatorConfig.host)&&(s.credentials=`include`),Eb.fetch()(a,s)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function rx(e,t){return jb(e,`POST`,`/v2/accounts:revokeToken`,Ab(e,t))}var ix=class e{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){X(e.idToken,`internal-error`),X(e.idToken!==void 0,`internal-error`),X(e.refreshToken!==void 0,`internal-error`);let t=`expiresIn`in e&&e.expiresIn!==void 0?Number(e.expiresIn):qb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){X(e.length!==0,`internal-error`);let t=qb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(X(this.refreshToken,e,`user-token-expired`),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:n,refreshToken:r,expiresIn:i}=await nx(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,n){let{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new e;return r&&(X(typeof r==`string`,`internal-error`,{appName:t}),o.refreshToken=r),i&&(X(typeof i==`string`,`internal-error`,{appName:t}),o.accessToken=i),a&&(X(typeof a==`number`,`internal-error`,{appName:t}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new e,this.toJSON())}_performRefresh(){return _b(`not implemented`)}};function ax(e,t){X(typeof e==`string`||e===void 0,`internal-error`,{appName:t})}var ox=class e{constructor({uid:e,auth:t,stsTokenManager:n,...r}){this.providerId=`firebase`,this.proactiveRefresh=new Xb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Zb(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){let t=await Jb(this,this.stsTokenManager.getToken(this.auth,e));return X(t,this.auth,`internal-error`),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Wb(this,e)}reload(){return $b(this)}_assign(e){this!==e&&(X(this.uid===e.uid,this.auth,`internal-error`),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(t){let n=new e({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){X(!this.reloadListener,this.auth,`internal-error`),this.reloadListener=e,this.reloadUserInfo&&=(this._notifyReloadListener(this.reloadUserInfo),null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Qb(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Tu(this.auth.app))return Promise.reject(hb(this.auth));let e=await this.getIdToken();return await Jb(this,Vb(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||``}static _fromJSON(t,n){let r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,s=n.tenantId??void 0,c=n._redirectEventId??void 0,l=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:p,providerData:m,stsTokenManager:h}=n;X(d&&h,t,`internal-error`);let g=ix.fromJSON(this.name,h);X(typeof d==`string`,t,`internal-error`),ax(r,t.name),ax(i,t.name),X(typeof f==`boolean`,t,`internal-error`),X(typeof p==`boolean`,t,`internal-error`),ax(a,t.name),ax(o,t.name),ax(s,t.name),ax(c,t.name),ax(l,t.name),ax(u,t.name);let _=new e({uid:d,auth:t,email:i,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:a,tenantId:s,stsTokenManager:g,createdAt:l,lastLoginAt:u});return m&&Array.isArray(m)&&(_.providerData=m.map(e=>({...e}))),c&&(_._redirectEventId=c),_}static async _fromIdTokenResponse(t,n,r=!1){let i=new ix;i.updateFromServerResponse(n);let a=new e({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await Qb(a),a}static async _fromGetAccountInfoResponse(t,n,r){let i=n.users[0];X(i.localId!==void 0,`internal-error`);let a=i.providerUserInfo===void 0?[]:tx(i.providerUserInfo),o=!(i.email&&i.passwordHash)&&!a?.length,s=new ix;s.updateFromIdToken(r);let c=new e({uid:i.localId,auth:t,stsTokenManager:s,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Zb(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(c,l),c}},sx=new Map;function cx(e){vb(e instanceof Function,`Expected a class definition`);let t=sx.get(e);return t?(vb(t instanceof e,`Instance stored in cache mismatched with class`),t):(t=new e,sx.set(e,t),t)}var lx=class{constructor(){this.type=`NONE`,this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}};lx.type=`NONE`;var ux=lx;function dx(e,t,n){return`firebase:${e}:${t}:${n}`}var fx=class e{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;let{config:r,name:i}=this.auth;this.fullUserKey=dx(this.userKey,r.apiKey,i),this.fullPersistenceKey=dx(`persistence`,r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e==`string`){let t=await Hb(this.auth,{idToken:e}).catch(()=>void 0);return t?ox._fromGetAccountInfoResponse(this.auth,t,e):null}return ox._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r=`authUser`){if(!n.length)return new e(cx(ux),t,r);let i=(await Promise.all(n.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),a=i[0]||cx(ux),o=dx(r,t.config.apiKey,t.name),s=null;for(let e of n)try{let n=await e._get(o);if(n){let r;if(typeof n==`string`){let e=await Hb(t,{idToken:n}).catch(()=>void 0);if(!e)break;r=await ox._fromGetAccountInfoResponse(t,e,n)}else r=ox._fromJSON(t,n);e!==a&&(s=r),a=e;break}}catch{}let c=i.filter(e=>e._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new e(a,t,r):(a=c[0],s&&await a._set(o,s.toJSON()),await Promise.all(n.map(async e=>{if(e!==a)try{await e._remove(o)}catch{}})),new e(a,t,r))}};function px(e){let t=e.toLowerCase();if(t.includes(`opera/`)||t.includes(`opr/`)||t.includes(`opios/`))return`Opera`;if(_x(t))return`IEMobile`;if(t.includes(`msie`)||t.includes(`trident/`))return`IE`;if(t.includes(`edge/`))return`Edge`;if(mx(t))return`Firefox`;if(t.includes(`silk/`))return`Silk`;if(yx(t))return`Blackberry`;if(bx(t))return`Webos`;if(hx(t))return`Safari`;if((t.includes(`chrome/`)||gx(t))&&!t.includes(`edge/`))return`Chrome`;if(vx(t))return`Android`;{let t=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(t?.length===2)return t[1]}return`Other`}function mx(e=Mc()){return/firefox\//i.test(e)}function hx(e=Mc()){let t=e.toLowerCase();return t.includes(`safari/`)&&!t.includes(`chrome/`)&&!t.includes(`crios/`)&&!t.includes(`android`)}function gx(e=Mc()){return/crios\//i.test(e)}function _x(e=Mc()){return/iemobile/i.test(e)}function vx(e=Mc()){return/android/i.test(e)}function yx(e=Mc()){return/blackberry/i.test(e)}function bx(e=Mc()){return/webos/i.test(e)}function xx(e=Mc()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Sx(e=Mc()){return xx(e)&&!!window.navigator?.standalone}function Cx(){return Rc()&&document.documentMode===10}function wx(e=Mc()){return xx(e)||vx(e)||bx(e)||yx(e)||/windows phone/i.test(e)||_x(e)}function Tx(e,t=[]){let n;switch(e){case`Browser`:n=px(Mc());break;case`Worker`:n=`${px(Mc())}-${e}`;break;default:n=e}let r=t.length?t.join(`,`):`FirebaseCore-web`;return`${n}/JsCore/${Ou}/${r}`}var Ex=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let n=t=>new Promise((n,r)=>{try{n(e(t))}catch(e){r(e)}});n.onAbort=t,this.queue.push(n);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(let e of t)try{e()}catch{}throw this.auth._errorFactory.create(`login-blocked`,{originalMessage:e?.message})}}};async function Dx(e,t={}){return jb(e,`GET`,`/v2/passwordPolicy`,Ab(e,t))}var Ox=6,kx=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Ox,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState===`ENFORCEMENT_STATE_UNSPECIFIED`&&(this.enforcementState=`OFF`),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join(``)??``,this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&=t.meetsMinPasswordLength??!0,t.isValid&&=t.meetsMaxPasswordLength??!0,t.isValid&&=t.containsLowercaseLetter??!0,t.isValid&&=t.containsUppercaseLetter??!0,t.isValid&&=t.containsNumericCharacter??!0,t.isValid&&=t.containsNonAlphanumericCharacter??!0,t}validatePasswordLengthOptions(e,t){let n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>=`a`&&n<=`z`,n>=`A`&&n<=`Z`,n>=`0`&&n<=`9`,this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||=t),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||=n),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||=r),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||=i)}},Ax=class{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mx(this),this.idTokenSubscription=new Mx(this),this.beforeStateQueue=new Ex(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=cx(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await fx.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await Hb(this,{idToken:e}),n=await ox._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(e){console.warn(`FirebaseServerApp could not login user with provided authIdToken: `,e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Tu(this.app)){let e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),n=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let t=this.redirectUser?._redirectEventId,i=n?._redirectEventId,a=await this.tryRedirectSignIn(e);(!t||t===i)&&a?.user&&(n=a.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(e){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,`argument-error`),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Qb(e)}catch(e){if(e?.code!==`auth/network-request-failed`)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Cb()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Tu(this.app))return Promise.reject(hb(this));let t=e?rl(e):null;return t&&X(t.auth.config.apiKey===this.config.apiKey,this,`invalid-user-token`),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&X(this.tenantId===e.tenantId,this,`tenant-id-mismatch`),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Tu(this.app)?Promise.reject(hb(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Tu(this.app)?Promise.reject(hb(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(cx(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion===this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?t.validatePassword(e):Promise.reject(this._errorFactory.create(`unsupported-password-policy-schema-version`,{}))}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=new kx(await Dx(this));this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wc(`auth`,`Firebase`,e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t={providerId:`apple.com`,tokenType:`ACCESS_TOKEN`,token:e,idToken:await this.currentUser.getIdToken()};this.tenantId!=null&&(t.tenantId=this.tenantId),await rx(this,t)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&cx(e)||this._popupRedirectResolver;X(t,this,`argument-error`),this.redirectPersistenceManager=await fx.create(this,[cx(t._redirectPersistence)],`redirectUser`),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};let i=typeof t==`function`?t:t.next.bind(t),a=!1,o=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(o,this,`internal-error`),o.then(()=>{a||i(this.currentUser)}),typeof t==`function`){let i=e.addObserver(t,n,r);return()=>{a=!0,i()}}else{let n=e.addObserver(t);return()=>{a=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,`internal-error`),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Tx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e[`X-Firebase-gmpid`]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e[`X-Firebase-Client`]=t);let n=await this._getAppCheckToken();return n&&(e[`X-Firebase-AppCheck`]=n),e}async _getAppCheckToken(){if(Tu(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&ub(`Error while retrieving App Check token: ${e.error}`),e?.token}};function jx(e){return rl(e)}var Mx=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=$c(e=>this.observer=e)}get next(){return X(this.observer,this.auth,`internal-error`),this.observer.next.bind(this.observer)}},Nx={async loadJS(){throw Error(`Unable to load external scripts`)},recaptchaV2Script:``,recaptchaEnterpriseScript:``,gapiScript:``};function Px(e){Nx=e}function Fx(e){return Nx.loadJS(e)}function Ix(){return Nx.recaptchaEnterpriseScript}function Lx(){return Nx.gapiScript}function Rx(e){return`__${e}${Math.floor(Math.random()*1e6)}`}var zx=class{constructor(){this.enterprise=new Bx}ready(e){e()}execute(e,t){return Promise.resolve(`token`)}render(e,t){return``}},Bx=class{ready(e){e()}execute(e,t){return Promise.resolve(`token`)}render(e,t){return``}},Vx=`recaptcha-enterprise`,Hx=`NO_RECAPTCHA`,Ux=class{constructor(e){this.type=Vx,this.auth=jx(e)}async verify(e=`verify`,t=!1){async function n(e){if(!t){if(e.tenantId==null&&e._agentRecaptchaConfig!=null)return e._agentRecaptchaConfig.siteKey;if(e.tenantId!=null&&e._tenantRecaptchaConfigs[e.tenantId]!==void 0)return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Bb(e,{clientType:`CLIENT_TYPE_WEB`,version:`RECAPTCHA_ENTERPRISE`}).then(r=>{if(r.recaptchaKey===void 0)n(Error(`recaptcha Enterprise site key undefined`));else{let n=new zb(r);return e.tenantId==null?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}}).catch(e=>{n(e)})})}function r(t,n,r){let i=window.grecaptcha;Rb(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Hx)})}):r(Error(`No reCAPTCHA enterprise script loaded.`))}return this.auth.settings.appVerificationDisabledForTesting?new zx().execute(`siteKey`,{action:`verify`}):new Promise((e,i)=>{n(this.auth).then(n=>{if(!t&&Rb(window.grecaptcha))r(n,e,i);else{if(typeof window>`u`){i(Error(`RecaptchaVerifier is only supported in browser`));return}let t=Ix();t.length!==0&&(t+=n),Fx(t).then(()=>{r(n,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}};async function Wx(e,t,n,r=!1,i=!1){let a=new Ux(e),o;if(i)o=Hx;else try{o=await a.verify(n)}catch{o=await a.verify(n,!0)}let s={...t};if(n===`mfaSmsEnrollment`||n===`mfaSmsSignIn`){if(`phoneEnrollmentInfo`in s){let e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:`CLIENT_TYPE_WEB`,recaptchaVersion:`RECAPTCHA_ENTERPRISE`}})}else if(`phoneSignInInfo`in s){let e=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:`CLIENT_TYPE_WEB`,recaptchaVersion:`RECAPTCHA_ENTERPRISE`}})}return s}return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:`CLIENT_TYPE_WEB`}),Object.assign(s,{recaptchaVersion:`RECAPTCHA_ENTERPRISE`}),s}async function Gx(e,t,n,r,i){return i===`EMAIL_PASSWORD_PROVIDER`?e._getRecaptchaConfig()?.isProviderEnabled(`EMAIL_PASSWORD_PROVIDER`)?r(e,await Wx(e,t,n,n===`getOobCode`)):r(e,t).catch(async i=>i.code===`auth/missing-recaptcha-token`?(console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`),r(e,await Wx(e,t,n,n===`getOobCode`))):Promise.reject(i)):i===`PHONE_PROVIDER`?e._getRecaptchaConfig()?.isProviderEnabled(`PHONE_PROVIDER`)?r(e,await Wx(e,t,n)).catch(async i=>e._getRecaptchaConfig()?.getProviderEnforcementState(`PHONE_PROVIDER`)===`AUDIT`&&(i.code===`auth/missing-recaptcha-token`||i.code===`auth/invalid-app-credential`)?(console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`),r(e,await Wx(e,t,n,!1,!0))):Promise.reject(i)):r(e,await Wx(e,t,n,!1,!0)):Promise.reject(i+` provider is not supported.`)}async function Kx(e){let t=jx(e),n=new zb(await Bb(t,{clientType:`CLIENT_TYPE_WEB`,version:`RECAPTCHA_ENTERPRISE`}));t.tenantId==null?t._agentRecaptchaConfig=n:t._tenantRecaptchaConfigs[t.tenantId]=n,n.isAnyProviderEnabled()&&new Ux(t).verify()}function qx(e,t){let n=wu(e,`auth`);if(n.isInitialized()){let e=n.getImmediate();if(Jc(n.getOptions(),t??{}))return e;fb(e,`already-initialized`)}return n.initialize({options:t})}function Jx(e,t){let n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(cx);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function Yx(e,t,n){let r=jx(e);X(/^https?:\/\//.test(t),r,`invalid-emulator-scheme`);let i=!!n?.disableWarnings,a=Xx(t),{host:o,port:s}=Zx(t),c=s===null?``:`:${s}`,l={url:`${a}//${o}${c}/`},u=Object.freeze({host:o,port:s,protocol:a.replace(`:`,``),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){X(r.config.emulator&&r.emulatorConfig,r,`emulator-config-failed`),X(Jc(l,r.config.emulator)&&Jc(u,r.emulatorConfig),r,`emulator-config-failed`);return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,wc(o)?(Tc(`${a}//${o}${c}`),jc(`Auth`,!0)):i||$x()}function Xx(e){let t=e.indexOf(`:`);return t<0?``:e.substr(0,t+1)}function Zx(e){let t=Xx(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:``,port:null};let r=n[2].split(`@`).pop()||``,i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let e=i[1];return{host:e,port:Qx(r.substr(e.length+1))}}else{let[e,t]=r.split(`:`);return{host:e,port:Qx(t)}}}function Qx(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}function $x(){function e(){let e=document.createElement(`p`),t=e.style;e.innerText=`Running in emulator mode. Do not use with production credentials.`,t.position=`fixed`,t.width=`100%`,t.backgroundColor=`#ffffff`,t.border=`.1em solid #000000`,t.color=`#b50000`,t.bottom=`0px`,t.left=`0px`,t.margin=`0px`,t.zIndex=`10000`,t.textAlign=`center`,e.classList.add(`firebase-emulator-warning`),document.body.appendChild(e)}typeof console<`u`&&typeof console.info==`function`&&console.info(`WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.`),typeof window<`u`&&typeof document<`u`&&(document.readyState===`loading`?window.addEventListener(`DOMContentLoaded`,e):e())}var eS=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _b(`not implemented`)}_getIdTokenResponse(e){return _b(`not implemented`)}_linkToIdToken(e,t){return _b(`not implemented`)}_getReauthenticationResolver(e){return _b(`not implemented`)}};async function tS(e,t){return jb(e,`POST`,`/v1/accounts:signUp`,t)}async function nS(e,t){return Nb(e,`POST`,`/v1/accounts:signInWithPassword`,Ab(e,t))}async function rS(e,t){return Nb(e,`POST`,`/v1/accounts:signInWithEmailLink`,Ab(e,t))}async function iS(e,t){return Nb(e,`POST`,`/v1/accounts:signInWithEmailLink`,Ab(e,t))}var aS=class e extends eS{constructor(e,t,n,r=null){super(`password`,n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(t,n){return new e(t,n,`password`)}static _fromEmailAndCode(t,n,r=null){return new e(t,n,`emailLink`,r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e==`string`?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod===`password`)return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod===`emailLink`)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case`password`:return Gx(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:`CLIENT_TYPE_WEB`},`signInWithPassword`,nS,`EMAIL_PASSWORD_PROVIDER`);case`emailLink`:return rS(e,{email:this._email,oobCode:this._password});default:fb(e,`internal-error`)}}async _linkToIdToken(e,t){switch(this.signInMethod){case`password`:return Gx(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:`CLIENT_TYPE_WEB`},`signUpPassword`,tS,`EMAIL_PASSWORD_PROVIDER`);case`emailLink`:return iS(e,{idToken:t,email:this._email,oobCode:this._password});default:fb(e,`internal-error`)}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function oS(e,t){return Nb(e,`POST`,`/v1/accounts:signInWithIdp`,Ab(e,t))}var sS=`http://localhost`,cS=class e extends eS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){let n=new e(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):fb(`argument-error`),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){let{providerId:n,signInMethod:r,...i}=typeof t==`string`?JSON.parse(t):t;if(!n||!r)return null;let a=new e(n,r);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){return oS(e,this.buildRequest())}_linkToIdToken(e,t){let n=this.buildRequest();return n.idToken=t,oS(e,n)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,oS(e,t)}buildRequest(){let e={requestUri:sS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Xc(t)}return e}};async function lS(e,t){return jb(e,`POST`,`/v1/accounts:sendVerificationCode`,Ab(e,t))}async function uS(e,t){return Nb(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,Ab(e,t))}async function dS(e,t){let n=await Nb(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,Ab(e,t));if(n.temporaryProof)throw Lb(e,`account-exists-with-different-credential`,n);return n}var fS={USER_NOT_FOUND:`user-not-found`};async function pS(e,t){return Nb(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,Ab(e,{...t,operation:`REAUTH`}),fS)}var mS=class e extends eS{constructor(e){super(`phone`,`phone`),this.params=e}static _fromVerification(t,n){return new e({verificationId:t,verificationCode:n})}static _fromTokenResponse(t,n){return new e({phoneNumber:t,temporaryProof:n})}_getIdTokenResponse(e){return uS(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return dS(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return pS(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(t){typeof t==`string`&&(t=JSON.parse(t));let{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a}=t;return!r&&!n&&!i&&!a?null:new e({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a})}};function hS(e){switch(e){case`recoverEmail`:return`RECOVER_EMAIL`;case`resetPassword`:return`PASSWORD_RESET`;case`signIn`:return`EMAIL_SIGNIN`;case`verifyEmail`:return`VERIFY_EMAIL`;case`verifyAndChangeEmail`:return`VERIFY_AND_CHANGE_EMAIL`;case`revertSecondFactorAddition`:return`REVERT_SECOND_FACTOR_ADDITION`;default:return null}}function gS(e){let t=Zc(Qc(e)).link,n=t?Zc(Qc(t)).deep_link_id:null,r=Zc(Qc(e)).deep_link_id;return(r?Zc(Qc(r)).link:null)||r||n||t||e}var _S=class e{constructor(e){let t=Zc(Qc(e)),n=t.apiKey??null,r=t.oobCode??null,i=hS(t.mode??null);X(n&&r&&i,`argument-error`),this.apiKey=n,this.operation=i,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(t){let n=gS(t);try{return new e(n)}catch{return null}}},vS=class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(e,t){return aS._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let n=_S.parseLink(t);return X(n,`argument-error`),aS._fromEmailAndCode(e,n.code,n.tenantId)}};vS.PROVIDER_ID=`password`,vS.EMAIL_PASSWORD_SIGN_IN_METHOD=`password`,vS.EMAIL_LINK_SIGN_IN_METHOD=`emailLink`;var yS=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}},bS=class extends yS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}},xS=class e extends bS{constructor(){super(`facebook.com`)}static credential(t){return cS._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!(`oauthAccessToken`in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch{return null}}};xS.FACEBOOK_SIGN_IN_METHOD=`facebook.com`,xS.PROVIDER_ID=`facebook.com`;var SS=class e extends bS{constructor(){super(`google.com`),this.addScope(`profile`)}static credential(t,n){return cS._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return e.credential(n,r)}catch{return null}}};SS.GOOGLE_SIGN_IN_METHOD=`google.com`,SS.PROVIDER_ID=`google.com`;var CS=class e extends bS{constructor(){super(`github.com`)}static credential(t){return cS._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!(`oauthAccessToken`in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch{return null}}};CS.GITHUB_SIGN_IN_METHOD=`github.com`,CS.PROVIDER_ID=`github.com`;var wS=class e extends bS{constructor(){super(`twitter.com`)}static credential(t,n){return cS._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return e.credential(n,r)}catch{return null}}};wS.TWITTER_SIGN_IN_METHOD=`twitter.com`,wS.PROVIDER_ID=`twitter.com`;async function TS(e,t){return Nb(e,`POST`,`/v1/accounts:signUp`,Ab(e,t))}var ES=class e{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){return new e({user:await ox._fromIdTokenResponse(t,r,i),providerId:DS(r),_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){return await t._updateTokensIfNecessary(r,!0),new e({user:t,providerId:DS(r),_tokenResponse:r,operationType:n})}};function DS(e){return e.providerId?e.providerId:`phoneNumber`in e?`phone`:null}var OS=class e extends Uc{constructor(t,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,e.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new e(t,n,r,i)}};function kS(e,t,n,r){return(t===`reauthenticate`?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{throw n.code===`auth/multi-factor-auth-required`?OS._fromErrorAndOperation(e,n,t,r):n})}async function AS(e,t,n=!1){let r=await Jb(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ES._forOperation(e,`link`,r)}async function jS(e,t,n=!1){let{auth:r}=e;if(Tu(r.app))return Promise.reject(hb(r));let i=`reauthenticate`;try{let a=await Jb(e,kS(r,i,t,e),n);X(a.idToken,r,`internal-error`);let o=Kb(a.idToken);X(o,r,`internal-error`);let{sub:s}=o;return X(e.uid===s,r,`user-mismatch`),ES._forOperation(e,i,a)}catch(e){throw e?.code===`auth/user-not-found`&&fb(r,`user-mismatch`),e}}async function MS(e,t,n=!1){if(Tu(e.app))return Promise.reject(hb(e));let r=`signIn`,i=await kS(e,r,t),a=await ES._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(a.user),a}async function NS(e,t){return MS(jx(e),t)}async function PS(e){let t=jx(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function FS(e,t,n){if(Tu(e.app))return Promise.reject(hb(e));let r=jx(e),i=await Gx(r,{returnSecureToken:!0,email:t,password:n,clientType:`CLIENT_TYPE_WEB`},`signUpPassword`,TS,`EMAIL_PASSWORD_PROVIDER`).catch(t=>{throw t.code===`auth/password-does-not-meet-requirements`&&PS(e),t}),a=await ES._fromIdTokenResponse(r,`signIn`,i);return await r._updateCurrentUser(a.user),a}function IS(e,t,n){return Tu(e.app)?Promise.reject(hb(e)):NS(rl(e),vS.credential(t,n)).catch(async t=>{throw t.code===`auth/password-does-not-meet-requirements`&&PS(e),t})}function LS(e,t,n,r){return rl(e).onIdTokenChanged(t,n,r)}function RS(e,t,n){return rl(e).beforeAuthStateChanged(t,n)}function zS(e,t,n,r){return rl(e).onAuthStateChanged(t,n,r)}function BS(e){return rl(e).signOut()}function VS(e,t){return jb(e,`POST`,`/v2/accounts/mfaEnrollment:start`,Ab(e,t))}function HS(e,t){return jb(e,`POST`,`/v2/accounts/mfaEnrollment:finalize`,Ab(e,t))}function US(e,t){return jb(e,`POST`,`/v2/accounts/mfaEnrollment:start`,Ab(e,t))}function WS(e,t){return jb(e,`POST`,`/v2/accounts/mfaEnrollment:finalize`,Ab(e,t))}var GS=`__sak`,KS=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(GS,`1`),this.storage.removeItem(GS),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}},qS=1e3,JS=10,YS=class extends KS{constructor(){super(()=>window.localStorage,`LOCAL`),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});return}let n=e.key;t?this.detachListener():this.stopPolling();let r=()=>{let e=this.storage.getItem(n);!t&&this.localCache[n]===e||this.notifyListeners(n,e)},i=this.storage.getItem(n);Cx()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,JS):r()}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent(`storage`,{key:e,oldValue:t,newValue:n}),!0)})},qS)}stopPolling(){this.pollTimer&&=(clearInterval(this.pollTimer),null)}attachListener(){window.addEventListener(`storage`,this.boundEventHandler)}detachListener(){window.removeEventListener(`storage`,this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}};YS.type=`LOCAL`;var XS=YS,ZS=1e3;function QS(e){let t=e.replace(/[\\^$.*+?()[\]{}|]/g,`\\$&`),n=RegExp(`${t}=([^;]+)`);return document.cookie.match(n)?.[1]??null}function $S(e){return`${window.location.protocol===`http:`?`__dev_`:`__HOST-`}FIREBASE_${e.split(`:`)[3]}`}var eC=class{constructor(){this.type=`COOKIE`,this.listenerUnsubscribes=new Map}_getFinalTarget(e){let t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set(`finalTarget`,e),t}async _isAvailable(){return typeof isSecureContext==`boolean`&&!isSecureContext||typeof navigator>`u`||typeof document>`u`?!1:navigator.cookieEnabled??!0}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;let t=$S(e);return window.cookieStore?(await window.cookieStore.get(t))?.value:QS(t)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;let t=$S(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch(`/__cookies__`,{method:`DELETE`}).catch(()=>void 0)}_addListener(e,t){if(!this._isAvailable())return;let n=$S(e);if(window.cookieStore){let e=(e=>{let r=e.changed.find(e=>e.name===n);r&&t(r.value),e.deleted.find(e=>e.name===n)&&t(null)});return this.listenerUnsubscribes.set(t,()=>window.cookieStore.removeEventListener(`change`,e)),window.cookieStore.addEventListener(`change`,e)}let r=QS(n),i=setInterval(()=>{let e=QS(n);e!==r&&(t(e),r=e)},ZS);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){let n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}};eC.type=`COOKIE`;var tC=class extends KS{constructor(){super(()=>window.sessionStorage,`SESSION`)}_addListener(e,t){}_removeListener(e,t){}};tC.type=`SESSION`;var nC=tC;function rC(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}}))}var iC=class e{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let n=this.receivers.find(e=>e.isListeningto(t));if(n)return n;let r=new e(t);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let t=e,{eventId:n,eventType:r,data:i}=t.data,a=this.handlersMap[r];if(!a?.size)return;t.ports[0].postMessage({status:`ack`,eventId:n,eventType:r});let o=await rC(Array.from(a).map(async e=>e(t.origin,i)));t.ports[0].postMessage({status:`done`,eventId:n,eventType:r,response:o})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener(`message`,this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener(`message`,this.boundEventHandler)}};iC.receivers=[];function aC(e=``,t=10){let n=``;for(let e=0;e<t;e++)n+=Math.floor(Math.random()*10);return e+n}var oC=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener(`message`,e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){let r=typeof MessageChannel<`u`?new MessageChannel:null;if(!r)throw Error(`connection_unavailable`);let i,a;return new Promise((o,s)=>{let c=aC(``,20);r.port1.start();let l=setTimeout(()=>{s(Error(`unsupported_event`))},n);a={messageChannel:r,onMessage(e){let t=e;if(t.data.eventId===c)switch(t.data.status){case`ack`:clearTimeout(l),i=setTimeout(()=>{s(Error(`timeout`))},3e3);break;case`done`:clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),s(Error(`invalid_response`));break}}},this.handlers.add(a),r.port1.addEventListener(`message`,a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}};function sC(){return window}function cC(e){sC().location.href=e}function lC(){return sC().WorkerGlobalScope!==void 0&&typeof sC().importScripts==`function`}async function uC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dC(){return navigator?.serviceWorker?.controller||null}function fC(){return lC()?self:null}var pC=`firebaseLocalStorageDb`,mC=1,hC=`firebaseLocalStorage`,gC=`fbase_key`,_C=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener(`success`,()=>{e(this.request.result)}),this.request.addEventListener(`error`,()=>{t(this.request.error)})})}};function vC(e,t){return e.transaction([hC],t?`readwrite`:`readonly`).objectStore(hC)}function yC(){return new _C(indexedDB.deleteDatabase(pC)).toPromise()}function bC(){let e=indexedDB.open(pC,mC);return new Promise((t,n)=>{e.addEventListener(`error`,()=>{n(e.error)}),e.addEventListener(`upgradeneeded`,()=>{let t=e.result;try{t.createObjectStore(hC,{keyPath:gC})}catch(e){n(e)}}),e.addEventListener(`success`,async()=>{let n=e.result;n.objectStoreNames.contains(hC)?t(n):(n.close(),await yC(),t(await bC()))})})}async function xC(e,t,n){return new _C(vC(e,!0).put({[gC]:t,value:n})).toPromise()}async function SC(e,t){let n=await new _C(vC(e,!1).get(t)).toPromise();return n===void 0?null:n.value}function CC(e,t){return new _C(vC(e,!0).delete(t)).toPromise()}var wC=800,TC=3,EC=class{constructor(){this.type=`LOCAL`,this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||=await bC(),this.db}async _withRetries(e){let t=0;for(;;)try{return await e(await this._openDb())}catch(e){if(t++>TC)throw e;this.db&&=(this.db.close(),void 0)}}async initializeServiceWorkerMessaging(){return lC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=iC._getInstance(fC()),this.receiver._subscribe(`keyChanged`,async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe(`ping`,async(e,t)=>[`keyChanged`])}async initializeSender(){if(this.activeServiceWorker=await uC(),!this.activeServiceWorker)return;this.sender=new oC(this.activeServiceWorker);let e=await this.sender._send(`ping`,{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes(`keyChanged`)&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||dC()!==this.activeServiceWorker))try{await this.sender._send(`keyChanged`,{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await bC();return await xC(e,GS,`1`),await CC(e,GS),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>xC(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(t=>SC(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>CC(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(e=>new _C(vC(e,!1).getAll()).toPromise());if(!e||this.pendingWrites!==0)return[];let t=[],n=new Set;if(e.length!==0)for(let{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(let e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wC)}stopPolling(){this.pollTimer&&=(clearInterval(this.pollTimer),null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};EC.type=`LOCAL`;var DC=EC;function OC(e,t){return jb(e,`POST`,`/v2/accounts/mfaSignIn:start`,Ab(e,t))}function kC(e,t){return jb(e,`POST`,`/v2/accounts/mfaSignIn:finalize`,Ab(e,t))}function AC(e,t){return jb(e,`POST`,`/v2/accounts/mfaSignIn:finalize`,Ab(e,t))}Rx(`rcb`),new wb(3e4,6e4);var jC=`recaptcha`;async function MC(e,t,n){if(!e._getRecaptchaConfig())try{await Kx(e)}catch{console.log(`Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.`)}try{let r;if(r=typeof t==`string`?{phoneNumber:t}:t,`session`in r){let t=r.session;if(`phoneNumber`in r)return X(t.type===`enroll`,e,`internal-error`),(await Gx(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:`CLIENT_TYPE_WEB`}},`mfaSmsEnrollment`,async(e,t)=>t.phoneEnrollmentInfo.captchaResponse===Hx?(X(n?.type===jC,e,`argument-error`),VS(e,await NC(e,t,n))):VS(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo;{X(t.type===`signin`,e,`internal-error`);let i=r.multiFactorHint?.uid||r.multiFactorUid;return X(i,e,`missing-multi-factor-info`),(await Gx(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:`CLIENT_TYPE_WEB`}},`mfaSmsSignIn`,async(e,t)=>t.phoneSignInInfo.captchaResponse===Hx?(X(n?.type===jC,e,`argument-error`),OC(e,await NC(e,t,n))):OC(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}else return(await Gx(e,{phoneNumber:r.phoneNumber,clientType:`CLIENT_TYPE_WEB`},`sendVerificationCode`,async(e,t)=>t.captchaResponse===Hx?(X(n?.type===jC,e,`argument-error`),lS(e,await NC(e,t,n))):lS(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).sessionInfo}finally{n?._reset()}}async function NC(e,t,n){X(n.type===jC,e,`argument-error`);let r=await n.verify();X(typeof r==`string`,e,`argument-error`);let i={...t};if(`phoneEnrollmentInfo`in i){let e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,a=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:a}}),i}else if(`phoneSignInInfo`in i){let e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}else return Object.assign(i,{recaptchaToken:r}),i}var PC=class e{constructor(t){this.providerId=e.PROVIDER_ID,this.auth=jx(t)}verifyPhoneNumber(e,t){return MC(this.auth,e,rl(t))}static credential(e,t){return mS._fromVerification(e,t)}static credentialFromResult(t){let n=t;return e.credentialFromTaggedObject(n)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:n}=e;return t&&n?mS._fromTokenResponse(t,n):null}};PC.PROVIDER_ID=`phone`,PC.PHONE_SIGN_IN_METHOD=`phone`;function FC(e,t){return t?cx(t):(X(e._popupRedirectResolver,e,`argument-error`),e._popupRedirectResolver)}var IC=class extends eS{constructor(e){super(`custom`,`custom`),this.params=e}_getIdTokenResponse(e){return oS(e,this._buildIdpRequest())}_linkToIdToken(e,t){return oS(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return oS(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function LC(e){return MS(e.auth,new IC(e),e.bypassAuthState)}function RC(e){let{auth:t,user:n}=e;return X(n,t,`internal-error`),jS(n,new IC(e),e.bypassAuthState)}async function zC(e){let{auth:t,user:n}=e;return X(n,t,`internal-error`),AS(n,new IC(e),e.bypassAuthState)}var BC=class{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}let s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(s))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case`signInViaPopup`:case`signInViaRedirect`:return LC;case`linkViaPopup`:case`linkViaRedirect`:return zC;case`reauthViaPopup`:case`reauthViaRedirect`:return RC;default:fb(this.auth,`internal-error`)}}resolve(e){vb(this.pendingPromise,`Pending promise was never set`),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vb(this.pendingPromise,`Pending promise was never set`),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}},VC=new wb(2e3,1e4),HC=class e extends BC{constructor(t,n,r,i,a){super(t,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return X(e,this.auth,`internal-error`),e}async onExecution(){vb(this.filter.length===1,`Popup operations only handle one event`);let e=aC();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(pb(this.auth,`web-storage-unsupported`))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(pb(this.auth,`cancelled-popup-request`))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){let e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pb(this.auth,`popup-closed-by-user`))},8e3);return}this.pollId=window.setTimeout(e,VC.get())};e()}};HC.currentPopupAction=null;var UC=`pendingRedirect`,WC=new Map,GC=class extends BC{constructor(e,t,n=!1){super(e,[`signInViaRedirect`,`linkViaRedirect`,`reauthViaRedirect`,`unknown`],t,void 0,n),this.eventId=null}async execute(){let e=WC.get(this.auth._key());if(!e){try{let t=await KC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}WC.set(this.auth._key(),e)}return this.bypassAuthState||WC.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type===`signInViaRedirect`)return super.onAuthEvent(e);if(e.type===`unknown`){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function KC(e,t){let n=YC(t),r=JC(e);if(!await r._isAvailable())return!1;let i=await r._get(n)===`true`;return await r._remove(n),i}function qC(e,t){WC.set(e._key(),t)}function JC(e){return cx(e._redirectPersistence)}function YC(e){return dx(UC,e.config.apiKey,e.name)}async function XC(e,t,n=!1){if(Tu(e.app))return Promise.reject(hb(e));let r=jx(e),i=await new GC(r,FC(r,t),n).execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,t)),i}var ZC=600*1e3,QC=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tw(e)?t:(this.hasHandledPotentialRedirect=!0,t||=(this.queuedRedirectEvent=e,!0),t)}sendToConsumer(e,t){if(e.error&&!ew(e)){let n=e.error.code?.split(`auth/`)[1]||`internal-error`;t.onError(pb(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ZC&&this.cachedEventUids.clear(),this.cachedEventUids.has($C(e))}saveEventToCache(e){this.cachedEventUids.add($C(e)),this.lastProcessedEventTime=Date.now()}};function $C(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join(`-`)}function ew({type:e,error:t}){return e===`unknown`&&t?.code===`auth/no-auth-event`}function tw(e){switch(e.type){case`signInViaRedirect`:case`linkViaRedirect`:case`reauthViaRedirect`:return!0;case`unknown`:return ew(e);default:return!1}}async function nw(e,t={}){return jb(e,`GET`,`/v1/projects`,t)}var rw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iw=/^https?/;async function aw(e){if(e.config.emulator)return;let{authorizedDomains:t}=await nw(e);for(let e of t)try{if(ow(e))return}catch{}fb(e,`unauthorized-domain`)}function ow(e){let t=yb(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith(`chrome-extension://`)){let i=new URL(e);return i.hostname===``&&r===``?n===`chrome-extension:`&&e.replace(`chrome-extension://`,``)===t.replace(`chrome-extension://`,``):n===`chrome-extension:`&&i.hostname===r}if(!iw.test(n))return!1;if(rw.test(e))return r===e;let i=e.replace(/\./g,`\\.`);return RegExp(`^(.+\\.`+i+`|`+i+`)$`,`i`).test(r)}var sw=new wb(3e4,6e4);function cw(){let e=sC().___jsl;if(e?.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}}function lw(e){return new Promise((t,n)=>{function r(){cw(),gapi.load(`gapi.iframes`,{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{cw(),n(pb(e,`network-request-failed`))},timeout:sw.get()})}if(sC().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(sC().gapi?.load)r();else{let t=Rx(`iframefcb`);return sC()[t]=()=>{gapi.load?r():n(pb(e,`network-request-failed`))},Fx(`${Lx()}?onload=${t}`).catch(e=>n(e))}}).catch(e=>{throw uw=null,e})}var uw=null;function dw(e){return uw||=lw(e),uw}var fw=new wb(5e3,15e3),pw=`__/auth/iframe`,mw=`emulator/auth/iframe`,hw={style:{position:`absolute`,top:`-100px`,width:`1px`,height:`1px`},"aria-hidden":`true`,tabindex:`-1`},gw=new Map([[`identitytoolkit.googleapis.com`,`p`],[`staging-identitytoolkit.sandbox.googleapis.com`,`s`],[`test-identitytoolkit.sandbox.googleapis.com`,`t`]]);function _w(e){let t=e.config;X(t.authDomain,e,`auth-domain-config-required`);let n=t.emulator?Tb(t,mw):`https://${e.config.authDomain}/${pw}`,r={apiKey:t.apiKey,appName:e.name,v:Ou},i=gw.get(e.config.apiHost);i&&(r.eid=i);let a=e._getFrameworks();return a.length&&(r.fw=a.join(`,`)),`${n}?${Xc(r).slice(1)}`}async function vw(e){let t=await dw(e),n=sC().gapi;return X(n,e,`internal-error`),t.open({where:document.body,url:_w(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hw,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});let i=pb(e,`network-request-failed`),a=sC().setTimeout(()=>{r(i)},fw.get());function o(){sC().clearTimeout(a),n(t)}t.ping(o).then(o,()=>{r(i)})}))}var yw={location:`yes`,resizable:`yes`,statusbar:`yes`,toolbar:`no`},bw=500,xw=600,Sw=`_blank`,Cw=`http://localhost`,ww=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Tw(e,t,n,r=bw,i=xw){let a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s=``,c={...yw,width:r.toString(),height:i.toString(),top:a,left:o},l=Mc().toLowerCase();n&&(s=gx(l)?Sw:n),mx(l)&&(t||=Cw,c.scrollbars=`yes`);let u=Object.entries(c).reduce((e,[t,n])=>`${e}${t}=${n},`,``);if(Sx(l)&&s!==`_self`)return Ew(t||``,s),new ww(null);let d=window.open(t||``,s,u);X(d,e,`popup-blocked`);try{d.focus()}catch{}return new ww(d)}function Ew(e,t){let n=document.createElement(`a`);n.href=e,n.target=t;let r=document.createEvent(`MouseEvent`);r.initMouseEvent(`click`,!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Dw=`__/auth/handler`,Ow=`emulator/auth/handler`,kw=`fac`;async function Aw(e,t,n,r,i,a){X(e.config.authDomain,e,`auth-domain-config-required`),X(e.config.apiKey,e,`invalid-api-key`);let o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Ou,eventId:i};if(t instanceof yS){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||``,qc(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(let[e,t]of Object.entries(a||{}))o[e]=t}if(t instanceof bS){let e=t.getScopes().filter(e=>e!==``);e.length>0&&(o.scopes=e.join(`,`))}e.tenantId&&(o.tid=e.tenantId);let s=o;for(let e of Object.keys(s))s[e]===void 0&&delete s[e];let c=await e._getAppCheckToken(),l=c?`#${kw}=${encodeURIComponent(c)}`:``;return`${jw(e)}?${Xc(s).slice(1)}${l}`}function jw({config:e}){return e.emulator?Tb(e,Ow):`https://${e.authDomain}/${Dw}`}var Mw=`webStorageSupport`,Nw=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nC,this._completeRedirectFn=XC,this._overrideRedirectResult=qC}async _openPopup(e,t,n,r){return vb(this.eventManagers[e._key()]?.manager,`_initialize() not called before _openPopup()`),Tw(e,await Aw(e,t,n,yb(),r),aC())}async _openRedirect(e,t,n,r){return await this._originValidation(e),cC(await Aw(e,t,n,yb(),r)),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(vb(n,`If manager is not set, promise should be`),n)}let n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){let t=await vw(e),n=new QC(e);return t.register(`authEvent`,t=>(X(t?.authEvent,e,`invalid-auth-event`),{status:n.onEvent(t.authEvent)?`ACK`:`ERROR`}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Mw,{type:Mw},n=>{let r=n?.[0]?.[Mw];r!==void 0&&t(!!r),fb(e,`internal-error`)},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=aw(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return wx()||hx()||xx()}},Pw=class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case`enroll`:return this._finalizeEnroll(e,t.credential,n);case`signin`:return this._finalizeSignIn(e,t.credential);default:return _b(`unexpected MultiFactorSessionType`)}}},Fw=class e extends Pw{constructor(e){super(`phone`),this.credential=e}static _fromCredential(t){return new e(t)}_finalizeEnroll(e,t,n){return HS(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return kC(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},Iw=class{constructor(){}static assertion(e){return Fw._fromCredential(e)}};Iw.FACTOR_ID=`phone`;var Lw=class{static assertionForEnrollment(e,t){return Rw._fromSecret(e,t)}static assertionForSignIn(e,t){return Rw._fromEnrollmentId(e,t)}static async generateSecret(e){let t=e;X(t.user?.auth!==void 0,`internal-error`);let n=await US(t.user.auth,{idToken:t.credential,totpEnrollmentInfo:{}});return zw._fromStartTotpMfaEnrollmentResponse(n,t.user.auth)}};Lw.FACTOR_ID=`totp`;var Rw=class e extends Pw{constructor(e,t,n){super(`totp`),this.otp=e,this.enrollmentId=t,this.secret=n}static _fromSecret(t,n){return new e(n,void 0,t)}static _fromEnrollmentId(t,n){return new e(n,t)}async _finalizeEnroll(e,t,n){return X(this.secret!==void 0,e,`argument-error`),WS(e,{idToken:t,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){X(this.enrollmentId!==void 0&&this.otp!==void 0,e,`argument-error`);let n={verificationCode:this.otp};return AC(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n})}},zw=class e{constructor(e,t,n,r,i,a,o){this.sessionInfo=a,this.auth=o,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=n,this.codeIntervalSeconds=r,this.enrollmentCompletionDeadline=i}static _fromStartTotpMfaEnrollmentResponse(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){let n=!1;return(Bw(e)||Bw(t))&&(n=!0),n&&(Bw(e)&&(e=this.auth.currentUser?.email||`unknownuser`),Bw(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}};function Bw(e){return e===void 0||e?.length===0}var Vw=`@firebase/auth`,Hw=`1.11.1`,Uw=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(t=>{e(t?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,`dependent-sdk-initialized-before-auth`)}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Ww(e){switch(e){case`Node`:return`node`;case`ReactNative`:return`rn`;case`Worker`:return`webworker`;case`Cordova`:return`cordova`;case`WebExtension`:return`web-extension`;default:return}}function Gw(e){Cu(new il(`auth`,(t,{options:n})=>{let r=t.getProvider(`app`).getImmediate(),i=t.getProvider(`heartbeat`),a=t.getProvider(`app-check-internal`),{apiKey:o,authDomain:s}=r.options;X(o&&!o.includes(`:`),`invalid-api-key`,{appName:r.name});let c=new Ax(r,i,a,{apiKey:o,authDomain:s,clientPlatform:e,apiHost:`identitytoolkit.googleapis.com`,tokenApiHost:`securetoken.googleapis.com`,apiScheme:`https`,sdkClientVersion:Tx(e)});return Jx(c,n),c},`PUBLIC`).setInstantiationMode(`EXPLICIT`).setInstanceCreatedCallback((e,t,n)=>{e.getProvider(`auth-internal`).initialize()})),Cu(new il(`auth-internal`,e=>(e=>new Uw(e))(jx(e.getProvider(`auth`).getImmediate())),`PRIVATE`).setInstantiationMode(`EXPLICIT`)),ju(Vw,Hw,Ww(e)),ju(Vw,Hw,`esm2020`)}var Kw=Sc(`authIdTokenMaxAge`)||300,qw=null,Jw=e=>async t=>{let n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Kw)return;let i=n?.token;qw!==i&&(qw=i,await fetch(e,{method:i?`POST`:`DELETE`,headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Yw(e=Au()){let t=wu(e,`auth`);if(t.isInitialized())return t.getImmediate();let n=qx(e,{popupRedirectResolver:Nw,persistence:[DC,XS,nC]}),r=Sc(`authTokenSyncURL`);if(r&&typeof isSecureContext==`boolean`&&isSecureContext){let e=new URL(r,location.origin);if(location.origin===e.origin){let t=Jw(e.toString());RS(n,t,()=>t(n.currentUser)),LS(n,e=>t(e))}}let i=yc(`auth`);return i&&Yx(n,`http://${i}`),n}function Xw(){return document.getElementsByTagName(`head`)?.[0]??document}Px({loadJS(e){return new Promise((t,n)=>{let r=document.createElement(`script`);r.setAttribute(`src`,e),r.onload=t,r.onerror=e=>{let t=pb(`internal-error`);t.customData=e,n(t)},r.type=`text/javascript`,r.charset=`UTF-8`,Xw().appendChild(r)})},gapiScript:`https://apis.google.com/js/api.js`,recaptchaV2Script:`https://www.google.com/recaptcha/api.js`,recaptchaEnterpriseScript:`https://www.google.com/recaptcha/enterprise.js?render=`}),Gw(`Browser`);const Zw=async function(e){let t=await $y(uy(ab,`users`,e));return t.exists()?t.data():null},Qw=async(e,t)=>{await tb(uy(ab,`users`,t),{name:e.userName||``,email:e.email||``,favorites:[],api_key:e.apiKey||``})},$w=function(e){switch(e){case`auth/wrong-password`:return` `;case`auth/internal-error`:return` `;case`auth/invalid-email`:return` email`;case`auth/user-not-found`:return`  `;case`auth/weak-password`:return`   6 `;default:return` `}},eT=[``,` `,``,``,``,`-`,``,``,``,``,``,` `,`-`,``,``,``],tT={FILM:`FILM`,TV_SERIES:`TV_SERIES`,MINI_SERIES:`MINI_SERIES`,TV_SHOW:`TV_SHOW`},nT={[tT.FILM]:``,[tT.TV_SERIES]:``,[tT.MINI_SERIES]:`-`,[tT.TV_SHOW]:`-`},rT=(e,t)=>{let n=Number(t?.kinopoiskId||t?.filmId||t?.id);return[{...t,sortTime:Date.now()},...e.filter(e=>Number(e?.kinopoiskId||e?.filmId||e?.id)!==n)]},iT=(e,t)=>e.filter(e=>Number(e?.kinopoiskId||e?.filmId||e?.id)!==t);var aT=e=>e.map(e=>e?.country||e||``),oT=e=>e.nameRu||e.nameEn||e.nameOriginal||e?.name||` `,sT=e=>e.map(e=>e?.genre||e||``);const cT=e=>{let t=e?.rating||e?.ratingKinopoisk||e?.ratingImdb||e?.rating;return t?typeof t==`number`?t.toFixed(1):t:``},lT=e=>{switch(e){case`FILM`:return nT.FILM;case`TV_SERIES`:return nT.TV_SERIES;case`MINI_SERIES`:return nT.MINI_SERIES;case`TV_SHOW`:return nT.TV_SHOW;default:return e}},uT=e=>({id:Number(e.kinopoiskId||e.filmId||e.id),name:oT(e),description:e?.description||` `,year:e?.year||``,image:e.posterUrlPreview||e.posterUrl||e.image||``,rating:cT(e),countries:aT(e?.countries||[]),genres:sT(e?.genres||[]),type:lT(e.type),startYear:e.startYear,endYear:e.endYear}),dT=e=>e.map(uT),fT=e=>e.length?e.filter(e=>!eT.includes(e.genre)):[],pT=e=>{let t={name:``,email:``,apiKey:``,favorites:[],watchingList:[],watchList:[],waitingList:[],lastSearchList:[],lastViews:[],skippedIds:new Set};if(!e)return t;let n=(e,t)=>(t?.sortTime??0)-(e?.sortTime??0),r=dT(e.favorites??[]).sort(n),i=dT(e.watchingList??[]).sort(n),a=dT(e.watchList??[]).sort(n),o=dT(e.waitingList??[]).sort(n),s=dT(e.lastViews??[]).sort(n).slice(0,40);return{name:e.name||t.name,email:e.email||t.email,apiKey:e.api_key||e.apiKey||t.apiKey,favorites:r,watchingList:i,watchList:a,waitingList:o,lastSearchList:(e.lastSearchList||[]).slice(0,30),lastViews:s,skippedIds:new Set((e.skippedIds||[]).slice(0,100))}};var mT=`404dc583-7efc-4c93-8f21-a782f977b9e7`,hT=`https://kinopoiskapiunofficial.tech/api/`,gT=`TOP_POPULAR_ALL`;const _T=`${hT}v2.2/films`,vT=`${hT}v2.1/films`;var yT=async(e,t=`Something went wrong`)=>{let n=await fetch(e,{headers:{"X-API-KEY":mT,"Content-Type":`application/json`}});if(!n.ok)throw Error(t);return await n.json()};const bT=async()=>await yT(`${_T}/filters`),xT=async e=>uT(await yT(`${_T}/${e}`,`Error load film info`)),ST=async e=>dT((await yT(`${_T}/${e}/similars`)).items||[])||[],CT=async e=>dT((await yT(`${_T}/${e}/relations`)).items||[])||[],wT=async e=>dT(await yT(`${vT}/${e}/sequels_and_prequels`,`Not found`)||[]),TT=async(e=1)=>{let t=new URL(`${_T}/collections`);t.searchParams.set(`type`,gT),t.searchParams.set(`page`,String(e));let n=await yT(t.toString(),`Error load collections`);return{...n,items:dT(n.items)||[]}},ET=async e=>{let t=new URL(_T);Object.entries(e).forEach(([e,n])=>{t.searchParams.set(e,n)});let n=await yT(t.toString(),`Error load search`);return{...n,items:dT(n.items)||[]}},Z=nc(`filmStore`,{state:()=>({user:null,apiKey:`404dc583-7efc-4c93-8f21-a782f977b9e7`,apiAloha:`e7b61f129f4a392ac4bf6726a9dd6a`,apiHDBV:`8a22f8e7684404c3815e3ffa940f00a0`,auth:Yw(),errorMessage:``,pageNum:1,limit:20,genreId:null,genres:[],searchInputText:``,filmPageId:0,favorites:[],currentFocusIndex:-1,films:[],focusIds:{},isShowLastSearchList:!1,lastSearchList:[],lastViews:[],watchingList:[],watchList:[],waitingList:[],skippedIds:new Set}),getters:{selectedGenreName(e){let t=e.genres.find(t=>t.id===e.genreId);return t?t.genre:``},searchHeading(){return this.searchInputText&&this.genreId?`   "${this.searchInputText}",  "${this.selectedGenreName}"`:this.searchInputText&&!this.genreId?`   "${this.searchInputText}"`:this.genreId&&!this.searchInputText?`   "${this.selectedGenreName}"`:`    `},searchQuery(){let e={};return e.q=this.searchInputText||``,this.genreId&&(e.genres=this.genreId),e}},actions:{setGenreId(e){this.genreId=e},setFilmPageId(e){this.filmPageId=e},setShowLastSearchList(e){this.isShowLastSearchList=e},async getGenreList(){if(localStorage.getItem(`genres`))return this.genres=JSON.parse(localStorage.getItem(`genres`)||``),this.genres;try{return this.genres=fT((await bT()).genres),localStorage.setItem(`genres`,JSON.stringify(this.genres)),this.genres}catch(e){console.error(`Error load genres`,e)}},async addFavorite(e){if(!(!this.user||!e))try{let t=await this.safeUpdateUserData(`favorites`,t=>rT(t,e));t&&(this.favorites=dT(t||[]))}catch(e){console.warn(`   : `+e)}},async removeFavorite(e){if(!(!this.user||!e))try{let t=await this.safeUpdateUserData(`favorites`,t=>iT(t,e));t&&(this.favorites=dT(t||[]))}catch(e){console.warn(`   : `+e)}},async addLastSearchList(e){if(!(!e||!this.user))try{let t=await this.safeUpdateUserData(`lastSearchList`,t=>{let n=t.filter(t=>t.value.toLowerCase()!==e.toLowerCase());return[{id:Date.now(),value:e},...n].slice(0,30)});t&&(this.lastSearchList=t)}catch(e){console.error(`   : `+e)}},async addLastViews(e){if(!(!e||!this.user))try{let t=await this.safeUpdateUserData(`lastViews`,t=>rT(t,e));t&&(this.lastViews=dT(t.slice(0,40)))}catch(e){console.error(`    : `+e)}},async addSkip(e){if(!(!this.user||!e))try{let t=await this.safeUpdateUserData(`skippedIds`,t=>{let n=new Set(t);return n.add(e),Array.from(n).slice(0,100)});t&&(this.skippedIds=new Set(t))}catch(e){console.error(`   : `+e)}},async removeSkip(e){if(!(!this.user||!e))try{let t=await this.safeUpdateUserData(`skippedIds`,t=>{let n=new Set(t);return n.delete(e),Array.from(n)});t&&(this.skippedIds=new Set(t))}catch(e){console.error(`   : `+e)}},async addWatching(e){if(!(!e||!this.user))try{let t=await this.safeUpdateUserData(`watchingList`,t=>rT(t,e));t&&(this.watchingList=t)}catch(e){console.error(`    : `+e)}},async removeWatching(e){if(!(!this.user||!e))try{let t=await this.safeUpdateUserData(`watchingList`,t=>iT(t,e));t&&(this.watchingList=dT(t||[]))}catch(e){console.warn(`    : `+e)}},async addWatchList(e){if(!(!e||!this.user))try{let t=await this.safeUpdateUserData(`watchList`,t=>rT(t,e));t&&(this.watchList=t)}catch(e){console.error(`    : `+e)}},async removeWatchList(e){if(!(!this.user||!e))try{let t=await this.safeUpdateUserData(`watchList`,t=>iT(t,e));t&&(this.watchList=dT(t||[]))}catch(e){console.warn(`    : `+e)}},async addWaitList(e){if(!(!e||!this.user))try{let t=await this.safeUpdateUserData(`waitingList`,t=>rT(t,e));t&&(this.waitingList=t)}catch(e){console.error(`    : `+e)}},async removeWaitList(e){if(!(!this.user||!e))try{let t=await this.safeUpdateUserData(`waitingList`,t=>iT(t,e));t&&(this.waitingList=dT(t||[]))}catch(e){console.warn(`    : `+e)}},isSkipped(e){return this.skippedIds.has(e)},async authWithEmailAndPassword(e){await IS(this.auth,e.email,e.password).then(()=>{this.getUserData()}).catch(e=>{this.errorMessage=$w(e.code)})},async createAuthWithEmailAndPassword(e){await FS(this.auth,e.email,e.password).then(async t=>{this.user=await t.user,await Qw(e,this.user.uid),await this.getUserData()}).catch(e=>{this.errorMessage=$w(e.code)})},async editAuthNameOrApiKey(e){try{this.user&&await nb(uy(ab,`users`,this.user.uid),{name:e.userName||``,apiKey:e.apiKey||this.apiKey}),await this.getUserData()}catch(e){this.errorMessage=$w(e.code)}},async authLogout(){BS(this.auth).then(async()=>{this.removeUserData()}).catch(e=>{alert(` logout: `+e)})},async authChange(e){zS(this.auth,async t=>{t?(this.user=t,this.getUserData(e)):this.removeUserData(e)})},async getUserData(e){if(!this.user)return;let{name:t,email:n,favorites:r,watchingList:i,watchList:a,waitingList:o,lastSearchList:s,lastViews:c,skippedIds:l,apiKey:u}=pT(await Zw(this.user.uid));this.user.name=t,this.user.email=n,this.favorites=r,this.watchingList=i,this.watchList=a,this.waitingList=o,this.lastSearchList=s,this.lastViews=c,this.skippedIds=l,this.apiKey=u,typeof e==`function`&&e()},removeUserData(e){this.user=null,this.favorites=[],typeof e==`function`&&e()},setCurrentFocus(e){this.currentFocusIndex=e},setMountedCurrentFocus(e){this.setCurrentFocus(this.focusIds[e]||0)},async safeUpdateUserData(e,t){if(!this.user)return console.warn(` `),null;try{let n=t((await Zw(this.user.uid))?.[e]||[]);return await nb(uy(ab,`users`,this.user.uid),{[e]:n}),n}catch(t){throw console.error(`  ${e}:`,t),t}}}});var DT=typeof document<`u`;function OT(e){return typeof e==`object`||`displayName`in e||`props`in e||`__vccOpts`in e}function kT(e){return e.__esModule||e[Symbol.toStringTag]===`Module`||e.default&&OT(e.default)}var Q=Object.assign;function AT(e,t){let n={};for(let r in t){let i=t[r];n[r]=MT(i)?i.map(e):e(i)}return n}var jT=()=>{},MT=Array.isArray;function NT(e,t){let n={};for(let r in e)n[r]=r in t?t[r]:e[r];return n}var PT=/#/g,FT=/&/g,IT=/\//g,LT=/=/g,RT=/\?/g,zT=/\+/g,BT=/%5B/g,VT=/%5D/g,HT=/%5E/g,UT=/%60/g,WT=/%7B/g,GT=/%7C/g,KT=/%7D/g,qT=/%20/g;function JT(e){return e==null?``:encodeURI(``+e).replace(GT,`|`).replace(BT,`[`).replace(VT,`]`)}function YT(e){return JT(e).replace(WT,`{`).replace(KT,`}`).replace(HT,`^`)}function XT(e){return JT(e).replace(zT,`%2B`).replace(qT,`+`).replace(PT,`%23`).replace(FT,`%26`).replace(UT,"`").replace(WT,`{`).replace(KT,`}`).replace(HT,`^`)}function ZT(e){return XT(e).replace(LT,`%3D`)}function QT(e){return JT(e).replace(PT,`%23`).replace(RT,`%3F`)}function $T(e){return QT(e).replace(IT,`%2F`)}function eE(e){if(e==null)return null;try{return decodeURIComponent(``+e)}catch{}return``+e}var tE=/\/$/,nE=e=>e.replace(tE,``);function rE(e,t,n=`/`){let r,i={},a=``,o=``,s=t.indexOf(`#`),c=t.indexOf(`?`);return c=s>=0&&c>s?-1:c,c>=0&&(r=t.slice(0,c),a=t.slice(c,s>0?s:t.length),i=e(a.slice(1))),s>=0&&(r||=t.slice(0,s),o=t.slice(s,t.length)),r=dE(r??t,n),{fullPath:r+a+o,path:r,query:i,hash:eE(o)}}function iE(e,t){let n=t.query?e(t.query):``;return t.path+(n&&`?`)+n+(t.hash||``)}function aE(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||`/`}function oE(e,t,n){let r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&sE(t.matched[r],n.matched[i])&&cE(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function sE(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function cE(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let n in e)if(!lE(e[n],t[n]))return!1;return!0}function lE(e,t){return MT(e)?uE(e,t):MT(t)?uE(t,e):e===t}function uE(e,t){return MT(t)?e.length===t.length&&e.every((e,n)=>e===t[n]):e.length===1&&e[0]===t}function dE(e,t){if(e.startsWith(`/`))return e;if(!e)return t;let n=t.split(`/`),r=e.split(`/`),i=r[r.length-1];(i===`..`||i===`.`)&&r.push(``);let a=n.length-1,o,s;for(o=0;o<r.length;o++)if(s=r[o],s!==`.`)if(s===`..`)a>1&&a--;else break;return n.slice(0,a).join(`/`)+`/`+r.slice(o).join(`/`)}var fE={path:`/`,name:void 0,params:{},query:{},hash:``,fullPath:`/`,matched:[],meta:{},redirectedFrom:void 0},pE=function(e){return e.pop=`pop`,e.push=`push`,e}({}),mE=function(e){return e.back=`back`,e.forward=`forward`,e.unknown=``,e}({});function hE(e){if(!e)if(DT){let t=document.querySelector(`base`);e=t&&t.getAttribute(`href`)||`/`,e=e.replace(/^\w+:\/\/[^\/]+/,``)}else e=`/`;return e[0]!==`/`&&e[0]!==`#`&&(e=`/`+e),nE(e)}var gE=/^[^#]+#/;function _E(e,t){return e.replace(gE,`#`)+t}function vE(e,t){let n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}var yE=()=>({left:window.scrollX,top:window.scrollY});function bE(e){let t;if(`el`in e){let n=e.el,r=typeof n==`string`&&n.startsWith(`#`),i=typeof n==`string`?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=vE(i,e)}else t=e;`scrollBehavior`in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left==null?window.scrollX:t.left,t.top==null?window.scrollY:t.top)}function xE(e,t){return(history.state?history.state.position-t:-1)+e}var SE=new Map;function CE(e,t){SE.set(e,t)}function wE(e){let t=SE.get(e);return SE.delete(e),t}function TE(e){return typeof e==`string`||e&&typeof e==`object`}function EE(e){return typeof e==`string`||typeof e==`symbol`}var DE=function(e){return e[e.MATCHER_NOT_FOUND=1]=`MATCHER_NOT_FOUND`,e[e.NAVIGATION_GUARD_REDIRECT=2]=`NAVIGATION_GUARD_REDIRECT`,e[e.NAVIGATION_ABORTED=4]=`NAVIGATION_ABORTED`,e[e.NAVIGATION_CANCELLED=8]=`NAVIGATION_CANCELLED`,e[e.NAVIGATION_DUPLICATED=16]=`NAVIGATION_DUPLICATED`,e}({}),OE=Symbol(``);DE.MATCHER_NOT_FOUND,DE.NAVIGATION_GUARD_REDIRECT,DE.NAVIGATION_ABORTED,DE.NAVIGATION_CANCELLED,DE.NAVIGATION_DUPLICATED;function kE(e,t){return Q(Error(),{type:e,[OE]:!0},t)}function AE(e,t){return e instanceof Error&&OE in e&&(t==null||!!(e.type&t))}function jE(e){let t={};if(e===``||e===`?`)return t;let n=(e[0]===`?`?e.slice(1):e).split(`&`);for(let e=0;e<n.length;++e){let r=n[e].replace(zT,` `),i=r.indexOf(`=`),a=eE(i<0?r:r.slice(0,i)),o=i<0?null:eE(r.slice(i+1));if(a in t){let e=t[a];MT(e)||(e=t[a]=[e]),e.push(o)}else t[a]=o}return t}function ME(e){let t=``;for(let n in e){let r=e[n];if(n=ZT(n),r==null){r!==void 0&&(t+=(t.length?`&`:``)+n);continue}(MT(r)?r.map(e=>e&&XT(e)):[r&&XT(r)]).forEach(e=>{e!==void 0&&(t+=(t.length?`&`:``)+n,e!=null&&(t+=`=`+e))})}return t}function NE(e){let t={};for(let n in e){let r=e[n];r!==void 0&&(t[n]=MT(r)?r.map(e=>e==null?null:``+e):r==null?r:``+r)}return t}var PE=Symbol(``),FE=Symbol(``),IE=Symbol(``),LE=Symbol(``),RE=Symbol(``);function zE(){let e=[];function t(t){return e.push(t),()=>{let n=e.indexOf(t);n>-1&&e.splice(n,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function BE(e,t,n,r,i,a=e=>e()){let o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((s,c)=>{let l=e=>{e===!1?c(kE(DE.NAVIGATION_ABORTED,{from:n,to:t})):e instanceof Error?c(e):TE(e)?c(kE(DE.NAVIGATION_GUARD_REDIRECT,{from:t,to:e})):(o&&r.enterCallbacks[i]===o&&typeof e==`function`&&o.push(e),s())},u=a(()=>e.call(r&&r.instances[i],t,n,l)),d=Promise.resolve(u);e.length<3&&(d=d.then(l)),d.catch(e=>c(e))})}function VE(e,t,n,r,i=e=>e()){let a=[];for(let o of e)for(let e in o.components){let s=o.components[e];if(!(t!==`beforeRouteEnter`&&!o.instances[e]))if(OT(s)){let c=(s.__vccOpts||s)[t];c&&a.push(BE(c,n,r,o,e,i))}else{let c=s();a.push(()=>c.then(a=>{if(!a)throw Error(`Couldn't resolve component "${e}" at "${o.path}"`);let s=kT(a)?a.default:a;o.mods[e]=a,o.components[e]=s;let c=(s.__vccOpts||s)[t];return c&&BE(c,n,r,o,e,i)()}))}}return a}function HE(e,t){let n=[],r=[],i=[],a=Math.max(t.matched.length,e.matched.length);for(let o=0;o<a;o++){let a=t.matched[o];a&&(e.matched.find(e=>sE(e,a))?r.push(a):n.push(a));let s=e.matched[o];s&&(t.matched.find(e=>sE(e,s))||i.push(s))}return[n,r,i]}var UE=()=>location.protocol+`//`+location.host;function WE(e,t){let{pathname:n,search:r,hash:i}=t,a=e.indexOf(`#`);if(a>-1){let t=i.includes(e.slice(a))?e.slice(a).length:1,n=i.slice(t);return n[0]!==`/`&&(n=`/`+n),aE(n,``)}return aE(n,e)+r+i}function GE(e,t,n,r){let i=[],a=[],o=null,s=({state:a})=>{let s=WE(e,location),c=n.value,l=t.value,u=0;if(a){if(n.value=s,t.value=a,o&&o===c){o=null;return}u=l?a.position-l.position:0}else r(s);i.forEach(e=>{e(n.value,c,{delta:u,type:pE.pop,direction:u?u>0?mE.forward:mE.back:mE.unknown})})};function c(){o=n.value}function l(e){i.push(e);let t=()=>{let t=i.indexOf(e);t>-1&&i.splice(t,1)};return a.push(t),t}function u(){if(document.visibilityState===`hidden`){let{history:e}=window;if(!e.state)return;e.replaceState(Q({},e.state,{scroll:yE()}),``)}}function d(){for(let e of a)e();a=[],window.removeEventListener(`popstate`,s),window.removeEventListener(`pagehide`,u),document.removeEventListener(`visibilitychange`,u)}return window.addEventListener(`popstate`,s),window.addEventListener(`pagehide`,u),document.addEventListener(`visibilitychange`,u),{pauseListeners:c,listen:l,destroy:d}}function KE(e,t,n,r=!1,i=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:i?yE():null}}function qE(e){let{history:t,location:n}=window,r={value:WE(e,n)},i={value:t.state};i.value||a(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(r,a,o){let s=e.indexOf(`#`),c=s>-1?(n.host&&document.querySelector(`base`)?e:e.slice(s))+r:UE()+e+r;try{t[o?`replaceState`:`pushState`](a,``,c),i.value=a}catch(e){console.error(e),n[o?`replace`:`assign`](c)}}function o(e,n){a(e,Q({},t.state,KE(i.value.back,e,i.value.forward,!0),n,{position:i.value.position}),!0),r.value=e}function s(e,n){let o=Q({},i.value,t.state,{forward:e,scroll:yE()});a(o.current,o,!0),a(e,Q({},KE(r.value,e,null),{position:o.position+1},n),!1),r.value=e}return{location:r,state:i,push:s,replace:o}}function JE(e){e=hE(e);let t=qE(e),n=GE(e,t.state,t.location,t.replace);function r(e,t=!0){t||n.pauseListeners(),history.go(e)}let i=Q({location:``,base:e,go:r,createHref:_E.bind(null,e)},t,n);return Object.defineProperty(i,`location`,{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,`state`,{enumerable:!0,get:()=>t.state.value}),i}var YE=function(e){return e[e.Static=0]=`Static`,e[e.Param=1]=`Param`,e[e.Group=2]=`Group`,e}({}),XE=function(e){return e[e.Static=0]=`Static`,e[e.Param=1]=`Param`,e[e.ParamRegExp=2]=`ParamRegExp`,e[e.ParamRegExpEnd=3]=`ParamRegExpEnd`,e[e.EscapeNext=4]=`EscapeNext`,e}(XE||{}),ZE={type:YE.Static,value:``},QE=/[a-zA-Z0-9_]/;function $E(e){if(!e)return[[]];if(e===`/`)return[[ZE]];if(!e.startsWith(`/`))throw Error(`Invalid path "${e}"`);function t(e){throw Error(`ERR (${n})/"${l}": ${e}`)}let n=XE.Static,r=n,i=[],a;function o(){a&&i.push(a),a=[]}let s=0,c,l=``,u=``;function d(){l&&=(n===XE.Static?a.push({type:YE.Static,value:l}):n===XE.Param||n===XE.ParamRegExp||n===XE.ParamRegExpEnd?(a.length>1&&(c===`*`||c===`+`)&&t(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),a.push({type:YE.Param,value:l,regexp:u,repeatable:c===`*`||c===`+`,optional:c===`*`||c===`?`})):t(`Invalid state to consume buffer`),``)}function f(){l+=c}for(;s<e.length;){if(c=e[s++],c===`\\`&&n!==XE.ParamRegExp){r=n,n=XE.EscapeNext;continue}switch(n){case XE.Static:c===`/`?(l&&d(),o()):c===`:`?(d(),n=XE.Param):f();break;case XE.EscapeNext:f(),n=r;break;case XE.Param:c===`(`?n=XE.ParamRegExp:QE.test(c)?f():(d(),n=XE.Static,c!==`*`&&c!==`?`&&c!==`+`&&s--);break;case XE.ParamRegExp:c===`)`?u[u.length-1]==`\\`?u=u.slice(0,-1)+c:n=XE.ParamRegExpEnd:u+=c;break;case XE.ParamRegExpEnd:d(),n=XE.Static,c!==`*`&&c!==`?`&&c!==`+`&&s--,u=``;break;default:t(`Unknown state`);break}}return n===XE.ParamRegExp&&t(`Unfinished custom RegExp for param "${l}"`),d(),o(),i}var eD=`[^/]+?`,tD={sensitive:!1,strict:!1,start:!0,end:!0},nD=function(e){return e[e._multiplier=10]=`_multiplier`,e[e.Root=90]=`Root`,e[e.Segment=40]=`Segment`,e[e.SubSegment=30]=`SubSegment`,e[e.Static=40]=`Static`,e[e.Dynamic=20]=`Dynamic`,e[e.BonusCustomRegExp=10]=`BonusCustomRegExp`,e[e.BonusWildcard=-50]=`BonusWildcard`,e[e.BonusRepeatable=-20]=`BonusRepeatable`,e[e.BonusOptional=-8]=`BonusOptional`,e[e.BonusStrict=.7000000000000001]=`BonusStrict`,e[e.BonusCaseSensitive=.25]=`BonusCaseSensitive`,e}(nD||{}),rD=/[.+*?^${}()[\]/\\]/g;function iD(e,t){let n=Q({},tD,t),r=[],i=n.start?`^`:``,a=[];for(let t of e){let e=t.length?[]:[nD.Root];n.strict&&!t.length&&(i+=`/`);for(let r=0;r<t.length;r++){let o=t[r],s=nD.Segment+(n.sensitive?nD.BonusCaseSensitive:0);if(o.type===YE.Static)r||(i+=`/`),i+=o.value.replace(rD,`\\$&`),s+=nD.Static;else if(o.type===YE.Param){let{value:e,repeatable:n,optional:c,regexp:l}=o;a.push({name:e,repeatable:n,optional:c});let u=l||eD;if(u!==eD){s+=nD.BonusCustomRegExp;try{`${u}`}catch(t){throw Error(`Invalid custom RegExp for param "${e}" (${u}): `+t.message)}}let d=n?`((?:${u})(?:/(?:${u}))*)`:`(${u})`;r||(d=c&&t.length<2?`(?:/${d})`:`/`+d),c&&(d+=`?`),i+=d,s+=nD.Dynamic,c&&(s+=nD.BonusOptional),n&&(s+=nD.BonusRepeatable),u===`.*`&&(s+=nD.BonusWildcard)}e.push(s)}r.push(e)}if(n.strict&&n.end){let e=r.length-1;r[e][r[e].length-1]+=nD.BonusStrict}n.strict||(i+=`/?`),n.end?i+=`$`:n.strict&&!i.endsWith(`/`)&&(i+=`(?:/|$)`);let o=new RegExp(i,n.sensitive?``:`i`);function s(e){let t=e.match(o),n={};if(!t)return null;for(let e=1;e<t.length;e++){let r=t[e]||``,i=a[e-1];n[i.name]=r&&i.repeatable?r.split(`/`):r}return n}function c(t){let n=``,r=!1;for(let i of e){(!r||!n.endsWith(`/`))&&(n+=`/`),r=!1;for(let e of i)if(e.type===YE.Static)n+=e.value;else if(e.type===YE.Param){let{value:a,repeatable:o,optional:s}=e,c=a in t?t[a]:``;if(MT(c)&&!o)throw Error(`Provided param "${a}" is an array but it is not repeatable (* or + modifiers)`);let l=MT(c)?c.join(`/`):c;if(!l)if(s)i.length<2&&(n.endsWith(`/`)?n=n.slice(0,-1):r=!0);else throw Error(`Missing required param "${a}"`);n+=l}}return n||`/`}return{re:o,score:r,keys:a,parse:s,stringify:c}}function aD(e,t){let n=0;for(;n<e.length&&n<t.length;){let r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===nD.Static+nD.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===nD.Static+nD.Segment?1:-1:0}function oD(e,t){let n=0,r=e.score,i=t.score;for(;n<r.length&&n<i.length;){let e=aD(r[n],i[n]);if(e)return e;n++}if(Math.abs(i.length-r.length)===1){if(sD(r))return 1;if(sD(i))return-1}return i.length-r.length}function sD(e){let t=e[e.length-1];return e.length>0&&t[t.length-1]<0}var cD={strict:!1,end:!0,sensitive:!1};function lD(e,t,n){let r=Q(iD($E(e.path),n),{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function uD(e,t){let n=[],r=new Map;t=NT(cD,t);function i(e){return r.get(e)}function a(e,n,r){let i=!r,s=fD(e);s.aliasOf=r&&r.record;let l=NT(t,e),u=[s];if(`alias`in e){let t=typeof e.alias==`string`?[e.alias]:e.alias;for(let e of t)u.push(fD(Q({},s,{components:r?r.record.components:s.components,path:e,aliasOf:r?r.record:s})))}let d,f;for(let t of u){let{path:u}=t;if(n&&u[0]!==`/`){let e=n.record.path,r=e[e.length-1]===`/`?``:`/`;t.path=n.record.path+(u&&r+u)}if(d=lD(t,n,l),r?r.alias.push(d):(f||=d,f!==d&&f.alias.push(d),i&&e.name&&!mD(d)&&o(e.name)),vD(d)&&c(d),s.children){let e=s.children;for(let t=0;t<e.length;t++)a(e[t],d,r&&r.children[t])}r||=d}return f?()=>{o(f)}:jT}function o(e){if(EE(e)){let t=r.get(e);t&&(r.delete(e),n.splice(n.indexOf(t),1),t.children.forEach(o),t.alias.forEach(o))}else{let t=n.indexOf(e);t>-1&&(n.splice(t,1),e.record.name&&r.delete(e.record.name),e.children.forEach(o),e.alias.forEach(o))}}function s(){return n}function c(e){let t=gD(e,n);n.splice(t,0,e),e.record.name&&!mD(e)&&r.set(e.record.name,e)}function l(e,t){let i,a={},o,s;if(`name`in e&&e.name){if(i=r.get(e.name),!i)throw kE(DE.MATCHER_NOT_FOUND,{location:e});s=i.record.name,a=Q(dD(t.params,i.keys.filter(e=>!e.optional).concat(i.parent?i.parent.keys.filter(e=>e.optional):[]).map(e=>e.name)),e.params&&dD(e.params,i.keys.map(e=>e.name))),o=i.stringify(a)}else if(e.path!=null)o=e.path,i=n.find(e=>e.re.test(o)),i&&(a=i.parse(o),s=i.record.name);else{if(i=t.name?r.get(t.name):n.find(e=>e.re.test(t.path)),!i)throw kE(DE.MATCHER_NOT_FOUND,{location:e,currentLocation:t});s=i.record.name,a=Q({},t.params,e.params),o=i.stringify(a)}let c=[],l=i;for(;l;)c.unshift(l.record),l=l.parent;return{name:s,path:o,params:a,matched:c,meta:hD(c)}}e.forEach(e=>a(e));function u(){n.length=0,r.clear()}return{addRoute:a,resolve:l,removeRoute:o,clearRoutes:u,getRoutes:s,getRecordMatcher:i}}function dD(e,t){let n={};for(let r of t)r in e&&(n[r]=e[r]);return n}function fD(e){let t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:pD(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:`components`in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,`mods`,{value:{}}),t}function pD(e){let t={},n=e.props||!1;if(`component`in e)t.default=n;else for(let r in e.components)t[r]=typeof n==`object`?n[r]:n;return t}function mD(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function hD(e){return e.reduce((e,t)=>Q(e,t.meta),{})}function gD(e,t){let n=0,r=t.length;for(;n!==r;){let i=n+r>>1;oD(e,t[i])<0?r=i:n=i+1}let i=_D(e);return i&&(r=t.lastIndexOf(i,r-1)),r}function _D(e){let t=e;for(;t=t.parent;)if(vD(t)&&oD(e,t)===0)return t}function vD({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function yD(e){let t=mi(IE),n=mi(LE),r=I(()=>{let n=E(e.to);return t.resolve(n)}),i=I(()=>{let{matched:e}=r.value,{length:t}=e,i=e[t-1],a=n.matched;if(!i||!a.length)return-1;let o=a.findIndex(sE.bind(null,i));if(o>-1)return o;let s=wD(e[t-2]);return t>1&&wD(i)===s&&a[a.length-1].path!==s?a.findIndex(sE.bind(null,e[t-2])):o}),a=I(()=>i.value>-1&&CD(n.params,r.value.params)),o=I(()=>i.value>-1&&i.value===n.matched.length-1&&cE(n.params,r.value.params));function s(n={}){if(SD(n)){let n=t[E(e.replace)?`replace`:`push`](E(e.to)).catch(jT);return e.viewTransition&&typeof document<`u`&&`startViewTransition`in document&&document.startViewTransition(()=>n),n}return Promise.resolve()}return{route:r,href:I(()=>r.value.href),isActive:a,isExactActive:o,navigate:s}}function bD(e){return e.length===1?e[0]:e}var xD=k({name:`RouterLink`,compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:`page`},viewTransition:Boolean},useLink:yD,setup(e,{slots:t}){let n=Wt(yD(e)),{options:r}=mi(IE),i=I(()=>({[TD(e.activeClass,r.linkActiveClass,`router-link-active`)]:n.isActive,[TD(e.exactActiveClass,r.linkExactActiveClass,`router-link-exact-active`)]:n.isExactActive}));return()=>{let r=t.default&&bD(t.default(n));return e.custom?r:eo(`a`,{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},r)}}});function SD(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){let t=e.currentTarget.getAttribute(`target`);if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function CD(e,t){for(let n in t){let r=t[n],i=e[n];if(typeof r==`string`){if(r!==i)return!1}else if(!MT(i)||i.length!==r.length||r.some((e,t)=>e!==i[t]))return!1}return!0}function wD(e){return e?e.aliasOf?e.aliasOf.path:e.path:``}var TD=(e,t,n)=>e??t??n,ED=k({name:`RouterView`,inheritAttrs:!1,props:{name:{type:String,default:`default`},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){let r=mi(RE),i=I(()=>e.route||r.value),a=mi(FE,0),o=I(()=>{let e=E(a),{matched:t}=i.value,n;for(;(n=t[e])&&!n.components;)e++;return e}),s=I(()=>i.value.matched[o.value]);pi(FE,I(()=>o.value+1)),pi(PE,s),pi(RE,i);let c=T();return Ki(()=>[c.value,s.value,e.name],([e,t,n],[r,i,a])=>{t&&(t.instances[n]=e,i&&i!==t&&e&&e===r&&(t.leaveGuards.size||(t.leaveGuards=i.leaveGuards),t.updateGuards.size||(t.updateGuards=i.updateGuards))),e&&t&&(!i||!sE(t,i)||!r)&&(t.enterCallbacks[n]||[]).forEach(t=>t(e))},{flush:`post`}),()=>{let r=i.value,a=e.name,o=s.value,l=o&&o.components[a];if(!l)return DD(n.default,{Component:l,route:r});let u=o.props[a],d=eo(l,Q({},u?u===!0?r.params:typeof u==`function`?u(r):u:null,t,{onVnodeUnmounted:e=>{e.component.isUnmounted&&(o.instances[a]=null)},ref:c}));return DD(n.default,{Component:d,route:r})||d}}});function DD(e,t){if(!e)return null;let n=e(t);return n.length===1?n[0]:n}var OD=ED;function kD(e){let t=uD(e.routes,e),n=e.parseQuery||jE,r=e.stringifyQuery||ME,i=e.history,a=zE(),o=zE(),s=zE(),c=nn(fE),l=fE;DT&&e.scrollBehavior&&`scrollRestoration`in history&&(history.scrollRestoration=`manual`);let u=AT.bind(null,e=>``+e),d=AT.bind(null,$T),f=AT.bind(null,eE);function p(e,n){let r,i;return EE(e)?(r=t.getRecordMatcher(e),i=n):i=e,t.addRoute(i,r)}function m(e){let n=t.getRecordMatcher(e);n&&t.removeRoute(n)}function h(){return t.getRoutes().map(e=>e.record)}function g(e){return!!t.getRecordMatcher(e)}function _(e,a){if(a=Q({},a||c.value),typeof e==`string`){let r=rE(n,e,a.path),o=t.resolve({path:r.path},a),s=i.createHref(r.fullPath);return Q(r,o,{params:f(o.params),hash:eE(r.hash),redirectedFrom:void 0,href:s})}let o;if(e.path!=null)o=Q({},e,{path:rE(n,e.path,a.path).path});else{let t=Q({},e.params);for(let e in t)t[e]??delete t[e];o=Q({},e,{params:d(t)}),a.params=d(a.params)}let s=t.resolve(o,a),l=e.hash||``;s.params=u(f(s.params));let p=iE(r,Q({},e,{hash:YT(l),path:s.path})),m=i.createHref(p);return Q({fullPath:p,hash:l,query:r===ME?NE(e.query):e.query||{}},s,{redirectedFrom:void 0,href:m})}function v(e){return typeof e==`string`?rE(n,e,c.value.path):Q({},e)}function y(e,t){if(l!==e)return kE(DE.NAVIGATION_CANCELLED,{from:t,to:e})}function b(e){return x(e)}function ee(e){return b(Q(v(e),{replace:!0}))}function te(e,t){let n=e.matched[e.matched.length-1];if(n&&n.redirect){let{redirect:r}=n,i=typeof r==`function`?r(e,t):r;return typeof i==`string`&&(i=i.includes(`?`)||i.includes(`#`)?i=v(i):{path:i},i.params={}),Q({query:e.query,hash:e.hash,params:i.path==null?e.params:{}},i)}}function x(e,t){let n=l=_(e),i=c.value,a=e.state,o=e.force,s=e.replace===!0,u=te(n,i);if(u)return x(Q(v(u),{state:typeof u==`object`?Q({},a,u.state):a,force:o,replace:s}),t||n);let d=n;d.redirectedFrom=t;let f;return!o&&oE(r,i,n)&&(f=kE(DE.NAVIGATION_DUPLICATED,{to:d,from:i}),he(i,i,!0,!1)),(f?Promise.resolve(f):ie(d,i)).catch(e=>AE(e)?AE(e,DE.NAVIGATION_GUARD_REDIRECT)?e:me(e):fe(e,d,i)).then(e=>{if(e){if(AE(e,DE.NAVIGATION_GUARD_REDIRECT))return x(Q({replace:s},v(e.to),{state:typeof e.to==`object`?Q({},a,e.to.state):a,force:o}),t||d)}else e=oe(d,i,!0,s,a);return ae(d,i,e),e})}function ne(e,t){let n=y(e,t);return n?Promise.reject(n):Promise.resolve()}function re(e){let t=ve.values().next().value;return t&&typeof t.runWithContext==`function`?t.runWithContext(e):e()}function ie(e,t){let n,[r,i,s]=HE(e,t);n=VE(r.reverse(),`beforeRouteLeave`,e,t);for(let i of r)i.leaveGuards.forEach(r=>{n.push(BE(r,e,t))});let c=ne.bind(null,e,t);return n.push(c),be(n).then(()=>{n=[];for(let r of a.list())n.push(BE(r,e,t));return n.push(c),be(n)}).then(()=>{n=VE(i,`beforeRouteUpdate`,e,t);for(let r of i)r.updateGuards.forEach(r=>{n.push(BE(r,e,t))});return n.push(c),be(n)}).then(()=>{n=[];for(let r of s)if(r.beforeEnter)if(MT(r.beforeEnter))for(let i of r.beforeEnter)n.push(BE(i,e,t));else n.push(BE(r.beforeEnter,e,t));return n.push(c),be(n)}).then(()=>(e.matched.forEach(e=>e.enterCallbacks={}),n=VE(s,`beforeRouteEnter`,e,t,re),n.push(c),be(n))).then(()=>{n=[];for(let r of o.list())n.push(BE(r,e,t));return n.push(c),be(n)}).catch(e=>AE(e,DE.NAVIGATION_CANCELLED)?e:Promise.reject(e))}function ae(e,t,n){s.list().forEach(r=>re(()=>r(e,t,n)))}function oe(e,t,n,r,a){let o=y(e,t);if(o)return o;let s=t===fE,l=DT?history.state:{};n&&(r||s?i.replace(e.fullPath,Q({scroll:s&&l&&l.scroll},a)):i.push(e.fullPath,a)),c.value=e,he(e,t,n,s),me()}let se;function ce(){se||=i.listen((e,t,n)=>{if(!ye.listening)return;let r=_(e),a=te(r,ye.currentRoute.value);if(a){x(Q(a,{replace:!0,force:!0}),r).catch(jT);return}l=r;let o=c.value;DT&&CE(xE(o.fullPath,n.delta),yE()),ie(r,o).catch(e=>AE(e,DE.NAVIGATION_ABORTED|DE.NAVIGATION_CANCELLED)?e:AE(e,DE.NAVIGATION_GUARD_REDIRECT)?(x(Q(v(e.to),{force:!0}),r).then(e=>{AE(e,DE.NAVIGATION_ABORTED|DE.NAVIGATION_DUPLICATED)&&!n.delta&&n.type===pE.pop&&i.go(-1,!1)}).catch(jT),Promise.reject()):(n.delta&&i.go(-n.delta,!1),fe(e,r,o))).then(e=>{e||=oe(r,o,!1),e&&(n.delta&&!AE(e,DE.NAVIGATION_CANCELLED)?i.go(-n.delta,!1):n.type===pE.pop&&AE(e,DE.NAVIGATION_ABORTED|DE.NAVIGATION_DUPLICATED)&&i.go(-1,!1)),ae(r,o,e)}).catch(jT)})}let le=zE(),ue=zE(),de;function fe(e,t,n){me(e);let r=ue.list();return r.length?r.forEach(r=>r(e,t,n)):console.error(e),Promise.reject(e)}function pe(){return de&&c.value!==fE?Promise.resolve():new Promise((e,t)=>{le.add([e,t])})}function me(e){return de||(de=!e,ce(),le.list().forEach(([t,n])=>e?n(e):t()),le.reset()),e}function he(t,n,r,i){let{scrollBehavior:a}=e;if(!DT||!a)return Promise.resolve();let o=!r&&wE(xE(t.fullPath,0))||(i||!r)&&history.state&&history.state.scroll||null;return kn().then(()=>a(t,n,o)).then(e=>e&&bE(e)).catch(e=>fe(e,t,n))}let ge=e=>i.go(e),_e,ve=new Set,ye={currentRoute:c,listening:!0,addRoute:p,removeRoute:m,clearRoutes:t.clearRoutes,hasRoute:g,getRoutes:h,resolve:_,options:e,push:b,replace:ee,go:ge,back:()=>ge(-1),forward:()=>ge(1),beforeEach:a.add,beforeResolve:o.add,afterEach:s.add,onError:ue.add,isReady:pe,install(e){e.component(`RouterLink`,xD),e.component(`RouterView`,OD),e.config.globalProperties.$router=ye,Object.defineProperty(e.config.globalProperties,`$route`,{enumerable:!0,get:()=>E(c)}),DT&&!_e&&c.value===fE&&(_e=!0,b(i.location).catch(e=>{}));let t={};for(let e in fE)Object.defineProperty(t,e,{get:()=>c.value[e],enumerable:!0});e.provide(IE,ye),e.provide(LE,Gt(t)),e.provide(RE,c);let n=e.unmount;ve.add(e),e.unmount=function(){ve.delete(e),ve.size<1&&(l=fE,se&&se(),se=null,c.value=fE,_e=!1,de=!1),n()}}};function be(e){return e.reduce((e,t)=>e.then(()=>re(t)),Promise.resolve())}return ye}function AD(){return mi(IE)}function jD(e){return mi(LE)}var $=(e,t)=>{let n=e.__vccOpts||e;for(let[e,r]of t)n[e]=r;return n},MD={},ND={viewBox:`0 0 576 512`,xmlns:`http://www.w3.org/2000/svg`};function PD(e,t){return j(),M(`svg`,ND,[...t[0]||=[P(`path`,{fill:`currentColor`,d:`M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z`},null,-1)]])}var FD=$(MD,[[`render`,PD]]),ID=$(k({__name:`ButtonBlue`,props:{type:{default:`button`},customClass:{default:``},size:{default:16},border:{type:Boolean,default:!1},isOpen:{type:Boolean,default:!1}},setup(e){let t=e,n=I(()=>({"--svg-size":`${t.size}px`}));return(t,r)=>(j(),M(`button`,{style:ve(n.value),class:S([`button`,e.customClass,{border:e.border,isOpen:e.isOpen}])},[Vr(t.$slots,`default`,{},void 0,!0)],6))}}),[[`__scopeId`,`data-v-c6a67be9`]]),LD=k({__name:`HomeButton`,setup(e){let t=AD(),n=Z(),r=()=>{n.pageNum=1,n.genreId=null,t.push({name:`home`})};return(e,t)=>(j(),N(ID,{onClick:r,size:18},{default:O(()=>[F(FD),t[0]||=Ta(` Home `,-1)]),_:1}))}}),RD={},zD={xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 496 512`};function BD(e,t){return j(),M(`svg`,zD,[...t[0]||=[P(`path`,{fill:`currentColor`,d:`M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z`},null,-1)]])}var VD=$(RD,[[`render`,BD]]),HD={name:`IconGoogle`},UD={class:`icon-google`};function WD(e,t,n,r,i,a){return j(),M(`span`,UD)}var GD=$(HD,[[`render`,WD],[`__scopeId`,`data-v-e8f2dc2a`]]),KD={class:`registration--form`},qD={key:0,class:`err-string`},JD={class:`btns`},YD=$({__name:`RegistrationComponent`,emits:[`setForm`],setup(e,{emit:t}){let n=t,r=Z(),i=T(``),a=T(``),o=T(``),s=T(``),c=async()=>{await r.createAuthWithEmailAndPassword({email:i.value,password:a.value,user_name:o.value,api_key:s.value})},l=()=>{n(`setForm`,`sign`)},u=()=>{console.warn(`ok`)};return(e,t)=>(j(),M(`div`,KD,[t[5]||=P(`h3`,{class:`name`},``,-1),P(`p`,null,[Vn(P(`input`,{type:`text`,placeholder:``,"onUpdate:modelValue":t[0]||=e=>i.value=e},null,512),[[fs,i.value]])]),P(`p`,null,[Vn(P(`input`,{type:`text`,placeholder:``,"onUpdate:modelValue":t[1]||=e=>o.value=e},null,512),[[fs,o.value]])]),P(`p`,null,[Vn(P(`input`,{type:`text`,placeholder:`Api `,"onUpdate:modelValue":t[2]||=e=>s.value=e},null,512),[[fs,s.value]]),t[4]||=P(`small`,null,[P(`a`,{target:`_blank`,href:`https://kinopoiskapiunofficial.tech/signup`},`  API`)],-1)]),P(`p`,null,[Vn(P(`input`,{type:`password`,placeholder:`Password`,"onUpdate:modelValue":t[3]||=e=>a.value=e},null,512),[[fs,a.value]])]),E(r).errorMessage?(j(),M(`p`,qD,De(E(r).errorMessage),1)):Ea(``,!0),P(`div`,JD,[P(`button`,{class:`reg`,onClick:hs(c,[`prevent`])},``),P(`button`,{class:`sign`,onClick:hs(l,[`prevent`])},``),F(GD,{onClick:u})])]))}},[[`__scopeId`,`data-v-08b0bcdd`]]),XD={class:`registration--form`},ZD={key:0,class:`err-string`},QD={class:`btns`},$D=$({__name:`SignInComponent`,emits:[`setForm`],setup(e,{emit:t}){let n=t,r=T(``),i=T(``),a=Z(),o=async()=>{await a.authWithEmailAndPassword({email:r.value,password:i.value})},s=()=>{n(`setForm`,`reg`)};return(e,t)=>(j(),M(`div`,XD,[t[2]||=P(`h3`,{class:`name`},``,-1),P(`p`,null,[Vn(P(`input`,{type:`text`,placeholder:`Email`,"onUpdate:modelValue":t[0]||=e=>r.value=e},null,512),[[fs,r.value]])]),P(`p`,null,[Vn(P(`input`,{type:`password`,placeholder:`Password`,"onUpdate:modelValue":t[1]||=e=>i.value=e},null,512),[[fs,i.value]])]),E(a).errorMessage?(j(),M(`p`,ZD,De(E(a).errorMessage),1)):Ea(``,!0),P(`div`,QD,[P(`button`,{class:`sign`,onClick:hs(o,[`prevent`])},``),P(`button`,{class:`reg`,onClick:hs(s,[`prevent`])},``)])]))}},[[`__scopeId`,`data-v-a2d42fb1`]]),eO={},tO={xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 640 640`};function nO(e,t){return j(),M(`svg`,tO,[...t[0]||=[P(`path`,{fill:`currentColor`,d:`M535.6 85.7C513.7 63.8 478.3 63.8 456.4 85.7L432 110.1L529.9 208L554.3 183.6C576.2 161.7 576.2 126.3 554.3 104.4L535.6 85.7zM236.4 305.7C230.3 311.8 225.6 319.3 222.9 327.6L193.3 416.4C190.4 425 192.7 434.5 199.1 441C205.5 447.5 215 449.7 223.7 446.8L312.5 417.2C320.7 414.5 328.2 409.8 334.4 403.7L496 241.9L398.1 144L236.4 305.7zM160 128C107 128 64 171 64 224L64 480C64 533 107 576 160 576L416 576C469 576 512 533 512 480L512 384C512 366.3 497.7 352 480 352C462.3 352 448 366.3 448 384L448 480C448 497.7 433.7 512 416 512L160 512C142.3 512 128 497.7 128 480L128 224C128 206.3 142.3 192 160 192L256 192C273.7 192 288 177.7 288 160C288 142.3 273.7 128 256 128L160 128z`},null,-1)]])}var rO=$(eO,[[`render`,nO]]),iO={class:`registration--form`},aO={class:`heading`},oO={class:`name`},sO={key:0,class:`container`},cO={class:`btns`},lO=$(k({__name:`LogoutComponent`,setup(e){let t=Z(),n=T(!1),r=T(t.user?.name||``),i=T(t.apiKey),a=async()=>{r.value.length<3||(n.value=!1,await t.editAuthNameOrApiKey({userName:r.value,apiKey:i.value}))},o=()=>{n.value=!n.value},s=async()=>{await t.authLogout()};return(e,c)=>(j(),M(`div`,iO,[P(`h3`,aO,[c[2]||=Ta(`   : `,-1),P(`strong`,oO,De(E(t).user?.name||`...`),1),P(`button`,{class:`edit`,onClick:o},[F(rO)])]),n.value?(j(),M(`div`,sO,[P(`p`,null,[Vn(P(`input`,{type:`text`,placeholder:``,"onUpdate:modelValue":c[0]||=e=>r.value=e},null,512),[[fs,r.value]])]),P(`p`,null,[Vn(P(`input`,{type:`text`,placeholder:`Api `,"onUpdate:modelValue":c[1]||=e=>i.value=e},null,512),[[fs,i.value]])]),P(`button`,{onClick:a},``)])):Ea(``,!0),P(`div`,cO,[P(`button`,{class:`reg`,onClick:hs(s,[`prevent`])},``)])]))}}),[[`__scopeId`,`data-v-a0266c84`]]),uO=$(k({__name:`PopupContainer`,props:{width:{default:`auto`},position:{default:`left`},maxWidth:{default:`400px`},buttonClass:{default:()=>``}},emits:[`open`,`close`,`toggle`],setup(e,{expose:t,emit:n}){let r=e,i=n,a=T(!1),o=T(null),s=I(()=>({width:r.width,maxWidth:r.maxWidth})),c=()=>{a.value=!a.value,i(`toggle`,a.value),a.value?i(`open`):i(`close`)},l=()=>{a.value&&(a.value=!1,i(`close`))},u=e=>{a.value&&o.value&&e.target instanceof Node&&!o.value.contains(e.target)&&l()},d=e=>{e.key===`Escape`&&a.value&&l()};return Cr(()=>{document.addEventListener(`click`,u),document.addEventListener(`keydown`,d)}),Dr(()=>{document.removeEventListener(`click`,u),document.removeEventListener(`keydown`,d)}),t({open:()=>{a.value=!0,i(`open`)},close:l,toggle:c}),(t,n)=>(j(),M(`div`,{class:`popup-container`,ref_key:`containerRef`,ref:o},[F(ID,{onClick:c,size:30,class:S([`trigger`,e.buttonClass]),isOpen:a.value},{default:O(()=>[Vr(t.$slots,`icon`,{},void 0,!0)]),_:3},8,[`class`,`isOpen`]),F(go,{name:`popup`},{default:O(()=>[a.value?(j(),M(`div`,{key:0,class:S([`popup-content`,`position-${e.position}`]),style:ve(s.value)},[Vr(t.$slots,`content`,{},void 0,!0)],6)):Ea(``,!0)]),_:3})],512))}}),[[`__scopeId`,`data-v-7fe67749`]]),dO={class:`registration-wrap--pop`},fO=$(k({__name:`RegistrationWrap`,setup(e){let t=Z(),n=T(`sign`),r=mi(`emitter`),i=e=>{t.errorMessage=``,n.value=e},a=()=>{r.emit(`setUserData`)};return Cr(async()=>{await t.authChange(a),await r.emit(`setUserData`)}),(e,r)=>(j(),N(uO,{position:`right`,maxWidth:`auto`,class:`popup`},{icon:O(()=>[F(VD,{class:`icon`})]),content:O(()=>[P(`div`,dO,[E(t).user?(j(),N(lO,{key:0})):n.value===`sign`?(j(),N($D,{key:1,onSetForm:i})):n.value===`reg`?(j(),N(YD,{key:2,onSetForm:i})):Ea(``,!0)])]),_:1}))}}),[[`__scopeId`,`data-v-3713fdd6`]]),pO={},mO={xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 640 640`};function hO(e,t){return j(),M(`svg`,mO,[...t[0]||=[P(`path`,{fill:`currentColor`,d:`M96 160C96 124.7 124.7 96 160 96L480 96C515.3 96 544 124.7 544 160L544 480C544 515.3 515.3 544 480 544L160 544C124.7 544 96 515.3 96 480L96 160zM144 432L144 464C144 472.8 151.2 480 160 480L192 480C200.8 480 208 472.8 208 464L208 432C208 423.2 200.8 416 192 416L160 416C151.2 416 144 423.2 144 432zM448 416C439.2 416 432 423.2 432 432L432 464C432 472.8 439.2 480 448 480L480 480C488.8 480 496 472.8 496 464L496 432C496 423.2 488.8 416 480 416L448 416zM144 304L144 336C144 344.8 151.2 352 160 352L192 352C200.8 352 208 344.8 208 336L208 304C208 295.2 200.8 288 192 288L160 288C151.2 288 144 295.2 144 304zM448 288C439.2 288 432 295.2 432 304L432 336C432 344.8 439.2 352 448 352L480 352C488.8 352 496 344.8 496 336L496 304C496 295.2 488.8 288 480 288L448 288zM144 176L144 208C144 216.8 151.2 224 160 224L192 224C200.8 224 208 216.8 208 208L208 176C208 167.2 200.8 160 192 160L160 160C151.2 160 144 167.2 144 176zM448 160C439.2 160 432 167.2 432 176L432 208C432 216.8 439.2 224 448 224L480 224C488.8 224 496 216.8 496 208L496 176C496 167.2 488.8 160 480 160L448 160z`},null,-1)]])}var gO=$(pO,[[`render`,hO]]),_O=k({__name:`LastViewButton`,setup(e){let t=AD(),n=Z(),r=()=>{n.pageNum=1,n.genreId=null,t.push({name:`lastViews`})};return(e,t)=>(j(),N(ID,{onClick:r,size:26},{default:O(()=>[F(gO)]),_:1}))}}),vO={},yO={xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 512 512`};function bO(e,t){return j(),M(`svg`,yO,[...t[0]||=[P(`path`,{fill:`currentColor`,d:`M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z`},null,-1)]])}var xO=$(vO,[[`render`,bO]]),SO=$(k({__name:`FavoriteButton`,setup(e){let t=AD(),n=Z(),r=I(()=>n.favorites.length),i=I(()=>n.user===null?`disabled`:``),a=()=>{n.pageNum=1,n.genreId=null,t.push({name:`favorite`})};return(e,t)=>(j(),N(ID,{onClick:a,customClass:i.value,size:18},{default:O(()=>[F(xO),Ta(De(r.value),1)]),_:1},8,[`customClass`]))}}),[[`__scopeId`,`data-v-d036562c`]]),CO=$(k({__name:`SearchPopup`,setup(e){let t=Z(),n=AD(),r=e=>{t.pageNum=1,t.searchInputText=e,n.push({name:`searchPage`,query:{q:t.searchInputText}}),t.setShowLastSearchList(!1)},i=()=>{t.setShowLastSearchList(!1)};return(e,n)=>E(t).lastSearchList.length?(j(),M(`div`,{key:0,class:S([`search-popup`,{opened:E(t).isShowLastSearchList}])},[P(`button`,{type:`button`,class:`close-list`,onClick:i},``),P(`ul`,null,[(j(!0),M(A,null,Br(E(t).lastSearchList,e=>(j(),M(`li`,{key:e.id},[F(ID,{onClick:t=>r(e.value)},{default:O(()=>[Ta(De(e.value),1)]),_:2},1032,[`onClick`])]))),128))])],2)):Ea(``,!0)}}),[[`__scopeId`,`data-v-6dc2e8c5`]]),wO={class:`input-wrap`},TO=$(k({__name:`SearchForm`,props:{visibleSearch:{type:Boolean,default:!1}},setup(e){let t=e,n=jD(),r=AD(),i=Z();Cr(()=>{i.searchInputText=String(n.query.q||``)});let a=T(null),o=async()=>{i.addLastSearchList(i.searchInputText||``),i.pageNum=1,r.push({name:`searchPage`,query:i.searchQuery}),i.setShowLastSearchList(!1)},s=()=>{i.setShowLastSearchList(!0)},c=()=>{i.searchInputText=``,a.value?.focus()};return(e,n)=>(j(),M(`form`,{action:`#`,class:S([`search-form`,{show:t.visibleSearch}]),onSubmit:hs(o,[`prevent`])},[P(`div`,wO,[Vn(P(`input`,{ref_key:`searchInput`,ref:a,autocomplete:`off`,type:`text`,onKeydown:_s(o,[`enter`]),onFocus:s,placeholder:`  / ID `,"onUpdate:modelValue":n[0]||=e=>E(i).searchInputText=e,name:`keyword`},null,544),[[fs,E(i).searchInputText,void 0,{trim:!0}]]),F(ID,{class:S([`clear-input`,{show:E(i).searchInputText}]),onClick:c},{default:O(()=>[...n[1]||=[Ta(``,-1)]]),_:1},8,[`class`])]),F(ID,{type:`submit`,border:!0},{default:O(()=>[...n[2]||=[Ta(``,-1)]]),_:1}),F(CO)],34))}}),[[`__scopeId`,`data-v-aa8bd6ac`]]),EO={},DO={xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 512 512`};function OO(e,t){return j(),M(`svg`,DO,[...t[0]||=[P(`path`,{fill:`currentColor`,d:`M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM184 296c0 13.3 10.7 24 24 24s24-10.7 24-24l0-64 64 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-64 0 0-64c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 64-64 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l64 0 0 64z`},null,-1)]])}var kO=$(EO,[[`render`,OO]]),AO={},jO={xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 512 512`};function MO(e,t){return j(),M(`svg`,jO,[...t[0]||=[P(`path`,{fill:`currentColor`,d:`M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM136 184c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0z`},null,-1)]])}var NO=$(AO,[[`render`,MO]]),PO={},FO={xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 640 640`};function IO(e,t){return j(),M(`svg`,FO,[...t[0]||=[P(`path`,{fill:`currentColor`,d:`M96 320C96 289.1 121.1 264 152 264C182.9 264 208 289.1 208 320C208 350.9 182.9 376 152 376C121.1 376 96 350.9 96 320zM264 320C264 289.1 289.1 264 320 264C350.9 264 376 289.1 376 320C376 350.9 350.9 376 320 376C289.1 376 264 350.9 264 320zM488 264C518.9 264 544 289.1 544 320C544 350.9 518.9 376 488 376C457.1 376 432 350.9 432 320C432 289.1 457.1 264 488 264z`},null,-1)]])}var LO=$(PO,[[`render`,IO]]),RO={},zO={xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 512 512`};function BO(e,t){return j(),M(`svg`,zO,[...t[0]||=[P(`path`,{fill:`currentColor`,d:`M142.9 142.9c-17.5 17.5-30.1 38-37.8 59.8c-5.9 16.7-24.2 25.4-40.8 19.5s-25.4-24.2-19.5-40.8C55.6 150.7 73.2 122 97.6 97.6c87.2-87.2 228.3-87.5 315.8-1L455 55c6.9-6.9 17.2-8.9 26.2-5.2s14.8 12.5 14.8 22.2l0 128c0 13.3-10.7 24-24 24l-8.4 0c0 0 0 0 0 0L344 224c-9.7 0-18.5-5.8-22.2-14.8s-1.7-19.3 5.2-26.2l41.1-41.1c-62.6-61.5-163.1-61.2-225.3 1zM16 312c0-13.3 10.7-24 24-24l7.6 0 .7 0L168 288c9.7 0 18.5 5.8 22.2 14.8s1.7 19.3-5.2 26.2l-41.1 41.1c62.6 61.5 163.1 61.2 225.3-1c17.5-17.5 30.1-38 37.8-59.8c5.9-16.7 24.2-25.4 40.8-19.5s25.4 24.2 19.5 40.8c-10.8 30.6-28.4 59.3-52.9 83.8c-87.2 87.2-228.3 87.5-315.8 1L57 457c-6.9 6.9-17.2 8.9-26.2 5.2S16 449.7 16 440l0-119.6 0-.7 0-7.6z`},null,-1)]])}var VO=$(RO,[[`render`,BO]]),HO={},UO={xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 640 640`};function WO(e,t){return j(),M(`svg`,UO,[...t[0]||=[P(`path`,{fill:`currentColor`,d:`M64 320C64 178.6 178.6 64 320 64C461.4 64 576 178.6 576 320C576 461.4 461.4 576 320 576C178.6 576 64 461.4 64 320zM252.3 211.1C244.7 215.3 240 223.4 240 232L240 408C240 416.7 244.7 424.7 252.3 428.9C259.9 433.1 269.1 433 276.6 428.4L420.6 340.4C427.7 336 432.1 328.3 432.1 319.9C432.1 311.5 427.7 303.8 420.6 299.4L276.6 211.4C269.2 206.9 259.9 206.7 252.3 210.9z`},null,-1)]])}var GO=$(HO,[[`render`,WO]]),KO={},qO={xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 640 640`};function JO(e,t){return j(),M(`svg`,qO,[...t[0]||=[P(`path`,{fill:`currentColor`,d:`M320 64C461.4 64 576 178.6 576 320C576 461.4 461.4 576 320 576C178.6 576 64 461.4 64 320C64 178.6 178.6 64 320 64zM296 184L296 320C296 328 300 335.5 306.7 340L402.7 404C413.7 411.4 428.6 408.4 436 397.3C443.4 386.2 440.4 371.4 429.3 364L344 307.2L344 184C344 170.7 333.3 160 320 160C306.7 160 296 170.7 296 184z`},null,-1)]])}var YO=$(KO,[[`render`,JO]]),XO={},ZO={xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 640 640`};function QO(e,t){return j(),M(`svg`,ZO,[...t[0]||=[P(`path`,{fill:`currentColor`,d:`M533.6 96.5C523.3 88.1 508.2 89.7 499.8 100C491.4 110.3 493 125.4 503.3 133.8C557.5 177.8 592 244.8 592 320C592 395.2 557.5 462.2 503.3 506.3C493 514.7 491.5 529.8 499.8 540.1C508.1 550.4 523.3 551.9 533.6 543.6C598.5 490.7 640 410.2 640 320C640 229.8 598.5 149.2 533.6 96.5zM473.1 171C462.8 162.6 447.7 164.2 439.3 174.5C430.9 184.8 432.5 199.9 442.8 208.3C475.3 234.7 496 274.9 496 320C496 365.1 475.3 405.3 442.8 431.8C432.5 440.2 431 455.3 439.3 465.6C447.6 475.9 462.8 477.4 473.1 469.1C516.3 433.9 544 380.2 544 320.1C544 260 516.3 206.3 473.1 171.1zM412.6 245.5C402.3 237.1 387.2 238.7 378.8 249C370.4 259.3 372 274.4 382.3 282.8C393.1 291.6 400 305 400 320C400 335 393.1 348.4 382.3 357.3C372 365.7 370.5 380.8 378.8 391.1C387.1 401.4 402.3 402.9 412.6 394.6C434.1 376.9 448 350.1 448 320C448 289.9 434.1 263.1 412.6 245.5zM80 416L128 416L262.1 535.2C268.5 540.9 276.7 544 285.2 544C304.4 544 320 528.4 320 509.2L320 130.8C320 111.6 304.4 96 285.2 96C276.7 96 268.5 99.1 262.1 104.8L128 224L80 224C53.5 224 32 245.5 32 272L32 368C32 394.5 53.5 416 80 416z`},null,-1)]])}var $O=$(XO,[[`render`,QO]]);const ek={ArrowDown:`ArrowDown`,ArrowUp:`ArrowUp`,ArrowRight:`ArrowRight`,ArrowLeft:`ArrowLeft`,Enter:`Enter`,NumpadEnter:`Enter`},tk={desktop:1024,tablet:768,mobile:480},nk={Alloha:(e,t)=>`https://harald-as.newplayjj.com/?kp=${e}&token=${t}`,Collaps:e=>`https://api.atomics.ws/embed/kp/${e}`,VideoCDN:e=>`https://p.lumex.space/j3mqebEPqCLB?domain=nayteruz.github.io&kp_id=${e}`,Coll:async e=>{let t=`https://api.bhcesh.me/list?token=4c250f7ac0a8c8a658c789186b9a58a5&kinopoisk_id=${e}`;try{let e=await(await fetch(t)).json();if(Array.isArray(e.results)&&e.results.length>0&&e.results?.[0].iframe_url)return e.results?.[0].iframe_url}catch(e){console.error(`HDVB error:`,e)}return null},kodi:async e=>{let t=`https://kodikapi.com/search?token=41dd95f84c21719b09d6c71182237a25&kinopoisk_id=${e}`;try{let e=await(await fetch(t)).json();if(Array.isArray(e.results)&&e.results.length>0&&e.results?.[0].link)return e.results?.[0].link}catch(e){console.error(`HDVB error:`,e)}return null},HDVB:async(e,t)=>{let n=`https://apivb.com/api/videos.json?id_kp=${e}&token=${t}`;try{let e=await(await fetch(n)).json();if(Array.isArray(e)&&e.length>0&&e[0].iframe_url)return e[0].iframe_url}catch(e){console.error(`HDVB error:`,e)}return null},Kodik:e=>`https:////kodik.cc/find-player?kinopoiskID=${e}`,:e=>`https://api.atomics.ws/embed/trailer-kp/${e}`},rk={MAIN:`  `,LAST_VIEWS:` `,FAVORITE:` /  `,WATCHING:` `,WATCH_LIST:`  `,WAIT_LIST:`    `},ik={HOME:{path:`/`,name:`home`},FILM_PAGE:{path:`/film/:id`,name:`filmPage`},SEARCH:{path:`/search`,name:`searchPage`},FAVORITES:{path:`/favorites`,name:`favorite`},LAST_VIEWS:{path:`/last-views`,name:`lastViews`},WATCHING:{path:`/watching`,name:`watchingNow`},WATCH_LIST:{path:`/watch-list`,name:`watchList`},WAITING_LIST:{path:`/waiting-list`,name:`waitingList`}};var ak={class:`list`},ok=$(k({__name:`MenuPopup`,setup(e){let t=()=>{document.location.reload()};return(e,n)=>{let r=Pr(`router-link`);return j(),N(uO,{class:`popup`,position:`right`},{icon:O(()=>[F(LO)]),content:O(()=>[P(`ul`,ak,[P(`li`,null,[F(r,{to:E(ik).WATCHING.path,class:`item`},{default:O(()=>[F(GO),n[0]||=Ta(` `,-1)]),_:1},8,[`to`])]),P(`li`,null,[F(r,{to:E(ik).WATCH_LIST.path,class:`item`},{default:O(()=>[F($O),n[1]||=Ta(` `,-1)]),_:1},8,[`to`])]),P(`li`,null,[F(r,{to:E(ik).WAITING_LIST.path,class:`item`},{default:O(()=>[F(YO),n[2]||=Ta(` `,-1)]),_:1},8,[`to`])]),P(`li`,null,[F(r,{to:E(ik).LAST_VIEWS.path,class:`item`},{default:O(()=>[F(gO),n[3]||=Ta(``,-1)]),_:1},8,[`to`])]),P(`li`,null,[P(`div`,{class:`item`,onClick:t},[F(VO),n[4]||=Ta(` `,-1)])])])]),_:1})}}}),[[`__scopeId`,`data-v-d81fc393`]]),sk=$(k({__name:`HeaderFilm`,setup(e){let t=jD(),n=T(!!(I(()=>t.query.q||``).value||t.name===`searchPage`)),r=()=>{n.value=!n.value};return(e,t)=>(j(),M(`header`,null,[F(LD),F(_O),F(SO),F(TO,{visibleSearch:n.value},null,8,[`visibleSearch`]),F(fO),F(ok),F(ID,{onClick:r,size:20,class:S([`search-popup-btn`,{opened:n.value}])},{default:O(()=>[n.value?(j(),N(NO,{key:0})):(j(),N(kO,{key:1}))]),_:1},8,[`class`])]))}}),[[`__scopeId`,`data-v-cea76096`]]),ck={class:`genres-wrap`},lk={class:`genres`},uk=[`onClick`],dk=$(k({__name:`GenreList`,setup(e){let t=jD(),n=AD(),r=Z(),i=e=>Number(r.genreId)===Number(e),a=e=>{Number(r.genreId)===Number(e)?r.genreId=null:r.genreId=e,r.pageNum=1,n.push({name:`searchPage`,query:r.searchQuery})};async function o(){await r.getGenreList()}return Cr(async()=>{r.genreId=Number(t.query.genres),await o()}),(e,t)=>(j(),M(`div`,ck,[P(`ul`,lk,[(j(!0),M(A,null,Br(E(r).genres,e=>(j(),M(`li`,{class:S({active:i(e.id)}),key:e.id},[P(`span`,{onClick:t=>a(e.id)},De(e.genre),9,uk)],2))),128))])]))}}),[[`__scopeId`,`data-v-298d7c64`]]),fk=$(k({__name:`ToTop`,setup(e){let t=()=>{window.scrollTo({top:0,behavior:`smooth`})};return(e,n)=>(j(),M(`button`,{class:`button`,onClick:t}))}}),[[`__scopeId`,`data-v-487d4bc7`]]),pk=k({__name:`NavigationByKeys`,setup(e){let t=AD(),n=Z(),r=T(0),i=T(n.films.length),a=T(t.currentRoute.value.href||document.location.pathname),o=()=>{n.currentFocusIndex===-1?n.currentFocusIndex=0:n.currentFocusIndex=Math.min(i.value-1,n.currentFocusIndex+r.value)},s=()=>{n.currentFocusIndex=Math.max(0,n.currentFocusIndex-r.value)},c=()=>{n.currentFocusIndex=Math.min(i.value-1,n.currentFocusIndex+1)},l=()=>{n.currentFocusIndex=Math.max(0,n.currentFocusIndex-1)},u=()=>{let e=n.currentFocusIndex;if(e===-1)return;let r=n.films[e].id;t.push(`/film/${r}`)},d=e=>{switch(e.key){case ek.ArrowDown:o();break;case ek.ArrowUp:s();break;case ek.ArrowRight:c();break;case ek.ArrowLeft:l();break;case ek.Enter:case ek.NumpadEnter:u();break}},f=()=>{window.innerWidth>tk.desktop?r.value=5:window.innerWidth>tk.tablet?r.value=4:window.innerWidth>tk.mobile?r.value=3:r.value=2};return Ki(()=>n.films,e=>{i.value=e.length}),Cr(()=>{window.removeEventListener(`keydown`,d),t.currentRoute.value.name!==`filmPage`&&(window.addEventListener(`keydown`,d),setTimeout(()=>{if(t.currentRoute.value.name!==`filmPage`)if(window.scrollY===0){let e=t.currentRoute.value.href||document.location.pathname;n.focusIds={...n.focusIds,[e]:-1},n.currentFocusIndex=-1}else n.currentFocusIndex=n.focusIds[a.value]||-1},1),f())}),Er(()=>{window.removeEventListener(`keydown`,d),t.currentRoute.value&&(n.focusIds={...n.focusIds,[a.value]:n.currentFocusIndex})}),(e,t)=>(j(),M(`div`))}}),mk={class:`wrapper`},hk={class:`content`},gk=k({__name:`App`,setup(e){let t=Z(),n=e=>{e.target?.closest(`.search-form`)||t.setShowLastSearchList(!1)};return Cr(()=>{document.addEventListener(`click`,n)}),Er(()=>{document.removeEventListener(`click`,n)}),(e,t)=>{let n=Pr(`RouterView`);return j(),M(`div`,mk,[(j(),N(sk,{key:e.$route.fullPath})),F(dk),P(`main`,hk,[F(n,null,{default:O(({Component:t})=>[(j(),N(fr,{include:`MainList`},[(j(),N(Ir(t),{key:e.$route.fullPath}))],1024))]),_:1})]),F(fk),(j(),N(pk,{key:e.$route.fullPath}))])}}});const _k=e=>{let t=e?.name||``,n=e?.year||``,r=e?.startYear||``,i=e?.endYear||`...`;return e?.type===nT.TV_SERIES?`${t} ${r?`( ${r} - ${i})`:``}`:`${t} ${n?`(${n})`:``}`},vk=(e,t)=>!Array.isArray(e)||e.length===0||!t?!1:new Map(e.map(e=>[Number(e?.kinopoiskId||e?.filmId||e?.id),e])).has(Number(t));var yk={class:`favorite-icon`},bk={key:0,class:`loading-round`},xk=$(k({__name:`FavoriteActionButton`,props:{id:{default:0}},setup(e){let t=e,n=T(!1),r=Z(),i=I(()=>vk(r.favorites,t.id));async function a(){if(!r.user){alert(` `);return}if(n.value=!0,i.value)await r.removeFavorite(t.id);else{let e=await xT(t.id);await r.addFavorite(await e)}n.value=!1}return(e,t)=>(j(),M(`span`,yk,[n.value?(j(),M(`span`,bk)):Ea(``,!0),F(xO,{class:S({active:i.value}),onClick:hs(a,[`prevent`])},null,8,[`class`])]))}}),[[`__scopeId`,`data-v-1b28ec77`]]),Sk={},Ck={xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 640 640`};function wk(e,t){return j(),M(`svg`,Ck,[...t[0]||=[P(`path`,{fill:`currentColor`,d:`M320 96C239.2 96 174.5 132.8 127.4 176.6C80.6 220.1 49.3 272 34.4 307.7C31.1 315.6 31.1 324.4 34.4 332.3C49.3 368 80.6 420 127.4 463.4C174.5 507.1 239.2 544 320 544C400.8 544 465.5 507.2 512.6 463.4C559.4 419.9 590.7 368 605.6 332.3C608.9 324.4 608.9 315.6 605.6 307.7C590.7 272 559.4 220 512.6 176.6C465.5 132.9 400.8 96 320 96zM176 320C176 240.5 240.5 176 320 176C399.5 176 464 240.5 464 320C464 399.5 399.5 464 320 464C240.5 464 176 399.5 176 320zM320 256C320 291.3 291.3 320 256 320C244.5 320 233.7 317 224.3 311.6C223.3 322.5 224.2 333.7 227.2 344.8C240.9 396 293.6 426.4 344.8 412.7C396 399 426.4 346.3 412.7 295.1C400.5 249.4 357.2 220.3 311.6 224.3C316.9 233.6 320 244.4 320 256z`},null,-1)]])}var Tk=$(Sk,[[`render`,wk]]),Ek={},Dk={xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 640 640`};function Ok(e,t){return j(),M(`svg`,Dk,[...t[0]||=[P(`path`,{fill:`currentColor`,d:`M73 39.1C63.6 29.7 48.4 29.7 39.1 39.1C29.8 48.5 29.7 63.7 39 73.1L567 601.1C576.4 610.5 591.6 610.5 600.9 601.1C610.2 591.7 610.3 576.5 600.9 567.2L504.5 470.8C507.2 468.4 509.9 466 512.5 463.6C559.3 420.1 590.6 368.2 605.5 332.5C608.8 324.6 608.8 315.8 605.5 307.9C590.6 272.2 559.3 220.2 512.5 176.8C465.4 133.1 400.7 96.2 319.9 96.2C263.1 96.2 214.3 114.4 173.9 140.4L73 39.1zM236.5 202.7C260 185.9 288.9 176 320 176C399.5 176 464 240.5 464 320C464 351.1 454.1 379.9 437.3 403.5L402.6 368.8C415.3 347.4 419.6 321.1 412.7 295.1C399 243.9 346.3 213.5 295.1 227.2C286.5 229.5 278.4 232.9 271.1 237.2L236.4 202.5zM357.3 459.1C345.4 462.3 332.9 464 320 464C240.5 464 176 399.5 176 320C176 307.1 177.7 294.6 180.9 282.7L101.4 203.2C68.8 240 46.4 279 34.5 307.7C31.2 315.6 31.2 324.4 34.5 332.3C49.4 368 80.7 420 127.5 463.4C174.6 507.1 239.3 544 320.1 544C357.4 544 391.3 536.1 421.6 523.4L357.4 459.2z`},null,-1)]])}var kk=$(Ek,[[`render`,Ok]]),Ak={class:`icon-wrapper`},jk=$(k({__name:`WatchActionButton`,props:{id:{default:0}},setup(e){let t=e,n=Z(),r=I(()=>n.isSkipped(t.id)),i=()=>{r.value?n.removeSkip(t.id):n.addSkip(t.id)};return(e,t)=>(j(),M(`span`,Ak,[r.value?(j(),N(kk,{key:0,class:`unwatch`,onClick:hs(i,[`prevent`])})):(j(),N(Tk,{key:1,onClick:hs(i,[`prevent`])}))]))}}),[[`__scopeId`,`data-v-b5ccd941`]]),Mk={},Nk={height:`16`,viewBox:`0 0 16 16`,width:`16`,xmlns:`http://www.w3.org/2000/svg`};function Pk(e,t){return j(),M(`svg`,Nk,[...t[0]||=[P(`path`,{fill:`currentColor`,d:`M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z`,class:`star`},null,-1)]])}var Fk=$(Mk,[[`render`,Pk]]),Ik={key:0,class:`rating`},Lk=$(k({__name:`FilmRating`,props:{rating:{},isRating:{type:Boolean,default:!0}},setup(e){let t=e;return(n,r)=>e.isRating?(j(),M(`span`,Ik,[F(Fk,{class:`star`}),Ta(De(t.rating),1)])):Ea(``,!0)}}),[[`__scopeId`,`data-v-58ba0590`]]),Rk=[`href`],zk={class:`icon-actions`},Bk={class:`image-wrapper`},Vk=[`src`,`alt`],Hk={class:`name-wrapper`},Uk=$(k({__name:`FilmItem`,props:{itemFilm:{},isRating:{type:Boolean,default:!0},currentIndex:{}},setup(e){let t=e,n=AD(),r=Z(),i=T(null),a=I(()=>t.currentIndex===r.currentFocusIndex),o=I(()=>_k(t.itemFilm)),s=I(()=>`/hometv/film/${t.itemFilm.id}`),c=T(!1),l=I(()=>t.itemFilm.id),u=I(()=>r.isSkipped(l.value)),d=()=>{n.push(`/film/${l.value}`)},f=()=>{c.value=!0},p=()=>{c.value=!1};return Ki(a,()=>{if(a.value&&i.value){let e=i.value.getBoundingClientRect(),t=document.documentElement.scrollTop,n=t+window.innerHeight,r=e.bottom+t;(e.top<0||r>n)&&window.scrollTo(0,t+e.top-80)}}),(n,r)=>(j(),M(`li`,{class:S([`card`,{focused:a.value||c.value,unwatch:u.value}]),onMouseover:f,onMouseleave:p,tabindex:`0`,ref_key:`itemRef`,ref:i},[P(`a`,{href:s.value,class:`card-link`,onClick:hs(d,[`prevent`])},null,8,Rk),P(`div`,zk,[F(xk,{class:`favorite`,id:l.value},null,8,[`id`]),F(jk,{class:`watch`,id:l.value},null,8,[`id`]),F(Lk,{rating:t.itemFilm.rating,isRating:t.isRating},null,8,[`rating`,`isRating`])]),P(`div`,Bk,[r[0]||=P(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`360`,height:`540`},null,-1),P(`img`,{src:e.itemFilm.image,alt:t.itemFilm.name},null,8,Vk)]),P(`div`,Hk,[P(`h3`,null,De(o.value),1)])],34))}}),[[`__scopeId`,`data-v-ae98e244`]]),Wk={};function Gk(e,t){return j(),M(A,null,Br(20,e=>P(`li`,{class:`films__item preload-card`,key:e},[...t[0]||=[P(`div`,{class:`item__image`},[P(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`360`,height:`540`})],-1)]])),64)}var Kk=$(Wk,[[`render`,Gk],[`__scopeId`,`data-v-aadc4565`]]),qk={key:0,class:`films__list`},Jk={key:1,class:`not-found`},Yk=$(k({__name:`FilmList`,props:{showPreload:{type:Boolean,default:!1},items:{default:()=>[]},isRating:{type:Boolean,default:!0}},setup(e){let t=e,n=mi(`emitter`),r=T(!1);return n.on(`isLoading`,e=>{r.value=e}),(e,n)=>(j(),M(`div`,{class:S([`films__wrap`,{loading:r.value}])},[t.items.length?(j(),M(`ul`,qk,[(j(!0),M(A,null,Br(t.items,(e,n)=>(j(),N(Uk,{itemFilm:e,key:e.id,currentIndex:n,isRating:t.isRating},null,8,[`itemFilm`,`currentIndex`,`isRating`]))),128)),t.showPreload?(j(),N(Kk,{key:0})):Ea(``,!0)])):(j(),M(`h2`,Jk,`  `))],2))}}),[[`__scopeId`,`data-v-83ca4bc5`]]),Xk={},Zk={xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 256 512`};function Qk(e,t){return j(),M(`svg`,Zk,[...t[0]||=[P(`path`,{d:`M31.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34z`},null,-1)]])}var $k=$(Xk,[[`render`,Qk],[`__scopeId`,`data-v-f06fdeaf`]]),eA={},tA={xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 448 512`};function nA(e,t){return j(),M(`svg`,tA,[...t[0]||=[P(`path`,{d:`M223.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L319.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L393.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34zm-192 34l136 136c9.4 9.4 24.6 9.4 33.9 0l22.6-22.6c9.4-9.4 9.4-24.6 0-33.9L127.9 256l96.4-96.4c9.4-9.4 9.4-24.6 0-33.9L201.7 103c-9.4-9.4-24.6-9.4-33.9 0l-136 136c-9.5 9.4-9.5 24.6-.1 34z`},null,-1)]])}var rA=$(eA,[[`render`,nA],[`__scopeId`,`data-v-ad51d4f5`]]),iA={class:`pagination`},aA=[`onClick`],oA=$(k({__name:`PaginationList`,props:[`total`],setup(e){let t=Z(),n=mi(`emitter`),r=I(()=>t.pageNum),i=e,a=e=>{let t=[];if(i.total>6){if(r.value===1||r.value>1&&r.value<3)return[1,2,3,`...`,e];if(r.value===3)return[1,2,3,4,`...`,e];if(r.value>3&&r.value<e-2)return[1,`...`,r.value-1,r.value,r.value+1,`...`,e];if(r.value===e-2)return[1,`...`,r.value-1,r.value,r.value+1,e];if(r.value===e-1)return[1,`...`,r.value-1,r.value,e];if(r.value===e)return[1,`...`,r.value-2,r.value-1,e]}else for(let n=1;n<=e;n++)t.push(n);return t},o=(e,r=``)=>{if(e===`...`)return;let a;a=r===`prev`?t.pageNum-1:r===`next`?t.pageNum+1:r===`prevAll`?1:r===`nextAll`?i.total:e,t.pageNum=a,n.emit(`clickPage`,a)};return(n,r)=>(j(),M(`div`,iA,[P(`ul`,null,[Vn(P(`li`,{class:`pg first`,onClick:r[0]||=e=>o(null,`prevAll`)},[P(`span`,null,[F(rA)])],512),[[Po,E(t).pageNum>1]]),Vn(P(`li`,{class:`pg prev`,onClick:r[1]||=e=>o(null,`prev`)},[P(`span`,null,[F($k)])],512),[[Po,E(t).pageNum>1]]),(j(!0),M(A,null,Br(a(e.total),e=>(j(),M(`li`,{key:e},[P(`span`,{class:S({active:E(t).pageNum===e}),onClick:t=>o(e)},De(e),11,aA)]))),128)),Vn(P(`li`,{class:`pg next`,onClick:r[2]||=e=>o(null,`next`)},[P(`span`,null,[F($k)])],512),[[Po,E(t).pageNum<i.total]]),Vn(P(`li`,{class:`pg last`,onClick:r[3]||=e=>o(null,`nextAll`)},[P(`span`,null,[F(rA)])],512),[[Po,E(t).pageNum<i.total]])])]))}}),[[`__scopeId`,`data-v-0dbc6fa4`]]),sA={key:0,ref:`observer`,class:`observer`},cA=$(k({__name:`MainList`,setup(e){let t=Z(),n=mi(`emitter`),r=AD(),i=T([]),a=T(0),o=T(!1),s=async()=>{try{return TT(t.pageNum)}catch(e){console.error(`Error load films`,e)}};async function c(e=0,r=``){r===`loading`&&n.emit(`isLoading`,!0),o.value=r===`preload`,t.pageNum=e||t.pageNum;let c=await s();a.value=c.totalPages,r===`preload`?i.value=[...i.value,...c.items]:(i.value=[],i.value=c.items),o.value=!1,r===`loading`&&await c.items&&n.emit(`isLoading`,!1)}function l(){c(t.pageNum+1,`preload`)}function u(){c(t.pageNum,`loading`)}return n.on(`clickPage`,u),Ki(()=>i.value,()=>{t.films=i.value}),Ki(()=>r.currentRoute.value.fullPath,()=>{t.films=i.value}),Cr(()=>{c()}),(e,n)=>{let r=Lr(`title`),s=Lr(`intersection`);return j(),M(A,null,[Vn((j(),M(`h1`,null,[Ta(De(E(rk).MAIN),1)])),[[r]]),F(oA,{total:a.value},null,8,[`total`]),F(Yk,{items:i.value,showPreload:o.value,isRating:!0},null,8,[`items`,`showPreload`]),F(oA,{total:a.value},null,8,[`total`]),E(t).pageNum<a.value?Vn((j(),M(`div`,sA,null,512)),[[s,{getMoreFilms:l}]]):Ea(``,!0)],64)}}}),[[`__scopeId`,`data-v-568608d2`]]),lA=[`src`],uA=$(k({__name:`FilmPlayerClub`,setup(e){let t=jD().params.id;return(e,n)=>(j(),M(`div`,null,[P(`iframe`,{src:`//496622434375553.svetacdn.in/fcvcbl7auqJG?kp_id=${E(t)}`,width:`100%`,height:`495`,allowfullscreen:``},null,8,lA)]))}}),[[`__scopeId`,`data-v-aff8ea0e`]]),dA={class:`player-container`},fA={class:`player-select`},pA={class:`player-name-list`},mA=[`onClick`],hA={key:0},gA=[`src`,`title`],_A={key:1},vA={key:2},yA=$(k({__name:`PlayersList`,setup(e){let t=Z(),n=jD(),r=Number(n.params.id)||0,i=Object.keys(nk),a=T({}),o=T({}),s=T(null),c=T(null),l=async e=>{s.value=e;let t=a.value[e];t.loaded||t.loading||await d(e)},u=e=>{if(e===`Alloha`)return t.apiAloha;if(e===`HDVB`)return t.apiHDBV},d=async e=>{o.value[e]=!0;let t=a.value[e];t&&(t.loading=!0);try{let n=nk[e],i=u(e),o=typeof n==`function`?await n(r,i||``):null;t&&(a.value[e]={...t,iframeSrc:o,loading:!1,loaded:!0,error:!o})}catch(n){console.error(`   ${e}:`,n),t&&(a.value[e]={...t,loading:!1,loaded:!0,error:!0})}finally{o.value[e]=!1}},f=()=>{for(let e of i)a.value[e]={name:e,iframeSrc:null,loading:!1,loaded:!1,error:!1}},p=async()=>{i.length>0&&(s.value=i[0]||``,await d(i[0]||``))};return Cr(()=>{c.value&&(t.setFilmPageId(r),f(),p())}),(e,t)=>(j(),M(`div`,null,[P(`div`,dA,[P(`div`,fA,[P(`div`,pA,[(j(!0),M(A,null,Br(E(i),e=>(j(),M(`button`,{key:e,class:S({"select-button":!0,active:e===s.value,loading:o.value[e]}),onClick:t=>l(e)},De(e),11,mA))),128))])]),P(`div`,{ref_key:`playerList`,ref:c,class:`player-list`},[(j(!0),M(A,null,Br(a.value,e=>(j(),M(`div`,{key:e.name,class:S({"player-item":!0,active:e.name===s.value})},[e.name===s.value?(j(),M(`div`,hA,[e.iframeSrc?(j(),M(`iframe`,{key:0,src:e.iframeSrc,allowfullscreen:``,loading:`lazy`,title:` ${e.name}   ID ${E(r)}`},null,8,gA)):e.loading?(j(),M(`div`,_A,` ...`)):(j(),M(`div`,vA,`  `))])):Ea(``,!0)],2))),128))],512)])]))}}),[[`__scopeId`,`data-v-21ce017c`]]),bA={key:0,class:`loading-round`},xA=$(k({__name:`ActionFavorite`,props:{id:{}},setup(e){let t=e,n=Z(),r=I(()=>vk(n.favorites,t.id)),i=T(!1);async function a(){if(!n.user){alert(` `);return}if(i.value=!0,r.value)await n.removeFavorite(t.id);else{let e=await xT(t.id);await n.addFavorite(await e)}i.value=!1}return(e,t)=>(j(),N(ID,{class:S([`button`,{selected:r.value}]),size:20,onClick:a,disabled:i.value},{default:O(()=>[i.value?(j(),M(`span`,bA)):Ea(``,!0),F(xO),t[0]||=Ta(`  `,-1)]),_:1},8,[`class`,`disabled`]))}}),[[`__scopeId`,`data-v-10ef9cdc`]]),SA={key:0,class:`loading-round`},CA=$(k({__name:`ActionWatching`,props:{id:{}},setup(e){let t=e,n=Z(),r=I(()=>vk(n.watchingList,t.id)),i=T(!1);async function a(){if(!n.user){alert(` `);return}if(i.value=!0,r.value)await n.removeWatching(t.id);else{let e=await xT(t.id);await n.addWatching(await e)}i.value=!1}return(e,t)=>(j(),N(ID,{class:S([`button`,{selected:r.value}]),size:20,onClick:a,disabled:i.value},{default:O(()=>[i.value?(j(),M(`span`,SA)):Ea(``,!0),F(GO),t[0]||=Ta(`   `,-1)]),_:1},8,[`class`,`disabled`]))}}),[[`__scopeId`,`data-v-a070af22`]]),wA={key:0,class:`loading-round`},TA=$(k({__name:`ActionWatchList`,props:{id:{default:0}},setup(e){let t=e,n=Z(),r=I(()=>vk(n.watchList,t.id)),i=T(!1);async function a(){if(!n.user){alert(` `);return}if(i.value=!0,r.value)await n.removeWatchList(t.id);else{let e=await xT(t.id);await n.addWatchList(await e)}i.value=!1}return(e,t)=>(j(),N(ID,{class:S([`button`,{selected:r.value}]),size:20,onClick:a,disabled:i.value},{default:O(()=>[i.value?(j(),M(`span`,wA)):Ea(``,!0),F($O),t[0]||=Ta(`   `,-1)]),_:1},8,[`class`,`disabled`]))}}),[[`__scopeId`,`data-v-2a0ce762`]]),EA={key:0,class:`loading-round`},DA=$(k({__name:`ActionWaitingList`,props:{id:{}},setup(e){let t=e,n=Z(),r=I(()=>vk(n.waitingList,t.id)),i=T(!1);async function a(){if(!n.user){alert(` `);return}if(i.value=!0,r.value)await n.removeWaitList(t.id);else{let e=await xT(t.id);await n.addWaitList(await e)}i.value=!1}return(e,t)=>(j(),N(ID,{class:S([`button`,{selected:r.value}]),size:20,onClick:a,disabled:i.value},{default:O(()=>[i.value?(j(),M(`span`,EA)):Ea(``,!0),F(YO),t[0]||=Ta(`   `,-1)]),_:1},8,[`class`,`disabled`]))}}),[[`__scopeId`,`data-v-bb03a40b`]]),OA={class:`list`},kA=$(k({__name:`FilmActionList`,setup(e){let t=jD(),n=Number(t.params.id);return(e,t)=>(j(),N(uO,{class:`popup`,position:`right`,maxWidth:`auto`,buttonClass:`buttonTrigger`},{icon:O(()=>[F(xO,{class:`icon`})]),content:O(()=>[P(`ul`,OA,[P(`li`,null,[F(xA,{id:E(n),class:`item`},null,8,[`id`])]),P(`li`,null,[F(CA,{id:E(n),class:`item`},null,8,[`id`])]),P(`li`,null,[F(TA,{id:E(n),class:`item`},null,8,[`id`])]),P(`li`,null,[F(DA,{id:E(n),class:`item`},null,8,[`id`])])])]),_:1}))}}),[[`__scopeId`,`data-v-a45cef8d`]]),AA={class:`tab-titles`},jA={class:`actions`},MA=$(k({__name:`FilmPlayerSelect`,setup(e){let t=T(0);return(e,n)=>(j(),M(A,null,[P(`ul`,AA,[P(`li`,{class:S({selected:t.value===1}),onClick:n[0]||=e=>t.value=1},`  `,2),P(`li`,{class:S({selected:t.value===5}),onClick:n[1]||=e=>t.value=5},`Lumex`,2),P(`li`,jA,[F(kA)])]),t.value===1?(j(),N(yA,{key:0})):Ea(``,!0),t.value===5?(j(),N(uA,{key:1})):Ea(``,!0)],64))}}),[[`__scopeId`,`data-v-adf1cfe9`]]),NA={},PA={xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 448 512`};function FA(e,t){return j(),M(`svg`,PA,[...t[0]||=[P(`path`,{fill:`currentColor`,d:`M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z`},null,-1)]])}var IA=$(NA,[[`render`,FA]]),LA=$({__name:`ButtonBack`,setup(e){let t=AD(),n=()=>{t.go(-1)};return(e,t)=>(j(),N(ID,{onClick:n,size:18,class:`back`},{default:O(()=>[F(IA),t[0]||=Ta(``,-1)]),_:1}))}},[[`__scopeId`,`data-v-a9e95ac4`]]),RA={class:`image`},zA={class:`icon-actions`},BA=[`src`],VA=$(k({__name:`FilmImage`,props:{filmInfo:{}},setup(e){let t=e,n=I(()=>t.filmInfo);return(e,t)=>(j(),M(`div`,RA,[P(`div`,zA,[F(xk,{class:`favorite`,id:n.value?.id},null,8,[`id`]),F(jk,{class:`watch`,id:n.value?.id||0},null,8,[`id`]),F(Lk,{rating:n.value?.rating||0,class:`rating`},null,8,[`rating`])]),n.value?.image?(j(),M(`img`,{key:0,src:n.value?.image,alt:`filmTitle`},null,8,BA)):Ea(``,!0)]))}}),[[`__scopeId`,`data-v-1415d618`]]),HA={class:`genres`},UA=[`onClick`],WA=$(k({__name:`FilmGenres`,props:{genres:{default:()=>[]},title:{default:``}},setup(e){let t=AD(),n=e,r=e=>{let n=JSON.parse(localStorage.getItem(`genres`)||`[]`).filter(t=>t.genre===e)?.[0]?.id||-1;window.scrollTo(0,0),t.push({name:`searchPage`,query:{genres:n}})};return(e,t)=>(j(),M(`div`,HA,[P(`h3`,null,De(n.title),1),P(`ul`,null,[(j(!0),M(A,null,Br(n.genres,e=>(j(),M(`li`,{key:e},[P(`span`,{onClick:t=>r(e)},De(e),9,UA)]))),128))])]))}}),[[`__scopeId`,`data-v-177e4dfb`]]),GA={class:`film__wrap`},KA={class:`film__note`},qA={class:`film__btns`},JA={class:`film__description`},YA={key:0,class:`film__similar`},XA=$(k({__name:`FilmPage`,setup(e){let t=Z(),n=jD(),r=T(),i=T([]),a=I(()=>_k(r.value)),o=Array.isArray(n.params.id)?Number(n.params.id[0])||0:Number(n.params.id)||0,s=async()=>{try{r.value=await xT(o),t.authChange().then(()=>{t.addLastViews(r.value)})}catch(e){console.error(`Error load film info`,e),r.value=void 0}},c=async()=>{if(o)try{let e=(await Promise.allSettled([ST(o),wT(o),CT(o)])).filter(e=>e.status===`fulfilled`).flatMap(e=>e.value);i.value=Array.from(new Map(e.map(e=>[e.id,e])).values())}catch(e){console.error(`Error load extra list`,e)}},l=I(()=>{let e=r.value?.kinopoiskId||r.value?.filmId||r.value?.id||0;t.isSkipped(e)});return Cr(()=>{s(),c()}),(e,t)=>{let n=Lr(`title`);return j(),M(A,null,[F(LA),Vn((j(),M(`h1`,null,[Ta(De(a.value),1)])),[[n]]),P(`div`,GA,[F(VA,{filmInfo:r.value,class:S({unwatch:l.value})},null,8,[`filmInfo`,`class`]),P(`div`,KA,[P(`div`,qA,[F(MA)]),P(`div`,JA,[t[0]||=P(`h3`,null,`:`,-1),Ta(` `+De(r.value?.description||``),1)]),F(WA,{genres:r.value?.genres||[],title:``},null,8,[`genres`]),i.value.length>0?(j(),M(`div`,YA,[t[1]||=P(`h3`,null,` `,-1),F(Yk,{items:i.value,isRating:!1,showPreload:!1},null,8,[`items`])])):Ea(``,!0)])])],64)}}}),[[`__scopeId`,`data-v-eccb8fcd`]]),ZA={key:0,ref:`observer`,class:`observer`},QA=k({__name:`SearchPage`,setup(e){let t=jD(),n=T([]),r=mi(`emitter`),i=Z(),a=T(0),o=T(!1),s=T(``),c=async()=>{let e={};i.searchInputText&&(e.keyword=i.searchInputText),i.genreId&&(e.genres=String(i.genreId)),i.pageNum&&(e.page=String(i.pageNum));try{return ET(e)}catch(e){console.error(`Error load films`,e)}},l=async(e=!1,t)=>{if(i.pageNum=t||i.pageNum,i.genreId||i.searchInputText||e){o.value=!0;let t=await c();a.value=t?.totalPages||0,e?n.value=[...n.value,...t?.items||[]]:(n.value=[],n.value=t?.items||[]),o.value=!1}},u=()=>{l(!0,i.pageNum+1)};return r.on(`clickPage`,()=>{l(!1,i.pageNum)}),Cr(async()=>{i.searchInputText=String(t.query.q)||``,i.genreId=Number(t.query.genres),await l(!1,1),r.on(`searchSubmit`,()=>{l(!1,1)}),s.value=i.searchHeading}),(e,t)=>{let r=Lr(`title`),c=Lr(`intersection`);return j(),M(A,null,[Vn((j(),M(`h1`,null,[Ta(De(s.value),1)])),[[r]]),F(oA,{total:a.value,onClickPage:l},null,8,[`total`]),F(Yk,{items:n.value,showPreload:o.value},null,8,[`items`,`showPreload`]),F(oA,{total:a.value,onClickPage:l},null,8,[`total`]),E(i).pageNum<a.value?Vn((j(),M(`div`,ZA,null,512)),[[c,{getMoreFilms:u}]]):Ea(``,!0)],64)}}}),$A={};function ej(e,t){let n=Pr(`router-link`);return j(),M(A,null,[t[2]||=P(`h1`,null,`  `,-1),P(`p`,null,[t[1]||=Ta(`  `,-1),F(n,{to:`/`},{default:O(()=>[...t[0]||=[Ta(``,-1)]]),_:1})]),t[3]||=P(`br`,null,null,-1)],64)}var tj=$($A,[[`render`,ej],[`__scopeId`,`data-v-1dfddbdd`]]),nj={key:0},rj=$(k({__name:`FavoritePage`,setup(e){let t=Z(),n=T(!1);return Ki(()=>t.favorites,()=>{t.films=t.favorites}),(e,r)=>(j(),M(A,null,[P(`h1`,null,De(E(rk).FAVORITE),1),F(Yk,{items:E(t).favorites,showPreload:n.value},null,8,[`items`,`showPreload`]),E(t).favorites.length===0?(j(),M(`h3`,nj,` `)):Ea(``,!0)],64))}}),[[`__scopeId`,`data-v-c2078d0b`]]),ij={key:0},aj=$(k({__name:`LastViews`,setup(e){let t=Z(),n=I(()=>t.lastViews),r=T(!1);return(e,t)=>(j(),M(A,null,[P(`h1`,null,De(E(rk).LAST_VIEWS),1),F(Yk,{items:n.value,showPreload:r.value},null,8,[`items`,`showPreload`]),n.value.length===0?(j(),M(`h3`,ij,` `)):Ea(``,!0)],64))}}),[[`__scopeId`,`data-v-52904d8a`]]),oj={key:0},sj=$({__name:`WatchingPage`,setup(e){let t=Z(),n=I(()=>dT(t.watchingList)),r=T(!1);return(e,t)=>(j(),M(A,null,[P(`h1`,null,De(E(rk).WATCHING),1),F(Yk,{items:n.value,showPreload:r.value},null,8,[`items`,`showPreload`]),n.value.length===0?(j(),M(`h3`,oj,` `)):Ea(``,!0)],64))}},[[`__scopeId`,`data-v-67175231`]]),cj={key:0},lj=$({__name:`WatchListPage`,setup(e){let t=Z(),n=I(()=>dT(t.watchList)),r=T(!1);return(e,t)=>(j(),M(A,null,[P(`h1`,null,De(E(rk).WATCH_LIST),1),F(Yk,{items:n.value,showPreload:r.value},null,8,[`items`,`showPreload`]),n.value.length===0?(j(),M(`h3`,cj,` `)):Ea(``,!0)],64))}},[[`__scopeId`,`data-v-18a12a67`]]),uj={key:0},dj=$({__name:`WaitListPage`,setup(e){let t=Z(),n=I(()=>dT(t.waitingList)),r=T(!1);return(e,t)=>(j(),M(A,null,[P(`h1`,null,De(E(rk).WAIT_LIST),1),F(Yk,{items:n.value,showPreload:r.value},null,8,[`items`,`showPreload`]),n.value.length===0?(j(),M(`h3`,uj,` `)):Ea(``,!0)],64))}},[[`__scopeId`,`data-v-3f8e8cfb`]]),fj=kD({history:JE(`/hometv`),routes:[{path:ik.HOME.path,name:ik.HOME.name,component:cA},{path:ik.FILM_PAGE.path,name:ik.FILM_PAGE.name,component:XA},{path:ik.SEARCH.path,name:ik.SEARCH.name,component:QA},{path:ik.FAVORITES.path,name:ik.FAVORITES.name,component:rj},{path:ik.LAST_VIEWS.path,name:ik.LAST_VIEWS.name,component:aj},{path:ik.WATCHING.path,name:ik.WATCHING.name,component:sj},{path:ik.WATCH_LIST.path,name:ik.WATCH_LIST.name,component:lj},{path:ik.WAITING_LIST.path,name:ik.WAITING_LIST.name,component:dj},{path:`/:pathMatch(.*)*`,component:tj}]});function pj(e){return{all:e||=new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(e){e(n)}),(r=e.get(`*`))&&r.slice().map(function(e){e(t,n)})}}}var mj=function(){return!!(window.location.hostname===`localhost`||window.location.hostname===`[::1]`||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))},hj;typeof window<`u`&&(hj=typeof Promise<`u`?new Promise(function(e){return window.addEventListener(`load`,e)}):{then:function(e){return window.addEventListener(`load`,e)}});function gj(e,t){t===void 0&&(t={});var n=t.registrationOptions;n===void 0&&(n={}),delete t.registrationOptions;var r=function(e){for(var n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];t&&t[e]&&t[e].apply(t,n)};`serviceWorker`in navigator&&hj.then(function(){mj()?(yj(e,r,n),navigator.serviceWorker.ready.then(function(e){r(`ready`,e)}).catch(function(e){return _j(r,e)})):(vj(e,r,n),navigator.serviceWorker.ready.then(function(e){r(`ready`,e)}).catch(function(e){return _j(r,e)}))})}function _j(e,t){navigator.onLine||e(`offline`),e(`error`,t)}function vj(e,t,n){navigator.serviceWorker.register(e,n).then(function(e){if(t(`registered`,e),e.waiting){t(`updated`,e);return}e.onupdatefound=function(){t(`updatefound`,e);var n=e.installing;n.onstatechange=function(){n.state===`installed`&&(navigator.serviceWorker.controller?t(`updated`,e):t(`cached`,e))}}}).catch(function(e){return _j(t,e)})}function yj(e,t,n){fetch(e).then(function(r){r.status===404?(t(`error`,Error(`Service worker not found at `+e)),bj()):r.headers.get(`content-type`).indexOf(`javascript`)===-1?(t(`error`,Error(`Expected `+e+` to have javascript content-type, but received `+r.headers.get(`content-type`))),bj()):vj(e,t,n)}).catch(function(e){return _j(t,e)})}function bj(){`serviceWorker`in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()}).catch(function(e){return _j(emit,e)})}gj(`/hometv/service-worker.js`,{ready(){console.log(`App is being served from cache by a service worker.
For more details, visit https://goo.gl/AFskqB`)},registered(){console.log(`Service worker has been registered.`)},cached(){console.log(`Content has been cached for offline use.`)},updatefound(){console.log(`New content is downloading.`)},updated(){console.log(`New content is available; please refresh.`)},offline(){console.log(`No internet connection found. App is running in offline mode.`)},error(e){console.error(`Error during service worker registration:`,e)}}),`serviceWorker`in navigator&&(window.addEventListener(`load`,()=>{navigator.serviceWorker.register(`/hometv/sw.js`,{scope:`/hometv/`}).then(e=>{console.log(` Service Worker :`,e),e.addEventListener(`updatefound`,()=>{let t=e.installing;console.log(` Service Worker :`,t)})}).catch(e=>{console.error(`   Service Worker:`,e)})}),navigator.serviceWorker.addEventListener(`controllerchange`,()=>{console.log(`Service Worker ,  `)}));var xj=pj(),Sj=xs(gk);Sj.directive(`intersection`,rc),Sj.directive(`title`,ac),Sj.use(Hs()),Sj.use(fj),Sj.provide(`emitter`,xj),Sj.mount(`#app`);