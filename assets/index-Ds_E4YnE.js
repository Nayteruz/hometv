(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Xl(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Le={},Ts=[],yn=()=>{},Ap=()=>!1,xa=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Zl=t=>t.startsWith("onUpdate:"),Dt=Object.assign,eu=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Qy=Object.prototype.hasOwnProperty,De=(t,e)=>Qy.call(t,e),fe=Array.isArray,As=t=>to(t)==="[object Map]",Sp=t=>to(t)==="[object Set]",Yy=t=>to(t)==="[object RegExp]",_e=t=>typeof t=="function",Ye=t=>typeof t=="string",Gn=t=>typeof t=="symbol",$e=t=>t!==null&&typeof t=="object",Rp=t=>($e(t)||_e(t))&&_e(t.then)&&_e(t.catch),bp=Object.prototype.toString,to=t=>bp.call(t),Jy=t=>to(t).slice(8,-1),Cp=t=>to(t)==="[object Object]",tu=t=>Ye(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,wi=Xl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),La=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},Xy=/-\w/g,tn=La(t=>t.replace(Xy,e=>e.slice(1).toUpperCase())),Zy=/\B([A-Z])/g,Pr=La(t=>t.replace(Zy,"-$1").toLowerCase()),Ma=La(t=>t.charAt(0).toUpperCase()+t.slice(1)),kc=La(t=>t?`on${Ma(t)}`:""),pr=(t,e)=>!Object.is(t,e),Ss=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Pp=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},nu=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Zh;const Fa=()=>Zh||(Zh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ua(t){if(fe(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=Ye(r)?rv(r):Ua(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(Ye(t)||$e(t))return t}const ev=/;(?![^(]*\))/g,tv=/:([^]+)/,nv=/\/\*[^]*?\*\//g;function rv(t){const e={};return t.replace(nv,"").split(ev).forEach(n=>{if(n){const r=n.split(tv);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function ot(t){let e="";if(Ye(t))e=t;else if(fe(t))for(let n=0;n<t.length;n++){const r=ot(t[n]);r&&(e+=r+" ")}else if($e(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const sv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",iv=Xl(sv);function kp(t){return!!t||t===""}const Np=t=>!!(t&&t.__v_isRef===!0),at=t=>Ye(t)?t:t==null?"":fe(t)||$e(t)&&(t.toString===bp||!_e(t.toString))?Np(t)?at(t.value):JSON.stringify(t,Dp,2):String(t),Dp=(t,e)=>Np(e)?Dp(t,e.value):As(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[Nc(r,i)+" =>"]=s,n),{})}:Sp(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Nc(n))}:Gn(e)?Nc(e):$e(e)&&!fe(e)&&!Cp(e)?String(e):e,Nc=(t,e="")=>{var n;return Gn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let bt;class Vp{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=bt,!e&&bt&&(this.index=(bt.scopes||(bt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=bt;try{return bt=this,e()}finally{bt=n}}}on(){++this._on===1&&(this.prevScope=bt,bt=this)}off(){this._on>0&&--this._on===0&&(bt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Op(t){return new Vp(t)}function xp(){return bt}function ov(t,e=!1){bt&&bt.cleanups.push(t)}let Fe;const Dc=new WeakSet;class Lp{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,bt&&bt.active&&bt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Dc.has(this)&&(Dc.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Fp(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ef(this),Up(this);const e=Fe,n=an;Fe=this,an=!0;try{return this.fn()}finally{Bp(this),Fe=e,an=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)iu(e);this.deps=this.depsTail=void 0,ef(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Dc.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){cl(this)&&this.run()}get dirty(){return cl(this)}}let Mp=0,Ti,Ai;function Fp(t,e=!1){if(t.flags|=8,e){t.next=Ai,Ai=t;return}t.next=Ti,Ti=t}function ru(){Mp++}function su(){if(--Mp>0)return;if(Ai){let e=Ai;for(Ai=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Ti;){let e=Ti;for(Ti=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function Up(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Bp(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),iu(r),av(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function cl(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&($p(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function $p(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Mi)||(t.globalVersion=Mi,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!cl(t))))return;t.flags|=2;const e=t.dep,n=Fe,r=an;Fe=t,an=!0;try{Up(t);const s=t.fn(t._value);(e.version===0||pr(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{Fe=n,an=r,Bp(t),t.flags&=-3}}function iu(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)iu(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function av(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let an=!0;const jp=[];function jn(){jp.push(an),an=!1}function qn(){const t=jp.pop();an=t===void 0?!0:t}function ef(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Fe;Fe=void 0;try{e()}finally{Fe=n}}}let Mi=0;class cv{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ou{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Fe||!an||Fe===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Fe)n=this.activeLink=new cv(Fe,this),Fe.deps?(n.prevDep=Fe.depsTail,Fe.depsTail.nextDep=n,Fe.depsTail=n):Fe.deps=Fe.depsTail=n,qp(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Fe.depsTail,n.nextDep=void 0,Fe.depsTail.nextDep=n,Fe.depsTail=n,Fe.deps===n&&(Fe.deps=r)}return n}trigger(e){this.version++,Mi++,this.notify(e)}notify(e){ru();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{su()}}}function qp(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)qp(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const ea=new WeakMap,zr=Symbol(""),ll=Symbol(""),Fi=Symbol("");function Pt(t,e,n){if(an&&Fe){let r=ea.get(t);r||ea.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new ou),s.map=r,s.key=n),s.track()}}function Ln(t,e,n,r,s,i){const o=ea.get(t);if(!o){Mi++;return}const c=l=>{l&&l.trigger()};if(ru(),e==="clear")o.forEach(c);else{const l=fe(t),u=l&&tu(n);if(l&&n==="length"){const f=Number(r);o.forEach((p,m)=>{(m==="length"||m===Fi||!Gn(m)&&m>=f)&&c(p)})}else switch((n!==void 0||o.has(void 0))&&c(o.get(n)),u&&c(o.get(Fi)),e){case"add":l?u&&c(o.get("length")):(c(o.get(zr)),As(t)&&c(o.get(ll)));break;case"delete":l||(c(o.get(zr)),As(t)&&c(o.get(ll)));break;case"set":As(t)&&c(o.get(zr));break}}su()}function lv(t,e){const n=ea.get(t);return n&&n.get(e)}function hs(t){const e=Pe(t);return e===t?e:(Pt(e,"iterate",Fi),en(t)?e:e.map(yt))}function Ba(t){return Pt(t=Pe(t),"iterate",Fi),t}const uv={__proto__:null,[Symbol.iterator](){return Vc(this,Symbol.iterator,yt)},concat(...t){return hs(this).concat(...t.map(e=>fe(e)?hs(e):e))},entries(){return Vc(this,"entries",t=>(t[1]=yt(t[1]),t))},every(t,e){return Vn(this,"every",t,e,void 0,arguments)},filter(t,e){return Vn(this,"filter",t,e,n=>n.map(yt),arguments)},find(t,e){return Vn(this,"find",t,e,yt,arguments)},findIndex(t,e){return Vn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Vn(this,"findLast",t,e,yt,arguments)},findLastIndex(t,e){return Vn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Vn(this,"forEach",t,e,void 0,arguments)},includes(...t){return Oc(this,"includes",t)},indexOf(...t){return Oc(this,"indexOf",t)},join(t){return hs(this).join(t)},lastIndexOf(...t){return Oc(this,"lastIndexOf",t)},map(t,e){return Vn(this,"map",t,e,void 0,arguments)},pop(){return hi(this,"pop")},push(...t){return hi(this,"push",t)},reduce(t,...e){return tf(this,"reduce",t,e)},reduceRight(t,...e){return tf(this,"reduceRight",t,e)},shift(){return hi(this,"shift")},some(t,e){return Vn(this,"some",t,e,void 0,arguments)},splice(...t){return hi(this,"splice",t)},toReversed(){return hs(this).toReversed()},toSorted(t){return hs(this).toSorted(t)},toSpliced(...t){return hs(this).toSpliced(...t)},unshift(...t){return hi(this,"unshift",t)},values(){return Vc(this,"values",yt)}};function Vc(t,e,n){const r=Ba(t),s=r[e]();return r!==t&&!en(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const hv=Array.prototype;function Vn(t,e,n,r,s,i){const o=Ba(t),c=o!==t&&!en(t),l=o[e];if(l!==hv[e]){const p=l.apply(t,i);return c?yt(p):p}let u=n;o!==t&&(c?u=function(p,m){return n.call(this,yt(p),m,t)}:n.length>2&&(u=function(p,m){return n.call(this,p,m,t)}));const f=l.call(o,u,r);return c&&s?s(f):f}function tf(t,e,n,r){const s=Ba(t);let i=n;return s!==t&&(en(t)?n.length>3&&(i=function(o,c,l){return n.call(this,o,c,l,t)}):i=function(o,c,l){return n.call(this,o,yt(c),l,t)}),s[e](i,...r)}function Oc(t,e,n){const r=Pe(t);Pt(r,"iterate",Fi);const s=r[e](...n);return(s===-1||s===!1)&&lu(n[0])?(n[0]=Pe(n[0]),r[e](...n)):s}function hi(t,e,n=[]){jn(),ru();const r=Pe(t)[e].apply(t,n);return su(),qn(),r}const fv=Xl("__proto__,__v_isRef,__isVue"),Hp=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Gn));function dv(t){Gn(t)||(t=String(t));const e=Pe(this);return Pt(e,"has",t),e.hasOwnProperty(t)}class zp{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Tv:Qp:i?Gp:Kp).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=fe(e);if(!s){let l;if(o&&(l=uv[n]))return l;if(n==="hasOwnProperty")return dv}const c=Reflect.get(e,n,Xe(e)?e:r);if((Gn(n)?Hp.has(n):fv(n))||(s||Pt(e,"get",n),i))return c;if(Xe(c)){const l=o&&tu(n)?c:c.value;return s&&$e(l)?hl(l):l}return $e(c)?s?hl(c):no(c):c}}class Wp extends zp{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const l=Ir(i);if(!en(r)&&!Ir(r)&&(i=Pe(i),r=Pe(r)),!fe(e)&&Xe(i)&&!Xe(r))return l||(i.value=r),!0}const o=fe(e)&&tu(n)?Number(n)<e.length:De(e,n),c=Reflect.set(e,n,r,Xe(e)?e:s);return e===Pe(s)&&(o?pr(r,i)&&Ln(e,"set",n,r):Ln(e,"add",n,r)),c}deleteProperty(e,n){const r=De(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&Ln(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!Gn(n)||!Hp.has(n))&&Pt(e,"has",n),r}ownKeys(e){return Pt(e,"iterate",fe(e)?"length":zr),Reflect.ownKeys(e)}}class pv extends zp{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const mv=new Wp,gv=new pv,_v=new Wp(!0);const ul=t=>t,ko=t=>Reflect.getPrototypeOf(t);function yv(t,e,n){return function(...r){const s=this.__v_raw,i=Pe(s),o=As(i),c=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=s[t](...r),f=n?ul:e?ta:yt;return!e&&Pt(i,"iterate",l?ll:zr),{next(){const{value:p,done:m}=u.next();return m?{value:p,done:m}:{value:c?[f(p[0]),f(p[1])]:f(p),done:m}},[Symbol.iterator](){return this}}}}function No(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function vv(t,e){const n={get(s){const i=this.__v_raw,o=Pe(i),c=Pe(s);t||(pr(s,c)&&Pt(o,"get",s),Pt(o,"get",c));const{has:l}=ko(o),u=e?ul:t?ta:yt;if(l.call(o,s))return u(i.get(s));if(l.call(o,c))return u(i.get(c));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&Pt(Pe(s),"iterate",zr),s.size},has(s){const i=this.__v_raw,o=Pe(i),c=Pe(s);return t||(pr(s,c)&&Pt(o,"has",s),Pt(o,"has",c)),s===c?i.has(s):i.has(s)||i.has(c)},forEach(s,i){const o=this,c=o.__v_raw,l=Pe(c),u=e?ul:t?ta:yt;return!t&&Pt(l,"iterate",zr),c.forEach((f,p)=>s.call(i,u(f),u(p),o))}};return Dt(n,t?{add:No("add"),set:No("set"),delete:No("delete"),clear:No("clear")}:{add(s){!e&&!en(s)&&!Ir(s)&&(s=Pe(s));const i=Pe(this);return ko(i).has.call(i,s)||(i.add(s),Ln(i,"add",s,s)),this},set(s,i){!e&&!en(i)&&!Ir(i)&&(i=Pe(i));const o=Pe(this),{has:c,get:l}=ko(o);let u=c.call(o,s);u||(s=Pe(s),u=c.call(o,s));const f=l.call(o,s);return o.set(s,i),u?pr(i,f)&&Ln(o,"set",s,i):Ln(o,"add",s,i),this},delete(s){const i=Pe(this),{has:o,get:c}=ko(i);let l=o.call(i,s);l||(s=Pe(s),l=o.call(i,s)),c&&c.call(i,s);const u=i.delete(s);return l&&Ln(i,"delete",s,void 0),u},clear(){const s=Pe(this),i=s.size!==0,o=s.clear();return i&&Ln(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=yv(s,t,e)}),n}function au(t,e){const n=vv(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(De(n,s)&&s in r?n:r,s,i)}const Ev={get:au(!1,!1)},Iv={get:au(!1,!0)},wv={get:au(!0,!1)};const Kp=new WeakMap,Gp=new WeakMap,Qp=new WeakMap,Tv=new WeakMap;function Av(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Sv(t){return t.__v_skip||!Object.isExtensible(t)?0:Av(Jy(t))}function no(t){return Ir(t)?t:cu(t,!1,mv,Ev,Kp)}function Yp(t){return cu(t,!1,_v,Iv,Gp)}function hl(t){return cu(t,!0,gv,wv,Qp)}function cu(t,e,n,r,s){if(!$e(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=Sv(t);if(i===0)return t;const o=s.get(t);if(o)return o;const c=new Proxy(t,i===2?r:n);return s.set(t,c),c}function mr(t){return Ir(t)?mr(t.__v_raw):!!(t&&t.__v_isReactive)}function Ir(t){return!!(t&&t.__v_isReadonly)}function en(t){return!!(t&&t.__v_isShallow)}function lu(t){return t?!!t.__v_raw:!1}function Pe(t){const e=t&&t.__v_raw;return e?Pe(e):t}function uu(t){return!De(t,"__v_skip")&&Object.isExtensible(t)&&Pp(t,"__v_skip",!0),t}const yt=t=>$e(t)?no(t):t,ta=t=>$e(t)?hl(t):t;function Xe(t){return t?t.__v_isRef===!0:!1}function Ee(t){return Jp(t,!1)}function Rv(t){return Jp(t,!0)}function Jp(t,e){return Xe(t)?t:new bv(t,e)}class bv{constructor(e,n){this.dep=new ou,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Pe(e),this._value=n?e:yt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||en(e)||Ir(e);e=r?e:Pe(e),pr(e,n)&&(this._rawValue=e,this._value=r?e:yt(e),this.dep.trigger())}}function ve(t){return Xe(t)?t.value:t}const Cv={get:(t,e,n)=>e==="__v_raw"?t:ve(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return Xe(s)&&!Xe(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function Xp(t){return mr(t)?t:new Proxy(t,Cv)}function Pv(t){const e=fe(t)?new Array(t.length):{};for(const n in t)e[n]=Nv(t,n);return e}class kv{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return lv(Pe(this._object),this._key)}}function Nv(t,e,n){const r=t[e];return Xe(r)?r:new kv(t,e,n)}class Dv{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new ou(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Mi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Fe!==this)return Fp(this,!0),!0}get value(){const e=this.dep.track();return $p(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Vv(t,e,n=!1){let r,s;return _e(t)?r=t:(r=t.get,s=t.set),new Dv(r,s,n)}const Do={},na=new WeakMap;let $r;function Ov(t,e=!1,n=$r){if(n){let r=na.get(n);r||na.set(n,r=[]),r.push(t)}}function xv(t,e,n=Le){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:c,call:l}=n,u=F=>s?F:en(F)||s===!1||s===0?Mn(F,1):Mn(F);let f,p,m,_,C=!1,D=!1;if(Xe(t)?(p=()=>t.value,C=en(t)):mr(t)?(p=()=>u(t),C=!0):fe(t)?(D=!0,C=t.some(F=>mr(F)||en(F)),p=()=>t.map(F=>{if(Xe(F))return F.value;if(mr(F))return u(F);if(_e(F))return l?l(F,2):F()})):_e(t)?e?p=l?()=>l(t,2):t:p=()=>{if(m){jn();try{m()}finally{qn()}}const F=$r;$r=f;try{return l?l(t,3,[_]):t(_)}finally{$r=F}}:p=yn,e&&s){const F=p,te=s===!0?1/0:s;p=()=>Mn(F(),te)}const V=xp(),H=()=>{f.stop(),V&&V.active&&eu(V.effects,f)};if(i&&e){const F=e;e=(...te)=>{F(...te),H()}}let N=D?new Array(t.length).fill(Do):Do;const x=F=>{if(!(!(f.flags&1)||!f.dirty&&!F))if(e){const te=f.run();if(s||C||(D?te.some((he,T)=>pr(he,N[T])):pr(te,N))){m&&m();const he=$r;$r=f;try{const T=[te,N===Do?void 0:D&&N[0]===Do?[]:N,_];N=te,l?l(e,3,T):e(...T)}finally{$r=he}}}else f.run()};return c&&c(x),f=new Lp(p),f.scheduler=o?()=>o(x,!1):x,_=F=>Ov(F,!1,f),m=f.onStop=()=>{const F=na.get(f);if(F){if(l)l(F,4);else for(const te of F)te();na.delete(f)}},e?r?x(!0):N=f.run():o?o(x.bind(null,!0),!0):f.run(),H.pause=f.pause.bind(f),H.resume=f.resume.bind(f),H.stop=H,H}function Mn(t,e=1/0,n){if(e<=0||!$e(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,Xe(t))Mn(t.value,e,n);else if(fe(t))for(let r=0;r<t.length;r++)Mn(t[r],e,n);else if(Sp(t)||As(t))t.forEach(r=>{Mn(r,e,n)});else if(Cp(t)){for(const r in t)Mn(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Mn(t[r],e,n)}return t}function ro(t,e,n,r){try{return r?t(...r):t()}catch(s){$a(s,e,n)}}function Rn(t,e,n,r){if(_e(t)){const s=ro(t,e,n,r);return s&&Rp(s)&&s.catch(i=>{$a(i,e,n)}),s}if(fe(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Rn(t[i],e,n,r));return s}}function $a(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Le;if(e){let c=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;c;){const f=c.ec;if(f){for(let p=0;p<f.length;p++)if(f[p](t,l,u)===!1)return}c=c.parent}if(i){jn(),ro(i,null,10,[t,l,u]),qn();return}}Lv(t,n,s,r,o)}function Lv(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const Ft=[];let mn=-1;const Rs=[];let or=null,ps=0;const Zp=Promise.resolve();let ra=null;function hu(t){const e=ra||Zp;return t?e.then(this?t.bind(this):t):e}function Mv(t){let e=mn+1,n=Ft.length;for(;e<n;){const r=e+n>>>1,s=Ft[r],i=Ui(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function fu(t){if(!(t.flags&1)){const e=Ui(t),n=Ft[Ft.length-1];!n||!(t.flags&2)&&e>=Ui(n)?Ft.push(t):Ft.splice(Mv(e),0,t),t.flags|=1,em()}}function em(){ra||(ra=Zp.then(nm))}function Fv(t){fe(t)?Rs.push(...t):or&&t.id===-1?or.splice(ps+1,0,t):t.flags&1||(Rs.push(t),t.flags|=1),em()}function nf(t,e,n=mn+1){for(;n<Ft.length;n++){const r=Ft[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Ft.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function tm(t){if(Rs.length){const e=[...new Set(Rs)].sort((n,r)=>Ui(n)-Ui(r));if(Rs.length=0,or){or.push(...e);return}for(or=e,ps=0;ps<or.length;ps++){const n=or[ps];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}or=null,ps=0}}const Ui=t=>t.id==null?t.flags&2?-1:1/0:t.id;function nm(t){try{for(mn=0;mn<Ft.length;mn++){const e=Ft[mn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),ro(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;mn<Ft.length;mn++){const e=Ft[mn];e&&(e.flags&=-2)}mn=-1,Ft.length=0,tm(),ra=null,(Ft.length||Rs.length)&&nm()}}let Et=null,rm=null;function sa(t){const e=Et;return Et=t,rm=t&&t.type.__scopeId||null,e}function Qt(t,e=Et,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&la(-1);const i=sa(e);let o;try{o=t(...s)}finally{sa(i),r._d&&la(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function ht(t,e){if(Et===null)return t;const n=Wa(Et),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,c,l=Le]=e[s];i&&(_e(i)&&(i={mounted:i,updated:i}),i.deep&&Mn(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:c,modifiers:l}))}return t}function Ur(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const c=s[o];i&&(c.oldValue=i[o].value);let l=c.dir[r];l&&(jn(),Rn(l,n,8,[t.el,c,t,e]),qn())}}const Uv=Symbol("_vte"),Bv=t=>t.__isTeleport,$v=Symbol("_leaveCb");function ja(t,e){t.shapeFlag&6&&t.component?(t.transition=e,ja(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function sm(t,e){return _e(t)?Dt({name:t.name},e,{setup:t}):t}function im(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const ia=new WeakMap;function Si(t,e,n,r,s=!1){if(fe(t)){t.forEach((C,D)=>Si(C,e&&(fe(e)?e[D]:e),n,r,s));return}if(Wr(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Si(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?Wa(r.component):r.el,o=s?null:i,{i:c,r:l}=t,u=e&&e.r,f=c.refs===Le?c.refs={}:c.refs,p=c.setupState,m=Pe(p),_=p===Le?Ap:C=>De(m,C);if(u!=null&&u!==l){if(rf(e),Ye(u))f[u]=null,_(u)&&(p[u]=null);else if(Xe(u)){u.value=null;const C=e;C.k&&(f[C.k]=null)}}if(_e(l))ro(l,c,12,[o,f]);else{const C=Ye(l),D=Xe(l);if(C||D){const V=()=>{if(t.f){const H=C?_(l)?p[l]:f[l]:l.value;if(s)fe(H)&&eu(H,i);else if(fe(H))H.includes(i)||H.push(i);else if(C)f[l]=[i],_(l)&&(p[l]=f[l]);else{const N=[i];l.value=N,t.k&&(f[t.k]=N)}}else C?(f[l]=o,_(l)&&(p[l]=o)):D&&(l.value=o,t.k&&(f[t.k]=o))};if(o){const H=()=>{V(),ia.delete(t)};H.id=-1,ia.set(t,H),gt(H,n)}else rf(t),V()}}}function rf(t){const e=ia.get(t);e&&(e.flags|=8,ia.delete(t))}Fa().requestIdleCallback;Fa().cancelIdleCallback;const Wr=t=>!!t.type.__asyncLoader,om=t=>t.type.__isKeepAlive,jv={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=yu(),r=n.ctx;if(!r.renderer)return()=>{const N=e.default&&e.default();return N&&N.length===1?N[0]:N};const s=new Map,i=new Set;let o=null;const c=n.suspense,{renderer:{p:l,m:u,um:f,o:{createElement:p}}}=r,m=p("div");r.activate=(N,x,F,te,he)=>{const T=N.component;u(N,x,F,0,c),l(T.vnode,N,x,F,T,c,te,N.slotScopeIds,he),gt(()=>{T.isDeactivated=!1,T.a&&Ss(T.a);const y=N.props&&N.props.onVnodeMounted;y&&Jt(y,T.parent,N)},c)},r.deactivate=N=>{const x=N.component;aa(x.m),aa(x.a),u(N,m,null,1,c),gt(()=>{x.da&&Ss(x.da);const F=N.props&&N.props.onVnodeUnmounted;F&&Jt(F,x.parent,N),x.isDeactivated=!0},c)};function _(N){xc(N),f(N,n,c,!0)}function C(N){s.forEach((x,F)=>{const te=_l(x.type);te&&!N(te)&&D(F)})}function D(N){const x=s.get(N);x&&(!o||!ms(x,o))?_(x):o&&xc(o),s.delete(N),i.delete(N)}cn(()=>[t.include,t.exclude],([N,x])=>{N&&C(F=>pi(N,F)),x&&C(F=>!pi(x,F))},{flush:"post",deep:!0});let V=null;const H=()=>{V!=null&&(ca(n.subTree.type)?gt(()=>{s.set(V,Vo(n.subTree))},n.subTree.suspense):s.set(V,Vo(n.subTree)))};return Yt(H),cm(H),so(()=>{s.forEach(N=>{const{subTree:x,suspense:F}=n,te=Vo(x);if(N.type===te.type&&N.key===te.key){xc(te);const he=te.component.da;he&&gt(he,F);return}_(N)})}),()=>{if(V=null,!e.default)return o=null;const N=e.default(),x=N[0];if(N.length>1)return o=null,N;if(!Ns(x)||!(x.shapeFlag&4)&&!(x.shapeFlag&128))return o=null,x;let F=Vo(x);if(F.type===bn)return o=null,F;const te=F.type,he=_l(Wr(F)?F.type.__asyncResolved||{}:te),{include:T,exclude:y,max:v}=t;if(T&&(!he||!pi(T,he))||y&&he&&pi(y,he))return F.shapeFlag&=-257,o=F,x;const S=F.key==null?te:F.key,A=s.get(S);return F.el&&(F=Qr(F),x.shapeFlag&128&&(x.ssContent=F)),V=S,A?(F.el=A.el,F.component=A.component,F.transition&&ja(F,F.transition),F.shapeFlag|=512,i.delete(S),i.add(S)):(i.add(S),v&&i.size>parseInt(v,10)&&D(i.values().next().value)),F.shapeFlag|=256,o=F,ca(x.type)?x:F}}},qv=jv;function pi(t,e){return fe(t)?t.some(n=>pi(n,e)):Ye(t)?t.split(",").includes(e):Yy(t)?(t.lastIndex=0,t.test(e)):!1}function Hv(t,e){am(t,"a",e)}function zv(t,e){am(t,"da",e)}function am(t,e,n=Nt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(qa(e,r,n),n){let s=n.parent;for(;s&&s.parent;)om(s.parent.vnode)&&Wv(r,e,n,s),s=s.parent}}function Wv(t,e,n,r){const s=qa(e,t,r,!0);lm(()=>{eu(r[e],s)},n)}function xc(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function Vo(t){return t.shapeFlag&128?t.ssContent:t}function qa(t,e,n=Nt,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{jn();const c=io(n),l=Rn(e,n,t,o);return c(),qn(),l});return r?s.unshift(i):s.push(i),i}}const Qn=t=>(e,n=Nt)=>{(!ji||t==="sp")&&qa(t,(...r)=>e(...r),n)},Kv=Qn("bm"),Yt=Qn("m"),Gv=Qn("bu"),cm=Qn("u"),so=Qn("bum"),lm=Qn("um"),Qv=Qn("sp"),Yv=Qn("rtg"),Jv=Qn("rtc");function Xv(t,e=Nt){qa("ec",t,e)}const du="components",Zv="directives";function um(t,e){return pu(du,t,!0,e)||t}const hm=Symbol.for("v-ndc");function eE(t){return Ye(t)?pu(du,t,!1)||t:t||hm}function Bi(t){return pu(Zv,t)}function pu(t,e,n=!0,r=!1){const s=Et||Nt;if(s){const i=s.type;if(t===du){const c=_l(i,!1);if(c&&(c===e||c===tn(e)||c===Ma(tn(e))))return i}const o=sf(s[t]||i[t],e)||sf(s.appContext[t],e);return!o&&r?i:o}}function sf(t,e){return t&&(t[e]||t[tn(e)]||t[Ma(tn(e))])}function wr(t,e,n,r){let s;const i=n,o=fe(t);if(o||Ye(t)){const c=o&&mr(t);let l=!1,u=!1;c&&(l=!en(t),u=Ir(t),t=Ba(t)),s=new Array(t.length);for(let f=0,p=t.length;f<p;f++)s[f]=e(l?u?ta(yt(t[f])):yt(t[f]):t[f],f,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let c=0;c<t;c++)s[c]=e(c+1,c,void 0,i)}else if($e(t))if(t[Symbol.iterator])s=Array.from(t,(c,l)=>e(c,l,void 0,i));else{const c=Object.keys(t);s=new Array(c.length);for(let l=0,u=c.length;l<u;l++){const f=c[l];s[l]=e(t[f],f,l,i)}}else s=[];return s}function tE(t,e,n={},r,s){if(Et.ce||Et.parent&&Wr(Et.parent)&&Et.parent.ce){const u=Object.keys(n).length>0;return q(),He(je,null,[ne("slot",n,r)],u?-2:64)}let i=t[e];i&&i._c&&(i._d=!1),q();const o=i&&fm(i(n)),c=n.key||o&&o.key,l=He(je,{key:(c&&!Gn(c)?c:`_${e}`)+(!o&&r?"_fb":"")},o||[],o&&t._===1?64:-2);return i&&i._c&&(i._d=!0),l}function fm(t){return t.some(e=>Ns(e)?!(e.type===bn||e.type===je&&!fm(e.children)):!0)?t:null}const fl=t=>t?Nm(t)?Wa(t):fl(t.parent):null,Ri=Dt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>fl(t.parent),$root:t=>fl(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>pm(t),$forceUpdate:t=>t.f||(t.f=()=>{fu(t.update)}),$nextTick:t=>t.n||(t.n=hu.bind(t.proxy)),$watch:t=>TE.bind(t)}),Lc=(t,e)=>t!==Le&&!t.__isScriptSetup&&De(t,e),nE={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:c,appContext:l}=t;let u;if(e[0]!=="$"){const _=o[e];if(_!==void 0)switch(_){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(Lc(r,e))return o[e]=1,r[e];if(s!==Le&&De(s,e))return o[e]=2,s[e];if((u=t.propsOptions[0])&&De(u,e))return o[e]=3,i[e];if(n!==Le&&De(n,e))return o[e]=4,n[e];dl&&(o[e]=0)}}const f=Ri[e];let p,m;if(f)return e==="$attrs"&&Pt(t.attrs,"get",""),f(t);if((p=c.__cssModules)&&(p=p[e]))return p;if(n!==Le&&De(n,e))return o[e]=4,n[e];if(m=l.config.globalProperties,De(m,e))return m[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return Lc(s,e)?(s[e]=n,!0):r!==Le&&De(r,e)?(r[e]=n,!0):De(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i,type:o}},c){let l,u;return!!(n[c]||t!==Le&&c[0]!=="$"&&De(t,c)||Lc(e,c)||(l=i[0])&&De(l,c)||De(r,c)||De(Ri,c)||De(s.config.globalProperties,c)||(u=o.__cssModules)&&u[c])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:De(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function of(t){return fe(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let dl=!0;function rE(t){const e=pm(t),n=t.proxy,r=t.ctx;dl=!1,e.beforeCreate&&af(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:c,provide:l,inject:u,created:f,beforeMount:p,mounted:m,beforeUpdate:_,updated:C,activated:D,deactivated:V,beforeDestroy:H,beforeUnmount:N,destroyed:x,unmounted:F,render:te,renderTracked:he,renderTriggered:T,errorCaptured:y,serverPrefetch:v,expose:S,inheritAttrs:A,components:R,directives:I,filters:Ke}=e;if(u&&sE(u,r,null),o)for(const ge in o){const Re=o[ge];_e(Re)&&(r[ge]=Re.bind(n))}if(s){const ge=s.call(n,n);$e(ge)&&(t.data=no(ge))}if(dl=!0,i)for(const ge in i){const Re=i[ge],Bt=_e(Re)?Re.bind(n,n):_e(Re.get)?Re.get.bind(n,n):yn,fn=!_e(Re)&&_e(Re.set)?Re.set.bind(n):yn,qt=ke({get:Bt,set:fn});Object.defineProperty(r,ge,{enumerable:!0,configurable:!0,get:()=>qt.value,set:pt=>qt.value=pt})}if(c)for(const ge in c)dm(c[ge],r,n,ge);if(l){const ge=_e(l)?l.call(n):l;Reflect.ownKeys(ge).forEach(Re=>{$o(Re,ge[Re])})}f&&af(f,t,"c");function Me(ge,Re){fe(Re)?Re.forEach(Bt=>ge(Bt.bind(n))):Re&&ge(Re.bind(n))}if(Me(Kv,p),Me(Yt,m),Me(Gv,_),Me(cm,C),Me(Hv,D),Me(zv,V),Me(Xv,y),Me(Jv,he),Me(Yv,T),Me(so,N),Me(lm,F),Me(Qv,v),fe(S))if(S.length){const ge=t.exposed||(t.exposed={});S.forEach(Re=>{Object.defineProperty(ge,Re,{get:()=>n[Re],set:Bt=>n[Re]=Bt,enumerable:!0})})}else t.exposed||(t.exposed={});te&&t.render===yn&&(t.render=te),A!=null&&(t.inheritAttrs=A),R&&(t.components=R),I&&(t.directives=I),v&&im(t)}function sE(t,e,n=yn){fe(t)&&(t=pl(t));for(const r in t){const s=t[r];let i;$e(s)?"default"in s?i=ft(s.from||r,s.default,!0):i=ft(s.from||r):i=ft(s),Xe(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function af(t,e,n){Rn(fe(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function dm(t,e,n,r){let s=r.includes(".")?bm(n,r):()=>n[r];if(Ye(t)){const i=e[t];_e(i)&&cn(s,i)}else if(_e(t))cn(s,t.bind(n));else if($e(t))if(fe(t))t.forEach(i=>dm(i,e,n,r));else{const i=_e(t.handler)?t.handler.bind(n):e[t.handler];_e(i)&&cn(s,i,t)}}function pm(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,c=i.get(e);let l;return c?l=c:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(u=>oa(l,u,o,!0)),oa(l,e,o)),$e(e)&&i.set(e,l),l}function oa(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&oa(t,i,n,!0),s&&s.forEach(o=>oa(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const c=iE[o]||n&&n[o];t[o]=c?c(t[o],e[o]):e[o]}return t}const iE={data:cf,props:lf,emits:lf,methods:mi,computed:mi,beforeCreate:Lt,created:Lt,beforeMount:Lt,mounted:Lt,beforeUpdate:Lt,updated:Lt,beforeDestroy:Lt,beforeUnmount:Lt,destroyed:Lt,unmounted:Lt,activated:Lt,deactivated:Lt,errorCaptured:Lt,serverPrefetch:Lt,components:mi,directives:mi,watch:aE,provide:cf,inject:oE};function cf(t,e){return e?t?function(){return Dt(_e(t)?t.call(this,this):t,_e(e)?e.call(this,this):e)}:e:t}function oE(t,e){return mi(pl(t),pl(e))}function pl(t){if(fe(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Lt(t,e){return t?[...new Set([].concat(t,e))]:e}function mi(t,e){return t?Dt(Object.create(null),t,e):e}function lf(t,e){return t?fe(t)&&fe(e)?[...new Set([...t,...e])]:Dt(Object.create(null),of(t),of(e??{})):e}function aE(t,e){if(!t)return e;if(!e)return t;const n=Dt(Object.create(null),t);for(const r in e)n[r]=Lt(t[r],e[r]);return n}function mm(){return{app:null,config:{isNativeTag:Ap,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let cE=0;function lE(t,e){return function(r,s=null){_e(r)||(r=Dt({},r)),s!=null&&!$e(s)&&(s=null);const i=mm(),o=new WeakSet,c=[];let l=!1;const u=i.app={_uid:cE++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:HE,get config(){return i.config},set config(f){},use(f,...p){return o.has(f)||(f&&_e(f.install)?(o.add(f),f.install(u,...p)):_e(f)&&(o.add(f),f(u,...p))),u},mixin(f){return i.mixins.includes(f)||i.mixins.push(f),u},component(f,p){return p?(i.components[f]=p,u):i.components[f]},directive(f,p){return p?(i.directives[f]=p,u):i.directives[f]},mount(f,p,m){if(!l){const _=u._ceVNode||ne(r,s);return _.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),t(_,f,m),l=!0,u._container=f,f.__vue_app__=u,Wa(_.component)}},onUnmount(f){c.push(f)},unmount(){l&&(Rn(c,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(f,p){return i.provides[f]=p,u},runWithContext(f){const p=Kr;Kr=u;try{return f()}finally{Kr=p}}};return u}}let Kr=null;function $o(t,e){if(Nt){let n=Nt.provides;const r=Nt.parent&&Nt.parent.provides;r===n&&(n=Nt.provides=Object.create(r)),n[t]=e}}function ft(t,e,n=!1){const r=yu();if(r||Kr){let s=Kr?Kr._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&_e(e)?e.call(r&&r.proxy):e}}function uE(){return!!(yu()||Kr)}const gm={},_m=()=>Object.create(gm),ym=t=>Object.getPrototypeOf(t)===gm;function hE(t,e,n,r=!1){const s={},i=_m();t.propsDefaults=Object.create(null),vm(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:Yp(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function fE(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,c=Pe(s),[l]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const f=t.vnode.dynamicProps;for(let p=0;p<f.length;p++){let m=f[p];if(Ha(t.emitsOptions,m))continue;const _=e[m];if(l)if(De(i,m))_!==i[m]&&(i[m]=_,u=!0);else{const C=tn(m);s[C]=ml(l,c,C,_,t,!1)}else _!==i[m]&&(i[m]=_,u=!0)}}}else{vm(t,e,s,i)&&(u=!0);let f;for(const p in c)(!e||!De(e,p)&&((f=Pr(p))===p||!De(e,f)))&&(l?n&&(n[p]!==void 0||n[f]!==void 0)&&(s[p]=ml(l,c,p,void 0,t,!0)):delete s[p]);if(i!==c)for(const p in i)(!e||!De(e,p))&&(delete i[p],u=!0)}u&&Ln(t.attrs,"set","")}function vm(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,c;if(e)for(let l in e){if(wi(l))continue;const u=e[l];let f;s&&De(s,f=tn(l))?!i||!i.includes(f)?n[f]=u:(c||(c={}))[f]=u:Ha(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(i){const l=Pe(n),u=c||Le;for(let f=0;f<i.length;f++){const p=i[f];n[p]=ml(s,l,p,u[p],t,!De(u,p))}}return o}function ml(t,e,n,r,s,i){const o=t[n];if(o!=null){const c=De(o,"default");if(c&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&_e(l)){const{propsDefaults:u}=s;if(n in u)r=u[n];else{const f=io(s);r=u[n]=l.call(null,e),f()}}else r=l;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!c?r=!1:o[1]&&(r===""||r===Pr(n))&&(r=!0))}return r}const dE=new WeakMap;function Em(t,e,n=!1){const r=n?dE:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},c=[];let l=!1;if(!_e(t)){const f=p=>{l=!0;const[m,_]=Em(p,e,!0);Dt(o,m),_&&c.push(..._)};!n&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}if(!i&&!l)return $e(t)&&r.set(t,Ts),Ts;if(fe(i))for(let f=0;f<i.length;f++){const p=tn(i[f]);uf(p)&&(o[p]=Le)}else if(i)for(const f in i){const p=tn(f);if(uf(p)){const m=i[f],_=o[p]=fe(m)||_e(m)?{type:m}:Dt({},m),C=_.type;let D=!1,V=!0;if(fe(C))for(let H=0;H<C.length;++H){const N=C[H],x=_e(N)&&N.name;if(x==="Boolean"){D=!0;break}else x==="String"&&(V=!1)}else D=_e(C)&&C.name==="Boolean";_[0]=D,_[1]=V,(D||De(_,"default"))&&c.push(p)}}const u=[o,c];return $e(t)&&r.set(t,u),u}function uf(t){return t[0]!=="$"&&!wi(t)}const mu=t=>t==="_"||t==="_ctx"||t==="$stable",gu=t=>fe(t)?t.map(_n):[_n(t)],pE=(t,e,n)=>{if(e._n)return e;const r=Qt((...s)=>gu(e(...s)),n);return r._c=!1,r},Im=(t,e,n)=>{const r=t._ctx;for(const s in t){if(mu(s))continue;const i=t[s];if(_e(i))e[s]=pE(s,i,r);else if(i!=null){const o=gu(i);e[s]=()=>o}}},wm=(t,e)=>{const n=gu(e);t.slots.default=()=>n},Tm=(t,e,n)=>{for(const r in e)(n||!mu(r))&&(t[r]=e[r])},mE=(t,e,n)=>{const r=t.slots=_m();if(t.vnode.shapeFlag&32){const s=e._;s?(Tm(r,e,n),n&&Pp(r,"_",s,!0)):Im(e,r)}else e&&wm(t,e)},gE=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=Le;if(r.shapeFlag&32){const c=e._;c?n&&c===1?i=!1:Tm(s,e,n):(i=!e.$stable,Im(e,s)),o=e}else e&&(wm(t,e),o={default:1});if(i)for(const c in s)!mu(c)&&o[c]==null&&delete s[c]},gt=NE;function _E(t){return yE(t)}function yE(t,e){const n=Fa();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:c,createComment:l,setText:u,setElementText:f,parentNode:p,nextSibling:m,setScopeId:_=yn,insertStaticContent:C}=t,D=(E,w,b,M=null,B=null,O=null,Y=void 0,K=null,z=!!w.dynamicChildren)=>{if(E===w)return;E&&!ms(E,w)&&(M=L(E),pt(E,B,O,!0),E=null),w.patchFlag===-2&&(z=!1,w.dynamicChildren=null);const{type:$,ref:oe,shapeFlag:X}=w;switch($){case za:V(E,w,b,M);break;case bn:H(E,w,b,M);break;case Fc:E==null&&N(w,b,M,Y);break;case je:R(E,w,b,M,B,O,Y,K,z);break;default:X&1?te(E,w,b,M,B,O,Y,K,z):X&6?I(E,w,b,M,B,O,Y,K,z):(X&64||X&128)&&$.process(E,w,b,M,B,O,Y,K,z,se)}oe!=null&&B?Si(oe,E&&E.ref,O,w||E,!w):oe==null&&E&&E.ref!=null&&Si(E.ref,null,O,E,!0)},V=(E,w,b,M)=>{if(E==null)r(w.el=c(w.children),b,M);else{const B=w.el=E.el;w.children!==E.children&&u(B,w.children)}},H=(E,w,b,M)=>{E==null?r(w.el=l(w.children||""),b,M):w.el=E.el},N=(E,w,b,M)=>{[E.el,E.anchor]=C(E.children,w,b,M,E.el,E.anchor)},x=({el:E,anchor:w},b,M)=>{let B;for(;E&&E!==w;)B=m(E),r(E,b,M),E=B;r(w,b,M)},F=({el:E,anchor:w})=>{let b;for(;E&&E!==w;)b=m(E),s(E),E=b;s(w)},te=(E,w,b,M,B,O,Y,K,z)=>{if(w.type==="svg"?Y="svg":w.type==="math"&&(Y="mathml"),E==null)he(w,b,M,B,O,Y,K,z);else{const $=E.el&&E.el._isVueCE?E.el:null;try{$&&$._beginPatch(),v(E,w,B,O,Y,K,z)}finally{$&&$._endPatch()}}},he=(E,w,b,M,B,O,Y,K)=>{let z,$;const{props:oe,shapeFlag:X,transition:ie,dirs:ce}=E;if(z=E.el=o(E.type,O,oe&&oe.is,oe),X&8?f(z,E.children):X&16&&y(E.children,z,null,M,B,Mc(E,O),Y,K),ce&&Ur(E,null,M,"created"),T(z,E,E.scopeId,Y,M),oe){for(const Oe in oe)Oe!=="value"&&!wi(Oe)&&i(z,Oe,null,oe[Oe],O,M);"value"in oe&&i(z,"value",null,oe.value,O),($=oe.onVnodeBeforeMount)&&Jt($,M,E)}ce&&Ur(E,null,M,"beforeMount");const Ie=vE(B,ie);Ie&&ie.beforeEnter(z),r(z,w,b),(($=oe&&oe.onVnodeMounted)||Ie||ce)&&gt(()=>{$&&Jt($,M,E),Ie&&ie.enter(z),ce&&Ur(E,null,M,"mounted")},B)},T=(E,w,b,M,B)=>{if(b&&_(E,b),M)for(let O=0;O<M.length;O++)_(E,M[O]);if(B){let O=B.subTree;if(w===O||ca(O.type)&&(O.ssContent===w||O.ssFallback===w)){const Y=B.vnode;T(E,Y,Y.scopeId,Y.slotScopeIds,B.parent)}}},y=(E,w,b,M,B,O,Y,K,z=0)=>{for(let $=z;$<E.length;$++){const oe=E[$]=K?ar(E[$]):_n(E[$]);D(null,oe,w,b,M,B,O,Y,K)}},v=(E,w,b,M,B,O,Y)=>{const K=w.el=E.el;let{patchFlag:z,dynamicChildren:$,dirs:oe}=w;z|=E.patchFlag&16;const X=E.props||Le,ie=w.props||Le;let ce;if(b&&Br(b,!1),(ce=ie.onVnodeBeforeUpdate)&&Jt(ce,b,w,E),oe&&Ur(w,E,b,"beforeUpdate"),b&&Br(b,!0),(X.innerHTML&&ie.innerHTML==null||X.textContent&&ie.textContent==null)&&f(K,""),$?S(E.dynamicChildren,$,K,b,M,Mc(w,B),O):Y||Re(E,w,K,null,b,M,Mc(w,B),O,!1),z>0){if(z&16)A(K,X,ie,b,B);else if(z&2&&X.class!==ie.class&&i(K,"class",null,ie.class,B),z&4&&i(K,"style",X.style,ie.style,B),z&8){const Ie=w.dynamicProps;for(let Oe=0;Oe<Ie.length;Oe++){const Ce=Ie[Oe],At=X[Ce],St=ie[Ce];(St!==At||Ce==="value")&&i(K,Ce,At,St,B,b)}}z&1&&E.children!==w.children&&f(K,w.children)}else!Y&&$==null&&A(K,X,ie,b,B);((ce=ie.onVnodeUpdated)||oe)&&gt(()=>{ce&&Jt(ce,b,w,E),oe&&Ur(w,E,b,"updated")},M)},S=(E,w,b,M,B,O,Y)=>{for(let K=0;K<w.length;K++){const z=E[K],$=w[K],oe=z.el&&(z.type===je||!ms(z,$)||z.shapeFlag&198)?p(z.el):b;D(z,$,oe,null,M,B,O,Y,!0)}},A=(E,w,b,M,B)=>{if(w!==b){if(w!==Le)for(const O in w)!wi(O)&&!(O in b)&&i(E,O,w[O],null,B,M);for(const O in b){if(wi(O))continue;const Y=b[O],K=w[O];Y!==K&&O!=="value"&&i(E,O,K,Y,B,M)}"value"in b&&i(E,"value",w.value,b.value,B)}},R=(E,w,b,M,B,O,Y,K,z)=>{const $=w.el=E?E.el:c(""),oe=w.anchor=E?E.anchor:c("");let{patchFlag:X,dynamicChildren:ie,slotScopeIds:ce}=w;ce&&(K=K?K.concat(ce):ce),E==null?(r($,b,M),r(oe,b,M),y(w.children||[],b,oe,B,O,Y,K,z)):X>0&&X&64&&ie&&E.dynamicChildren?(S(E.dynamicChildren,ie,b,B,O,Y,K),(w.key!=null||B&&w===B.subTree)&&Am(E,w,!0)):Re(E,w,b,oe,B,O,Y,K,z)},I=(E,w,b,M,B,O,Y,K,z)=>{w.slotScopeIds=K,E==null?w.shapeFlag&512?B.ctx.activate(w,b,M,Y,z):Ke(w,b,M,B,O,Y,z):wt(E,w,z)},Ke=(E,w,b,M,B,O,Y)=>{const K=E.component=FE(E,M,B);if(om(E)&&(K.ctx.renderer=se),UE(K,!1,Y),K.asyncDep){if(B&&B.registerDep(K,Me,Y),!E.el){const z=K.subTree=ne(bn);H(null,z,w,b),E.placeholder=z.el}}else Me(K,E,w,b,B,O,Y)},wt=(E,w,b)=>{const M=w.component=E.component;if(PE(E,w,b))if(M.asyncDep&&!M.asyncResolved){ge(M,w,b);return}else M.next=w,M.update();else w.el=E.el,M.vnode=w},Me=(E,w,b,M,B,O,Y)=>{const K=()=>{if(E.isMounted){let{next:X,bu:ie,u:ce,parent:Ie,vnode:Oe}=E;{const zt=Sm(E);if(zt){X&&(X.el=Oe.el,ge(E,X,Y)),zt.asyncDep.then(()=>{E.isUnmounted||K()});return}}let Ce=X,At;Br(E,!1),X?(X.el=Oe.el,ge(E,X,Y)):X=Oe,ie&&Ss(ie),(At=X.props&&X.props.onVnodeBeforeUpdate)&&Jt(At,Ie,X,Oe),Br(E,!0);const St=hf(E),Ht=E.subTree;E.subTree=St,D(Ht,St,p(Ht.el),L(Ht),E,B,O),X.el=St.el,Ce===null&&kE(E,St.el),ce&&gt(ce,B),(At=X.props&&X.props.onVnodeUpdated)&&gt(()=>Jt(At,Ie,X,Oe),B)}else{let X;const{el:ie,props:ce}=w,{bm:Ie,m:Oe,parent:Ce,root:At,type:St}=E,Ht=Wr(w);Br(E,!1),Ie&&Ss(Ie),!Ht&&(X=ce&&ce.onVnodeBeforeMount)&&Jt(X,Ce,w),Br(E,!0);{At.ce&&At.ce._def.shadowRoot!==!1&&At.ce._injectChildStyle(St);const zt=E.subTree=hf(E);D(null,zt,b,M,E,B,O),w.el=zt.el}if(Oe&&gt(Oe,B),!Ht&&(X=ce&&ce.onVnodeMounted)){const zt=w;gt(()=>Jt(X,Ce,zt),B)}(w.shapeFlag&256||Ce&&Wr(Ce.vnode)&&Ce.vnode.shapeFlag&256)&&E.a&&gt(E.a,B),E.isMounted=!0,w=b=M=null}};E.scope.on();const z=E.effect=new Lp(K);E.scope.off();const $=E.update=z.run.bind(z),oe=E.job=z.runIfDirty.bind(z);oe.i=E,oe.id=E.uid,z.scheduler=()=>fu(oe),Br(E,!0),$()},ge=(E,w,b)=>{w.component=E;const M=E.vnode.props;E.vnode=w,E.next=null,fE(E,w.props,M,b),gE(E,w.children,b),jn(),nf(E),qn()},Re=(E,w,b,M,B,O,Y,K,z=!1)=>{const $=E&&E.children,oe=E?E.shapeFlag:0,X=w.children,{patchFlag:ie,shapeFlag:ce}=w;if(ie>0){if(ie&128){fn($,X,b,M,B,O,Y,K,z);return}else if(ie&256){Bt($,X,b,M,B,O,Y,K,z);return}}ce&8?(oe&16&&Tt($,B,O),X!==$&&f(b,X)):oe&16?ce&16?fn($,X,b,M,B,O,Y,K,z):Tt($,B,O,!0):(oe&8&&f(b,""),ce&16&&y(X,b,M,B,O,Y,K,z))},Bt=(E,w,b,M,B,O,Y,K,z)=>{E=E||Ts,w=w||Ts;const $=E.length,oe=w.length,X=Math.min($,oe);let ie;for(ie=0;ie<X;ie++){const ce=w[ie]=z?ar(w[ie]):_n(w[ie]);D(E[ie],ce,b,null,B,O,Y,K,z)}$>oe?Tt(E,B,O,!0,!1,X):y(w,b,M,B,O,Y,K,z,X)},fn=(E,w,b,M,B,O,Y,K,z)=>{let $=0;const oe=w.length;let X=E.length-1,ie=oe-1;for(;$<=X&&$<=ie;){const ce=E[$],Ie=w[$]=z?ar(w[$]):_n(w[$]);if(ms(ce,Ie))D(ce,Ie,b,null,B,O,Y,K,z);else break;$++}for(;$<=X&&$<=ie;){const ce=E[X],Ie=w[ie]=z?ar(w[ie]):_n(w[ie]);if(ms(ce,Ie))D(ce,Ie,b,null,B,O,Y,K,z);else break;X--,ie--}if($>X){if($<=ie){const ce=ie+1,Ie=ce<oe?w[ce].el:M;for(;$<=ie;)D(null,w[$]=z?ar(w[$]):_n(w[$]),b,Ie,B,O,Y,K,z),$++}}else if($>ie)for(;$<=X;)pt(E[$],B,O,!0),$++;else{const ce=$,Ie=$,Oe=new Map;for($=Ie;$<=ie;$++){const mt=w[$]=z?ar(w[$]):_n(w[$]);mt.key!=null&&Oe.set(mt.key,$)}let Ce,At=0;const St=ie-Ie+1;let Ht=!1,zt=0;const sn=new Array(St);for($=0;$<St;$++)sn[$]=0;for($=ce;$<=X;$++){const mt=E[$];if(At>=St){pt(mt,B,O,!0);continue}let ct;if(mt.key!=null)ct=Oe.get(mt.key);else for(Ce=Ie;Ce<=ie;Ce++)if(sn[Ce-Ie]===0&&ms(mt,w[Ce])){ct=Ce;break}ct===void 0?pt(mt,B,O,!0):(sn[ct-Ie]=$+1,ct>=zt?zt=ct:Ht=!0,D(mt,w[ct],b,null,B,O,Y,K,z),At++)}const as=Ht?EE(sn):Ts;for(Ce=as.length-1,$=St-1;$>=0;$--){const mt=Ie+$,ct=w[mt],Ys=w[mt+1],Or=mt+1<oe?Ys.el||Ys.placeholder:M;sn[$]===0?D(null,ct,b,Or,B,O,Y,K,z):Ht&&(Ce<0||$!==as[Ce]?qt(ct,b,Or,2):Ce--)}}},qt=(E,w,b,M,B=null)=>{const{el:O,type:Y,transition:K,children:z,shapeFlag:$}=E;if($&6){qt(E.component.subTree,w,b,M);return}if($&128){E.suspense.move(w,b,M);return}if($&64){Y.move(E,w,b,se);return}if(Y===je){r(O,w,b);for(let X=0;X<z.length;X++)qt(z[X],w,b,M);r(E.anchor,w,b);return}if(Y===Fc){x(E,w,b);return}if(M!==2&&$&1&&K)if(M===0)K.beforeEnter(O),r(O,w,b),gt(()=>K.enter(O),B);else{const{leave:X,delayLeave:ie,afterLeave:ce}=K,Ie=()=>{E.ctx.isUnmounted?s(O):r(O,w,b)},Oe=()=>{O._isLeaving&&O[$v](!0),X(O,()=>{Ie(),ce&&ce()})};ie?ie(O,Ie,Oe):Oe()}else r(O,w,b)},pt=(E,w,b,M=!1,B=!1)=>{const{type:O,props:Y,ref:K,children:z,dynamicChildren:$,shapeFlag:oe,patchFlag:X,dirs:ie,cacheIndex:ce}=E;if(X===-2&&(B=!1),K!=null&&(jn(),Si(K,null,b,E,!0),qn()),ce!=null&&(w.renderCache[ce]=void 0),oe&256){w.ctx.deactivate(E);return}const Ie=oe&1&&ie,Oe=!Wr(E);let Ce;if(Oe&&(Ce=Y&&Y.onVnodeBeforeUnmount)&&Jt(Ce,w,E),oe&6)rn(E.component,b,M);else{if(oe&128){E.suspense.unmount(b,M);return}Ie&&Ur(E,null,w,"beforeUnmount"),oe&64?E.type.remove(E,w,b,se,M):$&&!$.hasOnce&&(O!==je||X>0&&X&64)?Tt($,w,b,!1,!0):(O===je&&X&384||!B&&oe&16)&&Tt(z,w,b),M&&Dn(E)}(Oe&&(Ce=Y&&Y.onVnodeUnmounted)||Ie)&&gt(()=>{Ce&&Jt(Ce,w,E),Ie&&Ur(E,null,w,"unmounted")},b)},Dn=E=>{const{type:w,el:b,anchor:M,transition:B}=E;if(w===je){nn(b,M);return}if(w===Fc){F(E);return}const O=()=>{s(b),B&&!B.persisted&&B.afterLeave&&B.afterLeave()};if(E.shapeFlag&1&&B&&!B.persisted){const{leave:Y,delayLeave:K}=B,z=()=>Y(b,O);K?K(E.el,O,z):z()}else O()},nn=(E,w)=>{let b;for(;E!==w;)b=m(E),s(E),E=b;s(w)},rn=(E,w,b)=>{const{bum:M,scope:B,job:O,subTree:Y,um:K,m:z,a:$}=E;aa(z),aa($),M&&Ss(M),B.stop(),O&&(O.flags|=8,pt(Y,E,w,b)),K&&gt(K,w),gt(()=>{E.isUnmounted=!0},w)},Tt=(E,w,b,M=!1,B=!1,O=0)=>{for(let Y=O;Y<E.length;Y++)pt(E[Y],w,b,M,B)},L=E=>{if(E.shapeFlag&6)return L(E.component.subTree);if(E.shapeFlag&128)return E.suspense.next();const w=m(E.anchor||E.el),b=w&&w[Uv];return b?m(b):w};let Z=!1;const J=(E,w,b)=>{E==null?w._vnode&&pt(w._vnode,null,null,!0):D(w._vnode||null,E,w,null,null,null,b),w._vnode=E,Z||(Z=!0,nf(),tm(),Z=!1)},se={p:D,um:pt,m:qt,r:Dn,mt:Ke,mc:y,pc:Re,pbc:S,n:L,o:t};return{render:J,hydrate:void 0,createApp:lE(J)}}function Mc({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Br({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function vE(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Am(t,e,n=!1){const r=t.children,s=e.children;if(fe(r)&&fe(s))for(let i=0;i<r.length;i++){const o=r[i];let c=s[i];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=s[i]=ar(s[i]),c.el=o.el),!n&&c.patchFlag!==-2&&Am(o,c)),c.type===za&&c.patchFlag!==-1&&(c.el=o.el),c.type===bn&&!c.el&&(c.el=o.el)}}function EE(t){const e=t.slice(),n=[0];let r,s,i,o,c;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)c=i+o>>1,t[n[c]]<u?i=c+1:o=c;u<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Sm(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Sm(e)}function aa(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const IE=Symbol.for("v-scx"),wE=()=>ft(IE);function cn(t,e,n){return Rm(t,e,n)}function Rm(t,e,n=Le){const{immediate:r,deep:s,flush:i,once:o}=n,c=Dt({},n),l=e&&r||!e&&i!=="post";let u;if(ji){if(i==="sync"){const _=wE();u=_.__watcherHandles||(_.__watcherHandles=[])}else if(!l){const _=()=>{};return _.stop=yn,_.resume=yn,_.pause=yn,_}}const f=Nt;c.call=(_,C,D)=>Rn(_,f,C,D);let p=!1;i==="post"?c.scheduler=_=>{gt(_,f&&f.suspense)}:i!=="sync"&&(p=!0,c.scheduler=(_,C)=>{C?_():fu(_)}),c.augmentJob=_=>{e&&(_.flags|=4),p&&(_.flags|=2,f&&(_.id=f.uid,_.i=f))};const m=xv(t,e,c);return ji&&(u?u.push(m):l&&m()),m}function TE(t,e,n){const r=this.proxy,s=Ye(t)?t.includes(".")?bm(r,t):()=>r[t]:t.bind(r,r);let i;_e(e)?i=e:(i=e.handler,n=e);const o=io(this),c=Rm(s,i.bind(r),n);return o(),c}function bm(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const AE=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${tn(e)}Modifiers`]||t[`${Pr(e)}Modifiers`];function SE(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Le;let s=n;const i=e.startsWith("update:"),o=i&&AE(r,e.slice(7));o&&(o.trim&&(s=n.map(f=>Ye(f)?f.trim():f)),o.number&&(s=n.map(nu)));let c,l=r[c=kc(e)]||r[c=kc(tn(e))];!l&&i&&(l=r[c=kc(Pr(e))]),l&&Rn(l,t,6,s);const u=r[c+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[c])return;t.emitted[c]=!0,Rn(u,t,6,s)}}const RE=new WeakMap;function Cm(t,e,n=!1){const r=n?RE:e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},c=!1;if(!_e(t)){const l=u=>{const f=Cm(u,e,!0);f&&(c=!0,Dt(o,f))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!c?($e(t)&&r.set(t,null),null):(fe(i)?i.forEach(l=>o[l]=null):Dt(o,i),$e(t)&&r.set(t,o),o)}function Ha(t,e){return!t||!xa(e)?!1:(e=e.slice(2).replace(/Once$/,""),De(t,e[0].toLowerCase()+e.slice(1))||De(t,Pr(e))||De(t,e))}function hf(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:c,emit:l,render:u,renderCache:f,props:p,data:m,setupState:_,ctx:C,inheritAttrs:D}=t,V=sa(t);let H,N;try{if(n.shapeFlag&4){const F=s||r,te=F;H=_n(u.call(te,F,f,p,_,m,C)),N=c}else{const F=e;H=_n(F.length>1?F(p,{attrs:c,slots:o,emit:l}):F(p,null)),N=e.props?c:bE(c)}}catch(F){bi.length=0,$a(F,t,1),H=ne(bn)}let x=H;if(N&&D!==!1){const F=Object.keys(N),{shapeFlag:te}=x;F.length&&te&7&&(i&&F.some(Zl)&&(N=CE(N,i)),x=Qr(x,N,!1,!0))}return n.dirs&&(x=Qr(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(n.dirs):n.dirs),n.transition&&ja(x,n.transition),H=x,sa(V),H}const bE=t=>{let e;for(const n in t)(n==="class"||n==="style"||xa(n))&&((e||(e={}))[n]=t[n]);return e},CE=(t,e)=>{const n={};for(const r in t)(!Zl(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function PE(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:c,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?ff(r,o,u):!!o;if(l&8){const f=e.dynamicProps;for(let p=0;p<f.length;p++){const m=f[p];if(o[m]!==r[m]&&!Ha(u,m))return!0}}}else return(s||c)&&(!c||!c.$stable)?!0:r===o?!1:r?o?ff(r,o,u):!0:!!o;return!1}function ff(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!Ha(n,i))return!0}return!1}function kE({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const ca=t=>t.__isSuspense;function NE(t,e){e&&e.pendingBranch?fe(t)?e.effects.push(...t):e.effects.push(t):Fv(t)}const je=Symbol.for("v-fgt"),za=Symbol.for("v-txt"),bn=Symbol.for("v-cmt"),Fc=Symbol.for("v-stc"),bi=[];let Kt=null;function q(t=!1){bi.push(Kt=t?null:[])}function DE(){bi.pop(),Kt=bi[bi.length-1]||null}let $i=1;function la(t,e=!1){$i+=t,t<0&&Kt&&e&&(Kt.hasOnce=!0)}function Pm(t){return t.dynamicChildren=$i>0?Kt||Ts:null,DE(),$i>0&&Kt&&Kt.push(t),t}function Q(t,e,n,r,s,i){return Pm(W(t,e,n,r,s,i,!0))}function He(t,e,n,r,s){return Pm(ne(t,e,n,r,s,!0))}function Ns(t){return t?t.__v_isVNode===!0:!1}function ms(t,e){return t.type===e.type&&t.key===e.key}const km=({key:t})=>t??null,jo=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Ye(t)||Xe(t)||_e(t)?{i:Et,r:t,k:e,f:!!n}:t:null);function W(t,e=null,n=null,r=0,s=null,i=t===je?0:1,o=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&km(e),ref:e&&jo(e),scopeId:rm,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Et};return c?(_u(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=Ye(n)?8:16),$i>0&&!o&&Kt&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Kt.push(l),l}const ne=VE;function VE(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===hm)&&(t=bn),Ns(t)){const c=Qr(t,e,!0);return n&&_u(c,n),$i>0&&!i&&Kt&&(c.shapeFlag&6?Kt[Kt.indexOf(t)]=c:Kt.push(c)),c.patchFlag=-2,c}if(qE(t)&&(t=t.__vccOpts),e){e=OE(e);let{class:c,style:l}=e;c&&!Ye(c)&&(e.class=ot(c)),$e(l)&&(lu(l)&&!fe(l)&&(l=Dt({},l)),e.style=Ua(l))}const o=Ye(t)?1:ca(t)?128:Bv(t)?64:$e(t)?4:_e(t)?2:0;return W(t,e,n,r,s,o,i,!0)}function OE(t){return t?lu(t)||ym(t)?Dt({},t):t:null}function Qr(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:c,transition:l}=t,u=e?xE(s||{},e):s,f={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&km(u),ref:e&&e.ref?n&&i?fe(i)?i.concat(jo(e)):[i,jo(e)]:jo(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==je?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Qr(t.ssContent),ssFallback:t.ssFallback&&Qr(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&ja(f,l.clone(f)),f}function Ut(t=" ",e=0){return ne(za,null,t,e)}function dt(t="",e=!1){return e?(q(),He(bn,null,t)):ne(bn,null,t)}function _n(t){return t==null||typeof t=="boolean"?ne(bn):fe(t)?ne(je,null,t.slice()):Ns(t)?ar(t):ne(za,null,String(t))}function ar(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Qr(t)}function _u(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(fe(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),_u(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!ym(e)?e._ctx=Et:s===3&&Et&&(Et.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else _e(e)?(e={default:e,_ctx:Et},n=32):(e=String(e),r&64?(n=16,e=[Ut(e)]):n=8);t.children=e,t.shapeFlag|=n}function xE(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=ot([e.class,r.class]));else if(s==="style")e.style=Ua([e.style,r.style]);else if(xa(s)){const i=e[s],o=r[s];o&&i!==o&&!(fe(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function Jt(t,e,n,r=null){Rn(t,e,7,[n,r])}const LE=mm();let ME=0;function FE(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||LE,i={uid:ME++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Vp(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Em(r,s),emitsOptions:Cm(r,s),emit:null,emitted:null,propsDefaults:Le,inheritAttrs:r.inheritAttrs,ctx:Le,data:Le,props:Le,attrs:Le,slots:Le,refs:Le,setupState:Le,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=SE.bind(null,i),t.ce&&t.ce(i),i}let Nt=null;const yu=()=>Nt||Et;let ua,gl;{const t=Fa(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};ua=e("__VUE_INSTANCE_SETTERS__",n=>Nt=n),gl=e("__VUE_SSR_SETTERS__",n=>ji=n)}const io=t=>{const e=Nt;return ua(t),t.scope.on(),()=>{t.scope.off(),ua(e)}},df=()=>{Nt&&Nt.scope.off(),ua(null)};function Nm(t){return t.vnode.shapeFlag&4}let ji=!1;function UE(t,e=!1,n=!1){e&&gl(e);const{props:r,children:s}=t.vnode,i=Nm(t);hE(t,r,i,e),mE(t,s,n||e);const o=i?BE(t,e):void 0;return e&&gl(!1),o}function BE(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,nE);const{setup:r}=n;if(r){jn();const s=t.setupContext=r.length>1?jE(t):null,i=io(t),o=ro(r,t,0,[t.props,s]),c=Rp(o);if(qn(),i(),(c||t.sp)&&!Wr(t)&&im(t),c){if(o.then(df,df),e)return o.then(l=>{pf(t,l)}).catch(l=>{$a(l,t,0)});t.asyncDep=o}else pf(t,o)}else Dm(t)}function pf(t,e,n){_e(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:$e(e)&&(t.setupState=Xp(e)),Dm(t)}function Dm(t,e,n){const r=t.type;t.render||(t.render=r.render||yn);{const s=io(t);jn();try{rE(t)}finally{qn(),s()}}}const $E={get(t,e){return Pt(t,"get",""),t[e]}};function jE(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,$E),slots:t.slots,emit:t.emit,expose:e}}function Wa(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Xp(uu(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Ri)return Ri[n](t)},has(e,n){return n in e||n in Ri}})):t.proxy}function _l(t,e=!0){return _e(t)?t.displayName||t.name:t.name||e&&t.__name}function qE(t){return _e(t)&&"__vccOpts"in t}const ke=(t,e)=>Vv(t,e,ji);function Vm(t,e,n){try{la(-1);const r=arguments.length;return r===2?$e(e)&&!fe(e)?Ns(e)?ne(t,null,[e]):ne(t,e):ne(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Ns(n)&&(n=[n]),ne(t,e,n))}finally{la(1)}}const HE="3.5.24";let yl;const mf=typeof window<"u"&&window.trustedTypes;if(mf)try{yl=mf.createPolicy("vue",{createHTML:t=>t})}catch{}const Om=yl?t=>yl.createHTML(t):t=>t,zE="http://www.w3.org/2000/svg",WE="http://www.w3.org/1998/Math/MathML",xn=typeof document<"u"?document:null,gf=xn&&xn.createElement("template"),KE={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?xn.createElementNS(zE,t):e==="mathml"?xn.createElementNS(WE,t):n?xn.createElement(t,{is:n}):xn.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>xn.createTextNode(t),createComment:t=>xn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>xn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{gf.innerHTML=Om(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const c=gf.content;if(r==="svg"||r==="mathml"){const l=c.firstChild;for(;l.firstChild;)c.appendChild(l.firstChild);c.removeChild(l)}e.insertBefore(c,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},GE=Symbol("_vtc");function QE(t,e,n){const r=t[GE];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const ha=Symbol("_vod"),xm=Symbol("_vsh"),Oo={name:"show",beforeMount(t,{value:e},{transition:n}){t[ha]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):fi(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),fi(t,!0),r.enter(t)):r.leave(t,()=>{fi(t,!1)}):fi(t,e))},beforeUnmount(t,{value:e}){fi(t,e)}};function fi(t,e){t.style.display=e?t[ha]:"none",t[xm]=!e}const YE=Symbol(""),JE=/(?:^|;)\s*display\s*:/;function XE(t,e,n){const r=t.style,s=Ye(n);let i=!1;if(n&&!s){if(e)if(Ye(e))for(const o of e.split(";")){const c=o.slice(0,o.indexOf(":")).trim();n[c]==null&&qo(r,c,"")}else for(const o in e)n[o]==null&&qo(r,o,"");for(const o in n)o==="display"&&(i=!0),qo(r,o,n[o])}else if(s){if(e!==n){const o=r[YE];o&&(n+=";"+o),r.cssText=n,i=JE.test(n)}}else e&&t.removeAttribute("style");ha in t&&(t[ha]=i?r.display:"",t[xm]&&(r.display="none"))}const _f=/\s*!important$/;function qo(t,e,n){if(fe(n))n.forEach(r=>qo(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=ZE(t,e);_f.test(n)?t.setProperty(Pr(r),n.replace(_f,""),"important"):t[r]=n}}const yf=["Webkit","Moz","ms"],Uc={};function ZE(t,e){const n=Uc[e];if(n)return n;let r=tn(e);if(r!=="filter"&&r in t)return Uc[e]=r;r=Ma(r);for(let s=0;s<yf.length;s++){const i=yf[s]+r;if(i in t)return Uc[e]=i}return e}const vf="http://www.w3.org/1999/xlink";function Ef(t,e,n,r,s,i=iv(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(vf,e.slice(6,e.length)):t.setAttributeNS(vf,e,n):n==null||i&&!kp(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Gn(n)?String(n):n)}function If(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Om(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const c=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(c!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=kp(n):n==null&&c==="string"?(n="",o=!0):c==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function gs(t,e,n,r){t.addEventListener(e,n,r)}function eI(t,e,n,r){t.removeEventListener(e,n,r)}const wf=Symbol("_vei");function tI(t,e,n,r,s=null){const i=t[wf]||(t[wf]={}),o=i[e];if(r&&o)o.value=r;else{const[c,l]=nI(e);if(r){const u=i[e]=iI(r,s);gs(t,c,u,l)}else o&&(eI(t,c,o,l),i[e]=void 0)}}const Tf=/(?:Once|Passive|Capture)$/;function nI(t){let e;if(Tf.test(t)){e={};let r;for(;r=t.match(Tf);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Pr(t.slice(2)),e]}let Bc=0;const rI=Promise.resolve(),sI=()=>Bc||(rI.then(()=>Bc=0),Bc=Date.now());function iI(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Rn(oI(r,n.value),e,5,[r])};return n.value=t,n.attached=sI(),n}function oI(t,e){if(fe(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const Af=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,aI=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?QE(t,r,o):e==="style"?XE(t,n,r):xa(e)?Zl(e)||tI(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):cI(t,e,r,o))?(If(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Ef(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Ye(r))?If(t,tn(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Ef(t,e,r,o))};function cI(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Af(e)&&_e(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Af(e)&&Ye(n)?!1:e in t}const Sf=t=>{const e=t.props["onUpdate:modelValue"]||!1;return fe(e)?n=>Ss(e,n):e};function lI(t){t.target.composing=!0}function Rf(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const $c=Symbol("_assign");function bf(t,e,n){return e&&(t=t.trim()),n&&(t=nu(t)),t}const Fn={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[$c]=Sf(s);const i=r||s.props&&s.props.type==="number";gs(t,e?"change":"input",o=>{o.target.composing||t[$c](bf(t.value,n,i))}),(n||i)&&gs(t,"change",()=>{t.value=bf(t.value,n,i)}),e||(gs(t,"compositionstart",lI),gs(t,"compositionend",Rf),gs(t,"change",Rf))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[$c]=Sf(o),t.composing)return;const c=(i||t.type==="number")&&!/^0\d/.test(t.value)?nu(t.value):t.value,l=e??"";c!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===l)||(t.value=l))}},uI=["ctrl","shift","alt","meta"],hI={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>uI.some(n=>t[`${n}Key`]&&!e.includes(n))},Cn=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((s,...i)=>{for(let o=0;o<e.length;o++){const c=hI[e[o]];if(c&&c(s,e))return}return t(s,...i)}))},fI={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},dI=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=(s=>{if(!("key"in s))return;const i=Pr(s.key);if(e.some(o=>o===i||fI[o]===i))return t(s)}))},pI=Dt({patchProp:aI},KE);let Cf;function mI(){return Cf||(Cf=_E(pI))}const gI=((...t)=>{const e=mI().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=yI(r);if(!s)return;const i=e._component;!_e(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,_I(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e});function _I(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function yI(t){return Ye(t)?document.querySelector(t):t}let Lm;const Ka=t=>Lm=t,Mm=Symbol();function vl(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Ci;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Ci||(Ci={}));function vI(){const t=Op(!0),e=t.run(()=>Ee({}));let n=[],r=[];const s=uu({install(i){Ka(s),s._a=i,i.provide(Mm,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return this._a?n.push(i):r.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const Fm=()=>{};function Pf(t,e,n,r=Fm){t.add(e);const s=()=>{t.delete(e)&&r()};return!n&&xp()&&ov(s),s}function fs(t,...e){t.forEach(n=>{n(...e)})}const EI=t=>t(),kf=Symbol(),jc=Symbol();function El(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];vl(s)&&vl(r)&&t.hasOwnProperty(n)&&!Xe(r)&&!mr(r)?t[n]=El(s,r):t[n]=r}return t}const II=Symbol();function wI(t){return!vl(t)||!Object.prototype.hasOwnProperty.call(t,II)}const{assign:ir}=Object;function TI(t){return!!(Xe(t)&&t.effect)}function AI(t,e,n,r){const{state:s,actions:i,getters:o}=e,c=n.state.value[t];let l;function u(){c||(n.state.value[t]=s?s():{});const f=Pv(n.state.value[t]);return ir(f,i,Object.keys(o||{}).reduce((p,m)=>(p[m]=uu(ke(()=>{Ka(n);const _=n._s.get(t);return o[m].call(_,_)})),p),{}))}return l=Um(t,u,e,n,r,!0),l}function Um(t,e,n={},r,s,i){let o;const c=ir({actions:{}},n),l={deep:!0};let u,f,p=new Set,m=new Set,_;const C=r.state.value[t];!i&&!C&&(r.state.value[t]={}),Ee({});let D;function V(y){let v;u=f=!1,typeof y=="function"?(y(r.state.value[t]),v={type:Ci.patchFunction,storeId:t,events:_}):(El(r.state.value[t],y),v={type:Ci.patchObject,payload:y,storeId:t,events:_});const S=D=Symbol();hu().then(()=>{D===S&&(u=!0)}),f=!0,fs(p,v,r.state.value[t])}const H=i?function(){const{state:v}=n,S=v?v():{};this.$patch(A=>{ir(A,S)})}:Fm;function N(){o.stop(),p.clear(),m.clear(),r._s.delete(t)}const x=(y,v="")=>{if(kf in y)return y[jc]=v,y;const S=function(){Ka(r);const A=Array.from(arguments),R=new Set,I=new Set;function Ke(ge){R.add(ge)}function wt(ge){I.add(ge)}fs(m,{args:A,name:S[jc],store:te,after:Ke,onError:wt});let Me;try{Me=y.apply(this&&this.$id===t?this:te,A)}catch(ge){throw fs(I,ge),ge}return Me instanceof Promise?Me.then(ge=>(fs(R,ge),ge)).catch(ge=>(fs(I,ge),Promise.reject(ge))):(fs(R,Me),Me)};return S[kf]=!0,S[jc]=v,S},F={_p:r,$id:t,$onAction:Pf.bind(null,m),$patch:V,$reset:H,$subscribe(y,v={}){const S=Pf(p,y,v.detached,()=>A()),A=o.run(()=>cn(()=>r.state.value[t],R=>{(v.flush==="sync"?f:u)&&y({storeId:t,type:Ci.direct,events:_},R)},ir({},l,v)));return S},$dispose:N},te=no(F);r._s.set(t,te);const T=(r._a&&r._a.runWithContext||EI)(()=>r._e.run(()=>(o=Op()).run(()=>e({action:x}))));for(const y in T){const v=T[y];if(Xe(v)&&!TI(v)||mr(v))i||(C&&wI(v)&&(Xe(v)?v.value=C[y]:El(v,C[y])),r.state.value[t][y]=v);else if(typeof v=="function"){const S=x(v,y);T[y]=S,c.actions[y]=v}}return ir(te,T),ir(Pe(te),T),Object.defineProperty(te,"$state",{get:()=>r.state.value[t],set:y=>{V(v=>{ir(v,y)})}}),r._p.forEach(y=>{ir(te,o.run(()=>y({store:te,app:r._a,pinia:r,options:c})))}),C&&i&&n.hydrate&&n.hydrate(te.$state,C),u=!0,f=!0,te}function SI(t,e,n){let r;const s=typeof e=="function";r=s?n:e;function i(o,c){const l=uE();return o=o||(l?ft(Mm,null):null),o&&Ka(o),o=Lm,o._s.has(t)||(s?Um(t,e,r,o):AI(t,r,o)),o._s.get(t)}return i.$id=t,i}const RI={name:"intersection",mounted(t,e){const n={rootMargin:"0px",threshold:1},r=i=>{i[0].isIntersecting&&e.value.getMoreFilms()};new IntersectionObserver(r,n).observe(t)}},qc=function(t){document.title=t},bI={mounted:(t,e)=>qc(e.value||t.innerText),beforeUpdate:(t,e)=>qc(e.value||t.innerText),updated:(t,e)=>qc(e.value||t.innerText)},CI=()=>{};var Nf={};const Bm=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},PI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},$m={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,f=i>>2,p=(i&3)<<4|c>>4;let m=(c&15)<<2|u>>6,_=u&63;l||(_=64,o||(m=64)),r.push(n[f],n[p],n[m],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Bm(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):PI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||u==null||p==null)throw new kI;const m=i<<2|c>>4;if(r.push(m),u!==64){const _=c<<4&240|u>>2;if(r.push(_),p!==64){const C=u<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class kI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NI=function(t){const e=Bm(t);return $m.encodeByteArray(e,!0)},fa=function(t){return NI(t).replace(/\./g,"")},jm=function(t){try{return $m.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function DI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const VI=()=>DI().__FIREBASE_DEFAULTS__,OI=()=>{if(typeof process>"u"||typeof Nf>"u")return;const t=Nf.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},xI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&jm(t[1]);return e&&JSON.parse(e)},Ga=()=>{try{return CI()||VI()||OI()||xI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},qm=t=>Ga()?.emulatorHosts?.[t],LI=t=>{const e=qm(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Hm=()=>Ga()?.config,zm=t=>Ga()?.[`_${t}`];class MI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function $s(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Wm(t){return(await fetch(t,{credentials:"include"})).ok}function FI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[fa(JSON.stringify(n)),fa(JSON.stringify(o)),""].join(".")}const Pi={};function UI(){const t={prod:[],emulator:[]};for(const e of Object.keys(Pi))Pi[e]?t.emulator.push(e):t.prod.push(e);return t}function BI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Df=!1;function Km(t,e){if(typeof window>"u"||typeof document>"u"||!$s(window.location.host)||Pi[t]===e||Pi[t]||Df)return;Pi[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=UI().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Df=!0,o()},m}function f(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=BI(r),_=n("text"),C=document.getElementById(_)||document.createElement("span"),D=n("learnmore"),V=document.getElementById(D)||document.createElement("a"),H=n("preprendIcon"),N=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const x=m.element;c(x),f(V,D);const F=u();l(N,H),x.append(N,C,V,F),document.body.appendChild(x)}i?(C.innerText="Preview backend disconnected.",N.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(N.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $I(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vt())}function jI(){const t=Ga()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function HI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function zI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function WI(){const t=Vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function KI(){return!jI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function GI(){try{return typeof indexedDB=="object"}catch{return!1}}function QI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}const YI="FirebaseError";class Yn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=YI,Object.setPrototypeOf(this,Yn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oo.prototype.create)}}class oo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?JI(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new Yn(s,c,r)}}function JI(t,e){return t.replace(XI,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const XI=/\{\$([^}]+)}/g;function ZI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Yr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Vf(i)&&Vf(o)){if(!Yr(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Vf(t){return t!==null&&typeof t=="object"}function ao(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function gi(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function _i(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function ew(t,e){const n=new tw(t,e);return n.subscribe.bind(n)}class tw{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");nw(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Hc),s.error===void 0&&(s.error=Hc),s.complete===void 0&&(s.complete=Hc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nw(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Hc(){}function Ot(t){return t&&t._delegate?t._delegate:t}class Jr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const jr="[DEFAULT]";class rw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new MI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iw(e))try{this.getOrInitializeService({instanceIdentifier:jr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=jr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=jr){return this.instances.has(e)}getOptions(e=jr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:sw(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=jr){return this.component?this.component.multipleInstances?e:jr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sw(t){return t===jr?void 0:t}function iw(t){return t.instantiationMode==="EAGER"}class ow{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new rw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Te;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Te||(Te={}));const aw={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},cw=Te.INFO,lw={[Te.DEBUG]:"log",[Te.VERBOSE]:"log",[Te.INFO]:"info",[Te.WARN]:"warn",[Te.ERROR]:"error"},uw=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=lw[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vu{constructor(e){this.name=e,this._logLevel=cw,this._logHandler=uw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?aw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Te.DEBUG,...e),this._logHandler(this,Te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Te.VERBOSE,...e),this._logHandler(this,Te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Te.INFO,...e),this._logHandler(this,Te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Te.WARN,...e),this._logHandler(this,Te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Te.ERROR,...e),this._logHandler(this,Te.ERROR,...e)}}const hw=(t,e)=>e.some(n=>t instanceof n);let Of,xf;function fw(){return Of||(Of=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dw(){return xf||(xf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Gm=new WeakMap,Il=new WeakMap,Qm=new WeakMap,zc=new WeakMap,Eu=new WeakMap;function pw(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(gr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Gm.set(n,t)}).catch(()=>{}),Eu.set(e,t),e}function mw(t){if(Il.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Il.set(t,e)}let wl={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Il.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Qm.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function gw(t){wl=t(wl)}function _w(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Wc(this),e,...n);return Qm.set(r,e.sort?e.sort():[e]),gr(r)}:dw().includes(t)?function(...e){return t.apply(Wc(this),e),gr(Gm.get(this))}:function(...e){return gr(t.apply(Wc(this),e))}}function yw(t){return typeof t=="function"?_w(t):(t instanceof IDBTransaction&&mw(t),hw(t,fw())?new Proxy(t,wl):t)}function gr(t){if(t instanceof IDBRequest)return pw(t);if(zc.has(t))return zc.get(t);const e=yw(t);return e!==t&&(zc.set(t,e),Eu.set(e,t)),e}const Wc=t=>Eu.get(t);function vw(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=gr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(gr(o.result),l.oldVersion,l.newVersion,gr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),c.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}const Ew=["get","getKey","getAll","getAllKeys","count"],Iw=["put","add","delete","clear"],Kc=new Map;function Lf(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Kc.get(e))return Kc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Iw.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Ew.includes(n)))return;const i=async function(o,...c){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(c.shift())),(await Promise.all([u[n](...c),s&&l.done]))[0]};return Kc.set(e,i),i}gw(t=>({...t,get:(e,n,r)=>Lf(e,n)||t.get(e,n,r),has:(e,n)=>!!Lf(e,n)||t.has(e,n)}));class ww{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Tw(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Tw(t){return t.getComponent()?.type==="VERSION"}const Tl="@firebase/app",Mf="0.14.6";const Hn=new vu("@firebase/app"),Aw="@firebase/app-compat",Sw="@firebase/analytics-compat",Rw="@firebase/analytics",bw="@firebase/app-check-compat",Cw="@firebase/app-check",Pw="@firebase/auth",kw="@firebase/auth-compat",Nw="@firebase/database",Dw="@firebase/data-connect",Vw="@firebase/database-compat",Ow="@firebase/functions",xw="@firebase/functions-compat",Lw="@firebase/installations",Mw="@firebase/installations-compat",Fw="@firebase/messaging",Uw="@firebase/messaging-compat",Bw="@firebase/performance",$w="@firebase/performance-compat",jw="@firebase/remote-config",qw="@firebase/remote-config-compat",Hw="@firebase/storage",zw="@firebase/storage-compat",Ww="@firebase/firestore",Kw="@firebase/ai",Gw="@firebase/firestore-compat",Qw="firebase",Yw="12.6.0";const Al="[DEFAULT]",Jw={[Tl]:"fire-core",[Aw]:"fire-core-compat",[Rw]:"fire-analytics",[Sw]:"fire-analytics-compat",[Cw]:"fire-app-check",[bw]:"fire-app-check-compat",[Pw]:"fire-auth",[kw]:"fire-auth-compat",[Nw]:"fire-rtdb",[Dw]:"fire-data-connect",[Vw]:"fire-rtdb-compat",[Ow]:"fire-fn",[xw]:"fire-fn-compat",[Lw]:"fire-iid",[Mw]:"fire-iid-compat",[Fw]:"fire-fcm",[Uw]:"fire-fcm-compat",[Bw]:"fire-perf",[$w]:"fire-perf-compat",[jw]:"fire-rc",[qw]:"fire-rc-compat",[Hw]:"fire-gcs",[zw]:"fire-gcs-compat",[Ww]:"fire-fst",[Gw]:"fire-fst-compat",[Kw]:"fire-vertex","fire-js":"fire-js",[Qw]:"fire-js-all"};const da=new Map,Xw=new Map,Sl=new Map;function Ff(t,e){try{t.container.addComponent(e)}catch(n){Hn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ds(t){const e=t.name;if(Sl.has(e))return Hn.debug(`There were multiple attempts to register component ${e}.`),!1;Sl.set(e,t);for(const n of da.values())Ff(n,t);for(const n of Xw.values())Ff(n,t);return!0}function Iu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Xt(t){return t==null?!1:t.settings!==void 0}const Zw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_r=new oo("app","Firebase",Zw);class eT{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Jr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _r.create("app-deleted",{appName:this._name})}}const js=Yw;function Ym(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Al,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw _r.create("bad-app-name",{appName:String(s)});if(n||(n=Hm()),!n)throw _r.create("no-options");const i=da.get(s);if(i){if(Yr(n,i.options)&&Yr(r,i.config))return i;throw _r.create("duplicate-app",{appName:s})}const o=new ow(s);for(const l of Sl.values())o.addComponent(l);const c=new eT(n,r,o);return da.set(s,c),c}function Jm(t=Al){const e=da.get(t);if(!e&&t===Al&&Hm())return Ym();if(!e)throw _r.create("no-app",{appName:t});return e}function yr(t,e,n){let r=Jw[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hn.warn(o.join(" "));return}Ds(new Jr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const tT="firebase-heartbeat-database",nT=1,qi="firebase-heartbeat-store";let Gc=null;function Xm(){return Gc||(Gc=vw(tT,nT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(qi)}catch(n){console.warn(n)}}}}).catch(t=>{throw _r.create("idb-open",{originalErrorMessage:t.message})})),Gc}async function rT(t){try{const n=(await Xm()).transaction(qi),r=await n.objectStore(qi).get(Zm(t));return await n.done,r}catch(e){if(e instanceof Yn)Hn.warn(e.message);else{const n=_r.create("idb-get",{originalErrorMessage:e?.message});Hn.warn(n.message)}}}async function Uf(t,e){try{const r=(await Xm()).transaction(qi,"readwrite");await r.objectStore(qi).put(e,Zm(t)),await r.done}catch(n){if(n instanceof Yn)Hn.warn(n.message);else{const r=_r.create("idb-set",{originalErrorMessage:n?.message});Hn.warn(r.message)}}}function Zm(t){return`${t.name}!${t.options.appId}`}const sT=1024,iT=30;class oT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new cT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Bf();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>iT){const s=lT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Hn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Bf(),{heartbeatsToSend:n,unsentEntries:r}=aT(this._heartbeatsCache.heartbeats),s=fa(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Hn.warn(e),""}}}function Bf(){return new Date().toISOString().substring(0,10)}function aT(t,e=sT){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),$f(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),$f(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class cT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return GI()?QI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await rT(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Uf(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Uf(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function $f(t){return fa(JSON.stringify({version:2,heartbeats:t})).length}function lT(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function uT(t){Ds(new Jr("platform-logger",e=>new ww(e),"PRIVATE")),Ds(new Jr("heartbeat",e=>new oT(e),"PRIVATE")),yr(Tl,Mf,t),yr(Tl,Mf,"esm2020"),yr("fire-js","")}uT("");var hT="firebase",fT="12.6.0";yr(hT,fT,"app");var jf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var vr,eg;(function(){var t;function e(T,y){function v(){}v.prototype=y.prototype,T.F=y.prototype,T.prototype=new v,T.prototype.constructor=T,T.D=function(S,A,R){for(var I=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)I[Ke-2]=arguments[Ke];return y.prototype[A].apply(S,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,y,v){v||(v=0);const S=Array(16);if(typeof y=="string")for(var A=0;A<16;++A)S[A]=y.charCodeAt(v++)|y.charCodeAt(v++)<<8|y.charCodeAt(v++)<<16|y.charCodeAt(v++)<<24;else for(A=0;A<16;++A)S[A]=y[v++]|y[v++]<<8|y[v++]<<16|y[v++]<<24;y=T.g[0],v=T.g[1],A=T.g[2];let R=T.g[3],I;I=y+(R^v&(A^R))+S[0]+3614090360&4294967295,y=v+(I<<7&4294967295|I>>>25),I=R+(A^y&(v^A))+S[1]+3905402710&4294967295,R=y+(I<<12&4294967295|I>>>20),I=A+(v^R&(y^v))+S[2]+606105819&4294967295,A=R+(I<<17&4294967295|I>>>15),I=v+(y^A&(R^y))+S[3]+3250441966&4294967295,v=A+(I<<22&4294967295|I>>>10),I=y+(R^v&(A^R))+S[4]+4118548399&4294967295,y=v+(I<<7&4294967295|I>>>25),I=R+(A^y&(v^A))+S[5]+1200080426&4294967295,R=y+(I<<12&4294967295|I>>>20),I=A+(v^R&(y^v))+S[6]+2821735955&4294967295,A=R+(I<<17&4294967295|I>>>15),I=v+(y^A&(R^y))+S[7]+4249261313&4294967295,v=A+(I<<22&4294967295|I>>>10),I=y+(R^v&(A^R))+S[8]+1770035416&4294967295,y=v+(I<<7&4294967295|I>>>25),I=R+(A^y&(v^A))+S[9]+2336552879&4294967295,R=y+(I<<12&4294967295|I>>>20),I=A+(v^R&(y^v))+S[10]+4294925233&4294967295,A=R+(I<<17&4294967295|I>>>15),I=v+(y^A&(R^y))+S[11]+2304563134&4294967295,v=A+(I<<22&4294967295|I>>>10),I=y+(R^v&(A^R))+S[12]+1804603682&4294967295,y=v+(I<<7&4294967295|I>>>25),I=R+(A^y&(v^A))+S[13]+4254626195&4294967295,R=y+(I<<12&4294967295|I>>>20),I=A+(v^R&(y^v))+S[14]+2792965006&4294967295,A=R+(I<<17&4294967295|I>>>15),I=v+(y^A&(R^y))+S[15]+1236535329&4294967295,v=A+(I<<22&4294967295|I>>>10),I=y+(A^R&(v^A))+S[1]+4129170786&4294967295,y=v+(I<<5&4294967295|I>>>27),I=R+(v^A&(y^v))+S[6]+3225465664&4294967295,R=y+(I<<9&4294967295|I>>>23),I=A+(y^v&(R^y))+S[11]+643717713&4294967295,A=R+(I<<14&4294967295|I>>>18),I=v+(R^y&(A^R))+S[0]+3921069994&4294967295,v=A+(I<<20&4294967295|I>>>12),I=y+(A^R&(v^A))+S[5]+3593408605&4294967295,y=v+(I<<5&4294967295|I>>>27),I=R+(v^A&(y^v))+S[10]+38016083&4294967295,R=y+(I<<9&4294967295|I>>>23),I=A+(y^v&(R^y))+S[15]+3634488961&4294967295,A=R+(I<<14&4294967295|I>>>18),I=v+(R^y&(A^R))+S[4]+3889429448&4294967295,v=A+(I<<20&4294967295|I>>>12),I=y+(A^R&(v^A))+S[9]+568446438&4294967295,y=v+(I<<5&4294967295|I>>>27),I=R+(v^A&(y^v))+S[14]+3275163606&4294967295,R=y+(I<<9&4294967295|I>>>23),I=A+(y^v&(R^y))+S[3]+4107603335&4294967295,A=R+(I<<14&4294967295|I>>>18),I=v+(R^y&(A^R))+S[8]+1163531501&4294967295,v=A+(I<<20&4294967295|I>>>12),I=y+(A^R&(v^A))+S[13]+2850285829&4294967295,y=v+(I<<5&4294967295|I>>>27),I=R+(v^A&(y^v))+S[2]+4243563512&4294967295,R=y+(I<<9&4294967295|I>>>23),I=A+(y^v&(R^y))+S[7]+1735328473&4294967295,A=R+(I<<14&4294967295|I>>>18),I=v+(R^y&(A^R))+S[12]+2368359562&4294967295,v=A+(I<<20&4294967295|I>>>12),I=y+(v^A^R)+S[5]+4294588738&4294967295,y=v+(I<<4&4294967295|I>>>28),I=R+(y^v^A)+S[8]+2272392833&4294967295,R=y+(I<<11&4294967295|I>>>21),I=A+(R^y^v)+S[11]+1839030562&4294967295,A=R+(I<<16&4294967295|I>>>16),I=v+(A^R^y)+S[14]+4259657740&4294967295,v=A+(I<<23&4294967295|I>>>9),I=y+(v^A^R)+S[1]+2763975236&4294967295,y=v+(I<<4&4294967295|I>>>28),I=R+(y^v^A)+S[4]+1272893353&4294967295,R=y+(I<<11&4294967295|I>>>21),I=A+(R^y^v)+S[7]+4139469664&4294967295,A=R+(I<<16&4294967295|I>>>16),I=v+(A^R^y)+S[10]+3200236656&4294967295,v=A+(I<<23&4294967295|I>>>9),I=y+(v^A^R)+S[13]+681279174&4294967295,y=v+(I<<4&4294967295|I>>>28),I=R+(y^v^A)+S[0]+3936430074&4294967295,R=y+(I<<11&4294967295|I>>>21),I=A+(R^y^v)+S[3]+3572445317&4294967295,A=R+(I<<16&4294967295|I>>>16),I=v+(A^R^y)+S[6]+76029189&4294967295,v=A+(I<<23&4294967295|I>>>9),I=y+(v^A^R)+S[9]+3654602809&4294967295,y=v+(I<<4&4294967295|I>>>28),I=R+(y^v^A)+S[12]+3873151461&4294967295,R=y+(I<<11&4294967295|I>>>21),I=A+(R^y^v)+S[15]+530742520&4294967295,A=R+(I<<16&4294967295|I>>>16),I=v+(A^R^y)+S[2]+3299628645&4294967295,v=A+(I<<23&4294967295|I>>>9),I=y+(A^(v|~R))+S[0]+4096336452&4294967295,y=v+(I<<6&4294967295|I>>>26),I=R+(v^(y|~A))+S[7]+1126891415&4294967295,R=y+(I<<10&4294967295|I>>>22),I=A+(y^(R|~v))+S[14]+2878612391&4294967295,A=R+(I<<15&4294967295|I>>>17),I=v+(R^(A|~y))+S[5]+4237533241&4294967295,v=A+(I<<21&4294967295|I>>>11),I=y+(A^(v|~R))+S[12]+1700485571&4294967295,y=v+(I<<6&4294967295|I>>>26),I=R+(v^(y|~A))+S[3]+2399980690&4294967295,R=y+(I<<10&4294967295|I>>>22),I=A+(y^(R|~v))+S[10]+4293915773&4294967295,A=R+(I<<15&4294967295|I>>>17),I=v+(R^(A|~y))+S[1]+2240044497&4294967295,v=A+(I<<21&4294967295|I>>>11),I=y+(A^(v|~R))+S[8]+1873313359&4294967295,y=v+(I<<6&4294967295|I>>>26),I=R+(v^(y|~A))+S[15]+4264355552&4294967295,R=y+(I<<10&4294967295|I>>>22),I=A+(y^(R|~v))+S[6]+2734768916&4294967295,A=R+(I<<15&4294967295|I>>>17),I=v+(R^(A|~y))+S[13]+1309151649&4294967295,v=A+(I<<21&4294967295|I>>>11),I=y+(A^(v|~R))+S[4]+4149444226&4294967295,y=v+(I<<6&4294967295|I>>>26),I=R+(v^(y|~A))+S[11]+3174756917&4294967295,R=y+(I<<10&4294967295|I>>>22),I=A+(y^(R|~v))+S[2]+718787259&4294967295,A=R+(I<<15&4294967295|I>>>17),I=v+(R^(A|~y))+S[9]+3951481745&4294967295,T.g[0]=T.g[0]+y&4294967295,T.g[1]=T.g[1]+(A+(I<<21&4294967295|I>>>11))&4294967295,T.g[2]=T.g[2]+A&4294967295,T.g[3]=T.g[3]+R&4294967295}r.prototype.v=function(T,y){y===void 0&&(y=T.length);const v=y-this.blockSize,S=this.C;let A=this.h,R=0;for(;R<y;){if(A==0)for(;R<=v;)s(this,T,R),R+=this.blockSize;if(typeof T=="string"){for(;R<y;)if(S[A++]=T.charCodeAt(R++),A==this.blockSize){s(this,S),A=0;break}}else for(;R<y;)if(S[A++]=T[R++],A==this.blockSize){s(this,S),A=0;break}}this.h=A,this.o+=y},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var y=1;y<T.length-8;++y)T[y]=0;y=this.o*8;for(var v=T.length-8;v<T.length;++v)T[v]=y&255,y/=256;for(this.v(T),T=Array(16),y=0,v=0;v<4;++v)for(let S=0;S<32;S+=8)T[y++]=this.g[v]>>>S&255;return T};function i(T,y){var v=c;return Object.prototype.hasOwnProperty.call(v,T)?v[T]:v[T]=y(T)}function o(T,y){this.h=y;const v=[];let S=!0;for(let A=T.length-1;A>=0;A--){const R=T[A]|0;S&&R==y||(v[A]=R,S=!1)}this.g=v}var c={};function l(T){return-128<=T&&T<128?i(T,function(y){return new o([y|0],y<0?-1:0)}):new o([T|0],T<0?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return p;if(T<0)return V(u(-T));const y=[];let v=1;for(let S=0;T>=v;S++)y[S]=T/v|0,v*=4294967296;return new o(y,0)}function f(T,y){if(T.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(T.charAt(0)=="-")return V(f(T.substring(1),y));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const v=u(Math.pow(y,8));let S=p;for(let R=0;R<T.length;R+=8){var A=Math.min(8,T.length-R);const I=parseInt(T.substring(R,R+A),y);A<8?(A=u(Math.pow(y,A)),S=S.j(A).add(u(I))):(S=S.j(v),S=S.add(u(I)))}return S}var p=l(0),m=l(1),_=l(16777216);t=o.prototype,t.m=function(){if(D(this))return-V(this).m();let T=0,y=1;for(let v=0;v<this.g.length;v++){const S=this.i(v);T+=(S>=0?S:4294967296+S)*y,y*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(C(this))return"0";if(D(this))return"-"+V(this).toString(T);const y=u(Math.pow(T,6));var v=this;let S="";for(;;){const A=F(v,y).g;v=H(v,A.j(y));let R=((v.g.length>0?v.g[0]:v.h)>>>0).toString(T);if(v=A,C(v))return R+S;for(;R.length<6;)R="0"+R;S=R+S}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function C(T){if(T.h!=0)return!1;for(let y=0;y<T.g.length;y++)if(T.g[y]!=0)return!1;return!0}function D(T){return T.h==-1}t.l=function(T){return T=H(this,T),D(T)?-1:C(T)?0:1};function V(T){const y=T.g.length,v=[];for(let S=0;S<y;S++)v[S]=~T.g[S];return new o(v,~T.h).add(m)}t.abs=function(){return D(this)?V(this):this},t.add=function(T){const y=Math.max(this.g.length,T.g.length),v=[];let S=0;for(let A=0;A<=y;A++){let R=S+(this.i(A)&65535)+(T.i(A)&65535),I=(R>>>16)+(this.i(A)>>>16)+(T.i(A)>>>16);S=I>>>16,R&=65535,I&=65535,v[A]=I<<16|R}return new o(v,v[v.length-1]&-2147483648?-1:0)};function H(T,y){return T.add(V(y))}t.j=function(T){if(C(this)||C(T))return p;if(D(this))return D(T)?V(this).j(V(T)):V(V(this).j(T));if(D(T))return V(this.j(V(T)));if(this.l(_)<0&&T.l(_)<0)return u(this.m()*T.m());const y=this.g.length+T.g.length,v=[];for(var S=0;S<2*y;S++)v[S]=0;for(S=0;S<this.g.length;S++)for(let A=0;A<T.g.length;A++){const R=this.i(S)>>>16,I=this.i(S)&65535,Ke=T.i(A)>>>16,wt=T.i(A)&65535;v[2*S+2*A]+=I*wt,N(v,2*S+2*A),v[2*S+2*A+1]+=R*wt,N(v,2*S+2*A+1),v[2*S+2*A+1]+=I*Ke,N(v,2*S+2*A+1),v[2*S+2*A+2]+=R*Ke,N(v,2*S+2*A+2)}for(T=0;T<y;T++)v[T]=v[2*T+1]<<16|v[2*T];for(T=y;T<2*y;T++)v[T]=0;return new o(v,0)};function N(T,y){for(;(T[y]&65535)!=T[y];)T[y+1]+=T[y]>>>16,T[y]&=65535,y++}function x(T,y){this.g=T,this.h=y}function F(T,y){if(C(y))throw Error("division by zero");if(C(T))return new x(p,p);if(D(T))return y=F(V(T),y),new x(V(y.g),V(y.h));if(D(y))return y=F(T,V(y)),new x(V(y.g),y.h);if(T.g.length>30){if(D(T)||D(y))throw Error("slowDivide_ only works with positive integers.");for(var v=m,S=y;S.l(T)<=0;)v=te(v),S=te(S);var A=he(v,1),R=he(S,1);for(S=he(S,2),v=he(v,2);!C(S);){var I=R.add(S);I.l(T)<=0&&(A=A.add(v),R=I),S=he(S,1),v=he(v,1)}return y=H(T,A.j(y)),new x(A,y)}for(A=p;T.l(y)>=0;){for(v=Math.max(1,Math.floor(T.m()/y.m())),S=Math.ceil(Math.log(v)/Math.LN2),S=S<=48?1:Math.pow(2,S-48),R=u(v),I=R.j(y);D(I)||I.l(T)>0;)v-=S,R=u(v),I=R.j(y);C(R)&&(R=m),A=A.add(R),T=H(T,I)}return new x(A,T)}t.B=function(T){return F(this,T).h},t.and=function(T){const y=Math.max(this.g.length,T.g.length),v=[];for(let S=0;S<y;S++)v[S]=this.i(S)&T.i(S);return new o(v,this.h&T.h)},t.or=function(T){const y=Math.max(this.g.length,T.g.length),v=[];for(let S=0;S<y;S++)v[S]=this.i(S)|T.i(S);return new o(v,this.h|T.h)},t.xor=function(T){const y=Math.max(this.g.length,T.g.length),v=[];for(let S=0;S<y;S++)v[S]=this.i(S)^T.i(S);return new o(v,this.h^T.h)};function te(T){const y=T.g.length+1,v=[];for(let S=0;S<y;S++)v[S]=T.i(S)<<1|T.i(S-1)>>>31;return new o(v,T.h)}function he(T,y){const v=y>>5;y%=32;const S=T.g.length-v,A=[];for(let R=0;R<S;R++)A[R]=y>0?T.i(R+v)>>>y|T.i(R+v+1)<<32-y:T.i(R+v);return new o(A,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,eg=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=f,vr=o}).apply(typeof jf<"u"?jf:typeof self<"u"?self:typeof window<"u"?window:{});var xo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var tg,yi,ng,Ho,Rl,rg,sg,ig;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof xo=="object"&&xo];for(var h=0;h<a.length;++h){var d=a[h];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var d=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var P=a[g];if(!(P in d))break e;d=d[P]}a=a[a.length-1],g=d[a],h=h(g),h!=g&&h!=null&&e(d,a,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(h){var d=[],g;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&d.push([g,h[g]]);return d}});var i=i||{},o=this||self;function c(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function l(a,h,d){return a.call.apply(a.bind,arguments)}function u(a,h,d){return u=l,u.apply(null,arguments)}function f(a,h){var d=Array.prototype.slice.call(arguments,1);return function(){var g=d.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function p(a,h){function d(){}d.prototype=h.prototype,a.Z=h.prototype,a.prototype=new d,a.prototype.constructor=a,a.Ob=function(g,P,k){for(var G=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)G[ye-2]=arguments[ye];return h.prototype[P].apply(g,G)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function _(a){const h=a.length;if(h>0){const d=Array(h);for(let g=0;g<h;g++)d[g]=a[g];return d}return[]}function C(a,h){for(let g=1;g<arguments.length;g++){const P=arguments[g];var d=typeof P;if(d=d!="object"?d:P?Array.isArray(P)?"array":d:"null",d=="array"||d=="object"&&typeof P.length=="number"){d=a.length||0;const k=P.length||0;a.length=d+k;for(let G=0;G<k;G++)a[d+G]=P[G]}else a.push(P)}}class D{constructor(h,d){this.i=h,this.j=d,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function V(a){o.setTimeout(()=>{throw a},0)}function H(){var a=T;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class N{constructor(){this.h=this.g=null}add(h,d){const g=x.get();g.set(h,d),this.h?this.h.next=g:this.g=g,this.h=g}}var x=new D(()=>new F,a=>a.reset());class F{constructor(){this.next=this.g=this.h=null}set(h,d){this.h=h,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let te,he=!1,T=new N,y=()=>{const a=Promise.resolve(void 0);te=()=>{a.then(v)}};function v(){for(var a;a=H();){try{a.h.call(a.g)}catch(d){V(d)}var h=x;h.j(a),h.h<100&&(h.h++,a.next=h.g,h.g=a)}he=!1}function S(){this.u=this.u,this.C=this.C}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var R=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};o.addEventListener("test",d,h),o.removeEventListener("test",d,h)}catch{}return a})();function I(a){return/^[\s\xa0]*$/.test(a)}function Ke(a,h){A.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,h)}p(Ke,A),Ke.prototype.init=function(a,h){const d=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget,h||(d=="mouseover"?h=a.fromElement:d=="mouseout"&&(h=a.toElement)),this.relatedTarget=h,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&Ke.Z.h.call(this)},Ke.prototype.h=function(){Ke.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var wt="closure_listenable_"+(Math.random()*1e6|0),Me=0;function ge(a,h,d,g,P){this.listener=a,this.proxy=null,this.src=h,this.type=d,this.capture=!!g,this.ha=P,this.key=++Me,this.da=this.fa=!1}function Re(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Bt(a,h,d){for(const g in a)h.call(d,a[g],g,a)}function fn(a,h){for(const d in a)h.call(void 0,a[d],d,a)}function qt(a){const h={};for(const d in a)h[d]=a[d];return h}const pt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Dn(a,h){let d,g;for(let P=1;P<arguments.length;P++){g=arguments[P];for(d in g)a[d]=g[d];for(let k=0;k<pt.length;k++)d=pt[k],Object.prototype.hasOwnProperty.call(g,d)&&(a[d]=g[d])}}function nn(a){this.src=a,this.g={},this.h=0}nn.prototype.add=function(a,h,d,g,P){const k=a.toString();a=this.g[k],a||(a=this.g[k]=[],this.h++);const G=Tt(a,h,g,P);return G>-1?(h=a[G],d||(h.fa=!1)):(h=new ge(h,this.src,k,!!g,P),h.fa=d,a.push(h)),h};function rn(a,h){const d=h.type;if(d in a.g){var g=a.g[d],P=Array.prototype.indexOf.call(g,h,void 0),k;(k=P>=0)&&Array.prototype.splice.call(g,P,1),k&&(Re(h),a.g[d].length==0&&(delete a.g[d],a.h--))}}function Tt(a,h,d,g){for(let P=0;P<a.length;++P){const k=a[P];if(!k.da&&k.listener==h&&k.capture==!!d&&k.ha==g)return P}return-1}var L="closure_lm_"+(Math.random()*1e6|0),Z={};function J(a,h,d,g,P){if(Array.isArray(h)){for(let k=0;k<h.length;k++)J(a,h[k],d,g,P);return null}return d=Y(d),a&&a[wt]?a.J(h,d,c(g)?!!g.capture:!1,P):se(a,h,d,!1,g,P)}function se(a,h,d,g,P,k){if(!h)throw Error("Invalid event type");const G=c(P)?!!P.capture:!!P;let ye=B(a);if(ye||(a[L]=ye=new nn(a)),d=ye.add(h,d,g,G,k),d.proxy)return d;if(g=we(),d.proxy=g,g.src=a,g.listener=d,a.addEventListener)R||(P=G),P===void 0&&(P=!1),a.addEventListener(h.toString(),g,P);else if(a.attachEvent)a.attachEvent(b(h.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return d}function we(){function a(d){return h.call(a.src,a.listener,d)}const h=M;return a}function E(a,h,d,g,P){if(Array.isArray(h))for(var k=0;k<h.length;k++)E(a,h[k],d,g,P);else g=c(g)?!!g.capture:!!g,d=Y(d),a&&a[wt]?(a=a.i,k=String(h).toString(),k in a.g&&(h=a.g[k],d=Tt(h,d,g,P),d>-1&&(Re(h[d]),Array.prototype.splice.call(h,d,1),h.length==0&&(delete a.g[k],a.h--)))):a&&(a=B(a))&&(h=a.g[h.toString()],a=-1,h&&(a=Tt(h,d,g,P)),(d=a>-1?h[a]:null)&&w(d))}function w(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[wt])rn(h.i,a);else{var d=a.type,g=a.proxy;h.removeEventListener?h.removeEventListener(d,g,a.capture):h.detachEvent?h.detachEvent(b(d),g):h.addListener&&h.removeListener&&h.removeListener(g),(d=B(h))?(rn(d,a),d.h==0&&(d.src=null,h[L]=null)):Re(a)}}}function b(a){return a in Z?Z[a]:Z[a]="on"+a}function M(a,h){if(a.da)a=!0;else{h=new Ke(h,this);const d=a.listener,g=a.ha||a.src;a.fa&&w(a),a=d.call(g,h)}return a}function B(a){return a=a[L],a instanceof nn?a:null}var O="__closure_events_fn_"+(Math.random()*1e9>>>0);function Y(a){return typeof a=="function"?a:(a[O]||(a[O]=function(h){return a.handleEvent(h)}),a[O])}function K(){S.call(this),this.i=new nn(this),this.M=this,this.G=null}p(K,S),K.prototype[wt]=!0,K.prototype.removeEventListener=function(a,h,d,g){E(this,a,h,d,g)};function z(a,h){var d,g=a.G;if(g)for(d=[];g;g=g.G)d.push(g);if(a=a.M,g=h.type||h,typeof h=="string")h=new A(h,a);else if(h instanceof A)h.target=h.target||a;else{var P=h;h=new A(g,a),Dn(h,P)}P=!0;let k,G;if(d)for(G=d.length-1;G>=0;G--)k=h.g=d[G],P=$(k,g,!0,h)&&P;if(k=h.g=a,P=$(k,g,!0,h)&&P,P=$(k,g,!1,h)&&P,d)for(G=0;G<d.length;G++)k=h.g=d[G],P=$(k,g,!1,h)&&P}K.prototype.N=function(){if(K.Z.N.call(this),this.i){var a=this.i;for(const h in a.g){const d=a.g[h];for(let g=0;g<d.length;g++)Re(d[g]);delete a.g[h],a.h--}}this.G=null},K.prototype.J=function(a,h,d,g){return this.i.add(String(a),h,!1,d,g)},K.prototype.K=function(a,h,d,g){return this.i.add(String(a),h,!0,d,g)};function $(a,h,d,g){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();let P=!0;for(let k=0;k<h.length;++k){const G=h[k];if(G&&!G.da&&G.capture==d){const ye=G.listener,tt=G.ha||G.src;G.fa&&rn(a.i,G),P=ye.call(tt,g)!==!1&&P}}return P&&!g.defaultPrevented}function oe(a,h){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=u(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(a,h||0)}function X(a){a.g=oe(()=>{a.g=null,a.i&&(a.i=!1,X(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class ie extends S{constructor(h,d){super(),this.m=h,this.l=d,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:X(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ce(a){S.call(this),this.h=a,this.g={}}p(ce,S);var Ie=[];function Oe(a){Bt(a.g,function(h,d){this.g.hasOwnProperty(d)&&w(h)},a),a.g={}}ce.prototype.N=function(){ce.Z.N.call(this),Oe(this)},ce.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ce=o.JSON.stringify,At=o.JSON.parse,St=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Ht(){}function zt(){}var sn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function as(){A.call(this,"d")}p(as,A);function mt(){A.call(this,"c")}p(mt,A);var ct={},Ys=null;function Or(){return Ys=Ys||new K}ct.Ia="serverreachability";function hh(a){A.call(this,ct.Ia,a)}p(hh,A);function Js(a){const h=Or();z(h,new hh(h))}ct.STAT_EVENT="statevent";function fh(a,h){A.call(this,ct.STAT_EVENT,a),this.stat=h}p(fh,A);function xt(a){const h=Or();z(h,new fh(h,a))}ct.Ja="timingevent";function dh(a,h){A.call(this,ct.Ja,a),this.size=h}p(dh,A);function Xs(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},h)}function Zs(){this.g=!0}Zs.prototype.ua=function(){this.g=!1};function by(a,h,d,g,P,k){a.info(function(){if(a.g)if(k){var G="",ye=k.split("&");for(let xe=0;xe<ye.length;xe++){var tt=ye[xe].split("=");if(tt.length>1){const lt=tt[0];tt=tt[1];const pn=lt.split("_");G=pn.length>=2&&pn[1]=="type"?G+(lt+"="+tt+"&"):G+(lt+"=redacted&")}}}else G=null;else G=k;return"XMLHTTP REQ ("+g+") [attempt "+P+"]: "+h+`
`+d+`
`+G})}function Cy(a,h,d,g,P,k,G){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+P+"]: "+h+`
`+d+`
`+k+" "+G})}function cs(a,h,d,g){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+ky(a,d)+(g?" "+g:"")})}function Py(a,h){a.info(function(){return"TIMEOUT: "+h})}Zs.prototype.info=function(){};function ky(a,h){if(!a.g)return h;if(!h)return null;try{const k=JSON.parse(h);if(k){for(a=0;a<k.length;a++)if(Array.isArray(k[a])){var d=k[a];if(!(d.length<2)){var g=d[1];if(Array.isArray(g)&&!(g.length<1)){var P=g[0];if(P!="noop"&&P!="stop"&&P!="close")for(let G=1;G<g.length;G++)g[G]=""}}}}return Ce(k)}catch{return h}}var Eo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ph={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},mh;function gc(){}p(gc,Ht),gc.prototype.g=function(){return new XMLHttpRequest},mh=new gc;function ei(a){return encodeURIComponent(String(a))}function Ny(a){var h=1;a=a.split(":");const d=[];for(;h>0&&a.length;)d.push(a.shift()),h--;return a.length&&d.push(a.join(":")),d}function Jn(a,h,d,g){this.j=a,this.i=h,this.l=d,this.S=g||1,this.V=new ce(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new gh}function gh(){this.i=null,this.g="",this.h=!1}var _h={},_c={};function yc(a,h,d){a.M=1,a.A=wo(dn(h)),a.u=d,a.R=!0,yh(a,null)}function yh(a,h){a.F=Date.now(),Io(a),a.B=dn(a.A);var d=a.B,g=a.S;Array.isArray(g)||(g=[String(g)]),Nh(d.i,"t",g),a.C=0,d=a.j.L,a.h=new gh,a.g=Qh(a.j,d?h:null,!a.u),a.P>0&&(a.O=new ie(u(a.Y,a,a.g),a.P)),h=a.V,d=a.g,g=a.ba;var P="readystatechange";Array.isArray(P)||(P&&(Ie[0]=P.toString()),P=Ie);for(let k=0;k<P.length;k++){const G=J(d,P[k],g||h.handleEvent,!1,h.h||h);if(!G)break;h.g[G.key]=G}h=a.J?qt(a.J):{},a.u?(a.v||(a.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,h)):(a.v="GET",a.g.ea(a.B,a.v,null,h)),Js(),by(a.i,a.v,a.B,a.l,a.S,a.u)}Jn.prototype.ba=function(a){a=a.target;const h=this.O;h&&er(a)==3?h.j():this.Y(a)},Jn.prototype.Y=function(a){try{if(a==this.g)e:{const ye=er(this.g),tt=this.g.ya(),xe=this.g.ca();if(!(ye<3)&&(ye!=3||this.g&&(this.h.h||this.g.la()||Fh(this.g)))){this.K||ye!=4||tt==7||(tt==8||xe<=0?Js(3):Js(2)),vc(this);var h=this.g.ca();this.X=h;var d=Dy(this);if(this.o=h==200,Cy(this.i,this.v,this.B,this.l,this.S,ye,h),this.o){if(this.U&&!this.L){t:{if(this.g){var g,P=this.g;if((g=P.g?P.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(g)){var k=g;break t}}k=null}if(a=k)cs(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ec(this,a);else{this.o=!1,this.m=3,xt(12),xr(this),ti(this);break e}}if(this.R){a=!0;let lt;for(;!this.K&&this.C<d.length;)if(lt=Vy(this,d),lt==_c){ye==4&&(this.m=4,xt(14),a=!1),cs(this.i,this.l,null,"[Incomplete Response]");break}else if(lt==_h){this.m=4,xt(15),cs(this.i,this.l,d,"[Invalid Chunk]"),a=!1;break}else cs(this.i,this.l,lt,null),Ec(this,lt);if(vh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ye!=4||d.length!=0||this.h.h||(this.m=1,xt(16),a=!1),this.o=this.o&&a,!a)cs(this.i,this.l,d,"[Invalid Chunked Response]"),xr(this),ti(this);else if(d.length>0&&!this.W){this.W=!0;var G=this.j;G.g==this&&G.aa&&!G.P&&(G.j.info("Great, no buffering proxy detected. Bytes received: "+d.length),Cc(G),G.P=!0,xt(11))}}else cs(this.i,this.l,d,null),Ec(this,d);ye==4&&xr(this),this.o&&!this.K&&(ye==4?zh(this.j,this):(this.o=!1,Io(this)))}else Ky(this.g),h==400&&d.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),xr(this),ti(this)}}}catch{}finally{}};function Dy(a){if(!vh(a))return a.g.la();const h=Fh(a.g);if(h==="")return"";let d="";const g=h.length,P=er(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return xr(a),ti(a),"";a.h.i=new o.TextDecoder}for(let k=0;k<g;k++)a.h.h=!0,d+=a.h.i.decode(h[k],{stream:!(P&&k==g-1)});return h.length=0,a.h.g+=d,a.C=0,a.h.g}function vh(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function Vy(a,h){var d=a.C,g=h.indexOf(`
`,d);return g==-1?_c:(d=Number(h.substring(d,g)),isNaN(d)?_h:(g+=1,g+d>h.length?_c:(h=h.slice(g,g+d),a.C=g+d,h)))}Jn.prototype.cancel=function(){this.K=!0,xr(this)};function Io(a){a.T=Date.now()+a.H,Eh(a,a.H)}function Eh(a,h){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Xs(u(a.aa,a),h)}function vc(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Jn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(Py(this.i,this.B),this.M!=2&&(Js(),xt(17)),xr(this),this.m=2,ti(this)):Eh(this,this.T-a)};function ti(a){a.j.I==0||a.K||zh(a.j,a)}function xr(a){vc(a);var h=a.O;h&&typeof h.dispose=="function"&&h.dispose(),a.O=null,Oe(a.V),a.g&&(h=a.g,a.g=null,h.abort(),h.dispose())}function Ec(a,h){try{var d=a.j;if(d.I!=0&&(d.g==a||Ic(d.h,a))){if(!a.L&&Ic(d.h,a)&&d.I==3){try{var g=d.Ba.g.parse(h)}catch{g=null}if(Array.isArray(g)&&g.length==3){var P=g;if(P[0]==0){e:if(!d.v){if(d.g)if(d.g.F+3e3<a.F)bo(d),So(d);else break e;bc(d),xt(18)}}else d.xa=P[1],0<d.xa-d.K&&P[2]<37500&&d.F&&d.A==0&&!d.C&&(d.C=Xs(u(d.Va,d),6e3));Th(d.h)<=1&&d.ta&&(d.ta=void 0)}else Mr(d,11)}else if((a.L||d.g==a)&&bo(d),!I(h))for(P=d.Ba.g.parse(h),h=0;h<P.length;h++){let xe=P[h];const lt=xe[0];if(!(lt<=d.K))if(d.K=lt,xe=xe[1],d.I==2)if(xe[0]=="c"){d.M=xe[1],d.ba=xe[2];const pn=xe[3];pn!=null&&(d.ka=pn,d.j.info("VER="+d.ka));const Fr=xe[4];Fr!=null&&(d.za=Fr,d.j.info("SVER="+d.za));const tr=xe[5];tr!=null&&typeof tr=="number"&&tr>0&&(g=1.5*tr,d.O=g,d.j.info("backChannelRequestTimeoutMs_="+g)),g=d;const nr=a.g;if(nr){const Po=nr.g?nr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Po){var k=g.h;k.g||Po.indexOf("spdy")==-1&&Po.indexOf("quic")==-1&&Po.indexOf("h2")==-1||(k.j=k.l,k.g=new Set,k.h&&(wc(k,k.h),k.h=null))}if(g.G){const Pc=nr.g?nr.g.getResponseHeader("X-HTTP-Session-Id"):null;Pc&&(g.wa=Pc,Ue(g.J,g.G,Pc))}}d.I=3,d.l&&d.l.ra(),d.aa&&(d.T=Date.now()-a.F,d.j.info("Handshake RTT: "+d.T+"ms")),g=d;var G=a;if(g.na=Gh(g,g.L?g.ba:null,g.W),G.L){Ah(g.h,G);var ye=G,tt=g.O;tt&&(ye.H=tt),ye.D&&(vc(ye),Io(ye)),g.g=G}else qh(g);d.i.length>0&&Ro(d)}else xe[0]!="stop"&&xe[0]!="close"||Mr(d,7);else d.I==3&&(xe[0]=="stop"||xe[0]=="close"?xe[0]=="stop"?Mr(d,7):Rc(d):xe[0]!="noop"&&d.l&&d.l.qa(xe),d.A=0)}}Js(4)}catch{}}var Oy=class{constructor(a,h){this.g=a,this.map=h}};function Ih(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function wh(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Th(a){return a.h?1:a.g?a.g.size:0}function Ic(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function wc(a,h){a.g?a.g.add(h):a.h=h}function Ah(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Ih.prototype.cancel=function(){if(this.i=Sh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Sh(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const d of a.g.values())h=h.concat(d.G);return h}return _(a.i)}var Rh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xy(a,h){if(a){a=a.split("&");for(let d=0;d<a.length;d++){const g=a[d].indexOf("=");let P,k=null;g>=0?(P=a[d].substring(0,g),k=a[d].substring(g+1)):P=a[d],h(P,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function Xn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;a instanceof Xn?(this.l=a.l,ni(this,a.j),this.o=a.o,this.g=a.g,ri(this,a.u),this.h=a.h,Tc(this,Dh(a.i)),this.m=a.m):a&&(h=String(a).match(Rh))?(this.l=!1,ni(this,h[1]||"",!0),this.o=si(h[2]||""),this.g=si(h[3]||"",!0),ri(this,h[4]),this.h=si(h[5]||"",!0),Tc(this,h[6]||"",!0),this.m=si(h[7]||"")):(this.l=!1,this.i=new oi(null,this.l))}Xn.prototype.toString=function(){const a=[];var h=this.j;h&&a.push(ii(h,bh,!0),":");var d=this.g;return(d||h=="file")&&(a.push("//"),(h=this.o)&&a.push(ii(h,bh,!0),"@"),a.push(ei(d).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.u,d!=null&&a.push(":",String(d))),(d=this.h)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(ii(d,d.charAt(0)=="/"?Fy:My,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",ii(d,By)),a.join("")},Xn.prototype.resolve=function(a){const h=dn(this);let d=!!a.j;d?ni(h,a.j):d=!!a.o,d?h.o=a.o:d=!!a.g,d?h.g=a.g:d=a.u!=null;var g=a.h;if(d)ri(h,a.u);else if(d=!!a.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var P=h.h.lastIndexOf("/");P!=-1&&(g=h.h.slice(0,P+1)+g)}if(P=g,P==".."||P==".")g="";else if(P.indexOf("./")!=-1||P.indexOf("/.")!=-1){g=P.lastIndexOf("/",0)==0,P=P.split("/");const k=[];for(let G=0;G<P.length;){const ye=P[G++];ye=="."?g&&G==P.length&&k.push(""):ye==".."?((k.length>1||k.length==1&&k[0]!="")&&k.pop(),g&&G==P.length&&k.push("")):(k.push(ye),g=!0)}g=k.join("/")}else g=P}return d?h.h=g:d=a.i.toString()!=="",d?Tc(h,Dh(a.i)):d=!!a.m,d&&(h.m=a.m),h};function dn(a){return new Xn(a)}function ni(a,h,d){a.j=d?si(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function ri(a,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);a.u=h}else a.u=null}function Tc(a,h,d){h instanceof oi?(a.i=h,$y(a.i,a.l)):(d||(h=ii(h,Uy)),a.i=new oi(h,a.l))}function Ue(a,h,d){a.i.set(h,d)}function wo(a){return Ue(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function si(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ii(a,h,d){return typeof a=="string"?(a=encodeURI(a).replace(h,Ly),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Ly(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var bh=/[#\/\?@]/g,My=/[#\?:]/g,Fy=/[#\?]/g,Uy=/[#\?@]/g,By=/#/g;function oi(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Lr(a){a.g||(a.g=new Map,a.h=0,a.i&&xy(a.i,function(h,d){a.add(decodeURIComponent(h.replace(/\+/g," ")),d)}))}t=oi.prototype,t.add=function(a,h){Lr(this),this.i=null,a=ls(this,a);let d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(h),this.h+=1,this};function Ch(a,h){Lr(a),h=ls(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Ph(a,h){return Lr(a),h=ls(a,h),a.g.has(h)}t.forEach=function(a,h){Lr(this),this.g.forEach(function(d,g){d.forEach(function(P){a.call(h,P,g,this)},this)},this)};function kh(a,h){Lr(a);let d=[];if(typeof h=="string")Ph(a,h)&&(d=d.concat(a.g.get(ls(a,h))));else for(a=Array.from(a.g.values()),h=0;h<a.length;h++)d=d.concat(a[h]);return d}t.set=function(a,h){return Lr(this),this.i=null,a=ls(this,a),Ph(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=kh(this,a),a.length>0?String(a[0]):h):h};function Nh(a,h,d){Ch(a,h),d.length>0&&(a.i=null,a.g.set(ls(a,h),_(d)),a.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(let g=0;g<h.length;g++){var d=h[g];const P=ei(d);d=kh(this,d);for(let k=0;k<d.length;k++){let G=P;d[k]!==""&&(G+="="+ei(d[k])),a.push(G)}}return this.i=a.join("&")};function Dh(a){const h=new oi;return h.i=a.i,a.g&&(h.g=new Map(a.g),h.h=a.h),h}function ls(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function $y(a,h){h&&!a.j&&(Lr(a),a.i=null,a.g.forEach(function(d,g){const P=g.toLowerCase();g!=P&&(Ch(this,g),Nh(this,P,d))},a)),a.j=h}function jy(a,h){const d=new Zs;if(o.Image){const g=new Image;g.onload=f(Zn,d,"TestLoadImage: loaded",!0,h,g),g.onerror=f(Zn,d,"TestLoadImage: error",!1,h,g),g.onabort=f(Zn,d,"TestLoadImage: abort",!1,h,g),g.ontimeout=f(Zn,d,"TestLoadImage: timeout",!1,h,g),o.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else h(!1)}function qy(a,h){const d=new Zs,g=new AbortController,P=setTimeout(()=>{g.abort(),Zn(d,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:g.signal}).then(k=>{clearTimeout(P),k.ok?Zn(d,"TestPingServer: ok",!0,h):Zn(d,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(P),Zn(d,"TestPingServer: error",!1,h)})}function Zn(a,h,d,g,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),g(d)}catch{}}function Hy(){this.g=new St}function Ac(a){this.i=a.Sb||null,this.h=a.ab||!1}p(Ac,Ht),Ac.prototype.g=function(){return new To(this.i,this.h)};function To(a,h){K.call(this),this.H=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(To,K),t=To.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=h,this.readyState=1,ci(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(h.body=a),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ai(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ci(this)),this.g&&(this.readyState=3,ci(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Vh(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Vh(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?ai(this):ci(this),this.readyState==3&&Vh(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,ai(this))},t.Na=function(a){this.g&&(this.response=a,ai(this))},t.ga=function(){this.g&&ai(this)};function ai(a){a.readyState=4,a.l=null,a.j=null,a.B=null,ci(a)}t.setRequestHeader=function(a,h){this.A.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var d=h.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=h.next();return a.join(`\r
`)};function ci(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(To.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Oh(a){let h="";return Bt(a,function(d,g){h+=g,h+=":",h+=d,h+=`\r
`}),h}function Sc(a,h,d){e:{for(g in d){var g=!1;break e}g=!0}g||(d=Oh(d),typeof a=="string"?d!=null&&ei(d):Ue(a,h,d))}function Ge(a){K.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Ge,K);var zy=/^https?$/i,Wy=["POST","PUT"];t=Ge.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,h,d,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():mh.g(),this.g.onreadystatechange=m(u(this.Ca,this));try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(k){xh(this,k);return}if(a=d||"",d=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var P in g)d.set(P,g[P]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const k of g.keys())d.set(k,g.get(k));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(d.keys()).find(k=>k.toLowerCase()=="content-type"),P=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(Wy,h,void 0)>=0)||g||P||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[k,G]of d)this.g.setRequestHeader(k,G);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(k){xh(this,k)}};function xh(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.o=5,Lh(a),Ao(a)}function Lh(a){a.A||(a.A=!0,z(a,"complete"),z(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,z(this,"complete"),z(this,"abort"),Ao(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ao(this,!0)),Ge.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Mh(this):this.Xa())},t.Xa=function(){Mh(this)};function Mh(a){if(a.h&&typeof i<"u"){if(a.v&&er(a)==4)setTimeout(a.Ca.bind(a),0);else if(z(a,"readystatechange"),er(a)==4){a.h=!1;try{const k=a.ca();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var d;if(!(d=h)){var g;if(g=k===0){let G=String(a.D).match(Rh)[1]||null;!G&&o.self&&o.self.location&&(G=o.self.location.protocol.slice(0,-1)),g=!zy.test(G?G.toLowerCase():"")}d=g}if(d)z(a,"complete"),z(a,"success");else{a.o=6;try{var P=er(a)>2?a.g.statusText:""}catch{P=""}a.l=P+" ["+a.ca()+"]",Lh(a)}}finally{Ao(a)}}}}function Ao(a,h){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const d=a.g;a.g=null,h||z(a,"ready");try{d.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function er(a){return a.g?a.g.readyState:0}t.ca=function(){try{return er(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),At(h)}};function Fh(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Ky(a){const h={};a=(a.g&&er(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(I(a[g]))continue;var d=Ny(a[g]);const P=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const k=h[P]||[];h[P]=k,k.push(d)}fn(h,function(g){return g.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function li(a,h,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||h}function Uh(a){this.za=0,this.i=[],this.j=new Zs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=li("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=li("baseRetryDelayMs",5e3,a),this.Za=li("retryDelaySeedMs",1e4,a),this.Ta=li("forwardChannelMaxRetries",2,a),this.va=li("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Ih(a&&a.concurrentRequestLimit),this.Ba=new Hy,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Uh.prototype,t.ka=8,t.I=1,t.connect=function(a,h,d,g){xt(0),this.W=a,this.H=h||{},d&&g!==void 0&&(this.H.OSID=d,this.H.OAID=g),this.F=this.X,this.J=Gh(this,null,this.W),Ro(this)};function Rc(a){if(Bh(a),a.I==3){var h=a.V++,d=dn(a.J);if(Ue(d,"SID",a.M),Ue(d,"RID",h),Ue(d,"TYPE","terminate"),ui(a,d),h=new Jn(a,a.j,h),h.M=2,h.A=wo(dn(d)),d=!1,o.navigator&&o.navigator.sendBeacon)try{d=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!d&&o.Image&&(new Image().src=h.A,d=!0),d||(h.g=Qh(h.j,null),h.g.ea(h.A)),h.F=Date.now(),Io(h)}Kh(a)}function So(a){a.g&&(Cc(a),a.g.cancel(),a.g=null)}function Bh(a){So(a),a.v&&(o.clearTimeout(a.v),a.v=null),bo(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Ro(a){if(!wh(a.h)&&!a.m){a.m=!0;var h=a.Ea;te||y(),he||(te(),he=!0),T.add(h,a),a.D=0}}function Gy(a,h){return Th(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=h.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Xs(u(a.Ea,a,h),Wh(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const P=new Jn(this,this.j,a);let k=this.o;if(this.U&&(k?(k=qt(k),Dn(k,this.U)):k=this.U),this.u!==null||this.R||(P.J=k,k=null),this.S)e:{for(var h=0,d=0;d<this.i.length;d++){t:{var g=this.i[d];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(h+=g,h>4096){h=d;break e}if(h===4096||d===this.i.length-1){h=d+1;break e}}h=1e3}else h=1e3;h=jh(this,P,h),d=dn(this.J),Ue(d,"RID",a),Ue(d,"CVER",22),this.G&&Ue(d,"X-HTTP-Session-Id",this.G),ui(this,d),k&&(this.R?h="headers="+ei(Oh(k))+"&"+h:this.u&&Sc(d,this.u,k)),wc(this.h,P),this.Ra&&Ue(d,"TYPE","init"),this.S?(Ue(d,"$req",h),Ue(d,"SID","null"),P.U=!0,yc(P,d,null)):yc(P,d,h),this.I=2}}else this.I==3&&(a?$h(this,a):this.i.length==0||wh(this.h)||$h(this))};function $h(a,h){var d;h?d=h.l:d=a.V++;const g=dn(a.J);Ue(g,"SID",a.M),Ue(g,"RID",d),Ue(g,"AID",a.K),ui(a,g),a.u&&a.o&&Sc(g,a.u,a.o),d=new Jn(a,a.j,d,a.D+1),a.u===null&&(d.J=a.o),h&&(a.i=h.G.concat(a.i)),h=jh(a,d,1e3),d.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),wc(a.h,d),yc(d,g,h)}function ui(a,h){a.H&&Bt(a.H,function(d,g){Ue(h,g,d)}),a.l&&Bt({},function(d,g){Ue(h,g,d)})}function jh(a,h,d){d=Math.min(a.i.length,d);const g=a.l?u(a.l.Ka,a.l,a):null;e:{var P=a.i;let ye=-1;for(;;){const tt=["count="+d];ye==-1?d>0?(ye=P[0].g,tt.push("ofs="+ye)):ye=0:tt.push("ofs="+ye);let xe=!0;for(let lt=0;lt<d;lt++){var k=P[lt].g;const pn=P[lt].map;if(k-=ye,k<0)ye=Math.max(0,P[lt].g-100),xe=!1;else try{k="req"+k+"_"||"";try{var G=pn instanceof Map?pn:Object.entries(pn);for(const[Fr,tr]of G){let nr=tr;c(tr)&&(nr=Ce(tr)),tt.push(k+Fr+"="+encodeURIComponent(nr))}}catch(Fr){throw tt.push(k+"type="+encodeURIComponent("_badmap")),Fr}}catch{g&&g(pn)}}if(xe){G=tt.join("&");break e}}G=void 0}return a=a.i.splice(0,d),h.G=a,G}function qh(a){if(!a.g&&!a.v){a.Y=1;var h=a.Da;te||y(),he||(te(),he=!0),T.add(h,a),a.A=0}}function bc(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Xs(u(a.Da,a),Wh(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Hh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Xs(u(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),So(this),Hh(this))};function Cc(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Hh(a){a.g=new Jn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var h=dn(a.na);Ue(h,"RID","rpc"),Ue(h,"SID",a.M),Ue(h,"AID",a.K),Ue(h,"CI",a.F?"0":"1"),!a.F&&a.ia&&Ue(h,"TO",a.ia),Ue(h,"TYPE","xmlhttp"),ui(a,h),a.u&&a.o&&Sc(h,a.u,a.o),a.O&&(a.g.H=a.O);var d=a.g;a=a.ba,d.M=1,d.A=wo(dn(h)),d.u=null,d.R=!0,yh(d,a)}t.Va=function(){this.C!=null&&(this.C=null,So(this),bc(this),xt(19))};function bo(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function zh(a,h){var d=null;if(a.g==h){bo(a),Cc(a),a.g=null;var g=2}else if(Ic(a.h,h))d=h.G,Ah(a.h,h),g=1;else return;if(a.I!=0){if(h.o)if(g==1){d=h.u?h.u.length:0,h=Date.now()-h.F;var P=a.D;g=Or(),z(g,new dh(g,d)),Ro(a)}else qh(a);else if(P=h.m,P==3||P==0&&h.X>0||!(g==1&&Gy(a,h)||g==2&&bc(a)))switch(d&&d.length>0&&(h=a.h,h.i=h.i.concat(d)),P){case 1:Mr(a,5);break;case 4:Mr(a,10);break;case 3:Mr(a,6);break;default:Mr(a,2)}}}function Wh(a,h){let d=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(d*=2),d*h}function Mr(a,h){if(a.j.info("Error code "+h),h==2){var d=u(a.bb,a),g=a.Ua;const P=!g;g=new Xn(g||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ni(g,"https"),wo(g),P?jy(g.toString(),d):qy(g.toString(),d)}else xt(2);a.I=0,a.l&&a.l.pa(h),Kh(a),Bh(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function Kh(a){if(a.I=0,a.ja=[],a.l){const h=Sh(a.h);(h.length!=0||a.i.length!=0)&&(C(a.ja,h),C(a.ja,a.i),a.h.i.length=0,_(a.i),a.i.length=0),a.l.oa()}}function Gh(a,h,d){var g=d instanceof Xn?dn(d):new Xn(d);if(g.g!="")h&&(g.g=h+"."+g.g),ri(g,g.u);else{var P=o.location;g=P.protocol,h=h?h+"."+P.hostname:P.hostname,P=+P.port;const k=new Xn(null);g&&ni(k,g),h&&(k.g=h),P&&ri(k,P),d&&(k.h=d),g=k}return d=a.G,h=a.wa,d&&h&&Ue(g,d,h),Ue(g,"VER",a.ka),ui(a,g),g}function Qh(a,h,d){if(h&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Aa&&!a.ma?new Ge(new Ac({ab:d})):new Ge(a.ma),h.Fa(a.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yh(){}t=Yh.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Co(){}Co.prototype.g=function(a,h){return new Wt(a,h)};function Wt(a,h){K.call(this),this.g=new Uh(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(a?a["X-WebChannel-Client-Profile"]=h.sa:a={"X-WebChannel-Client-Profile":h.sa}),this.g.U=a,(a=h&&h.Qb)&&!I(a)&&(this.g.u=a),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!I(h)&&(this.g.G=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new us(this)}p(Wt,K),Wt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Wt.prototype.close=function(){Rc(this.g)},Wt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.v&&(d={},d.__data__=Ce(a),a=d);h.i.push(new Oy(h.Ya++,a)),h.I==3&&Ro(h)},Wt.prototype.N=function(){this.g.l=null,delete this.j,Rc(this.g),delete this.g,Wt.Z.N.call(this)};function Jh(a){as.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const d in h){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}p(Jh,as);function Xh(){mt.call(this),this.status=1}p(Xh,mt);function us(a){this.g=a}p(us,Yh),us.prototype.ra=function(){z(this.g,"a")},us.prototype.qa=function(a){z(this.g,new Jh(a))},us.prototype.pa=function(a){z(this.g,new Xh)},us.prototype.oa=function(){z(this.g,"b")},Co.prototype.createWebChannel=Co.prototype.g,Wt.prototype.send=Wt.prototype.o,Wt.prototype.open=Wt.prototype.m,Wt.prototype.close=Wt.prototype.close,ig=function(){return new Co},sg=function(){return Or()},rg=ct,Rl={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Eo.NO_ERROR=0,Eo.TIMEOUT=8,Eo.HTTP_ERROR=6,Ho=Eo,ph.COMPLETE="complete",ng=ph,zt.EventType=sn,sn.OPEN="a",sn.CLOSE="b",sn.ERROR="c",sn.MESSAGE="d",K.prototype.listen=K.prototype.J,yi=zt,Ge.prototype.listenOnce=Ge.prototype.K,Ge.prototype.getLastError=Ge.prototype.Ha,Ge.prototype.getLastErrorCode=Ge.prototype.ya,Ge.prototype.getStatus=Ge.prototype.ca,Ge.prototype.getResponseJson=Ge.prototype.La,Ge.prototype.getResponseText=Ge.prototype.la,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Fa,tg=Ge}).apply(typeof xo<"u"?xo:typeof self<"u"?self:typeof window<"u"?window:{});const qf="@firebase/firestore",Hf="4.9.2";class Ct{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ct.UNAUTHENTICATED=new Ct(null),Ct.GOOGLE_CREDENTIALS=new Ct("google-credentials-uid"),Ct.FIRST_PARTY=new Ct("first-party-uid"),Ct.MOCK_USER=new Ct("mock-user");let qs="12.3.0";const Xr=new vu("@firebase/firestore");function _s(){return Xr.logLevel}function ee(t,...e){if(Xr.logLevel<=Te.DEBUG){const n=e.map(wu);Xr.debug(`Firestore (${qs}): ${t}`,...n)}}function zn(t,...e){if(Xr.logLevel<=Te.ERROR){const n=e.map(wu);Xr.error(`Firestore (${qs}): ${t}`,...n)}}function Vs(t,...e){if(Xr.logLevel<=Te.WARN){const n=e.map(wu);Xr.warn(`Firestore (${qs}): ${t}`,...n)}}function wu(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function ue(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,og(t,r,n)}function og(t,e,n){let r=`FIRESTORE (${qs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw zn(r),new Error(r)}function Ve(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||og(e,s,r)}function me(t,e){return t}const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends Yn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Er{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class ag{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Ct.UNAUTHENTICATED)))}shutdown(){}}class pT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class mT{constructor(e){this.t=e,this.currentUser=Ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ve(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Er;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Er,e.enqueueRetryable((()=>s(this.currentUser)))};const o=()=>{const l=i;e.enqueueRetryable((async()=>{await l.promise,await s(this.currentUser)}))},c=l=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>c(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Er)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ve(typeof r.accessToken=="string",31837,{l:r}),new ag(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ve(e===null||typeof e=="string",2055,{h:e}),new Ct(e)}}class gT{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ct.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _T{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new gT(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Ct.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class zf{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yT{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Xt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ve(this.o===void 0,3512);const r=i=>{i.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new zf(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ve(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new zf(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function vT(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class Tu{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=vT(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ae(t,e){return t<e?-1:t>e?1:0}function bl(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Qc(s)===Qc(i)?Ae(s,i):Qc(s)?1:-1}return Ae(t.length,e.length)}const ET=55296,IT=57343;function Qc(t){const e=t.charCodeAt(0);return e>=ET&&e<=IT}function Os(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}const Wf="__name__";class gn{constructor(e,n,r){n===void 0?n=0:n>e.length&&ue(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ue(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return gn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof gn?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=gn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ae(e.length,n.length)}static compareSegments(e,n){const r=gn.isNumericId(e),s=gn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?gn.extractNumericId(e).compare(gn.extractNumericId(n)):bl(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vr.fromString(e.substring(4,e.length-2))}}class qe extends gn{construct(e,n,r){return new qe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new re(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new qe(n)}static emptyPath(){return new qe([])}}const wT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vt extends gn{construct(e,n,r){return new vt(e,n,r)}static isValidIdentifier(e){return wT.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Wf}static keyField(){return new vt([Wf])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new re(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new re(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new re(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new re(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vt(n)}static emptyPath(){return new vt([])}}class ae{constructor(e){this.path=e}static fromPath(e){return new ae(qe.fromString(e))}static fromName(e){return new ae(qe.fromString(e).popFirst(5))}static empty(){return new ae(qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return qe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new qe(e.slice()))}}function TT(t,e,n){if(!n)throw new re(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function AT(t,e,n,r){if(e===!0&&r===!0)throw new re(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Kf(t){if(!ae.isDocumentKey(t))throw new re(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function cg(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Au(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ue(12329,{type:typeof t})}function Zr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new re(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Au(t);throw new re(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function et(t,e){const n={typeString:t};return e&&(n.value=e),n}function co(t,e){if(!cg(t))throw new re(j.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new re(j.INVALID_ARGUMENT,n);return!0}const Gf=-62135596800,Qf=1e6;class Be{static now(){return Be.fromMillis(Date.now())}static fromDate(e){return Be.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Qf);return new Be(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Gf)throw new re(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Qf}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Be._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(co(e,Be._jsonSchema))return new Be(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Gf;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Be._jsonSchemaVersion="firestore/timestamp/1.0",Be._jsonSchema={type:et("string",Be._jsonSchemaVersion),seconds:et("number"),nanoseconds:et("number")};class pe{static fromTimestamp(e){return new pe(e)}static min(){return new pe(new Be(0,0))}static max(){return new pe(new Be(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Hi=-1;function ST(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=pe.fromTimestamp(r===1e9?new Be(n+1,0):new Be(n,r));return new Tr(s,ae.empty(),e)}function RT(t){return new Tr(t.readTime,t.key,Hi)}class Tr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Tr(pe.min(),ae.empty(),Hi)}static max(){return new Tr(pe.max(),ae.empty(),Hi)}}function bT(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ae.comparator(t.documentKey,e.documentKey),n!==0?n:Ae(t.largestBatchId,e.largestBatchId))}const CT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Hs(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==CT)throw t;ee("LocalStore","Unexpectedly lost primary lease")}class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):U.reject(n)}static resolve(e){return new U(((n,r)=>{n(e)}))}static reject(e){return new U(((n,r)=>{r(e)}))}static waitFor(e){return new U(((n,r)=>{let s=0,i=0,o=!1;e.forEach((c=>{++s,c.next((()=>{++i,o&&i===s&&n()}),(l=>r(l)))})),o=!0,i===s&&n()}))}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next((s=>s?U.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(e,n){return new U(((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next((f=>{o[u]=f,++c,c===i&&r(o)}),(f=>s(f)))}}))}static doWhile(e,n){return new U(((r,s)=>{const i=()=>{e()===!0?n().next((()=>{i()}),s):r()};i()}))}}function kT(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function zs(t){return t.name==="IndexedDbTransactionError"}class Qa{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Qa.ce=-1;const Su=-1;function Ya(t){return t==null}function pa(t){return t===0&&1/t==-1/0}function NT(t){return typeof t=="number"&&Number.isInteger(t)&&!pa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const lg="";function DT(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Yf(e)),e=VT(t.get(n),e);return Yf(e)}function VT(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case lg:n+="";break;default:n+=i}}return n}function Yf(t){return t+lg+""}function Jf(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function kr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ug(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class ze{constructor(e,n){this.comparator=e,this.root=n||_t.EMPTY}insert(e,n){return new ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_t.BLACK,null,null))}remove(e){return new ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lo(this.root,e,this.comparator,!0)}}class Lo{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _t{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??_t.RED,this.left=s??_t.EMPTY,this.right=i??_t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new _t(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return _t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return _t.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ue(27949);return e+(this.isRed()?0:1)}}_t.EMPTY=null,_t.RED=!0,_t.BLACK=!1;_t.EMPTY=new class{constructor(){this.size=0}get key(){throw ue(57766)}get value(){throw ue(16141)}get color(){throw ue(16727)}get left(){throw ue(29726)}get right(){throw ue(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new _t(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class it{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Xf(this.data.getIterator())}getIteratorFrom(e){return new Xf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof it)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new it(this.comparator);return n.data=e,n}}class Xf{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Gt{constructor(e){this.fields=e,e.sort(vt.comparator)}static empty(){return new Gt([])}unionWith(e){let n=new it(vt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Gt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Os(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class hg extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class It{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new hg("Invalid base64 string: "+i):i}})(e);return new It(n)}static fromUint8Array(e){const n=(function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i})(e);return new It(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}It.EMPTY_BYTE_STRING=new It("");const OT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ar(t){if(Ve(!!t,39018),typeof t=="string"){let e=0;const n=OT.exec(t);if(Ve(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Je(t.seconds),nanos:Je(t.nanos)}}function Je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Sr(t){return typeof t=="string"?It.fromBase64String(t):It.fromUint8Array(t)}const fg="server_timestamp",dg="__type__",pg="__previous_value__",mg="__local_write_time__";function Ru(t){return(t?.mapValue?.fields||{})[dg]?.stringValue===fg}function Ja(t){const e=t.mapValue.fields[pg];return Ru(e)?Ja(e):e}function zi(t){const e=Ar(t.mapValue.fields[mg].timestampValue);return new Be(e.seconds,e.nanos)}class xT{constructor(e,n,r,s,i,o,c,l,u,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=f}}const ma="(default)";class Wi{constructor(e,n){this.projectId=e,this.database=n||ma}static empty(){return new Wi("","")}get isDefaultDatabase(){return this.database===ma}isEqual(e){return e instanceof Wi&&e.projectId===this.projectId&&e.database===this.database}}const gg="__type__",LT="__max__",Mo={mapValue:{}},_g="__vector__",ga="value";function Rr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ru(t)?4:FT(t)?9007199254740991:MT(t)?10:11:ue(28295,{value:t})}function Pn(t,e){if(t===e)return!0;const n=Rr(t);if(n!==Rr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return zi(t).isEqual(zi(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ar(s.timestampValue),c=Ar(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,i){return Sr(s.bytesValue).isEqual(Sr(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,i){return Je(s.geoPointValue.latitude)===Je(i.geoPointValue.latitude)&&Je(s.geoPointValue.longitude)===Je(i.geoPointValue.longitude)})(t,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return Je(s.integerValue)===Je(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Je(s.doubleValue),c=Je(i.doubleValue);return o===c?pa(o)===pa(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return Os(t.arrayValue.values||[],e.arrayValue.values||[],Pn);case 10:case 11:return(function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(Jf(o)!==Jf(c))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!Pn(o[l],c[l])))return!1;return!0})(t,e);default:return ue(52216,{left:t})}}function Ki(t,e){return(t.values||[]).find((n=>Pn(n,e)))!==void 0}function xs(t,e){if(t===e)return 0;const n=Rr(t),r=Rr(e);if(n!==r)return Ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ae(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const c=Je(i.integerValue||i.doubleValue),l=Je(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1})(t,e);case 3:return Zf(t.timestampValue,e.timestampValue);case 4:return Zf(zi(t),zi(e));case 5:return bl(t.stringValue,e.stringValue);case 6:return(function(i,o){const c=Sr(i),l=Sr(o);return c.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const c=i.split("/"),l=o.split("/");for(let u=0;u<c.length&&u<l.length;u++){const f=Ae(c[u],l[u]);if(f!==0)return f}return Ae(c.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const c=Ae(Je(i.latitude),Je(o.latitude));return c!==0?c:Ae(Je(i.longitude),Je(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return ed(t.arrayValue,e.arrayValue);case 10:return(function(i,o){const c=i.fields||{},l=o.fields||{},u=c[ga]?.arrayValue,f=l[ga]?.arrayValue,p=Ae(u?.values?.length||0,f?.values?.length||0);return p!==0?p:ed(u,f)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===Mo.mapValue&&o===Mo.mapValue)return 0;if(i===Mo.mapValue)return 1;if(o===Mo.mapValue)return-1;const c=i.fields||{},l=Object.keys(c),u=o.fields||{},f=Object.keys(u);l.sort(),f.sort();for(let p=0;p<l.length&&p<f.length;++p){const m=bl(l[p],f[p]);if(m!==0)return m;const _=xs(c[l[p]],u[f[p]]);if(_!==0)return _}return Ae(l.length,f.length)})(t.mapValue,e.mapValue);default:throw ue(23264,{he:n})}}function Zf(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ae(t,e);const n=Ar(t),r=Ar(e),s=Ae(n.seconds,r.seconds);return s!==0?s:Ae(n.nanos,r.nanos)}function ed(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=xs(n[s],r[s]);if(i)return i}return Ae(n.length,r.length)}function Ls(t){return Cl(t)}function Cl(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Ar(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Sr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return ae.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Cl(i);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Cl(n.fields[o])}`;return s+"}"})(t.mapValue):ue(61005,{value:t})}function zo(t){switch(Rr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ja(t);return e?16+zo(e):16;case 5:return 2*t.stringValue.length;case 6:return Sr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+zo(i)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return kr(r.fields,((i,o)=>{s+=i.length+zo(o)})),s})(t.mapValue);default:throw ue(13486,{value:t})}}function Pl(t){return!!t&&"integerValue"in t}function bu(t){return!!t&&"arrayValue"in t}function td(t){return!!t&&"nullValue"in t}function nd(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Wo(t){return!!t&&"mapValue"in t}function MT(t){return(t?.mapValue?.fields||{})[gg]?.stringValue===_g}function ki(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return kr(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=ki(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ki(t.arrayValue.values[n]);return e}return{...t}}function FT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===LT}class jt{constructor(e){this.value=e}static empty(){return new jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Wo(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ki(n)}setAll(e){let n=vt.emptyPath(),r={},s=[];e.forEach(((o,c)=>{if(!n.isImmediateParentOf(c)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=ki(o):s.push(c.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Wo(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Pn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Wo(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){kr(n,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new jt(ki(this.value))}}function yg(t){const e=[];return kr(t.fields,((n,r)=>{const s=new vt([n]);if(Wo(r)){const i=yg(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)})),new Gt(e)}class kt{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new kt(e,0,pe.min(),pe.min(),pe.min(),jt.empty(),0)}static newFoundDocument(e,n,r,s){return new kt(e,1,n,pe.min(),r,s,0)}static newNoDocument(e,n){return new kt(e,2,n,pe.min(),pe.min(),jt.empty(),0)}static newUnknownDocument(e,n){return new kt(e,3,n,pe.min(),pe.min(),jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class _a{constructor(e,n){this.position=e,this.inclusive=n}}function rd(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ae.comparator(ae.fromName(o.referenceValue),n.key):r=xs(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function sd(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Pn(t.position[n],e.position[n]))return!1;return!0}class ya{constructor(e,n="asc"){this.field=e,this.dir=n}}function UT(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class vg{}class rt extends vg{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new $T(e,n,r):n==="array-contains"?new HT(e,r):n==="in"?new zT(e,r):n==="not-in"?new WT(e,r):n==="array-contains-any"?new KT(e,r):new rt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new jT(e,r):new qT(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(xs(n,this.value)):n!==null&&Rr(this.value)===Rr(n)&&this.matchesComparison(xs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kn extends vg{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new kn(e,n)}matches(e){return Eg(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Eg(t){return t.op==="and"}function Ig(t){return BT(t)&&Eg(t)}function BT(t){for(const e of t.filters)if(e instanceof kn)return!1;return!0}function kl(t){if(t instanceof rt)return t.field.canonicalString()+t.op.toString()+Ls(t.value);if(Ig(t))return t.filters.map((e=>kl(e))).join(",");{const e=t.filters.map((n=>kl(n))).join(",");return`${t.op}(${e})`}}function wg(t,e){return t instanceof rt?(function(r,s){return s instanceof rt&&r.op===s.op&&r.field.isEqual(s.field)&&Pn(r.value,s.value)})(t,e):t instanceof kn?(function(r,s){return s instanceof kn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,o,c)=>i&&wg(o,s.filters[c])),!0):!1})(t,e):void ue(19439)}function Tg(t){return t instanceof rt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ls(n.value)}`})(t):t instanceof kn?(function(n){return n.op.toString()+" {"+n.getFilters().map(Tg).join(" ,")+"}"})(t):"Filter"}class $T extends rt{constructor(e,n,r){super(e,n,r),this.key=ae.fromName(r.referenceValue)}matches(e){const n=ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class jT extends rt{constructor(e,n){super(e,"in",n),this.keys=Ag("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class qT extends rt{constructor(e,n){super(e,"not-in",n),this.keys=Ag("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Ag(t,e){return(e.arrayValue?.values||[]).map((n=>ae.fromName(n.referenceValue)))}class HT extends rt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return bu(n)&&Ki(n.arrayValue,this.value)}}class zT extends rt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ki(this.value.arrayValue,n)}}class WT extends rt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ki(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ki(this.value.arrayValue,n)}}class KT extends rt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!bu(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Ki(this.value.arrayValue,r)))}}class GT{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.Te=null}}function id(t,e=null,n=[],r=[],s=null,i=null,o=null){return new GT(t,e,n,r,s,i,o)}function Cu(t){const e=me(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>kl(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),Ya(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Ls(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Ls(r))).join(",")),e.Te=n}return e.Te}function Pu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!UT(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!wg(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sd(t.startAt,e.startAt)&&sd(t.endAt,e.endAt)}function Nl(t){return ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Xa{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function QT(t,e,n,r,s,i,o,c){return new Xa(t,e,n,r,s,i,o,c)}function ku(t){return new Xa(t)}function od(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function YT(t){return t.collectionGroup!==null}function Ni(t){const e=me(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new it(vt.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(c=c.add(u.field))}))})),c})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new ya(i,r))})),n.has(vt.keyField().canonicalString())||e.Ie.push(new ya(vt.keyField(),r))}return e.Ie}function vn(t){const e=me(t);return e.Ee||(e.Ee=JT(e,Ni(t))),e.Ee}function JT(t,e){if(t.limitType==="F")return id(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new ya(s.field,i)}));const n=t.endAt?new _a(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new _a(t.startAt.position,t.startAt.inclusive):null;return id(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Dl(t,e,n){return new Xa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Za(t,e){return Pu(vn(t),vn(e))&&t.limitType===e.limitType}function Sg(t){return`${Cu(vn(t))}|lt:${t.limitType}`}function ys(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>Tg(s))).join(", ")}]`),Ya(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>Ls(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>Ls(s))).join(",")),`Target(${r})`})(vn(t))}; limitType=${t.limitType})`}function ec(t,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ae.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(t,e)&&(function(r,s){for(const i of Ni(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(o,c,l){const u=rd(o,c,l);return o.inclusive?u<=0:u<0})(r.startAt,Ni(r),s)||r.endAt&&!(function(o,c,l){const u=rd(o,c,l);return o.inclusive?u>=0:u>0})(r.endAt,Ni(r),s))})(t,e)}function XT(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Rg(t){return(e,n)=>{let r=!1;for(const s of Ni(t)){const i=ZT(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function ZT(t,e,n){const r=t.field.isKeyField()?ae.comparator(e.key,n.key):(function(i,o,c){const l=o.data.field(i),u=c.data.field(i);return l!==null&&u!==null?xs(l,u):ue(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ue(19790,{direction:t.dir})}}class rs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){kr(this.inner,((n,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return ug(this.inner)}size(){return this.innerSize}}const e0=new ze(ae.comparator);function Wn(){return e0}const bg=new ze(ae.comparator);function vi(...t){let e=bg;for(const n of t)e=e.insert(n.key,n);return e}function Cg(t){let e=bg;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function qr(){return Di()}function Pg(){return Di()}function Di(){return new rs((t=>t.toString()),((t,e)=>t.isEqual(e)))}const t0=new ze(ae.comparator),n0=new it(ae.comparator);function Se(...t){let e=n0;for(const n of t)e=e.add(n);return e}const r0=new it(Ae);function s0(){return r0}function Nu(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pa(e)?"-0":e}}function kg(t){return{integerValue:""+t}}function i0(t,e){return NT(e)?kg(e):Nu(t,e)}class tc{constructor(){this._=void 0}}function o0(t,e,n){return t instanceof va?(function(s,i){const o={fields:{[dg]:{stringValue:fg},[mg]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Ru(i)&&(i=Ja(i)),i&&(o.fields[pg]=i),{mapValue:o}})(n,e):t instanceof Gi?Dg(t,e):t instanceof Qi?Vg(t,e):(function(s,i){const o=Ng(s,i),c=ad(o)+ad(s.Ae);return Pl(o)&&Pl(s.Ae)?kg(c):Nu(s.serializer,c)})(t,e)}function a0(t,e,n){return t instanceof Gi?Dg(t,e):t instanceof Qi?Vg(t,e):n}function Ng(t,e){return t instanceof Ea?(function(r){return Pl(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class va extends tc{}class Gi extends tc{constructor(e){super(),this.elements=e}}function Dg(t,e){const n=Og(e);for(const r of t.elements)n.some((s=>Pn(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Qi extends tc{constructor(e){super(),this.elements=e}}function Vg(t,e){let n=Og(e);for(const r of t.elements)n=n.filter((s=>!Pn(s,r)));return{arrayValue:{values:n}}}class Ea extends tc{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function ad(t){return Je(t.integerValue||t.doubleValue)}function Og(t){return bu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function c0(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof Gi&&s instanceof Gi||r instanceof Qi&&s instanceof Qi?Os(r.elements,s.elements,Pn):r instanceof Ea&&s instanceof Ea?Pn(r.Ae,s.Ae):r instanceof va&&s instanceof va})(t.transform,e.transform)}class l0{constructor(e,n){this.version=e,this.transformResults=n}}class En{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new En}static exists(e){return new En(void 0,e)}static updateTime(e){return new En(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ko(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class nc{}function xg(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Mg(t.key,En.none()):new lo(t.key,t.data,En.none());{const n=t.data,r=jt.empty();let s=new it(vt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Nr(t.key,r,new Gt(s.toArray()),En.none())}}function u0(t,e,n){t instanceof lo?(function(s,i,o){const c=s.value.clone(),l=ld(s.fieldTransforms,i,o.transformResults);c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):t instanceof Nr?(function(s,i,o){if(!Ko(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=ld(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(Lg(s)),l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):(function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function Vi(t,e,n,r){return t instanceof lo?(function(i,o,c,l){if(!Ko(i.precondition,o))return c;const u=i.value.clone(),f=ud(i.fieldTransforms,l,o);return u.setAll(f),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(t,e,n,r):t instanceof Nr?(function(i,o,c,l){if(!Ko(i.precondition,o))return c;const u=ud(i.fieldTransforms,l,o),f=o.data;return f.setAll(Lg(i)),f.setAll(u),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((p=>p.field)))})(t,e,n,r):(function(i,o,c){return Ko(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,n)}function h0(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Ng(r.transform,s||null);i!=null&&(n===null&&(n=jt.empty()),n.set(r.field,i))}return n||null}function cd(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Os(r,s,((i,o)=>c0(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class lo extends nc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Nr extends nc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Lg(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function ld(t,e,n){const r=new Map;Ve(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,a0(o,c,n[s]))}return r}function ud(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,o0(i,o,e))}return r}class Mg extends nc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class f0 extends nc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class d0{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&u0(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Vi(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Vi(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Pg();return this.mutations.forEach((s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const l=xg(o,c);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(pe.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Se())}isEqual(e){return this.batchId===e.batchId&&Os(this.mutations,e.mutations,((n,r)=>cd(n,r)))&&Os(this.baseMutations,e.baseMutations,((n,r)=>cd(n,r)))}}class Du{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ve(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return t0})();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Du(e,n,r,s)}}class p0{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class m0{constructor(e,n){this.count=e,this.unchangedNames=n}}var Ze,be;function g0(t){switch(t){case j.OK:return ue(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return ue(15467,{code:t})}}function Fg(t){if(t===void 0)return zn("GRPC error has no .code"),j.UNKNOWN;switch(t){case Ze.OK:return j.OK;case Ze.CANCELLED:return j.CANCELLED;case Ze.UNKNOWN:return j.UNKNOWN;case Ze.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case Ze.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case Ze.INTERNAL:return j.INTERNAL;case Ze.UNAVAILABLE:return j.UNAVAILABLE;case Ze.UNAUTHENTICATED:return j.UNAUTHENTICATED;case Ze.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case Ze.NOT_FOUND:return j.NOT_FOUND;case Ze.ALREADY_EXISTS:return j.ALREADY_EXISTS;case Ze.PERMISSION_DENIED:return j.PERMISSION_DENIED;case Ze.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case Ze.ABORTED:return j.ABORTED;case Ze.OUT_OF_RANGE:return j.OUT_OF_RANGE;case Ze.UNIMPLEMENTED:return j.UNIMPLEMENTED;case Ze.DATA_LOSS:return j.DATA_LOSS;default:return ue(39323,{code:t})}}(be=Ze||(Ze={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";function _0(){return new TextEncoder}const y0=new vr([4294967295,4294967295],0);function hd(t){const e=_0().encode(t),n=new eg;return n.update(e),new Uint8Array(n.digest())}function fd(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new vr([n,r],0),new vr([s,i],0)]}class Vu{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ei(`Invalid padding: ${n}`);if(r<0)throw new Ei(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ei(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ei(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=vr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(vr.fromNumber(r)));return s.compare(y0)===1&&(s=new vr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=hd(e),[r,s]=fd(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Vu(i,s,n);return r.forEach((c=>o.insert(c))),o}insert(e){if(this.ge===0)return;const n=hd(e),[r,s]=fd(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ei extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class rc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,uo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new rc(pe.min(),s,new ze(Ae),Wn(),Se())}}class uo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new uo(r,n,Se(),Se(),Se())}}class Go{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Ug{constructor(e,n){this.targetId=e,this.Ce=n}}class Bg{constructor(e,n,r=It.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class dd{constructor(){this.ve=0,this.Fe=pd(),this.Me=It.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Se(),n=Se(),r=Se();return this.Fe.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ue(38017,{changeType:i})}})),new uo(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=pd()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ve(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class v0{constructor(e){this.Ge=e,this.ze=new Map,this.je=Wn(),this.Je=Fo(),this.He=Fo(),this.Ye=new ze(Ae)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ue(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Nl(i))if(r===0){const o=new ae(i.path);this.et(n,o,kt.newNoDocument(o,pe.min()))}else Ve(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),l=c?this.ct(c,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=Sr(r).toUint8Array()}catch(l){if(l instanceof hg)return Vs("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new Vu(o,s,i)}catch(l){return Vs(l instanceof Ei?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(n,i,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const c=this.ot(o);if(c){if(i.current&&Nl(c.target)){const l=new ae(c.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,kt.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}}));let r=Se();this.He.forEach(((i,o)=>{let c=!0;o.forEachWhile((l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const s=new rc(e,n,this.Ye,this.je,r);return this.je=Wn(),this.Je=Fo(),this.He=Fo(),this.Ye=new ze(Ae),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new dd,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new it(Ae),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new it(Ae),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new dd),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Fo(){return new ze(ae.comparator)}function pd(){return new ze(ae.comparator)}const E0={asc:"ASCENDING",desc:"DESCENDING"},I0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},w0={and:"AND",or:"OR"};class T0{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Vl(t,e){return t.useProto3Json||Ya(e)?e:{value:e}}function Ia(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $g(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function A0(t,e){return Ia(t,e.toTimestamp())}function In(t){return Ve(!!t,49232),pe.fromTimestamp((function(n){const r=Ar(n);return new Be(r.seconds,r.nanos)})(t))}function Ou(t,e){return Ol(t,e).canonicalString()}function Ol(t,e){const n=(function(s){return new qe(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function jg(t){const e=qe.fromString(t);return Ve(Kg(e),10190,{key:e.toString()}),e}function xl(t,e){return Ou(t.databaseId,e.path)}function Yc(t,e){const n=jg(e);if(n.get(1)!==t.databaseId.projectId)throw new re(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new re(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ae(Hg(n))}function qg(t,e){return Ou(t.databaseId,e)}function S0(t){const e=jg(t);return e.length===4?qe.emptyPath():Hg(e)}function Ll(t){return new qe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Hg(t){return Ve(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function md(t,e,n){return{name:xl(t,e),fields:n.value.mapValue.fields}}function R0(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ue(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(u,f){return u.useProto3Json?(Ve(f===void 0||typeof f=="string",58123),It.fromBase64String(f||"")):(Ve(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),It.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(u){const f=u.code===void 0?j.UNKNOWN:Fg(u.code);return new re(f,u.message||"")})(o);n=new Bg(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Yc(t,r.document.name),i=In(r.document.updateTime),o=r.document.createTime?In(r.document.createTime):pe.min(),c=new jt({mapValue:{fields:r.document.fields}}),l=kt.newFoundDocument(s,i,o,c),u=r.targetIds||[],f=r.removedTargetIds||[];n=new Go(u,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Yc(t,r.document),i=r.readTime?In(r.readTime):pe.min(),o=kt.newNoDocument(s,i),c=r.removedTargetIds||[];n=new Go([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Yc(t,r.document),i=r.removedTargetIds||[];n=new Go([],i,s,null)}else{if(!("filter"in e))return ue(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new m0(s,i),c=r.targetId;n=new Ug(c,o)}}return n}function b0(t,e){let n;if(e instanceof lo)n={update:md(t,e.key,e.value)};else if(e instanceof Mg)n={delete:xl(t,e.key)};else if(e instanceof Nr)n={update:md(t,e.key,e.data),updateMask:L0(e.fieldMask)};else{if(!(e instanceof f0))return ue(16599,{Vt:e.type});n={verify:xl(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(i,o){const c=o.transform;if(c instanceof va)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Gi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Qi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ea)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw ue(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:A0(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ue(27497)})(t,e.precondition)),n}function C0(t,e){return t&&t.length>0?(Ve(e!==void 0,14353),t.map((n=>(function(s,i){let o=s.updateTime?In(s.updateTime):In(i);return o.isEqual(pe.min())&&(o=In(i)),new l0(o,s.transformResults||[])})(n,e)))):[]}function P0(t,e){return{documents:[qg(t,e.path)]}}function k0(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=qg(t,s);const i=(function(u){if(u.length!==0)return Wg(kn.create(u,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(u){if(u.length!==0)return u.map((f=>(function(m){return{field:vs(m.field),direction:V0(m.dir)}})(f)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Vl(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:s}}function N0(t){let e=S0(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ve(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=(function(p){const m=zg(p);return m instanceof kn&&Ig(m)?m.getFilters():[m]})(n.where));let o=[];n.orderBy&&(o=(function(p){return p.map((m=>(function(C){return new ya(Es(C.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(m)))})(n.orderBy));let c=null;n.limit&&(c=(function(p){let m;return m=typeof p=="object"?p.value:p,Ya(m)?null:m})(n.limit));let l=null;n.startAt&&(l=(function(p){const m=!!p.before,_=p.values||[];return new _a(_,m)})(n.startAt));let u=null;return n.endAt&&(u=(function(p){const m=!p.before,_=p.values||[];return new _a(_,m)})(n.endAt)),QT(e,s,o,i,c,"F",l,u)}function D0(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function zg(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Es(n.unaryFilter.field);return rt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Es(n.unaryFilter.field);return rt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Es(n.unaryFilter.field);return rt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Es(n.unaryFilter.field);return rt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ue(61313);default:return ue(60726)}})(t):t.fieldFilter!==void 0?(function(n){return rt.create(Es(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ue(58110);default:return ue(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return kn.create(n.compositeFilter.filters.map((r=>zg(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ue(1026)}})(n.compositeFilter.op))})(t):ue(30097,{filter:t})}function V0(t){return E0[t]}function O0(t){return I0[t]}function x0(t){return w0[t]}function vs(t){return{fieldPath:t.canonicalString()}}function Es(t){return vt.fromServerFormat(t.fieldPath)}function Wg(t){return t instanceof rt?(function(n){if(n.op==="=="){if(nd(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NAN"}};if(td(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(nd(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NOT_NAN"}};if(td(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vs(n.field),op:O0(n.op),value:n.value}}})(t):t instanceof kn?(function(n){const r=n.getFilters().map((s=>Wg(s)));return r.length===1?r[0]:{compositeFilter:{op:x0(n.op),filters:r}}})(t):ue(54877,{filter:t})}function L0(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Kg(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class dr{constructor(e,n,r,s,i=pe.min(),o=pe.min(),c=It.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new dr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class M0{constructor(e){this.yt=e}}function F0(t){const e=N0({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Dl(e,e.limit,"L"):e}class U0{constructor(){this.Cn=new B0}addToCollectionParentIndex(e,n){return this.Cn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Tr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Tr.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class B0{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new it(qe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new it(qe.comparator)).toArray()}}const gd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Gg=41943040;class $t{static withCacheSize(e){return new $t(e,$t.DEFAULT_COLLECTION_PERCENTILE,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}$t.DEFAULT_COLLECTION_PERCENTILE=10,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$t.DEFAULT=new $t(Gg,$t.DEFAULT_COLLECTION_PERCENTILE,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$t.DISABLED=new $t(-1,0,0);class Ms{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ms(0)}static cr(){return new Ms(-1)}}const _d="LruGarbageCollector",$0=1048576;function yd([t,e],[n,r]){const s=Ae(t,n);return s===0?Ae(e,r):s}class j0{constructor(e){this.Ir=e,this.buffer=new it(yd),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();yd(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class q0{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ee(_d,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){zs(n)?ee(_d,"Ignoring IndexedDB error during garbage collection: ",n):await Hs(n)}await this.Vr(3e5)}))}}class H0{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return U.resolve(Qa.ce);const r=new j0(n);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(gd)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gd):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,c,l,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s)))).next((p=>(r=p,c=Date.now(),this.removeTargets(e,r,n)))).next((p=>(i=p,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((p=>(u=Date.now(),_s()<=Te.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(c-o)+`ms
	Removed ${i} targets in `+(l-c)+`ms
	Removed ${p} documents in `+(u-l)+`ms
Total Duration: ${u-f}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p}))))}}function z0(t,e){return new H0(t,e)}class W0{constructor(){this.changes=new rs((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,kt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class K0{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class G0{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&Vi(r.mutation,s,Gt.empty(),Be.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Se()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Se()){const s=qr();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((i=>{let o=vi();return i.forEach(((c,l)=>{o=o.insert(c,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=qr();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Se())))}populateOverlays(e,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((o,c)=>{n.set(o,c)}))}))}computeViews(e,n,r,s){let i=Wn();const o=Di(),c=(function(){return Di()})();return n.forEach(((l,u)=>{const f=r.get(u.key);s.has(u.key)&&(f===void 0||f.mutation instanceof Nr)?i=i.insert(u.key,u):f!==void 0?(o.set(u.key,f.mutation.getFieldMask()),Vi(f.mutation,u,f.mutation.getFieldMask(),Be.now())):o.set(u.key,Gt.empty())})),this.recalculateAndSaveOverlays(e,i).next((l=>(l.forEach(((u,f)=>o.set(u,f))),n.forEach(((u,f)=>c.set(u,new K0(f,o.get(u)??null)))),c)))}recalculateAndSaveOverlays(e,n){const r=Di();let s=new ze(((o,c)=>o-c)),i=Se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const c of o)c.keys().forEach((l=>{const u=n.get(l);if(u===null)return;let f=r.get(l)||Gt.empty();f=c.applyToLocalView(u,f),r.set(l,f);const p=(s.get(c.batchId)||Se()).add(l);s=s.insert(c.batchId,p)}))})).next((()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const l=c.getNext(),u=l.key,f=l.value,p=Pg();f.forEach((m=>{if(!i.has(m)){const _=xg(n.get(m),r.get(m));_!==null&&p.set(m,_),i=i.add(m)}})),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return U.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(o){return ae.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):YT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(qr());let c=Hi,l=i;return o.next((u=>U.forEach(u,((f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),i.get(f)?U.resolve():this.remoteDocumentCache.getEntry(e,f).next((m=>{l=l.insert(f,m)}))))).next((()=>this.populateOverlays(e,u,i))).next((()=>this.computeViews(e,l,u,Se()))).next((f=>({batchId:c,changes:Cg(f)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ae(n)).next((r=>{let s=vi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=vi();return this.indexManager.getCollectionParents(e,i).next((c=>U.forEach(c,(l=>{const u=(function(p,m){return new Xa(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next((f=>{f.forEach(((p,m)=>{o=o.insert(p,m)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s)))).next((o=>{i.forEach(((l,u)=>{const f=u.getKey();o.get(f)===null&&(o=o.insert(f,kt.newInvalidDocument(f)))}));let c=vi();return o.forEach(((l,u)=>{const f=i.get(l);f!==void 0&&Vi(f.mutation,u,Gt.empty(),Be.now()),ec(n,u)&&(c=c.insert(l,u))})),c}))}}class Q0{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return U.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:In(s.createTime)}})(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:F0(s.bundledQuery),readTime:In(s.readTime)}})(n)),U.resolve()}}class Y0{constructor(){this.overlays=new ze(ae.comparator),this.qr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=qr();return U.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,i)=>{this.St(e,n,i)})),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=qr(),i=n.length+1,o=new ae(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const l=c.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ze(((u,f)=>u-f));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let f=i.get(u.largestBatchId);f===null&&(f=qr(),i=i.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const c=qr(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,f)=>c.set(u,f))),!(c.size()>=s)););return U.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new p0(n,r));let i=this.qr.get(n);i===void 0&&(i=Se(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}class J0{constructor(){this.sessionToken=It.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}class xu{constructor(){this.Qr=new it(ut.$r),this.Ur=new it(ut.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new ut(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new ut(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new ae(new qe([])),r=new ut(n,e),s=new ut(n,e+1),i=[];return this.Ur.forEachInRange([r,s],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ae(new qe([])),r=new ut(n,e),s=new ut(n,e+1);let i=Se();return this.Ur.forEachInRange([r,s],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new ut(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ut{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ae.comparator(e.key,n.key)||Ae(e.Yr,n.Yr)}static Kr(e,n){return Ae(e.Yr,n.Yr)||ae.comparator(e.key,n.key)}}class X0{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new it(ut.$r)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new d0(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.Zr=this.Zr.add(new ut(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?Su:this.tr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ut(n,0),s=new ut(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],(o=>{const c=this.Xr(o.Yr);i.push(c)})),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new it(Ae);return n.forEach((s=>{const i=new ut(s,0),o=new ut(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(c=>{r=r.add(c.Yr)}))})),U.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ae.isDocumentKey(i)||(i=i.child(""));const o=new ut(new ae(i),0);let c=new it(Ae);return this.Zr.forEachWhile((l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(c=c.add(l.Yr)),!0)}),o),U.resolve(this.ti(c))}ti(e){const n=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){Ve(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return U.forEach(n.mutations,(s=>{const i=new ut(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new ut(n,0),s=this.Zr.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Z0{constructor(e){this.ri=e,this.docs=(function(){return new ze(ae.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():kt.newInvalidDocument(n))}getEntries(e,n){let r=Wn();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():kt.newInvalidDocument(s))})),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Wn();const o=n.path,c=new ae(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){const{key:u,value:{document:f}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||bT(RT(f),r)<=0||(s.has(f.key)||ec(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ue(9500)}ii(e,n){return U.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new eA(this)}getSize(e){return U.resolve(this.size)}}class eA extends W0{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),U.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class tA{constructor(e){this.persistence=e,this.si=new rs((n=>Cu(n)),Pu),this.lastRemoteSnapshotVersion=pe.min(),this.highestTargetId=0,this.oi=0,this._i=new xu,this.targetCount=0,this.ai=Ms.ur()}forEachTarget(e,n){return this.si.forEach(((r,s)=>n(s))),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),U.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ms(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Pr(n),U.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach(((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),U.waitFor(i).next((()=>s))}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((o=>{i.push(s.markPotentiallyOrphaned(e,o))})),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this._i.containsKey(n))}}class Qg{constructor(e,n){this.ui={},this.overlays={},this.ci=new Qa(0),this.li=!1,this.li=!0,this.hi=new J0,this.referenceDelegate=e(this),this.Pi=new tA(this),this.indexManager=new U0,this.remoteDocumentCache=(function(s){return new Z0(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new M0(n),this.Ii=new Q0(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Y0,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new X0(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ee("MemoryPersistence","Starting transaction:",e);const s=new nA(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ai(e,n){return U.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class nA extends PT{constructor(e){super(),this.currentSequenceNumber=e}}class Lu{constructor(e){this.persistence=e,this.Ri=new xu,this.Vi=null}static mi(e){return new Lu(e)}get fi(){if(this.Vi)return this.Vi;throw ue(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),U.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.fi,(r=>{const s=ae.fromPath(r);return this.gi(e,s).next((i=>{i||n.removeEntry(s,pe.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return U.or([()=>U.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class wa{constructor(e,n){this.persistence=e,this.pi=new rs((r=>DT(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=z0(this,n)}static mi(e,n){return new wa(e,n)}Ei(){}di(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return U.forEach(this.pi,((r,s)=>this.br(e,r,s).next((i=>i?U.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,(o=>this.br(e,o,n).next((c=>{c||(r++,i.removeEntry(o,pe.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=zo(e.data.value)),n}br(e,n,r){return U.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return U.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Mu{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Se(),s=Se();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Mu(e,n.fromCache,r,s)}}class rA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class sA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return KI()?8:kT(Vt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,n,s,r).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new rA;return this.Ss(e,n,o).next((c=>{if(i.result=c,this.Vs)return this.bs(e,n,o,c.size)}))})).next((()=>i.result))}bs(e,n,r,s){return r.documentReadCount<this.fs?(_s()<=Te.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",ys(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),U.resolve()):(_s()<=Te.DEBUG&&ee("QueryEngine","Query:",ys(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(_s()<=Te.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",ys(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vn(n))):U.resolve())}ys(e,n){if(od(n))return U.resolve(null);let r=vn(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=Dl(n,null,"F"),r=vn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const o=Se(...i);return this.ps.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,r).next((l=>{const u=this.Ds(n,c);return this.Cs(n,u,o,l.readTime)?this.ys(e,Dl(n,null,"F")):this.vs(e,u,n,l)}))))})))))}ws(e,n,r,s){return od(n)||s.isEqual(pe.min())?U.resolve(null):this.ps.getDocuments(e,r).next((i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?U.resolve(null):(_s()<=Te.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ys(n)),this.vs(e,o,n,ST(s,Hi)).next((c=>c)))}))}Ds(e,n){let r=new it(Rg(e));return n.forEach(((s,i)=>{ec(e,i)&&(r=r.add(i))})),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return _s()<=Te.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",ys(n)),this.ps.getDocumentsMatchingQuery(e,n,Tr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}const Fu="LocalStore",iA=3e8;class oA{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new ze(Ae),this.xs=new rs((i=>Cu(i)),Pu),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new G0(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function aA(t,e,n,r){return new oA(t,e,n,r)}async function Yg(t,e){const n=me(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const o=[],c=[];let l=Se();for(const u of s){o.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}for(const u of i){c.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}return n.localDocuments.getDocuments(r,l).next((u=>({Ls:u,removedBatchIds:o,addedBatchIds:c})))}))}))}function cA(t,e){const n=me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,l,u,f){const p=u.batch,m=p.keys();let _=U.resolve();return m.forEach((C=>{_=_.next((()=>f.getEntry(l,C))).next((D=>{const V=u.docVersions.get(C);Ve(V!==null,48541),D.version.compareTo(V)<0&&(p.applyToRemoteDocument(D,u),D.isValidDocument()&&(D.setReadTime(u.commitVersion),f.addEntry(D)))}))})),_.next((()=>c.mutationQueue.removeMutationBatch(l,p)))})(n,r,e,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let l=Se();for(let u=0;u<c.mutationResults.length;++u)c.mutationResults[u].transformResults.length>0&&(l=l.add(c.batch.mutations[u].key));return l})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function Jg(t){const e=me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function lA(t,e){const n=me(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const c=[];e.targetChanges.forEach(((f,p)=>{const m=s.get(p);if(!m)return;c.push(n.Pi.removeMatchingKeys(i,f.removedDocuments,p).next((()=>n.Pi.addMatchingKeys(i,f.addedDocuments,p))));let _=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(It.EMPTY_BYTE_STRING,pe.min()).withLastLimboFreeSnapshotVersion(pe.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,r)),s=s.insert(p,_),(function(D,V,H){return D.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=iA?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(m,_,f)&&c.push(n.Pi.updateTargetData(i,_))}));let l=Wn(),u=Se();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))})),c.push(uA(i,o,e.documentUpdates).next((f=>{l=f.ks,u=f.qs}))),!r.isEqual(pe.min())){const f=n.Pi.getLastRemoteSnapshotVersion(i).next((p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r)));c.push(f)}return U.waitFor(c).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,l,u))).next((()=>l))})).then((i=>(n.Ms=s,i)))}function uA(t,e,n){let r=Se(),s=Se();return n.forEach((i=>r=r.add(i))),e.getEntries(t,r).next((i=>{let o=Wn();return n.forEach(((c,l)=>{const u=i.get(c);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(c)),l.isNoDocument()&&l.version.isEqual(pe.min())?(e.removeEntry(c,l.readTime),o=o.insert(c,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(c,l)):ee(Fu,"Ignoring outdated watch update for ",c,". Current version:",u.version," Watch version:",l.version)})),{ks:o,qs:s}}))}function hA(t,e){const n=me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Su),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function fA(t,e){const n=me(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Pi.getTargetData(r,e).next((i=>i?(s=i,U.resolve(s)):n.Pi.allocateTargetId(r).next((o=>(s=new dr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Ml(t,e,n){const r=me(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(o=>r.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!zs(o))throw o;ee(Fu,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function vd(t,e,n){const r=me(t);let s=pe.min(),i=Se();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,u,f){const p=me(l),m=p.xs.get(f);return m!==void 0?U.resolve(p.Ms.get(m)):p.Pi.getTargetData(u,f)})(r,o,vn(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next((l=>{i=l}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:pe.min(),n?i:Se()))).next((c=>(dA(r,XT(e),c),{documents:c,Qs:i})))))}function dA(t,e,n){let r=t.Os.get(e)||pe.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),t.Os.set(e,r)}class Ed{constructor(){this.activeTargetIds=s0()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pA{constructor(){this.Mo=new Ed,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ed,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class mA{Oo(e){}shutdown(){}}const Id="ConnectivityMonitor";class wd{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ee(Id,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ee(Id,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Uo=null;function Fl(){return Uo===null?Uo=(function(){return 268435456+Math.round(2147483648*Math.random())})():Uo++,"0x"+Uo.toString(16)}const Jc="RestConnection",gA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _A{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===ma?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Fl(),c=this.zo(e,n.toUriEncodedString());ee(Jc,`Sending RPC '${e}' ${o}:`,c,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:u}=new URL(c),f=$s(u);return this.Jo(e,c,l,r,f).then((p=>(ee(Jc,`Received RPC '${e}' ${o}: `,p),p)),(p=>{throw Vs(Jc,`RPC '${e}' ${o} failed with error: `,p,"url: ",c,"request:",r),p}))}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+qs})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>e[i]=s)),r&&r.headers.forEach(((s,i)=>e[i]=s))}zo(e,n){const r=gA[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class yA{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Rt="WebChannelConnection";class vA extends _A{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Fl();return new Promise(((c,l)=>{const u=new tg;u.setWithCredentials(!0),u.listenOnce(ng.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case Ho.NO_ERROR:const p=u.getResponseJson();ee(Rt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),c(p);break;case Ho.TIMEOUT:ee(Rt,`RPC '${e}' ${o} timed out`),l(new re(j.DEADLINE_EXCEEDED,"Request time out"));break;case Ho.HTTP_ERROR:const m=u.getStatus();if(ee(Rt,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const C=_?.error;if(C&&C.status&&C.message){const D=(function(H){const N=H.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(N)>=0?N:j.UNKNOWN})(C.status);l(new re(D,C.message))}else l(new re(j.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new re(j.UNAVAILABLE,"Connection failed."));break;default:ue(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{ee(Rt,`RPC '${e}' ${o} completed.`)}}));const f=JSON.stringify(s);ee(Rt,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",f,r,15)}))}T_(e,n,r){const s=Fl(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ig(),c=sg(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const f=i.join("");ee(Rt,`Creating RPC '${e}' stream ${s}: ${f}`,l);const p=o.createWebChannel(f,l);this.I_(p);let m=!1,_=!1;const C=new yA({Yo:V=>{_?ee(Rt,`Not sending because RPC '${e}' stream ${s} is closed:`,V):(m||(ee(Rt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),m=!0),ee(Rt,`RPC '${e}' stream ${s} sending:`,V),p.send(V))},Zo:()=>p.close()}),D=(V,H,N)=>{V.listen(H,(x=>{try{N(x)}catch(F){setTimeout((()=>{throw F}),0)}}))};return D(p,yi.EventType.OPEN,(()=>{_||(ee(Rt,`RPC '${e}' stream ${s} transport opened.`),C.o_())})),D(p,yi.EventType.CLOSE,(()=>{_||(_=!0,ee(Rt,`RPC '${e}' stream ${s} transport closed`),C.a_(),this.E_(p))})),D(p,yi.EventType.ERROR,(V=>{_||(_=!0,Vs(Rt,`RPC '${e}' stream ${s} transport errored. Name:`,V.name,"Message:",V.message),C.a_(new re(j.UNAVAILABLE,"The operation could not be completed")))})),D(p,yi.EventType.MESSAGE,(V=>{if(!_){const H=V.data[0];Ve(!!H,16349);const N=H,x=N?.error||N[0]?.error;if(x){ee(Rt,`RPC '${e}' stream ${s} received error:`,x);const F=x.status;let te=(function(y){const v=Ze[y];if(v!==void 0)return Fg(v)})(F),he=x.message;te===void 0&&(te=j.INTERNAL,he="Unknown error status: "+F+" with message "+x.message),_=!0,C.a_(new re(te,he)),p.close()}else ee(Rt,`RPC '${e}' stream ${s} received:`,H),C.u_(H)}})),D(c,rg.STAT_EVENT,(V=>{V.stat===Rl.PROXY?ee(Rt,`RPC '${e}' stream ${s} detected buffering proxy`):V.stat===Rl.NOPROXY&&ee(Rt,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{C.__()}),0),C}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Xc(){return typeof document<"u"?document:null}function sc(t){return new T0(t,!0)}class Xg{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&ee("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Td="PersistentStream";class Zg{constructor(e,n,r,s,i,o,c,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Xg(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(zn(n.toString()),zn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new re(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ee(Td,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ee(Td,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class EA extends Zg{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=R0(this.serializer,e),r=(function(i){if(!("targetChange"in i))return pe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?pe.min():o.readTime?In(o.readTime):pe.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Ll(this.serializer),n.addTarget=(function(i,o){let c;const l=o.target;if(c=Nl(l)?{documents:P0(i,l)}:{query:k0(i,l).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=$g(i,o.resumeToken);const u=Vl(i,o.expectedCount);u!==null&&(c.expectedCount=u)}else if(o.snapshotVersion.compareTo(pe.min())>0){c.readTime=Ia(i,o.snapshotVersion.toTimestamp());const u=Vl(i,o.expectedCount);u!==null&&(c.expectedCount=u)}return c})(this.serializer,e);const r=D0(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Ll(this.serializer),n.removeTarget=e,this.q_(n)}}class IA extends Zg{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=C0(e.writeResults,e.commitTime),r=In(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Ll(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>b0(this.serializer,r)))};this.q_(n)}}class wA{}class TA extends wA{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new re(j.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,Ol(n,r),s,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new re(j.UNKNOWN,i.toString())}))}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Ho(e,Ol(n,r),s,o,c,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new re(j.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class AA{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(zn(n),this.aa=!1):ee("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const es="RemoteStore";class SA{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{ss(this)&&(ee(es,"Restarting streams for network reachability change."),await(async function(l){const u=me(l);u.Ea.add(4),await ho(u),u.Ra.set("Unknown"),u.Ea.delete(4),await ic(u)})(this))}))})),this.Ra=new AA(r,s)}}async function ic(t){if(ss(t))for(const e of t.da)await e(!0)}async function ho(t){for(const e of t.da)await e(!1)}function e_(t,e){const n=me(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),ju(n)?$u(n):Ws(n).O_()&&Bu(n,e))}function Uu(t,e){const n=me(t),r=Ws(n);n.Ia.delete(e),r.O_()&&t_(n,e),n.Ia.size===0&&(r.O_()?r.L_():ss(n)&&n.Ra.set("Unknown"))}function Bu(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ws(t).Y_(e)}function t_(t,e){t.Va.Ue(e),Ws(t).Z_(e)}function $u(t){t.Va=new v0({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ws(t).start(),t.Ra.ua()}function ju(t){return ss(t)&&!Ws(t).x_()&&t.Ia.size>0}function ss(t){return me(t).Ea.size===0}function n_(t){t.Va=void 0}async function RA(t){t.Ra.set("Online")}async function bA(t){t.Ia.forEach(((e,n)=>{Bu(t,e)}))}async function CA(t,e){n_(t),ju(t)?(t.Ra.ha(e),$u(t)):t.Ra.set("Unknown")}async function PA(t,e,n){if(t.Ra.set("Online"),e instanceof Bg&&e.state===2&&e.cause)try{await(async function(s,i){const o=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.Ia.delete(c),s.Va.removeTarget(c))})(t,e)}catch(r){ee(es,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ta(t,r)}else if(e instanceof Go?t.Va.Ze(e):e instanceof Ug?t.Va.st(e):t.Va.tt(e),!n.isEqual(pe.min()))try{const r=await Jg(t.localStore);n.compareTo(r)>=0&&await(function(i,o){const c=i.Va.Tt(o);return c.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const f=i.Ia.get(u);f&&i.Ia.set(u,f.withResumeToken(l.resumeToken,o))}})),c.targetMismatches.forEach(((l,u)=>{const f=i.Ia.get(l);if(!f)return;i.Ia.set(l,f.withResumeToken(It.EMPTY_BYTE_STRING,f.snapshotVersion)),t_(i,l);const p=new dr(f.target,l,u,f.sequenceNumber);Bu(i,p)})),i.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(r){ee(es,"Failed to raise snapshot:",r),await Ta(t,r)}}async function Ta(t,e,n){if(!zs(e))throw e;t.Ea.add(1),await ho(t),t.Ra.set("Offline"),n||(n=()=>Jg(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ee(es,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await ic(t)}))}function r_(t,e){return e().catch((n=>Ta(t,n,e)))}async function oc(t){const e=me(t),n=br(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Su;for(;kA(e);)try{const s=await hA(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,NA(e,s)}catch(s){await Ta(e,s)}s_(e)&&i_(e)}function kA(t){return ss(t)&&t.Ta.length<10}function NA(t,e){t.Ta.push(e);const n=br(t);n.O_()&&n.X_&&n.ea(e.mutations)}function s_(t){return ss(t)&&!br(t).x_()&&t.Ta.length>0}function i_(t){br(t).start()}async function DA(t){br(t).ra()}async function VA(t){const e=br(t);for(const n of t.Ta)e.ea(n.mutations)}async function OA(t,e,n){const r=t.Ta.shift(),s=Du.from(r,e,n);await r_(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await oc(t)}async function xA(t,e){e&&br(t).X_&&await(async function(r,s){if((function(o){return g0(o)&&o!==j.ABORTED})(s.code)){const i=r.Ta.shift();br(r).B_(),await r_(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await oc(r)}})(t,e),s_(t)&&i_(t)}async function Ad(t,e){const n=me(t);n.asyncQueue.verifyOperationInProgress(),ee(es,"RemoteStore received new credentials");const r=ss(n);n.Ea.add(3),await ho(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ic(n)}async function LA(t,e){const n=me(t);e?(n.Ea.delete(2),await ic(n)):e||(n.Ea.add(2),await ho(n),n.Ra.set("Unknown"))}function Ws(t){return t.ma||(t.ma=(function(n,r,s){const i=me(n);return i.sa(),new EA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:RA.bind(null,t),t_:bA.bind(null,t),r_:CA.bind(null,t),H_:PA.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),ju(t)?$u(t):t.Ra.set("Unknown")):(await t.ma.stop(),n_(t))}))),t.ma}function br(t){return t.fa||(t.fa=(function(n,r,s){const i=me(n);return i.sa(),new IA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:DA.bind(null,t),r_:xA.bind(null,t),ta:VA.bind(null,t),na:OA.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await oc(t)):(await t.fa.stop(),t.Ta.length>0&&(ee(es,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class qu{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new qu(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hu(t,e){if(zn("AsyncQueue",`${e}: ${t}`),zs(t))return new re(j.UNAVAILABLE,`${e}: ${t}`);throw t}class bs{static emptySet(e){return new bs(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ae.comparator(n.key,r.key):(n,r)=>ae.comparator(n.key,r.key),this.keyedMap=vi(),this.sortedSet=new ze(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof bs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new bs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class Sd{constructor(){this.ga=new ze(ae.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ue(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Fs{constructor(e,n,r,s,i,o,c,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach((c=>{o.push({type:0,doc:c})})),new Fs(e,n,bs.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Za(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}class MA{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class FA{constructor(){this.queries=Rd(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=me(n),i=s.queries;s.queries=Rd(),i.forEach(((o,c)=>{for(const l of c.Sa)l.onError(r)}))})(this,new re(j.ABORTED,"Firestore shutting down"))}}function Rd(){return new rs((t=>Sg(t)),Za)}async function UA(t,e){const n=me(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new MA,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=Hu(o,`Initialization of query '${ys(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&zu(n)}async function BA(t,e){const n=me(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function $A(t,e){const n=me(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.Sa)c.Fa(s)&&(r=!0);o.wa=s}}r&&zu(n)}function jA(t,e,n){const r=me(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function zu(t){t.Ca.forEach((e=>{e.next()}))}var Ul,bd;(bd=Ul||(Ul={})).Ma="default",bd.Cache="cache";class qA{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Fs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Fs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ul.Cache}}class o_{constructor(e){this.key=e}}class a_{constructor(e){this.key=e}}class HA{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Se(),this.mutatedKeys=Se(),this.eu=Rg(e),this.tu=new bs(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Sd,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((f,p)=>{const m=s.get(f),_=ec(this.query,p)?p:null,C=!!m&&this.mutatedKeys.has(m.key),D=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let V=!1;m&&_?m.data.isEqual(_.data)?C!==D&&(r.track({type:3,doc:_}),V=!0):this.su(m,_)||(r.track({type:2,doc:_}),V=!0,(l&&this.eu(_,l)>0||u&&this.eu(_,u)<0)&&(c=!0)):!m&&_?(r.track({type:0,doc:_}),V=!0):m&&!_&&(r.track({type:1,doc:m}),V=!0,(l||u)&&(c=!0)),V&&(_?(o=o.add(_),i=D?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{tu:o,iu:r,Cs:c,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((f,p)=>(function(_,C){const D=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue(20277,{Rt:V})}};return D(_)-D(C)})(f.type,p.type)||this.eu(f.doc,p.doc))),this.ou(r),s=s??!1;const c=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new Fs(this.query,e.tu,i,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Sd,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Se(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new a_(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new o_(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Se();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Fs.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Wu="SyncEngine";class zA{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class WA{constructor(e){this.key=e,this.hu=!1}}class KA{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new rs((c=>Sg(c)),Za),this.Iu=new Map,this.Eu=new Set,this.du=new ze(ae.comparator),this.Au=new Map,this.Ru=new xu,this.Vu={},this.mu=new Map,this.fu=Ms.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function GA(t,e,n=!0){const r=d_(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await c_(r,e,n,!0),s}async function QA(t,e){const n=d_(t);await c_(n,e,!0,!1)}async function c_(t,e,n,r){const s=await fA(t.localStore,vn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await YA(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&e_(t.remoteStore,s),c}async function YA(t,e,n,r,s){t.pu=(p,m,_)=>(async function(D,V,H,N){let x=V.view.ru(H);x.Cs&&(x=await vd(D.localStore,V.query,!1).then((({documents:T})=>V.view.ru(T,x))));const F=N&&N.targetChanges.get(V.targetId),te=N&&N.targetMismatches.get(V.targetId)!=null,he=V.view.applyChanges(x,D.isPrimaryClient,F,te);return Pd(D,V.targetId,he.au),he.snapshot})(t,p,m,_);const i=await vd(t.localStore,e,!0),o=new HA(e,i.Qs),c=o.ru(i.documents),l=uo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(c,t.isPrimaryClient,l);Pd(t,n,u.au);const f=new zA(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function JA(t,e,n){const r=me(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((o=>!Za(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ml(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Uu(r.remoteStore,s.targetId),Bl(r,s.targetId)})).catch(Hs)):(Bl(r,s.targetId),await Ml(r.localStore,s.targetId,!0))}async function XA(t,e){const n=me(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Uu(n.remoteStore,r.targetId))}async function ZA(t,e,n){const r=o1(t);try{const s=await(function(o,c){const l=me(o),u=Be.now(),f=c.reduce(((_,C)=>_.add(C.key)),Se());let p,m;return l.persistence.runTransaction("Locally write mutations","readwrite",(_=>{let C=Wn(),D=Se();return l.Ns.getEntries(_,f).next((V=>{C=V,C.forEach(((H,N)=>{N.isValidDocument()||(D=D.add(H))}))})).next((()=>l.localDocuments.getOverlayedDocuments(_,C))).next((V=>{p=V;const H=[];for(const N of c){const x=h0(N,p.get(N.key).overlayedDocument);x!=null&&H.push(new Nr(N.key,x,yg(x.value.mapValue),En.exists(!0)))}return l.mutationQueue.addMutationBatch(_,u,H,c)})).next((V=>{m=V;const H=V.applyToLocalDocumentSet(p,D);return l.documentOverlayCache.saveOverlays(_,V.batchId,H)}))})).then((()=>({batchId:m.batchId,changes:Cg(p)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(o,c,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new ze(Ae)),u=u.insert(c,l),o.Vu[o.currentUser.toKey()]=u})(r,s.batchId,n),await fo(r,s.changes),await oc(r.remoteStore)}catch(s){const i=Hu(s,"Failed to persist write");n.reject(i)}}async function l_(t,e){const n=me(t);try{const r=await lA(n.localStore,e);e.targetChanges.forEach(((s,i)=>{const o=n.Au.get(i);o&&(Ve(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Ve(o.hu,14607):s.removedDocuments.size>0&&(Ve(o.hu,42227),o.hu=!1))})),await fo(n,r,e)}catch(r){await Hs(r)}}function Cd(t,e,n){const r=me(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((i,o)=>{const c=o.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(o,c){const l=me(o);l.onlineState=c;let u=!1;l.queries.forEach(((f,p)=>{for(const m of p.Sa)m.va(c)&&(u=!0)})),u&&zu(l)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function e1(t,e,n){const r=me(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new ze(ae.comparator);o=o.insert(i,kt.newNoDocument(i,pe.min()));const c=Se().add(i),l=new rc(pe.min(),new Map,new ze(Ae),o,c);await l_(r,l),r.du=r.du.remove(i),r.Au.delete(e),Ku(r)}else await Ml(r.localStore,e,!1).then((()=>Bl(r,e,n))).catch(Hs)}async function t1(t,e){const n=me(t),r=e.batch.batchId;try{const s=await cA(n.localStore,e);h_(n,r,null),u_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await fo(n,s)}catch(s){await Hs(s)}}async function n1(t,e,n){const r=me(t);try{const s=await(function(o,c){const l=me(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let f;return l.mutationQueue.lookupMutationBatch(u,c).next((p=>(Ve(p!==null,37113),f=p.keys(),l.mutationQueue.removeMutationBatch(u,p)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,f,c))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f))).next((()=>l.localDocuments.getDocuments(u,f)))}))})(r.localStore,e);h_(r,e,n),u_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await fo(r,s)}catch(s){await Hs(s)}}function u_(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function h_(t,e,n){const r=me(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Bl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||f_(t,r)}))}function f_(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Uu(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Ku(t))}function Pd(t,e,n){for(const r of n)r instanceof o_?(t.Ru.addReference(r.key,e),r1(t,r)):r instanceof a_?(ee(Wu,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||f_(t,r.key)):ue(19791,{wu:r})}function r1(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ee(Wu,"New document in limbo: "+n),t.Eu.add(r),Ku(t))}function Ku(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ae(qe.fromString(e)),r=t.fu.next();t.Au.set(r,new WA(n)),t.du=t.du.insert(n,r),e_(t.remoteStore,new dr(vn(ku(n.path)),r,"TargetPurposeLimboResolution",Qa.ce))}}async function fo(t,e,n){const r=me(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,l)=>{o.push(r.pu(l,e,n).then((u=>{if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:n?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){s.push(u);const f=Mu.As(l.targetId,u);i.push(f)}})))})),await Promise.all(o),r.Pu.H_(s),await(async function(l,u){const f=me(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>U.forEach(u,(m=>U.forEach(m.Es,(_=>f.persistence.referenceDelegate.addReference(p,m.targetId,_))).next((()=>U.forEach(m.ds,(_=>f.persistence.referenceDelegate.removeReference(p,m.targetId,_)))))))))}catch(p){if(!zs(p))throw p;ee(Fu,"Failed to update sequence numbers: "+p)}for(const p of u){const m=p.targetId;if(!p.fromCache){const _=f.Ms.get(m),C=_.snapshotVersion,D=_.withLastLimboFreeSnapshotVersion(C);f.Ms=f.Ms.insert(m,D)}}})(r.localStore,i))}async function s1(t,e){const n=me(t);if(!n.currentUser.isEqual(e)){ee(Wu,"User change. New user:",e.toKey());const r=await Yg(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((c=>{c.forEach((l=>{l.reject(new re(j.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await fo(n,r.Ls)}}function i1(t,e){const n=me(t),r=n.Au.get(e);if(r&&r.hu)return Se().add(r.key);{let s=Se();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const c=n.Tu.get(o);s=s.unionWith(c.view.nu)}return s}}function d_(t){const e=me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=l_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=i1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=e1.bind(null,e),e.Pu.H_=$A.bind(null,e.eventManager),e.Pu.yu=jA.bind(null,e.eventManager),e}function o1(t){const e=me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=t1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=n1.bind(null,e),e}class Aa{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return aA(this.persistence,new sA,e.initialUser,this.serializer)}Cu(e){return new Qg(Lu.mi,this.serializer)}Du(e){return new pA}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Aa.provider={build:()=>new Aa};class a1 extends Aa{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ve(this.persistence.referenceDelegate instanceof wa,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new q0(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?$t.withCacheSize(this.cacheSizeBytes):$t.DEFAULT;return new Qg((r=>wa.mi(r,n)),this.serializer)}}class $l{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Cd(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=s1.bind(null,this.syncEngine),await LA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new FA})()}createDatastore(e){const n=sc(e.databaseInfo.databaseId),r=(function(i){return new vA(i)})(e.databaseInfo);return(function(i,o,c,l){return new TA(i,o,c,l)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,i,o,c){return new SA(r,s,i,o,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>Cd(this.syncEngine,n,0)),(function(){return wd.v()?new wd:new mA})())}createSyncEngine(e,n){return(function(s,i,o,c,l,u,f){const p=new KA(s,i,o,c,l,u);return f&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=me(n);ee(es,"RemoteStore shutting down."),r.Ea.add(5),await ho(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}$l.provider={build:()=>new $l};class c1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):zn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Cr="FirestoreClient";class l1{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ct.UNAUTHENTICATED,this.clientId=Tu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async o=>{ee(Cr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(ee(Cr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Hu(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Zc(t,e){t.asyncQueue.verifyOperationInProgress(),ee(Cr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await Yg(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function kd(t,e){t.asyncQueue.verifyOperationInProgress();const n=await u1(t);ee(Cr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>Ad(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>Ad(e.remoteStore,s))),t._onlineComponents=e}async function u1(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee(Cr,"Using user provided OfflineComponentProvider");try{await Zc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===j.FAILED_PRECONDITION||s.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;Vs("Error using user provided cache. Falling back to memory cache: "+n),await Zc(t,new Aa)}}else ee(Cr,"Using default OfflineComponentProvider"),await Zc(t,new a1(void 0));return t._offlineComponents}async function p_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee(Cr,"Using user provided OnlineComponentProvider"),await kd(t,t._uninitializedComponentsProvider._online)):(ee(Cr,"Using default OnlineComponentProvider"),await kd(t,new $l))),t._onlineComponents}function h1(t){return p_(t).then((e=>e.syncEngine))}async function f1(t){const e=await p_(t),n=e.eventManager;return n.onListen=GA.bind(null,e.syncEngine),n.onUnlisten=JA.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=QA.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=XA.bind(null,e.syncEngine),n}function d1(t,e,n={}){const r=new Er;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,c,l,u){const f=new c1({next:m=>{f.Nu(),o.enqueueAndForget((()=>BA(i,p)));const _=m.docs.has(c);!_&&m.fromCache?u.reject(new re(j.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&l&&l.source==="server"?u.reject(new re(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),p=new qA(ku(c.path),f,{includeMetadataChanges:!0,qa:!0});return UA(i,p)})(await f1(t),t.asyncQueue,e,n,r))),r.promise}function m_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const Nd=new Map;const g_="firestore.googleapis.com",Dd=!0;class Vd{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new re(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=g_,this.ssl=Dd}else this.host=e.host,this.ssl=e.ssl??Dd;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Gg;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<$0)throw new re(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=m_(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new re(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new re(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new re(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vd({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vd(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new dT;switch(r.type){case"firstParty":return new _T(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=Nd.get(n);r&&(ee("ComponentProvider","Removing Datastore"),Nd.delete(n),r.terminate())})(this),Promise.resolve()}}function p1(t,e,n,r={}){t=Zr(t,Gu);const s=$s(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(Wm(`https://${c}`),Km("Firestore",!0)),i.host!==g_&&i.host!==c&&Vs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:c,ssl:s,emulatorOptions:r};if(!Yr(l,o)&&(t._setSettings(l),r.mockUserToken)){let u,f;if(typeof r.mockUserToken=="string")u=r.mockUserToken,f=Ct.MOCK_USER;else{u=FI(r.mockUserToken,t._app?.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new re(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ct(p)}t._authCredentials=new pT(new ag(u,f))}}class Qu{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Qu(this.firestore,e,this._query)}}class st{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new st(this.firestore,e,this._key)}toJSON(){return{type:st._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(co(n,st._jsonSchema))return new st(e,r||null,new ae(qe.fromString(n.referencePath)))}}st._jsonSchemaVersion="firestore/documentReference/1.0",st._jsonSchema={type:et("string",st._jsonSchemaVersion),referencePath:et("string")};class Yi extends Qu{constructor(e,n,r){super(e,n,ku(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new st(this.firestore,null,new ae(e))}withConverter(e){return new Yi(this.firestore,e,this._path)}}function Sa(t,e,...n){if(t=Ot(t),arguments.length===1&&(e=Tu.newId()),TT("doc","path",e),t instanceof Gu){const r=qe.fromString(e,...n);return Kf(r),new st(t,null,new ae(r))}{if(!(t instanceof st||t instanceof Yi))throw new re(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(qe.fromString(e,...n));return Kf(r),new st(t.firestore,t instanceof Yi?t.converter:null,new ae(r))}}const Od="AsyncQueue";class xd{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Xg(this,"async_queue_retry"),this._c=()=>{const r=Xc();r&&ee(Od,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Xc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Xc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Er;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!zs(e))throw e;ee(Od,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,zn("INTERNAL UNHANDLED ERROR: ",Ld(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=qu.createAndSchedule(this,e,n,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&ue(47125,{Pc:Ld(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Ld(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class ac extends Gu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new xd,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xd(e),this._firestoreClient=void 0,await e}}}function m1(t,e){const n=typeof t=="object"?t:Jm(),r=typeof t=="string"?t:ma,s=Iu(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=LI("firestore");i&&p1(s,...i)}return s}function __(t){if(t._terminated)throw new re(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||g1(t),t._firestoreClient}function g1(t){const e=t._freezeSettings(),n=(function(s,i,o,c){return new xT(s,i,o,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,m_(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new l1(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(t._componentsProvider))}class Zt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zt(It.fromBase64String(e))}catch(n){throw new re(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Zt(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Zt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(co(e,Zt._jsonSchema))return Zt.fromBase64String(e.bytes)}}Zt._jsonSchemaVersion="firestore/bytes/1.0",Zt._jsonSchema={type:et("string",Zt._jsonSchemaVersion),bytes:et("string")};class cc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Yu{constructor(e){this._methodName=e}}class wn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:wn._jsonSchemaVersion}}static fromJSON(e){if(co(e,wn._jsonSchema))return new wn(e.latitude,e.longitude)}}wn._jsonSchemaVersion="firestore/geoPoint/1.0",wn._jsonSchema={type:et("string",wn._jsonSchemaVersion),latitude:et("number"),longitude:et("number")};class Tn{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Tn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(co(e,Tn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Tn(e.vectorValues);throw new re(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Tn._jsonSchemaVersion="firestore/vectorValue/1.0",Tn._jsonSchema={type:et("string",Tn._jsonSchemaVersion),vectorValues:et("object")};const _1=/^__.*__$/;class y1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Nr(e,this.data,this.fieldMask,n,this.fieldTransforms):new lo(e,this.data,n,this.fieldTransforms)}}class y_{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Nr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function v_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue(40011,{Ac:t})}}class Ju{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ju({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ra(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(v_(this.Ac)&&_1.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class v1{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||sc(e)}Cc(e,n,r,s=!1){return new Ju({Ac:e,methodName:n,Dc:r,path:vt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function E_(t){const e=t._freezeSettings(),n=sc(t._databaseId);return new v1(t._databaseId,!!e.ignoreUndefinedProperties,n)}function E1(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);Xu("Data must be an object, but it was:",o,r);const c=I_(r,o);let l,u;if(i.merge)l=new Gt(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const m=jl(e,p,n);if(!o.contains(m))throw new re(j.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);T_(f,m)||f.push(m)}l=new Gt(f),u=o.fieldTransforms.filter((p=>l.covers(p.field)))}else l=null,u=o.fieldTransforms;return new y1(new jt(c),l,u)}class lc extends Yu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lc}}function I1(t,e,n,r){const s=t.Cc(1,e,n);Xu("Data must be an object, but it was:",s,r);const i=[],o=jt.empty();kr(r,((l,u)=>{const f=Zu(e,l,n);u=Ot(u);const p=s.yc(f);if(u instanceof lc)i.push(f);else{const m=uc(u,p);m!=null&&(i.push(f),o.set(f,m))}}));const c=new Gt(i);return new y_(o,c,s.fieldTransforms)}function w1(t,e,n,r,s,i){const o=t.Cc(1,e,n),c=[jl(e,r,n)],l=[s];if(i.length%2!=0)throw new re(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)c.push(jl(e,i[m])),l.push(i[m+1]);const u=[],f=jt.empty();for(let m=c.length-1;m>=0;--m)if(!T_(u,c[m])){const _=c[m];let C=l[m];C=Ot(C);const D=o.yc(_);if(C instanceof lc)u.push(_);else{const V=uc(C,D);V!=null&&(u.push(_),f.set(_,V))}}const p=new Gt(u);return new y_(f,p,o.fieldTransforms)}function uc(t,e){if(w_(t=Ot(t)))return Xu("Unsupported field value:",e,t),I_(t,e);if(t instanceof Yu)return(function(r,s){if(!v_(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const i=[];let o=0;for(const c of r){let l=uc(c,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}})(t,e)}return(function(r,s){if((r=Ot(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return i0(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Be.fromDate(r);return{timestampValue:Ia(s.serializer,i)}}if(r instanceof Be){const i=new Be(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ia(s.serializer,i)}}if(r instanceof wn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Zt)return{bytesValue:$g(s.serializer,r._byteString)};if(r instanceof st){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ou(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Tn)return(function(o,c){return{mapValue:{fields:{[gg]:{stringValue:_g},[ga]:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw c.Sc("VectorValues must only contain numeric values.");return Nu(c.serializer,u)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${Au(r)}`)})(t,e)}function I_(t,e){const n={};return ug(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):kr(t,((r,s)=>{const i=uc(s,e.mc(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function w_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Be||t instanceof wn||t instanceof Zt||t instanceof st||t instanceof Yu||t instanceof Tn)}function Xu(t,e,n){if(!w_(n)||!cg(n)){const r=Au(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function jl(t,e,n){if((e=Ot(e))instanceof cc)return e._internalPath;if(typeof e=="string")return Zu(t,e);throw Ra("Field path arguments must be of type string or ",t,!1,void 0,n)}const T1=new RegExp("[~\\*/\\[\\]]");function Zu(t,e,n){if(e.search(T1)>=0)throw Ra(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new cc(...e.split("."))._internalPath}catch{throw Ra(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ra(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new re(j.INVALID_ARGUMENT,c+t+l)}function T_(t,e){return t.some((n=>n.isEqual(e)))}class A_{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new st(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new A1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(S_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class A1 extends A_{data(){return super.data()}}function S_(t,e){return typeof e=="string"?Zu(t,e):e instanceof cc?e._internalPath:e._delegate._internalPath}class S1{convertValue(e,n="none"){switch(Rr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Sr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ue(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return kr(e,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(e){const n=e.fields?.[ga].arrayValue?.values?.map((r=>Je(r.doubleValue)));return new Tn(n)}convertGeoPoint(e){return new wn(Je(e.latitude),Je(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ja(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(zi(e));default:return null}}convertTimestamp(e){const n=Ar(e);return new Be(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=qe.fromString(e);Ve(Kg(r),9688,{name:e});const s=new Wi(r.get(1),r.get(3)),i=new ae(r.popFirst(5));return s.isEqual(n)||zn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}function R1(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Ii{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gr extends A_{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Qo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(S_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new re(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Gr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Gr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Gr._jsonSchema={type:et("string",Gr._jsonSchemaVersion),bundleSource:et("string","DocumentSnapshot"),bundleName:et("string"),bundle:et("string")};class Qo extends Gr{data(e={}){return super.data(e)}}class Oi{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ii(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Qo(this._firestore,this._userDataWriter,r.key,r,new Ii(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new re(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((c=>{const l=new Qo(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Ii(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>i||c.type!==3)).map((c=>{const l=new Qo(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Ii(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,f=-1;return c.type!==0&&(u=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:b1(c.type),doc:l,oldIndex:u,newIndex:f}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new re(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Oi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Tu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function b1(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue(61501,{type:t})}}function C1(t){t=Zr(t,st);const e=Zr(t.firestore,ac);return d1(__(e),t._key).then((n=>N1(e,t,n)))}Oi._jsonSchemaVersion="firestore/querySnapshot/1.0",Oi._jsonSchema={type:et("string",Oi._jsonSchemaVersion),bundleSource:et("string","QuerySnapshot"),bundleName:et("string"),bundle:et("string")};class P1 extends S1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new st(this.firestore,null,n)}}function k1(t,e,n){t=Zr(t,st);const r=Zr(t.firestore,ac),s=R1(t.converter,e);return R_(r,[E1(E_(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,En.none())])}function Md(t,e,n,...r){t=Zr(t,st);const s=Zr(t.firestore,ac),i=E_(s);let o;return o=typeof(e=Ot(e))=="string"||e instanceof cc?w1(i,"updateDoc",t._key,e,n,r):I1(i,"updateDoc",t._key,e),R_(s,[o.toMutation(t._key,En.exists(!0))])}function R_(t,e){return(function(r,s){const i=new Er;return r.asyncQueue.enqueueAndForget((async()=>ZA(await h1(r),s,i))),i.promise})(__(t),e)}function N1(t,e,n){const r=n.docs.get(e._key),s=new P1(t);return new Gr(t,s,e._key,r,new Ii(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){qs=s})(js),Ds(new Jr("firestore",((r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new ac(new mT(r.getProvider("auth-internal")),new yT(o,r.getProvider("app-check-internal")),(function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new re(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wi(u.options.projectId,f)})(o,s),o);return i={useFetchStreams:n,...i},c._setSettings(i),c}),"PUBLIC").setMultipleInstances(!0)),yr(qf,Hf,e),yr(qf,Hf,"esm2020")})();const D1={apiKey:"AIzaSyDapqMH_oM7h6CDKM0laMGrLIlDVDyb_gY",authDomain:"hometv-c10f8.firebaseapp.com",projectId:"hometv-c10f8",storageBucket:"hometv-c10f8.appspot.com",messagingSenderId:"452296723769",appId:"1:452296723769:web:982a4288b9cf4e189bace8"},V1=Ym(D1),ba=m1(V1);function b_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const O1=b_,C_=new oo("auth","Firebase",b_());const Ca=new vu("@firebase/auth");function x1(t,...e){Ca.logLevel<=Te.WARN&&Ca.warn(`Auth (${js}): ${t}`,...e)}function Yo(t,...e){Ca.logLevel<=Te.ERROR&&Ca.error(`Auth (${js}): ${t}`,...e)}function ln(t,...e){throw eh(t,...e)}function An(t,...e){return eh(t,...e)}function P_(t,e,n){const r={...O1(),[e]:n};return new oo("auth","Firebase",r).create(e,{appName:t.name})}function $n(t){return P_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function eh(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return C_.create(t,...e)}function le(t,e,...n){if(!t)throw eh(e,...n)}function Un(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Yo(e),new Error(e)}function Kn(t,e){t||Un(e)}function ql(){return typeof self<"u"&&self.location?.href||""}function L1(){return Fd()==="http:"||Fd()==="https:"}function Fd(){return typeof self<"u"&&self.location?.protocol||null}function M1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(L1()||HI()||"connection"in navigator)?navigator.onLine:!0}function F1(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class po{constructor(e,n){this.shortDelay=e,this.longDelay=n,Kn(n>e,"Short delay should be less than long delay!"),this.isMobile=$I()||zI()}get(){return M1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function th(t,e){Kn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class k_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Un("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Un("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Un("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const U1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const B1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$1=new po(3e4,6e4);function Dr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Vr(t,e,n,r,s={}){return N_(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=ao({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...i};return qI()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&$s(t.emulatorConfig.host)&&(u.credentials="include"),k_.fetch()(await D_(t,t.config.apiHost,n,c),u)})}async function N_(t,e,n){t._canInitEmulator=!1;const r={...U1,...e};try{const s=new q1(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Bo(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[l,u]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bo(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Bo(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Bo(t,"user-disabled",o);const f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw P_(t,f,u);ln(t,f)}}catch(s){if(s instanceof Yn)throw s;ln(t,"network-request-failed",{message:String(s)})}}async function mo(t,e,n,r,s={}){const i=await Vr(t,e,n,r,s);return"mfaPendingCredential"in i&&ln(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function D_(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?th(t.config,s):`${t.config.apiScheme}://${s}`;return B1.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function j1(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class q1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(An(this.auth,"network-request-failed")),$1.get())})}}function Bo(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=An(t,e,r);return s.customData._tokenResponse=n,s}function Ud(t){return t!==void 0&&t.enterprise!==void 0}class H1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return j1(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function z1(t,e){return Vr(t,"GET","/v2/recaptchaConfig",Dr(t,e))}async function W1(t,e){return Vr(t,"POST","/v1/accounts:delete",e)}async function Pa(t,e){return Vr(t,"POST","/v1/accounts:lookup",e)}function xi(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function K1(t,e=!1){const n=Ot(t),r=await n.getIdToken(e),s=nh(r);le(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i?.sign_in_provider;return{claims:s,token:r,authTime:xi(el(s.auth_time)),issuedAtTime:xi(el(s.iat)),expirationTime:xi(el(s.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function el(t){return Number(t)*1e3}function nh(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Yo("JWT malformed, contained fewer than 3 sections"),null;try{const s=jm(n);return s?JSON.parse(s):(Yo("Failed to decode base64 JWT payload"),null)}catch(s){return Yo("Caught error parsing JWT payload as JSON",s?.toString()),null}}function Bd(t){const e=nh(t);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ji(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Yn&&G1(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function G1({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class Q1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Hl{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=xi(this.lastLoginAt),this.creationTime=xi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ka(t){const e=t.auth,n=await t.getIdToken(),r=await Ji(t,Pa(e,{idToken:n}));le(r?.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=s.providerUserInfo?.length?V_(s.providerUserInfo):[],o=J1(t.providerData,i),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!o?.length,u=c?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Hl(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function Y1(t){const e=Ot(t);await ka(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function J1(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function V_(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function X1(t,e){const n=await N_(t,{},async()=>{const r=ao({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await D_(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:c,body:r};return t.emulatorConfig&&$s(t.emulatorConfig.host)&&(l.credentials="include"),k_.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Z1(t,e){return Vr(t,"POST","/v2/accounts:revokeToken",Dr(t,e))}class Cs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Bd(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){le(e.length!==0,"internal-error");const n=Bd(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await X1(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Cs;return r&&(le(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(le(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(le(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Cs,this.toJSON())}_performRefresh(){return Un("not implemented")}}function rr(t,e){le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class on{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new Q1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Hl(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ji(this,this.stsTokenManager.getToken(this.auth,e));return le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return K1(this,e)}reload(){return Y1(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new on({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ka(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xt(this.auth.app))return Promise.reject($n(this.auth));const e=await this.getIdToken();return await Ji(this,W1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:_,providerData:C,stsTokenManager:D}=n;le(p&&D,e,"internal-error");const V=Cs.fromJSON(this.name,D);le(typeof p=="string",e,"internal-error"),rr(r,e.name),rr(s,e.name),le(typeof m=="boolean",e,"internal-error"),le(typeof _=="boolean",e,"internal-error"),rr(i,e.name),rr(o,e.name),rr(c,e.name),rr(l,e.name),rr(u,e.name),rr(f,e.name);const H=new on({uid:p,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:_,photoURL:o,phoneNumber:i,tenantId:c,stsTokenManager:V,createdAt:u,lastLoginAt:f});return C&&Array.isArray(C)&&(H.providerData=C.map(N=>({...N}))),l&&(H._redirectEventId=l),H}static async _fromIdTokenResponse(e,n,r=!1){const s=new Cs;s.updateFromServerResponse(n);const i=new on({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ka(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];le(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?V_(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!i?.length,c=new Cs;c.updateFromIdToken(r);const l=new on({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Hl(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(l,u),l}}const $d=new Map;function Bn(t){Kn(t instanceof Function,"Expected a class definition");let e=$d.get(t);return e?(Kn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$d.set(t,e),e)}class O_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}O_.type="NONE";const jd=O_;function Jo(t,e,n){return`firebase:${t}:${e}:${n}`}class Ps{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Jo(this.userKey,s.apiKey,i),this.fullPersistenceKey=Jo("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Pa(this.auth,{idToken:e}).catch(()=>{});return n?on._fromGetAccountInfoResponse(this.auth,n,e):null}return on._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ps(Bn(jd),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Bn(jd);const o=Jo(r,e.config.apiKey,e.name);let c=null;for(const u of n)try{const f=await u._get(o);if(f){let p;if(typeof f=="string"){const m=await Pa(e,{idToken:f}).catch(()=>{});if(!m)break;p=await on._fromGetAccountInfoResponse(e,m,f)}else p=on._fromJSON(e,f);u!==i&&(c=p),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Ps(i,e,r):(i=l[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Ps(i,e,r))}}function qd(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(F_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(x_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(B_(e))return"Blackberry";if($_(e))return"Webos";if(L_(e))return"Safari";if((e.includes("chrome/")||M_(e))&&!e.includes("edge/"))return"Chrome";if(U_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function x_(t=Vt()){return/firefox\//i.test(t)}function L_(t=Vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function M_(t=Vt()){return/crios\//i.test(t)}function F_(t=Vt()){return/iemobile/i.test(t)}function U_(t=Vt()){return/android/i.test(t)}function B_(t=Vt()){return/blackberry/i.test(t)}function $_(t=Vt()){return/webos/i.test(t)}function rh(t=Vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function eS(t=Vt()){return rh(t)&&!!window.navigator?.standalone}function tS(){return WI()&&document.documentMode===10}function j_(t=Vt()){return rh(t)||U_(t)||$_(t)||B_(t)||/windows phone/i.test(t)||F_(t)}function q_(t,e=[]){let n;switch(t){case"Browser":n=qd(Vt());break;case"Worker":n=`${qd(Vt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${js}/${r}`}class nS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const l=e(i);o(l)}catch(l){c(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function rS(t,e={}){return Vr(t,"GET","/v2/passwordPolicy",Dr(t,e))}const sS=6;class iS{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??sS,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class oS{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hd(this),this.idTokenSubscription=new Hd(this),this.beforeStateQueue=new nS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=C_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Bn(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ps.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Pa(this,{idToken:e}),r=await on._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Xt(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!i||i===o)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ka(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=F1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xt(this.app))return Promise.reject($n(this));const n=e?Ot(e):null;return n&&le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xt(this.app)?Promise.reject($n(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xt(this.app)?Promise.reject($n(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Bn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rS(this),n=new iS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new oo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Z1(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Bn(e)||this._popupRedirectResolver;le(n,this,"argument-error"),this.redirectPersistenceManager=await Ps.create(this,[Bn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=q_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Xt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&x1(`Error while retrieving App Check token: ${e.error}`),e?.token}}function is(t){return Ot(t)}class Hd{constructor(e){this.auth=e,this.observer=null,this.addObserver=ew(n=>this.observer=n)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let hc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aS(t){hc=t}function H_(t){return hc.loadJS(t)}function cS(){return hc.recaptchaEnterpriseScript}function lS(){return hc.gapiScript}function uS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class hS{constructor(){this.enterprise=new fS}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class fS{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const dS="recaptcha-enterprise",z_="NO_RECAPTCHA";class pS{constructor(e){this.type=dS,this.auth=is(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,c)=>{z1(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const u=new H1(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{c(l)})})}function s(i,o,c){const l=window.grecaptcha;Ud(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(z_)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new hS().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(c=>{if(!n&&Ud(window.grecaptcha))s(c,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=cS();l.length!==0&&(l+=c),H_(l).then(()=>{s(c,i,o)}).catch(u=>{o(u)})}}).catch(c=>{o(c)})})}}async function zd(t,e,n,r=!1,s=!1){const i=new pS(t);let o;if(s)o=z_;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const l=c.phoneEnrollmentInfo.phoneNumber,u=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const l=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function zl(t,e,n,r,s){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await zd(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await zd(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}function mS(t,e){const n=Iu(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Yr(i,e??{}))return s;ln(s,"already-initialized")}return n.initialize({options:e})}function gS(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Bn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function _S(t,e,n){const r=is(t);le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=W_(e),{host:o,port:c}=yS(e),l=c===null?"":`:${c}`,u={url:`${i}//${o}${l}/`},f=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){le(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),le(Yr(u,r.config.emulator)&&Yr(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,$s(o)?(Wm(`${i}//${o}${l}`),Km("Auth",!0)):vS()}function W_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function yS(t){const e=W_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Wd(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Wd(o)}}}function Wd(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function vS(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class sh{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Un("not implemented")}_getIdTokenResponse(e){return Un("not implemented")}_linkToIdToken(e,n){return Un("not implemented")}_getReauthenticationResolver(e){return Un("not implemented")}}async function ES(t,e){return Vr(t,"POST","/v1/accounts:signUp",e)}async function IS(t,e){return mo(t,"POST","/v1/accounts:signInWithPassword",Dr(t,e))}async function wS(t,e){return mo(t,"POST","/v1/accounts:signInWithEmailLink",Dr(t,e))}async function TS(t,e){return mo(t,"POST","/v1/accounts:signInWithEmailLink",Dr(t,e))}class Xi extends sh{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Xi(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Xi(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zl(e,n,"signInWithPassword",IS);case"emailLink":return wS(e,{email:this._email,oobCode:this._password});default:ln(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zl(e,r,"signUpPassword",ES);case"emailLink":return TS(e,{idToken:n,email:this._email,oobCode:this._password});default:ln(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ks(t,e){return mo(t,"POST","/v1/accounts:signInWithIdp",Dr(t,e))}const AS="http://localhost";class ts extends sh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ts(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ln("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new ts(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ks(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ks(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ks(e,n)}buildRequest(){const e={requestUri:AS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ao(n)}return e}}function SS(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function RS(t){const e=gi(_i(t)).link,n=e?gi(_i(e)).deep_link_id:null,r=gi(_i(t)).deep_link_id;return(r?gi(_i(r)).link:null)||r||n||e||t}class ih{constructor(e){const n=gi(_i(e)),r=n.apiKey??null,s=n.oobCode??null,i=SS(n.mode??null);le(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=RS(e);try{return new ih(n)}catch{return null}}}class Ks{constructor(){this.providerId=Ks.PROVIDER_ID}static credential(e,n){return Xi._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=ih.parseLink(n);return le(r,"argument-error"),Xi._fromEmailAndCode(e,r.code,r.tenantId)}}Ks.PROVIDER_ID="password";Ks.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ks.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class K_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class go extends K_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class lr extends go{constructor(){super("facebook.com")}static credential(e){return ts._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lr.credential(e.oauthAccessToken)}catch{return null}}}lr.FACEBOOK_SIGN_IN_METHOD="facebook.com";lr.PROVIDER_ID="facebook.com";class ur extends go{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ts._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ur.credential(n,r)}catch{return null}}}ur.GOOGLE_SIGN_IN_METHOD="google.com";ur.PROVIDER_ID="google.com";class hr extends go{constructor(){super("github.com")}static credential(e){return ts._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hr.credential(e.oauthAccessToken)}catch{return null}}}hr.GITHUB_SIGN_IN_METHOD="github.com";hr.PROVIDER_ID="github.com";class fr extends go{constructor(){super("twitter.com")}static credential(e,n){return ts._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return fr.credential(n,r)}catch{return null}}}fr.TWITTER_SIGN_IN_METHOD="twitter.com";fr.PROVIDER_ID="twitter.com";async function bS(t,e){return mo(t,"POST","/v1/accounts:signUp",Dr(t,e))}class ns{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await on._fromIdTokenResponse(e,r,s),o=Kd(r);return new ns({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Kd(r);return new ns({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Kd(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Na extends Yn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Na.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Na(e,n,r,s)}}function G_(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Na._fromErrorAndOperation(t,i,e,r):i})}async function CS(t,e,n=!1){const r=await Ji(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ns._forOperation(t,"link",r)}async function PS(t,e,n=!1){const{auth:r}=t;if(Xt(r.app))return Promise.reject($n(r));const s="reauthenticate";try{const i=await Ji(t,G_(r,s,e,t),n);le(i.idToken,r,"internal-error");const o=nh(i.idToken);le(o,r,"internal-error");const{sub:c}=o;return le(t.uid===c,r,"user-mismatch"),ns._forOperation(t,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&ln(r,"user-mismatch"),i}}async function Q_(t,e,n=!1){if(Xt(t.app))return Promise.reject($n(t));const r="signIn",s=await G_(t,r,e),i=await ns._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function kS(t,e){return Q_(is(t),e)}async function Y_(t){const e=is(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function NS(t,e,n){if(Xt(t.app))return Promise.reject($n(t));const r=is(t),o=await zl(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",bS).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Y_(t),l}),c=await ns._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function DS(t,e,n){return Xt(t.app)?Promise.reject($n(t)):kS(Ot(t),Ks.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Y_(t),r})}function VS(t,e,n,r){return Ot(t).onIdTokenChanged(e,n,r)}function OS(t,e,n){return Ot(t).beforeAuthStateChanged(e,n)}function xS(t,e,n,r){return Ot(t).onAuthStateChanged(e,n,r)}function LS(t){return Ot(t).signOut()}const Da="__sak";class J_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Da,"1"),this.storage.removeItem(Da),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const MS=1e3,FS=10;class X_ extends J_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=j_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);tS()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,FS):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},MS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}X_.type="LOCAL";const US=X_;class Z_ extends J_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Z_.type="SESSION";const ey=Z_;function BS(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class fc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new fc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async u=>u(n.origin,i)),l=await BS(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}fc.receivers=[];function oh(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class $S{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,l)=>{const u=oh("",20);s.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const m=p;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(m.data.response);break;default:clearTimeout(f),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Sn(){return window}function jS(t){Sn().location.href=t}function ty(){return typeof Sn().WorkerGlobalScope<"u"&&typeof Sn().importScripts=="function"}async function qS(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HS(){return navigator?.serviceWorker?.controller||null}function zS(){return ty()?self:null}const ny="firebaseLocalStorageDb",WS=1,Va="firebaseLocalStorage",ry="fbase_key";class _o{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function dc(t,e){return t.transaction([Va],e?"readwrite":"readonly").objectStore(Va)}function KS(){const t=indexedDB.deleteDatabase(ny);return new _o(t).toPromise()}function Wl(){const t=indexedDB.open(ny,WS);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Va,{keyPath:ry})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Va)?e(r):(r.close(),await KS(),e(await Wl()))})})}async function Gd(t,e,n){const r=dc(t,!0).put({[ry]:e,value:n});return new _o(r).toPromise()}async function GS(t,e){const n=dc(t,!1).get(e),r=await new _o(n).toPromise();return r===void 0?null:r.value}function Qd(t,e){const n=dc(t,!0).delete(e);return new _o(n).toPromise()}const QS=800,YS=3;class sy{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Wl(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>YS)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ty()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fc._getInstance(zS()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await qS(),!this.activeServiceWorker)return;this.sender=new $S(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||HS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wl();return await Gd(e,Da,"1"),await Qd(e,Da),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Gd(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>GS(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Qd(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=dc(s,!1).getAll();return new _o(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),QS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sy.type="LOCAL";const JS=sy;new po(3e4,6e4);function XS(t,e){return e?Bn(e):(le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class ah extends sh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ks(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ks(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ks(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function ZS(t){return Q_(t.auth,new ah(t),t.bypassAuthState)}function eR(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),PS(n,new ah(t),t.bypassAuthState)}async function tR(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),CS(n,new ah(t),t.bypassAuthState)}class iy{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ZS;case"linkViaPopup":case"linkViaRedirect":return tR;case"reauthViaPopup":case"reauthViaRedirect":return eR;default:ln(this.auth,"internal-error")}}resolve(e){Kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const nR=new po(2e3,1e4);class ws extends iy{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ws.currentPopupAction&&ws.currentPopupAction.cancel(),ws.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){Kn(this.filter.length===1,"Popup operations only handle one event");const e=oh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(An(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(An(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ws.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(An(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,nR.get())};e()}}ws.currentPopupAction=null;const rR="pendingRedirect",Xo=new Map;class sR extends iy{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Xo.get(this.auth._key());if(!e){try{const r=await iR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Xo.set(this.auth._key(),e)}return this.bypassAuthState||Xo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iR(t,e){const n=cR(e),r=aR(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function oR(t,e){Xo.set(t._key(),e)}function aR(t){return Bn(t._redirectPersistence)}function cR(t){return Jo(rR,t.config.apiKey,t.name)}async function lR(t,e,n=!1){if(Xt(t.app))return Promise.reject($n(t));const r=is(t),s=XS(r,e),o=await new sR(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}const uR=600*1e3;class hR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!oy(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(An(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yd(e))}saveEventToCache(e){this.cachedEventUids.add(Yd(e)),this.lastProcessedEventTime=Date.now()}}function Yd(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function oy({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function fR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oy(t);default:return!1}}async function dR(t,e={}){return Vr(t,"GET","/v1/projects",e)}const pR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mR=/^https?/;async function gR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await dR(t);for(const n of e)try{if(_R(n))return}catch{}ln(t,"unauthorized-domain")}function _R(t){const e=ql(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!mR.test(n))return!1;if(pR.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const yR=new po(3e4,6e4);function Jd(){const t=Sn().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function vR(t){return new Promise((e,n)=>{function r(){Jd(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Jd(),n(An(t,"network-request-failed"))},timeout:yR.get()})}if(Sn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Sn().gapi?.load)r();else{const s=uS("iframefcb");return Sn()[s]=()=>{gapi.load?r():n(An(t,"network-request-failed"))},H_(`${lS()}?onload=${s}`).catch(i=>n(i))}}).catch(e=>{throw Zo=null,e})}let Zo=null;function ER(t){return Zo=Zo||vR(t),Zo}const IR=new po(5e3,15e3),wR="__/auth/iframe",TR="emulator/auth/iframe",AR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},SR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RR(t){const e=t.config;le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?th(e,TR):`https://${t.config.authDomain}/${wR}`,r={apiKey:e.apiKey,appName:t.name,v:js},s=SR.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ao(r).slice(1)}`}async function bR(t){const e=await ER(t),n=Sn().gapi;return le(n,t,"internal-error"),e.open({where:document.body,url:RR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:AR,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=An(t,"network-request-failed"),c=Sn().setTimeout(()=>{i(o)},IR.get());function l(){Sn().clearTimeout(c),s(r)}r.ping(l).then(l,()=>{i(o)})}))}const CR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},PR=500,kR=600,NR="_blank",DR="http://localhost";class Xd{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function VR(t,e,n,r=PR,s=kR){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const l={...CR,width:r.toString(),height:s.toString(),top:i,left:o},u=Vt().toLowerCase();n&&(c=M_(u)?NR:n),x_(u)&&(e=e||DR,l.scrollbars="yes");const f=Object.entries(l).reduce((m,[_,C])=>`${m}${_}=${C},`,"");if(eS(u)&&c!=="_self")return OR(e||"",c),new Xd(null);const p=window.open(e||"",c,f);le(p,t,"popup-blocked");try{p.focus()}catch{}return new Xd(p)}function OR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const xR="__/auth/handler",LR="emulator/auth/handler",MR=encodeURIComponent("fac");async function Zd(t,e,n,r,s,i){le(t.config.authDomain,t,"auth-domain-config-required"),le(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:js,eventId:s};if(e instanceof K_){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",ZI(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof go){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const l=await t._getAppCheckToken(),u=l?`#${MR}=${encodeURIComponent(l)}`:"";return`${FR(t)}?${ao(c).slice(1)}${u}`}function FR({config:t}){return t.emulator?th(t,LR):`https://${t.authDomain}/${xR}`}const tl="webStorageSupport";class UR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ey,this._completeRedirectFn=lR,this._overrideRedirectResult=oR}async _openPopup(e,n,r,s){Kn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await Zd(e,n,r,ql(),s);return VR(e,i,oh())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Zd(e,n,r,ql(),s);return jS(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Kn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await bR(e),r=new hR(e);return n.register("authEvent",s=>(le(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(tl,{type:tl},s=>{const i=s?.[0]?.[tl];i!==void 0&&n(!!i),ln(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=gR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return j_()||L_()||rh()}}const BR=UR;var ep="@firebase/auth",tp="1.11.1";class $R{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function jR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qR(t){Ds(new Jr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;le(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:q_(t)},u=new oS(r,s,i,l);return gS(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ds(new Jr("auth-internal",e=>{const n=is(e.getProvider("auth").getImmediate());return(r=>new $R(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),yr(ep,tp,jR(t)),yr(ep,tp,"esm2020")}const HR=300,zR=zm("authIdTokenMaxAge")||HR;let np=null;const WR=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>zR)return;const s=n?.token;np!==s&&(np=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function KR(t=Jm()){const e=Iu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=mS(t,{popupRedirectResolver:BR,persistence:[JS,US,ey]}),r=zm("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=WR(i.toString());OS(n,o,()=>o(n.currentUser)),VS(n,c=>o(c))}}const s=qm("auth");return s&&_S(n,`http://${s}`),n}function GR(){return document.getElementsByTagName("head")?.[0]??document}aS({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=An("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",GR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qR("Browser");const rp=async function(t){const e=Sa(ba,"users",t),n=await C1(e);return n.exists()?n.data():null},QR=async function(t,e){await k1(Sa(ba,"users",e),{name:t.user_name||"",email:t.email||"",favorites:[],api_key:t.api_key||""})},nl=function(t){switch(t){case"auth/wrong-password":return" ";case"auth/internal-error":return" ";case"auth/invalid-email":return" email";case"auth/user-not-found":return"  ";case"auth/weak-password":return"   6 ";default:return" "}},YR=[""," ","","","","-","","","","",""," ","-","","",""],Gs="404dc583-7efc-4c93-8f21-a782f977b9e7",ay="https://kinopoiskapiunofficial.tech/api/",JR="TOP_POPULAR_ALL",yo=`${ay}v2.2/films`,XR=`${ay}v2.1/films`,ZR=async()=>await(await fetch(`${yo}/filters`,{headers:{"X-API-KEY":Gs,"Content-Type":"application/json"}})).json(),cy=async t=>{const e=await fetch(`${yo}/${t}`,{headers:{"X-API-KEY":Gs,"Content-Type":"application/json"}});if(!e.ok)throw new Error("Error load film info");return await e.json()},eb=async t=>{const e=await fetch(`${yo}/${t}/similars`,{headers:{"X-API-KEY":Gs,"Content-Type":"application/json"}});if(!e.ok)throw new Error("Not found");return await e.json()},tb=async t=>{const e=await fetch(`${XR}/${t}/sequels_and_prequels`,{headers:{"X-API-KEY":Gs,"Content-Type":"application/json"}});if(!e.ok)throw new Error("Not found");return await e.json()},nb=async(t=1)=>{const e=new URL(`${yo}/collections`);e.searchParams.set("type",JR),e.searchParams.set("page",t);const n=await fetch(e.toString(),{headers:{"X-API-KEY":Gs,"Content-Type":"application/json"}});if(!n.ok)throw new Error("Error load collections");return n.json()},rb=async t=>{const e=new URL(yo);return Object.entries(t).forEach(([r,s])=>{e.searchParams.set(r,s)}),(await fetch(e.toString(),{headers:{"X-API-KEY":Gs,"Content-Type":"application/json"}})).json()},We=SI("filmStore",{state:()=>({user:null,apiKey:"404dc583-7efc-4c93-8f21-a782f977b9e7",apiAloha:"e7b61f129f4a392ac4bf6726a9dd6a",apiHDBV:"8a22f8e7684404c3815e3ffa940f00a0",auth:KR(),errorMessage:"",pageNum:1,limit:20,genreIdStore:null,genreListStore:[],searchQueryStore:"",filters:null,filmPageId:0,favorites:[],currentFocusIndex:-1,films:[],focusIds:{},isShowLastSearchList:!1,lastSearchList:[],lastViews:[],skippedIds:new Set}),getters:{filterGenres(){if(!this.genreListStore.length)return[];this.genreListStore=this.genreListStore.filter(t=>{if(YR.indexOf(t.genre)===-1)return t})},favoriteList(){return this.favorites}},actions:{setGenreId(t){this.genreIdStore=t},setFilmPageId(t){this.filmPageId=t},setShowLastSearchList(t){this.isShowLastSearchList=t},async getGenreList(){if(localStorage.getItem("genres"))return this.genreListStore=JSON.parse(localStorage.getItem("genres")),this.genreListStore;try{const t=await ZR();return this.filters=t,this.genreListStore=t.genres,this.filterGenres,localStorage.setItem("genres",JSON.stringify(this.genreListStore)),this.genreListStore}catch(t){console.error("Error load genres",t)}},checkIsFavorite(t){return new Map(this.favorites.map(n=>[Number(n?.kinopoiskId??n?.filmId),n])).has(t)},async addFavorite(t){if(!(!this.user||!t))try{const e=await this.safeUpdateUserData("favorites",n=>{const r=Number(t?.kinopoiskId??t?.filmId),s={...t,sortTime:Date.now()};return n.some(o=>Number(o?.kinopoiskId??o?.filmId)===r)?n:[...n,s]});e&&(this.favorites=e)}catch(e){console.warn("   : "+e)}},async removeFavorite(t){if(!(!this.user||!t))try{const e=await this.safeUpdateUserData("favorites",n=>{const r=Number(t);return n.filter(s=>Number(s?.kinopoiskId??s?.filmId)!==r)});e&&(this.favorites=e)}catch(e){console.warn("   : "+e)}},async addLastSearchList(t){if(!(!t||!this.user))try{const e=await this.safeUpdateUserData("lastSearchList",n=>{const r=n.filter(s=>s.value.toLowerCase()!==t.toLowerCase());return[{id:Date.now(),value:t},...r].slice(0,30)});e&&(this.lastSearchList=e)}catch(e){console.error("   : "+e)}},async addLastViews(t){if(!(!t||!this.user))try{const e=await this.safeUpdateUserData("lastViews",n=>{const r=Number(t?.kinopoiskId??t?.filmId),s={...t,sortTime:Date.now()},i=n.filter(o=>Number(o?.kinopoiskId??o?.filmId)!==r);return[s,...i].slice(0,40)});e&&(this.lastViews=e)}catch(e){console.error("    : "+e)}},async addSkip(t){if(!(!this.user||!t))try{const e=await this.safeUpdateUserData("skippedIds",n=>{const r=new Set(n);return r.add(t),Array.from(r).slice(0,100)});e&&(this.skippedIds=new Set(e))}catch(e){console.error("   : "+e)}},async removeSkip(t){if(!(!this.user||!t))try{const e=await this.safeUpdateUserData("skippedIds",n=>{const r=new Set(n);return r.delete(t),Array.from(r)});e&&(this.skippedIds=new Set(e))}catch(e){console.error("   : "+e)}},isSkipped(t){return this.skippedIds.has(t)},async authWithEmailAndPassword(t){await DS(this.auth,t.email,t.password).then(()=>{this.getUserData()}).catch(e=>{this.errorMessage=nl(e.code)})},async createAuthWithEmailAndPassword(t){await NS(this.auth,t.email,t.password).then(async e=>{this.user=await e.user,await QR(t,this.user.uid),await this.getUserData()}).catch(e=>{this.errorMessage=nl(e.code)})},async editAuthNameOrApiKey(t){try{if(this.user){const e=Sa(ba,"users",this.user.uid);await Md(e,{name:t.userName||"",api_key:t.apiKey||this.apiKey})}await this.getUserData()}catch(e){this.errorMessage=nl(e.code)}},async authLogout(){LS(this.auth).then(async()=>{this.removeUserData()}).catch(t=>{alert(" logout: "+t)})},async authChange(t){xS(this.auth,async e=>{e?(this.user=e,this.getUserData(t)):this.removeUserData(t)})},async getUserData(t){let e=await rp(this.user.uid);this.user.name=e?.name||"",this.user.email=e?.email??"",this.favorites=(e?.favorites??[]).sort((n,r)=>(r?.sortTime??0)-(n?.sortTime??0)),this.lastSearchList=(e?.lastSearchList||[]).slice(0,30),this.lastViews=(e?.lastViews??[]).slice(0,40).sort((n,r)=>(r?.sortTime??0)-(n?.sortTime??0)),this.skippedIds=new Set((e?.skippedIds??[]).slice(0,100)),e?.api_key&&(this.apiKey=e.api_key),typeof t=="function"&&t()},removeUserData(t){this.user=null,this.favorites=[],typeof t=="function"&&t()},searchQueryWithGenre(){let t={};return this.searchQueryStore&&(t.q=this.searchQueryStore),this.genreIdStore&&(t.genres=this.genreIdStore),t},setCurrentFocus(t){this.currentFocusIndex=t},setFocusIds(t){this.focusIds={...this.focusIds,[t]:this.currentFocusIndex}},setMountedCurrentFocus(t){this.setCurrentFocus(this.focusIds[t])},async searchPageTitle(){let t=this.genreIdStore?await this.genreListStore.filter(e=>+e.id==+this.genreIdStore)[0].genre:null;return this.searchQueryStore&&this.genreIdStore?`   "${this.searchQueryStore}",  "${t}"`:this.searchQueryStore&&!this.genreIdStore?`   "${this.searchQueryStore}"`:this.genreIdStore&&!this.searchQueryStore?`   "${t}"`:"    "},async safeUpdateUserData(t,e){if(!this.user)return console.warn(" "),null;try{const r=(await rp(this.user.uid))?.[t]||[],s=e(r),i=Sa(ba,"users",this.user.uid);return await Md(i,{[t]:s}),s}catch(n){throw console.error(`  ${t}:`,n),n}}}});const Is=typeof document<"u";function ly(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function sb(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&ly(t.default)}const Ne=Object.assign;function rl(t,e){const n={};for(const r in e){const s=e[r];n[r]=un(s)?s.map(t):t(s)}return n}const Li=()=>{},un=Array.isArray;function sp(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const uy=/#/g,ib=/&/g,ob=/\//g,ab=/=/g,cb=/\?/g,hy=/\+/g,lb=/%5B/g,ub=/%5D/g,fy=/%5E/g,hb=/%60/g,dy=/%7B/g,fb=/%7C/g,py=/%7D/g,db=/%20/g;function ch(t){return t==null?"":encodeURI(""+t).replace(fb,"|").replace(lb,"[").replace(ub,"]")}function pb(t){return ch(t).replace(dy,"{").replace(py,"}").replace(fy,"^")}function Kl(t){return ch(t).replace(hy,"%2B").replace(db,"+").replace(uy,"%23").replace(ib,"%26").replace(hb,"`").replace(dy,"{").replace(py,"}").replace(fy,"^")}function mb(t){return Kl(t).replace(ab,"%3D")}function gb(t){return ch(t).replace(uy,"%23").replace(cb,"%3F")}function _b(t){return gb(t).replace(ob,"%2F")}function Zi(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const yb=/\/$/,vb=t=>t.replace(yb,"");function sl(t,e,n="/"){let r,s={},i="",o="";const c=e.indexOf("#");let l=e.indexOf("?");return l=c>=0&&l>c?-1:l,l>=0&&(r=e.slice(0,l),i=e.slice(l,c>0?c:e.length),s=t(i.slice(1))),c>=0&&(r=r||e.slice(0,c),o=e.slice(c,e.length)),r=Tb(r??e,n),{fullPath:r+i+o,path:r,query:s,hash:Zi(o)}}function Eb(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function ip(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Ib(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Us(e.matched[r],n.matched[s])&&my(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Us(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function my(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!wb(t[n],e[n]))return!1;return!0}function wb(t,e){return un(t)?op(t,e):un(e)?op(e,t):t===e}function op(t,e){return un(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function Tb(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,c;for(o=0;o<r.length;o++)if(c=r[o],c!==".")if(c==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const sr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Gl=(function(t){return t.pop="pop",t.push="push",t})({}),il=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function Ab(t){if(!t)if(Is){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),vb(t)}const Sb=/^[^#]+#/;function Rb(t,e){return t.replace(Sb,"#")+e}function bb(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const pc=()=>({left:window.scrollX,top:window.scrollY});function Cb(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=bb(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function ap(t,e){return(history.state?history.state.position-e:-1)+t}const Ql=new Map;function Pb(t,e){Ql.set(t,e)}function kb(t){const e=Ql.get(t);return Ql.delete(t),e}function Nb(t){return typeof t=="string"||t&&typeof t=="object"}function gy(t){return typeof t=="string"||typeof t=="symbol"}let Qe=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const _y=Symbol("");Qe.MATCHER_NOT_FOUND+"",Qe.NAVIGATION_GUARD_REDIRECT+"",Qe.NAVIGATION_ABORTED+"",Qe.NAVIGATION_CANCELLED+"",Qe.NAVIGATION_DUPLICATED+"";function Bs(t,e){return Ne(new Error,{type:t,[_y]:!0},e)}function On(t,e){return t instanceof Error&&_y in t&&(e==null||!!(t.type&e))}const Db=["params","query","hash"];function Vb(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of Db)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function Ob(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const s=n[r].replace(hy," "),i=s.indexOf("="),o=Zi(i<0?s:s.slice(0,i)),c=i<0?null:Zi(s.slice(i+1));if(o in e){let l=e[o];un(l)||(l=e[o]=[l]),l.push(c)}else e[o]=c}return e}function cp(t){let e="";for(let n in t){const r=t[n];if(n=mb(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(un(r)?r.map(s=>s&&Kl(s)):[r&&Kl(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function xb(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=un(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const Lb=Symbol(""),lp=Symbol(""),mc=Symbol(""),lh=Symbol(""),Yl=Symbol("");function di(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function cr(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((c,l)=>{const u=m=>{m===!1?l(Bs(Qe.NAVIGATION_ABORTED,{from:n,to:e})):m instanceof Error?l(m):Nb(m)?l(Bs(Qe.NAVIGATION_GUARD_REDIRECT,{from:e,to:m})):(o&&r.enterCallbacks[s]===o&&typeof m=="function"&&o.push(m),c())},f=i(()=>t.call(r&&r.instances[s],e,n,u));let p=Promise.resolve(f);t.length<3&&(p=p.then(u)),p.catch(m=>l(m))})}function ol(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const c in o.components){let l=o.components[c];if(!(e!=="beforeRouteEnter"&&!o.instances[c]))if(ly(l)){const u=(l.__vccOpts||l)[e];u&&i.push(cr(u,n,r,o,c,s))}else{let u=l();i.push(()=>u.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${c}" at "${o.path}"`);const p=sb(f)?f.default:f;o.mods[c]=f,o.components[c]=p;const m=(p.__vccOpts||p)[e];return m&&cr(m,n,r,o,c,s)()}))}}return i}function Mb(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const c=e.matched[o];c&&(t.matched.find(u=>Us(u,c))?r.push(c):n.push(c));const l=t.matched[o];l&&(e.matched.find(u=>Us(u,l))||s.push(l))}return[n,r,s]}let Fb=()=>location.protocol+"//"+location.host;function yy(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let o=s.includes(t.slice(i))?t.slice(i).length:1,c=s.slice(o);return c[0]!=="/"&&(c="/"+c),ip(c,"")}return ip(n,t)+r+s}function Ub(t,e,n,r){let s=[],i=[],o=null;const c=({state:m})=>{const _=yy(t,location),C=n.value,D=e.value;let V=0;if(m){if(n.value=_,e.value=m,o&&o===C){o=null;return}V=D?m.position-D.position:0}else r(_);s.forEach(H=>{H(n.value,C,{delta:V,type:Gl.pop,direction:V?V>0?il.forward:il.back:il.unknown})})};function l(){o=n.value}function u(m){s.push(m);const _=()=>{const C=s.indexOf(m);C>-1&&s.splice(C,1)};return i.push(_),_}function f(){if(document.visibilityState==="hidden"){const{history:m}=window;if(!m.state)return;m.replaceState(Ne({},m.state,{scroll:pc()}),"")}}function p(){for(const m of i)m();i=[],window.removeEventListener("popstate",c),window.removeEventListener("pagehide",f),document.removeEventListener("visibilitychange",f)}return window.addEventListener("popstate",c),window.addEventListener("pagehide",f),document.addEventListener("visibilitychange",f),{pauseListeners:l,listen:u,destroy:p}}function up(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?pc():null}}function Bb(t){const{history:e,location:n}=window,r={value:yy(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,f){const p=t.indexOf("#"),m=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+l:Fb()+t+l;try{e[f?"replaceState":"pushState"](u,"",m),s.value=u}catch(_){console.error(_),n[f?"replace":"assign"](m)}}function o(l,u){i(l,Ne({},e.state,up(s.value.back,l,s.value.forward,!0),u,{position:s.value.position}),!0),r.value=l}function c(l,u){const f=Ne({},s.value,e.state,{forward:l,scroll:pc()});i(f.current,f,!0),i(l,Ne({},up(r.value,l,null),{position:f.position+1},u),!1),r.value=l}return{location:r,state:s,push:c,replace:o}}function $b(t){t=Ab(t);const e=Bb(t),n=Ub(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=Ne({location:"",base:t,go:r,createHref:Rb.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}let Hr=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var nt=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(nt||{});const jb={type:Hr.Static,value:""},qb=/[a-zA-Z0-9_]/;function Hb(t){if(!t)return[[]];if(t==="/")return[[jb]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(_){throw new Error(`ERR (${n})/"${u}": ${_}`)}let n=nt.Static,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let c=0,l,u="",f="";function p(){u&&(n===nt.Static?i.push({type:Hr.Static,value:u}):n===nt.Param||n===nt.ParamRegExp||n===nt.ParamRegExpEnd?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:Hr.Param,value:u,regexp:f,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function m(){u+=l}for(;c<t.length;){if(l=t[c++],l==="\\"&&n!==nt.ParamRegExp){r=n,n=nt.EscapeNext;continue}switch(n){case nt.Static:l==="/"?(u&&p(),o()):l===":"?(p(),n=nt.Param):m();break;case nt.EscapeNext:m(),n=r;break;case nt.Param:l==="("?n=nt.ParamRegExp:qb.test(l)?m():(p(),n=nt.Static,l!=="*"&&l!=="?"&&l!=="+"&&c--);break;case nt.ParamRegExp:l===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+l:n=nt.ParamRegExpEnd:f+=l;break;case nt.ParamRegExpEnd:p(),n=nt.Static,l!=="*"&&l!=="?"&&l!=="+"&&c--,f="";break;default:e("Unknown state");break}}return n===nt.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),p(),o(),s}const hp="[^/]+?",zb={sensitive:!1,strict:!1,start:!0,end:!0};var Mt=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(Mt||{});const Wb=/[.+*?^${}()[\]/\\]/g;function Kb(t,e){const n=Ne({},zb,e),r=[];let s=n.start?"^":"";const i=[];for(const u of t){const f=u.length?[]:[Mt.Root];n.strict&&!u.length&&(s+="/");for(let p=0;p<u.length;p++){const m=u[p];let _=Mt.Segment+(n.sensitive?Mt.BonusCaseSensitive:0);if(m.type===Hr.Static)p||(s+="/"),s+=m.value.replace(Wb,"\\$&"),_+=Mt.Static;else if(m.type===Hr.Param){const{value:C,repeatable:D,optional:V,regexp:H}=m;i.push({name:C,repeatable:D,optional:V});const N=H||hp;if(N!==hp){_+=Mt.BonusCustomRegExp;try{`${N}`}catch(F){throw new Error(`Invalid custom RegExp for param "${C}" (${N}): `+F.message)}}let x=D?`((?:${N})(?:/(?:${N}))*)`:`(${N})`;p||(x=V&&u.length<2?`(?:/${x})`:"/"+x),V&&(x+="?"),s+=x,_+=Mt.Dynamic,V&&(_+=Mt.BonusOptional),D&&(_+=Mt.BonusRepeatable),N===".*"&&(_+=Mt.BonusWildcard)}f.push(_)}r.push(f)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=Mt.BonusStrict}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function c(u){const f=u.match(o),p={};if(!f)return null;for(let m=1;m<f.length;m++){const _=f[m]||"",C=i[m-1];p[C.name]=_&&C.repeatable?_.split("/"):_}return p}function l(u){let f="",p=!1;for(const m of t){(!p||!f.endsWith("/"))&&(f+="/"),p=!1;for(const _ of m)if(_.type===Hr.Static)f+=_.value;else if(_.type===Hr.Param){const{value:C,repeatable:D,optional:V}=_,H=C in u?u[C]:"";if(un(H)&&!D)throw new Error(`Provided param "${C}" is an array but it is not repeatable (* or + modifiers)`);const N=un(H)?H.join("/"):H;if(!N)if(V)m.length<2&&(f.endsWith("/")?f=f.slice(0,-1):p=!0);else throw new Error(`Missing required param "${C}"`);f+=N}}return f||"/"}return{re:o,score:r,keys:i,parse:c,stringify:l}}function Gb(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===Mt.Static+Mt.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Mt.Static+Mt.Segment?1:-1:0}function vy(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=Gb(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(fp(r))return 1;if(fp(s))return-1}return s.length-r.length}function fp(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Qb={strict:!1,end:!0,sensitive:!1};function Yb(t,e,n){const r=Kb(Hb(t.path),n),s=Ne(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function Jb(t,e){const n=[],r=new Map;e=sp(Qb,e);function s(p){return r.get(p)}function i(p,m,_){const C=!_,D=pp(p);D.aliasOf=_&&_.record;const V=sp(e,p),H=[D];if("alias"in p){const F=typeof p.alias=="string"?[p.alias]:p.alias;for(const te of F)H.push(pp(Ne({},D,{components:_?_.record.components:D.components,path:te,aliasOf:_?_.record:D})))}let N,x;for(const F of H){const{path:te}=F;if(m&&te[0]!=="/"){const he=m.record.path,T=he[he.length-1]==="/"?"":"/";F.path=m.record.path+(te&&T+te)}if(N=Yb(F,m,V),_?_.alias.push(N):(x=x||N,x!==N&&x.alias.push(N),C&&p.name&&!mp(N)&&o(p.name)),Ey(N)&&l(N),D.children){const he=D.children;for(let T=0;T<he.length;T++)i(he[T],N,_&&_.children[T])}_=_||N}return x?()=>{o(x)}:Li}function o(p){if(gy(p)){const m=r.get(p);m&&(r.delete(p),n.splice(n.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=n.indexOf(p);m>-1&&(n.splice(m,1),p.record.name&&r.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function c(){return n}function l(p){const m=eC(p,n);n.splice(m,0,p),p.record.name&&!mp(p)&&r.set(p.record.name,p)}function u(p,m){let _,C={},D,V;if("name"in p&&p.name){if(_=r.get(p.name),!_)throw Bs(Qe.MATCHER_NOT_FOUND,{location:p});V=_.record.name,C=Ne(dp(m.params,_.keys.filter(x=>!x.optional).concat(_.parent?_.parent.keys.filter(x=>x.optional):[]).map(x=>x.name)),p.params&&dp(p.params,_.keys.map(x=>x.name))),D=_.stringify(C)}else if(p.path!=null)D=p.path,_=n.find(x=>x.re.test(D)),_&&(C=_.parse(D),V=_.record.name);else{if(_=m.name?r.get(m.name):n.find(x=>x.re.test(m.path)),!_)throw Bs(Qe.MATCHER_NOT_FOUND,{location:p,currentLocation:m});V=_.record.name,C=Ne({},m.params,p.params),D=_.stringify(C)}const H=[];let N=_;for(;N;)H.unshift(N.record),N=N.parent;return{name:V,path:D,params:C,matched:H,meta:Zb(H)}}t.forEach(p=>i(p));function f(){n.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:f,getRoutes:c,getRecordMatcher:s}}function dp(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function pp(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:Xb(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Xb(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function mp(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Zb(t){return t.reduce((e,n)=>Ne(e,n.meta),{})}function eC(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;vy(t,e[i])<0?r=i:n=i+1}const s=tC(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function tC(t){let e=t;for(;e=e.parent;)if(Ey(e)&&vy(t,e)===0)return e}function Ey({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function gp(t){const e=ft(mc),n=ft(lh),r=ke(()=>{const l=ve(t.to);return e.resolve(l)}),s=ke(()=>{const{matched:l}=r.value,{length:u}=l,f=l[u-1],p=n.matched;if(!f||!p.length)return-1;const m=p.findIndex(Us.bind(null,f));if(m>-1)return m;const _=_p(l[u-2]);return u>1&&_p(f)===_&&p[p.length-1].path!==_?p.findIndex(Us.bind(null,l[u-2])):m}),i=ke(()=>s.value>-1&&oC(n.params,r.value.params)),o=ke(()=>s.value>-1&&s.value===n.matched.length-1&&my(n.params,r.value.params));function c(l={}){if(iC(l)){const u=e[ve(t.replace)?"replace":"push"](ve(t.to)).catch(Li);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:ke(()=>r.value.href),isActive:i,isExactActive:o,navigate:c}}function nC(t){return t.length===1?t[0]:t}const rC=sm({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:gp,setup(t,{slots:e}){const n=no(gp(t)),{options:r}=ft(mc),s=ke(()=>({[yp(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[yp(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&nC(e.default(n));return t.custom?i:Vm("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),sC=rC;function iC(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function oC(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!un(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function _p(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const yp=(t,e,n)=>t??e??n,aC=sm({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=ft(Yl),s=ke(()=>t.route||r.value),i=ft(lp,0),o=ke(()=>{let u=ve(i);const{matched:f}=s.value;let p;for(;(p=f[u])&&!p.components;)u++;return u}),c=ke(()=>s.value.matched[o.value]);$o(lp,ke(()=>o.value+1)),$o(Lb,c),$o(Yl,s);const l=Ee();return cn(()=>[l.value,c.value,t.name],([u,f,p],[m,_,C])=>{f&&(f.instances[p]=u,_&&_!==f&&u&&u===m&&(f.leaveGuards.size||(f.leaveGuards=_.leaveGuards),f.updateGuards.size||(f.updateGuards=_.updateGuards))),u&&f&&(!_||!Us(f,_)||!m)&&(f.enterCallbacks[p]||[]).forEach(D=>D(u))},{flush:"post"}),()=>{const u=s.value,f=t.name,p=c.value,m=p&&p.components[f];if(!m)return vp(n.default,{Component:m,route:u});const _=p.props[f],C=_?_===!0?u.params:typeof _=="function"?_(u):_:null,V=Vm(m,Ne({},C,e,{onVnodeUnmounted:H=>{H.component.isUnmounted&&(p.instances[f]=null)},ref:l}));return vp(n.default,{Component:V,route:u})||V}}});function vp(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const cC=aC;function lC(t){const e=Jb(t.routes,t),n=t.parseQuery||Ob,r=t.stringifyQuery||cp,s=t.history,i=di(),o=di(),c=di(),l=Rv(sr);let u=sr;Is&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=rl.bind(null,L=>""+L),p=rl.bind(null,_b),m=rl.bind(null,Zi);function _(L,Z){let J,se;return gy(L)?(J=e.getRecordMatcher(L),se=Z):se=L,e.addRoute(se,J)}function C(L){const Z=e.getRecordMatcher(L);Z&&e.removeRoute(Z)}function D(){return e.getRoutes().map(L=>L.record)}function V(L){return!!e.getRecordMatcher(L)}function H(L,Z){if(Z=Ne({},Z||l.value),typeof L=="string"){const b=sl(n,L,Z.path),M=e.resolve({path:b.path},Z),B=s.createHref(b.fullPath);return Ne(b,M,{params:m(M.params),hash:Zi(b.hash),redirectedFrom:void 0,href:B})}let J;if(L.path!=null)J=Ne({},L,{path:sl(n,L.path,Z.path).path});else{const b=Ne({},L.params);for(const M in b)b[M]==null&&delete b[M];J=Ne({},L,{params:p(b)}),Z.params=p(Z.params)}const se=e.resolve(J,Z),we=L.hash||"";se.params=f(m(se.params));const E=Eb(r,Ne({},L,{hash:pb(we),path:se.path})),w=s.createHref(E);return Ne({fullPath:E,hash:we,query:r===cp?xb(L.query):L.query||{}},se,{redirectedFrom:void 0,href:w})}function N(L){return typeof L=="string"?sl(n,L,l.value.path):Ne({},L)}function x(L,Z){if(u!==L)return Bs(Qe.NAVIGATION_CANCELLED,{from:Z,to:L})}function F(L){return T(L)}function te(L){return F(Ne(N(L),{replace:!0}))}function he(L,Z){const J=L.matched[L.matched.length-1];if(J&&J.redirect){const{redirect:se}=J;let we=typeof se=="function"?se(L,Z):se;return typeof we=="string"&&(we=we.includes("?")||we.includes("#")?we=N(we):{path:we},we.params={}),Ne({query:L.query,hash:L.hash,params:we.path!=null?{}:L.params},we)}}function T(L,Z){const J=u=H(L),se=l.value,we=L.state,E=L.force,w=L.replace===!0,b=he(J,se);if(b)return T(Ne(N(b),{state:typeof b=="object"?Ne({},we,b.state):we,force:E,replace:w}),Z||J);const M=J;M.redirectedFrom=Z;let B;return!E&&Ib(r,se,J)&&(B=Bs(Qe.NAVIGATION_DUPLICATED,{to:M,from:se}),qt(se,se,!0,!1)),(B?Promise.resolve(B):S(M,se)).catch(O=>On(O)?On(O,Qe.NAVIGATION_GUARD_REDIRECT)?O:fn(O):Re(O,M,se)).then(O=>{if(O){if(On(O,Qe.NAVIGATION_GUARD_REDIRECT))return T(Ne({replace:w},N(O.to),{state:typeof O.to=="object"?Ne({},we,O.to.state):we,force:E}),Z||M)}else O=R(M,se,!0,w,we);return A(M,se,O),O})}function y(L,Z){const J=x(L,Z);return J?Promise.reject(J):Promise.resolve()}function v(L){const Z=nn.values().next().value;return Z&&typeof Z.runWithContext=="function"?Z.runWithContext(L):L()}function S(L,Z){let J;const[se,we,E]=Mb(L,Z);J=ol(se.reverse(),"beforeRouteLeave",L,Z);for(const b of se)b.leaveGuards.forEach(M=>{J.push(cr(M,L,Z))});const w=y.bind(null,L,Z);return J.push(w),Tt(J).then(()=>{J=[];for(const b of i.list())J.push(cr(b,L,Z));return J.push(w),Tt(J)}).then(()=>{J=ol(we,"beforeRouteUpdate",L,Z);for(const b of we)b.updateGuards.forEach(M=>{J.push(cr(M,L,Z))});return J.push(w),Tt(J)}).then(()=>{J=[];for(const b of E)if(b.beforeEnter)if(un(b.beforeEnter))for(const M of b.beforeEnter)J.push(cr(M,L,Z));else J.push(cr(b.beforeEnter,L,Z));return J.push(w),Tt(J)}).then(()=>(L.matched.forEach(b=>b.enterCallbacks={}),J=ol(E,"beforeRouteEnter",L,Z,v),J.push(w),Tt(J))).then(()=>{J=[];for(const b of o.list())J.push(cr(b,L,Z));return J.push(w),Tt(J)}).catch(b=>On(b,Qe.NAVIGATION_CANCELLED)?b:Promise.reject(b))}function A(L,Z,J){c.list().forEach(se=>v(()=>se(L,Z,J)))}function R(L,Z,J,se,we){const E=x(L,Z);if(E)return E;const w=Z===sr,b=Is?history.state:{};J&&(se||w?s.replace(L.fullPath,Ne({scroll:w&&b&&b.scroll},we)):s.push(L.fullPath,we)),l.value=L,qt(L,Z,J,w),fn()}let I;function Ke(){I||(I=s.listen((L,Z,J)=>{if(!rn.listening)return;const se=H(L),we=he(se,rn.currentRoute.value);if(we){T(Ne(we,{replace:!0,force:!0}),se).catch(Li);return}u=se;const E=l.value;Is&&Pb(ap(E.fullPath,J.delta),pc()),S(se,E).catch(w=>On(w,Qe.NAVIGATION_ABORTED|Qe.NAVIGATION_CANCELLED)?w:On(w,Qe.NAVIGATION_GUARD_REDIRECT)?(T(Ne(N(w.to),{force:!0}),se).then(b=>{On(b,Qe.NAVIGATION_ABORTED|Qe.NAVIGATION_DUPLICATED)&&!J.delta&&J.type===Gl.pop&&s.go(-1,!1)}).catch(Li),Promise.reject()):(J.delta&&s.go(-J.delta,!1),Re(w,se,E))).then(w=>{w=w||R(se,E,!1),w&&(J.delta&&!On(w,Qe.NAVIGATION_CANCELLED)?s.go(-J.delta,!1):J.type===Gl.pop&&On(w,Qe.NAVIGATION_ABORTED|Qe.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),A(se,E,w)}).catch(Li)}))}let wt=di(),Me=di(),ge;function Re(L,Z,J){fn(L);const se=Me.list();return se.length?se.forEach(we=>we(L,Z,J)):console.error(L),Promise.reject(L)}function Bt(){return ge&&l.value!==sr?Promise.resolve():new Promise((L,Z)=>{wt.add([L,Z])})}function fn(L){return ge||(ge=!L,Ke(),wt.list().forEach(([Z,J])=>L?J(L):Z()),wt.reset()),L}function qt(L,Z,J,se){const{scrollBehavior:we}=t;if(!Is||!we)return Promise.resolve();const E=!J&&kb(ap(L.fullPath,0))||(se||!J)&&history.state&&history.state.scroll||null;return hu().then(()=>we(L,Z,E)).then(w=>w&&Cb(w)).catch(w=>Re(w,L,Z))}const pt=L=>s.go(L);let Dn;const nn=new Set,rn={currentRoute:l,listening:!0,addRoute:_,removeRoute:C,clearRoutes:e.clearRoutes,hasRoute:V,getRoutes:D,resolve:H,options:t,push:F,replace:te,go:pt,back:()=>pt(-1),forward:()=>pt(1),beforeEach:i.add,beforeResolve:o.add,afterEach:c.add,onError:Me.add,isReady:Bt,install(L){L.component("RouterLink",sC),L.component("RouterView",cC),L.config.globalProperties.$router=rn,Object.defineProperty(L.config.globalProperties,"$route",{enumerable:!0,get:()=>ve(l)}),Is&&!Dn&&l.value===sr&&(Dn=!0,F(s.location).catch(se=>{}));const Z={};for(const se in sr)Object.defineProperty(Z,se,{get:()=>l.value[se],enumerable:!0});L.provide(mc,rn),L.provide(lh,Yp(Z)),L.provide(Yl,l);const J=L.unmount;nn.add(L),L.unmount=function(){nn.delete(L),nn.size<1&&(u=sr,I&&I(),I=null,l.value=sr,Dn=!1,ge=!1),J()}}};function Tt(L){return L.reduce((Z,J)=>Z.then(()=>v(J)),Promise.resolve())}return rn}function hn(){return ft(mc)}function os(t){return ft(lh)}const de=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},uC={},hC={viewBox:"0 0 576 512",xmlns:"http://www.w3.org/2000/svg"};function fC(t,e){return q(),Q("svg",hC,[...e[0]||(e[0]=[W("path",{fill:"currentColor",d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},null,-1)])])}const dC=de(uC,[["render",fC]]),pC=["type"],mC={__name:"ButtonBlue",props:{type:{type:String,default:"button"},class:{type:String,default:""},size:{type:Number,default:16},border:{type:Boolean,default:!1}},setup(t){const e=t,n=ke(()=>({"--svg-size":`${e.size}px`}));return(r,s)=>(q(),Q("button",{style:Ua(n.value),type:e.type,class:ot(["button",e.class,{border:e.border}])},[tE(r.$slots,"default",{},void 0)],14,pC))}},Nn=de(mC,[["__scopeId","data-v-93442288"]]),gC={__name:"HomeButton",setup(t){const e=hn(),n=We(),r=()=>{n.pageNum=1,n.genreIdStore=null,e.push({name:"home"})};return(s,i)=>(q(),He(Nn,{onClick:r,size:18},{default:Qt(()=>[ne(dC),i[0]||(i[0]=Ut("Home",-1))]),_:1}))}},_C={},yC={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 496 512"};function vC(t,e){return q(),Q("svg",yC,[...e[0]||(e[0]=[W("path",{fill:"currentColor",d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"},null,-1)])])}const EC=de(_C,[["render",vC]]),IC={name:"IconGoogle"},wC={class:"icon-google"};function TC(t,e,n,r,s,i){return q(),Q("span",wC)}const AC=de(IC,[["render",TC],["__scopeId","data-v-e8f2dc2a"]]),SC={class:"registration--form"},RC={key:0,class:"err-string"},bC={class:"btns"},CC={__name:"RegistrationComponent",emits:["setForm"],setup(t,{emit:e}){const n=e,r=We(),s=Ee(""),i=Ee(""),o=Ee(""),c=Ee(""),l=async()=>{await r.createAuthWithEmailAndPassword({email:s.value,password:i.value,user_name:o.value,api_key:c.value})},u=()=>{n("setForm","sign")},f=()=>{console.warn("ok")};return(p,m)=>(q(),Q("div",SC,[m[5]||(m[5]=W("h3",null,"",-1)),W("p",null,[ht(W("input",{type:"text",placeholder:"","onUpdate:modelValue":m[0]||(m[0]=_=>s.value=_)},null,512),[[Fn,s.value]])]),W("p",null,[ht(W("input",{type:"text",placeholder:"","onUpdate:modelValue":m[1]||(m[1]=_=>o.value=_)},null,512),[[Fn,o.value]])]),W("p",null,[ht(W("input",{type:"text",placeholder:"Api ","onUpdate:modelValue":m[2]||(m[2]=_=>c.value=_)},null,512),[[Fn,c.value]]),m[4]||(m[4]=W("small",null,[W("a",{target:"_blank",href:"https://kinopoiskapiunofficial.tech/signup"},"  API")],-1))]),W("p",null,[ht(W("input",{type:"password",placeholder:"Password","onUpdate:modelValue":m[3]||(m[3]=_=>i.value=_)},null,512),[[Fn,i.value]])]),ve(r).errorMessage?(q(),Q("p",RC,at(ve(r).errorMessage),1)):dt("",!0),W("div",bC,[W("button",{class:"reg",onClick:Cn(l,["prevent"])},""),W("button",{class:"sign",onClick:Cn(u,["prevent"])},""),ne(AC,{onClick:f})])]))}},PC=de(CC,[["__scopeId","data-v-a4727e68"]]),kC={class:"registration--form"},NC={key:0,class:"err-string"},DC={class:"btns"},VC={__name:"SignInComponent",emits:["setForm"],setup(t,{emit:e}){const n=e,r=Ee(""),s=Ee(""),i=We(),o=async()=>{await i.authWithEmailAndPassword({email:r.value,password:s.value})},c=()=>{n("setForm","reg")};return(l,u)=>(q(),Q("div",kC,[u[2]||(u[2]=W("h3",{class:"name"},"",-1)),W("p",null,[ht(W("input",{type:"text",placeholder:"Email","onUpdate:modelValue":u[0]||(u[0]=f=>r.value=f)},null,512),[[Fn,r.value]])]),W("p",null,[ht(W("input",{type:"password",placeholder:"Password","onUpdate:modelValue":u[1]||(u[1]=f=>s.value=f)},null,512),[[Fn,s.value]])]),ve(i).errorMessage?(q(),Q("p",NC,at(ve(i).errorMessage),1)):dt("",!0),W("div",DC,[W("button",{class:"sign",onClick:Cn(o,["prevent"])},""),W("button",{class:"reg",onClick:Cn(c,["prevent"])},"")])]))}},OC=de(VC,[["__scopeId","data-v-39a8d4db"]]),xC={},LC={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640"};function MC(t,e){return q(),Q("svg",LC,[...e[0]||(e[0]=[W("path",{fill:"currentColor",d:"M535.6 85.7C513.7 63.8 478.3 63.8 456.4 85.7L432 110.1L529.9 208L554.3 183.6C576.2 161.7 576.2 126.3 554.3 104.4L535.6 85.7zM236.4 305.7C230.3 311.8 225.6 319.3 222.9 327.6L193.3 416.4C190.4 425 192.7 434.5 199.1 441C205.5 447.5 215 449.7 223.7 446.8L312.5 417.2C320.7 414.5 328.2 409.8 334.4 403.7L496 241.9L398.1 144L236.4 305.7zM160 128C107 128 64 171 64 224L64 480C64 533 107 576 160 576L416 576C469 576 512 533 512 480L512 384C512 366.3 497.7 352 480 352C462.3 352 448 366.3 448 384L448 480C448 497.7 433.7 512 416 512L160 512C142.3 512 128 497.7 128 480L128 224C128 206.3 142.3 192 160 192L256 192C273.7 192 288 177.7 288 160C288 142.3 273.7 128 256 128L160 128z"},null,-1)])])}const FC=de(xC,[["render",MC]]),UC={class:"registration--form"},BC={class:"name"},$C={key:0,class:"container"},jC={class:"btns"},qC={__name:"LogoutComponent",setup(t){const e=We(),n=Ee(!1),r=Ee(e.user.name),s=Ee(e.apiKey),i=async()=>{r.value.length<3||(n.value=!1,await e.editAuthNameOrApiKey({userName:r.value,apiKey:s.value}))},o=()=>{n.value=!n.value},c=async()=>{await e.authLogout()};return(l,u)=>(q(),Q("div",UC,[W("h3",null,[u[2]||(u[2]=Ut("   : ",-1)),W("strong",BC,at(ve(e).user.name),1),W("button",{class:"edit",onClick:o},[ne(FC)])]),n.value?(q(),Q("div",$C,[W("p",null,[ht(W("input",{type:"text",placeholder:"","onUpdate:modelValue":u[0]||(u[0]=f=>r.value=f)},null,512),[[Fn,r.value]])]),W("p",null,[ht(W("input",{type:"text",placeholder:"Api ","onUpdate:modelValue":u[1]||(u[1]=f=>s.value=f)},null,512),[[Fn,s.value]])]),W("button",{onClick:i},"")])):dt("",!0),W("div",jC,[W("button",{class:"reg",onClick:Cn(c,["prevent"])},"")])]))}},HC=de(qC,[["__scopeId","data-v-4dbbbef6"]]),zC={class:"registration-wrap"},WC={key:0,class:"registration-wrap--pop"},KC={__name:"RegistrationWrap",setup(t){const e=We(),n=Ee(!1),r=Ee("sign"),s=ft("emitter"),i=()=>{n.value=!n.value},o=l=>{e.errorMessage="",r.value=l},c=()=>{s.emit("setUserData")};return Yt(async()=>{await e.authChange(c),await s.emit("setUserData")}),(l,u)=>(q(),Q("div",zC,[ne(Nn,{class:"button",onClick:i,size:22},{default:Qt(()=>[ne(EC)]),_:1}),n.value?(q(),Q("div",WC,[ve(e).user?(q(),He(HC,{key:0})):r.value==="sign"?(q(),He(OC,{key:1,onSetForm:o})):r.value==="reg"?(q(),He(PC,{key:2,onSetForm:o})):dt("",!0)])):dt("",!0)]))}},GC=de(KC,[["__scopeId","data-v-95c5e53f"]]),QC={},YC={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640"};function JC(t,e){return q(),Q("svg",YC,[...e[0]||(e[0]=[W("path",{fill:"currentColor",d:"M96 160C96 124.7 124.7 96 160 96L480 96C515.3 96 544 124.7 544 160L544 480C544 515.3 515.3 544 480 544L160 544C124.7 544 96 515.3 96 480L96 160zM144 432L144 464C144 472.8 151.2 480 160 480L192 480C200.8 480 208 472.8 208 464L208 432C208 423.2 200.8 416 192 416L160 416C151.2 416 144 423.2 144 432zM448 416C439.2 416 432 423.2 432 432L432 464C432 472.8 439.2 480 448 480L480 480C488.8 480 496 472.8 496 464L496 432C496 423.2 488.8 416 480 416L448 416zM144 304L144 336C144 344.8 151.2 352 160 352L192 352C200.8 352 208 344.8 208 336L208 304C208 295.2 200.8 288 192 288L160 288C151.2 288 144 295.2 144 304zM448 288C439.2 288 432 295.2 432 304L432 336C432 344.8 439.2 352 448 352L480 352C488.8 352 496 344.8 496 336L496 304C496 295.2 488.8 288 480 288L448 288zM144 176L144 208C144 216.8 151.2 224 160 224L192 224C200.8 224 208 216.8 208 208L208 176C208 167.2 200.8 160 192 160L160 160C151.2 160 144 167.2 144 176zM448 160C439.2 160 432 167.2 432 176L432 208C432 216.8 439.2 224 448 224L480 224C488.8 224 496 216.8 496 208L496 176C496 167.2 488.8 160 480 160L448 160z"},null,-1)])])}const XC=de(QC,[["render",JC]]),ZC={__name:"LastViewButton",setup(t){const e=hn(),n=We(),r=()=>{n.pageNum=1,n.genreIdStore=null,e.push({name:"lastViews"})};return(s,i)=>(q(),He(Nn,{onClick:r,size:26},{default:Qt(()=>[ne(XC)]),_:1}))}},eP={},tP={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"};function nP(t,e){return q(),Q("svg",tP,[...e[0]||(e[0]=[W("path",{fill:"currentColor",d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},null,-1)])])}const Iy=de(eP,[["render",nP]]),rP={__name:"FavoriteButton",setup(t){const e=hn(),n=We(),r=ke(()=>n.favoriteList.length),s=ke(()=>n.user===null?"disabled":""),i=()=>{n.pageNum=1,n.genreIdStore=null,e.push({name:"favorite"})};return(o,c)=>(q(),He(Nn,{onClick:i,class:ot(s.value),size:18},{default:Qt(()=>[ne(Iy),Ut(at(r.value),1)]),_:1},8,["class"]))}},sP=de(rP,[["__scopeId","data-v-d99dd994"]]),iP={},oP={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"};function aP(t,e){return q(),Q("svg",oP,[...e[0]||(e[0]=[W("path",{fill:"currentColor",d:"M142.9 142.9c-17.5 17.5-30.1 38-37.8 59.8c-5.9 16.7-24.2 25.4-40.8 19.5s-25.4-24.2-19.5-40.8C55.6 150.7 73.2 122 97.6 97.6c87.2-87.2 228.3-87.5 315.8-1L455 55c6.9-6.9 17.2-8.9 26.2-5.2s14.8 12.5 14.8 22.2l0 128c0 13.3-10.7 24-24 24l-8.4 0c0 0 0 0 0 0L344 224c-9.7 0-18.5-5.8-22.2-14.8s-1.7-19.3 5.2-26.2l41.1-41.1c-62.6-61.5-163.1-61.2-225.3 1zM16 312c0-13.3 10.7-24 24-24l7.6 0 .7 0L168 288c9.7 0 18.5 5.8 22.2 14.8s1.7 19.3-5.2 26.2l-41.1 41.1c62.6 61.5 163.1 61.2 225.3-1c17.5-17.5 30.1-38 37.8-59.8c5.9-16.7 24.2-25.4 40.8-19.5s25.4 24.2 19.5 40.8c-10.8 30.6-28.4 59.3-52.9 83.8c-87.2 87.2-228.3 87.5-315.8 1L57 457c-6.9 6.9-17.2 8.9-26.2 5.2S16 449.7 16 440l0-119.6 0-.7 0-7.6z"},null,-1)])])}const cP=de(iP,[["render",aP]]),lP={__name:"ReloadButton",setup(t){const e=()=>{document.location.reload()};return(n,r)=>(q(),He(Nn,{onClick:e,size:20,class:"reload"},{default:Qt(()=>[ne(cP)]),_:1}))}},uP=de(lP,[["__scopeId","data-v-275421c1"]]),hP={__name:"SearchPopup",setup(t){const e=We(),n=hn(),r=i=>{e.pageNum=1,e.searchQueryStore=i,n.push({name:"searchPage",query:{q:e.searchQueryStore}}),e.setShowLastSearchList(!1)},s=()=>{e.setShowLastSearchList(!1)};return(i,o)=>ve(e).lastSearchList.length?(q(),Q("div",{key:0,class:ot(["search-popup",{opened:ve(e).isShowLastSearchList}])},[W("button",{type:"button",class:"close-list",onClick:s},""),W("ul",null,[(q(!0),Q(je,null,wr(ve(e).lastSearchList,c=>(q(),Q("li",{key:c.id},[ne(Nn,{onClick:l=>r(c.value)},{default:Qt(()=>[Ut(at(c.value),1)]),_:2},1032,["onClick"])]))),128))])],2)):dt("",!0)}},fP=de(hP,[["__scopeId","data-v-6fcc7770"]]),dP={class:"input-wrap"},pP={__name:"SearchForm",props:{visibleSearch:{type:Boolean,default:!1}},setup(t){const e=t,n=os(),r=hn(),s=We();Yt(()=>{s.searchQueryStore=i.value});const i=ke(()=>n.query.q),o=Ee(null),c=async()=>{s.addLastSearchList(s.searchQueryStore),s.pageNum=1,r.push({name:"searchPage",query:s.searchQueryWithGenre()}),s.setShowLastSearchList(!1)},l=()=>{s.setShowLastSearchList(!0)},u=()=>{s.searchQueryStore="",o.value.focus()};return(f,p)=>(q(),Q("form",{action:"#",class:ot(["search-form",{show:e.visibleSearch}]),onSubmit:Cn(c,["prevent"])},[W("div",dP,[ht(W("input",{ref_key:"searchInput",ref:o,autocomplete:"off",type:"text",onKeyup:dI(c,["enter"]),onFocus:l,placeholder:"  / ID ","onUpdate:modelValue":p[0]||(p[0]=m=>ve(s).searchQueryStore=m),name:"keyword"},null,544),[[Fn,ve(s).searchQueryStore,void 0,{trim:!0}]]),ne(Nn,{class:ot(["clear-input",{show:ve(s).searchQueryStore}]),onClick:u},{default:Qt(()=>[...p[1]||(p[1]=[Ut("",-1)])]),_:1},8,["class"])]),ne(Nn,{type:"submit",border:!0},{default:Qt(()=>[...p[2]||(p[2]=[Ut("",-1)])]),_:1}),ne(fP)],34))}},mP=de(pP,[["__scopeId","data-v-84c0a647"]]),gP={},_P={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"};function yP(t,e){return q(),Q("svg",_P,[...e[0]||(e[0]=[W("path",{fill:"currentColor",d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM184 296c0 13.3 10.7 24 24 24s24-10.7 24-24l0-64 64 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-64 0 0-64c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 64-64 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l64 0 0 64z"},null,-1)])])}const vP=de(gP,[["render",yP]]),EP={},IP={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"};function wP(t,e){return q(),Q("svg",IP,[...e[0]||(e[0]=[W("path",{fill:"currentColor",d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM136 184c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0z"},null,-1)])])}const TP=de(EP,[["render",wP]]),AP={__name:"HeaderFilm",setup(t){const e=os(),n=ke(()=>e.query.q),r=Ee(!!(n.value|e.name==="searchPage")),s=()=>{r.value=!r.value};return(i,o)=>(q(),Q("header",null,[ne(gC),ne(ZC),ne(sP),ne(mP,{visibleSearch:r.value},null,8,["visibleSearch"]),ne(GC),ne(uP),ne(Nn,{onClick:s,size:20,class:ot(["search-popup-btn",{opened:r.value}])},{default:Qt(()=>[r.value?(q(),He(TP,{key:0})):(q(),He(vP,{key:1}))]),_:1},8,["class"])]))}},SP=de(AP,[["__scopeId","data-v-26951fe0"]]),RP={class:"genres-wrap"},bP={class:"genres"},CP=["onClick"],PP={__name:"GenreList",setup(t){const e=os(),n=hn(),r=We(),s=ke(()=>e.query.genres),i=c=>{+r.genreIdStore==+c?r.genreIdStore=null:r.genreIdStore=c,r.pageNum=1,n.push({name:"searchPage",query:r.searchQueryWithGenre()})};async function o(){await r.getGenreList()}return Yt(async()=>{r.genreIdStore=s.value,await o()}),(c,l)=>(q(),Q("div",RP,[W("ul",bP,[(q(!0),Q(je,null,wr(ve(r).genreListStore,u=>(q(),Q("li",{class:ot({active:+u.id==+ve(r).genreIdStore}),key:u.id},[W("span",{onClick:f=>i(u.id)},at(u.genre),9,CP)],2))),128))])]))}},kP=de(PP,[["__scopeId","data-v-23b8f64a"]]),NP={__name:"ToTop",setup(t){const e=()=>{window.scrollTo({top:0,behavior:"smooth"})};return(n,r)=>(q(),Q("button",{class:"button",onClick:e}))}},DP=de(NP,[["__scopeId","data-v-9be23ada"]]),ds={ArrowDown:"ArrowDown",ArrowUp:"ArrowUp",ArrowRight:"ArrowRight",ArrowLeft:"ArrowLeft",Enter:"Enter",NumpadEnter:"Enter"},al={desktop:1024,tablet:768,mobile:480},Ep={Alloha:(t,e)=>`https://harald-as.newplayjj.com/?kp=${t}&token=${e}`,Collaps:t=>`https://api.atomics.ws/embed/kp/${t}`,VideoCDN:t=>`https://p.lumex.space/j3mqebEPqCLB?domain=nayteruz.github.io&kp_id=${t}`,Coll:async t=>{const e=`https://api.bhcesh.me/list?token=4c250f7ac0a8c8a658c789186b9a58a5&kinopoisk_id=${t}`;try{const r=await(await fetch(e)).json();if(Array.isArray(r.results)&&r.results.length>0&&r.results?.[0].iframe_url)return r.results?.[0].iframe_url}catch(n){console.error("HDVB error:",n)}return null},kodi:async t=>{const e=`https://kodikapi.com/search?token=41dd95f84c21719b09d6c71182237a25&kinopoisk_id=${t}`;try{const r=await(await fetch(e)).json();if(Array.isArray(r.results)&&r.results.length>0&&r.results?.[0].link)return r.results?.[0].link}catch(n){console.error("HDVB error:",n)}return null},HDVB:async(t,e)=>{const n=`https://apivb.com/api/videos.json?id_kp=${t}&token=${e}`;try{const s=await(await fetch(n)).json();if(Array.isArray(s)&&s.length>0&&s[0].iframe_url)return s[0].iframe_url}catch(r){console.error("HDVB error:",r)}return null},Kodik:t=>`https:////kodik.cc/find-player?kinopoiskID=${t}`,:t=>`https://api.atomics.ws/embed/trailer-kp/${t}`},uh={MAIN:"  ",LAST_VIEWS:" ",FAVORITE:" /  "},VP={__name:"NavigationByKeys",setup(t){const e=hn(),n=We(),r=Ee(0),s=Ee(n.films.length),i=Ee(e.currentRoute.value.href||document.location.pathname),o=()=>{n.currentFocusIndex===-1?n.currentFocusIndex=0:n.currentFocusIndex=Math.min(s.value-1,n.currentFocusIndex+r.value)},c=()=>{n.currentFocusIndex=Math.max(0,n.currentFocusIndex-r.value)},l=()=>{n.currentFocusIndex=Math.min(s.value-1,n.currentFocusIndex+1)},u=()=>{n.currentFocusIndex=Math.max(0,n.currentFocusIndex-1)},f=()=>{const _=n.currentFocusIndex;if(_===-1)return;const C=n.films[_].filmId||n.films[_].kinopoiskId;e.push(`/film/${C}`)},p=_=>{switch(_.key){case ds.ArrowDown:o();break;case ds.ArrowUp:c();break;case ds.ArrowRight:l();break;case ds.ArrowLeft:u();break;case ds.Enter:case ds.NumpadEnter:f();break}},m=()=>{window.innerWidth>al.desktop?r.value=5:window.innerWidth>al.tablet?r.value=4:window.innerWidth>al.mobile?r.value=3:r.value=2};return cn(()=>n.films,_=>{s.value=_.length}),Yt(()=>{window.removeEventListener("keydown",p),e.currentRoute.value.name!=="filmPage"&&(window.addEventListener("keydown",p),setTimeout(()=>{if(e.currentRoute.value.name!=="filmPage")if(window.scrollY===0){const _=e.currentRoute.value.href||document.location.pathname;n.focusIds={...n.focusIds,[_]:-1},n.currentFocusIndex=-1}else n.currentFocusIndex=n.focusIds[i.value]||-1},1),m())}),so(()=>{window.removeEventListener("keydown",p),e.currentRoute.value&&(n.focusIds={...n.focusIds,[i.value]:n.currentFocusIndex})}),(_,C)=>(q(),Q("div"))}},OP={class:"wrapper"},xP={__name:"App",setup(t){const e=We(),n=r=>{r.target.closest(".search-form")||e.setShowLastSearchList(!1)};return Yt(()=>{document.addEventListener("click",n)}),so(()=>{document.removeEventListener("click",n)}),(r,s)=>{const i=um("RouterView");return q(),Q("div",OP,[(q(),He(SP,{key:r.$route.fullPath})),ne(kP),ne(i,null,{default:Qt(({Component:o})=>[(q(),He(qv,{include:"MainList"},[(q(),He(eE(o),{key:r.$route.fullPath}))],1024))]),_:1}),ne(DP),(q(),He(VP,{key:r.$route.fullPath}))])}}},LP={class:"favorite-icon"},MP={key:0,class:"loading-round"},FP={__name:"FavoriteActionButton",props:{filmId:Number},setup(t){const e=t,n=Ee(!1),r=Ee(!1),s=ft("emitter"),i=We(),o=()=>{n.value=e.filmId?i.checkIsFavorite(e.filmId):!1};async function c(){if(!i.user){alert(" ");return}if(r.value=!0,n.value)await i.removeFavorite(e.filmId),n.value=!1;else{const l=await cy(e.filmId);await i.addFavorite(await l),n.value=!0}r.value=!1}return Yt(()=>{o()}),s.on("setUserData",o),(l,u)=>(q(),Q("span",LP,[r.value?(q(),Q("span",MP)):dt("",!0),ne(Iy,{class:ot({active:n.value}),onClick:Cn(c,["prevent"])},null,8,["class"])]))}},wy=de(FP,[["__scopeId","data-v-6d7ae091"]]),UP={},BP={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640"};function $P(t,e){return q(),Q("svg",BP,[...e[0]||(e[0]=[W("path",{fill:"currentColor",d:"M320 96C239.2 96 174.5 132.8 127.4 176.6C80.6 220.1 49.3 272 34.4 307.7C31.1 315.6 31.1 324.4 34.4 332.3C49.3 368 80.6 420 127.4 463.4C174.5 507.1 239.2 544 320 544C400.8 544 465.5 507.2 512.6 463.4C559.4 419.9 590.7 368 605.6 332.3C608.9 324.4 608.9 315.6 605.6 307.7C590.7 272 559.4 220 512.6 176.6C465.5 132.9 400.8 96 320 96zM176 320C176 240.5 240.5 176 320 176C399.5 176 464 240.5 464 320C464 399.5 399.5 464 320 464C240.5 464 176 399.5 176 320zM320 256C320 291.3 291.3 320 256 320C244.5 320 233.7 317 224.3 311.6C223.3 322.5 224.2 333.7 227.2 344.8C240.9 396 293.6 426.4 344.8 412.7C396 399 426.4 346.3 412.7 295.1C400.5 249.4 357.2 220.3 311.6 224.3C316.9 233.6 320 244.4 320 256z"},null,-1)])])}const jP=de(UP,[["render",$P]]),qP={},HP={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640"};function zP(t,e){return q(),Q("svg",HP,[...e[0]||(e[0]=[W("path",{fill:"currentColor",d:"M73 39.1C63.6 29.7 48.4 29.7 39.1 39.1C29.8 48.5 29.7 63.7 39 73.1L567 601.1C576.4 610.5 591.6 610.5 600.9 601.1C610.2 591.7 610.3 576.5 600.9 567.2L504.5 470.8C507.2 468.4 509.9 466 512.5 463.6C559.3 420.1 590.6 368.2 605.5 332.5C608.8 324.6 608.8 315.8 605.5 307.9C590.6 272.2 559.3 220.2 512.5 176.8C465.4 133.1 400.7 96.2 319.9 96.2C263.1 96.2 214.3 114.4 173.9 140.4L73 39.1zM236.5 202.7C260 185.9 288.9 176 320 176C399.5 176 464 240.5 464 320C464 351.1 454.1 379.9 437.3 403.5L402.6 368.8C415.3 347.4 419.6 321.1 412.7 295.1C399 243.9 346.3 213.5 295.1 227.2C286.5 229.5 278.4 232.9 271.1 237.2L236.4 202.5zM357.3 459.1C345.4 462.3 332.9 464 320 464C240.5 464 176 399.5 176 320C176 307.1 177.7 294.6 180.9 282.7L101.4 203.2C68.8 240 46.4 279 34.5 307.7C31.2 315.6 31.2 324.4 34.5 332.3C49.4 368 80.7 420 127.5 463.4C174.6 507.1 239.3 544 320.1 544C357.4 544 391.3 536.1 421.6 523.4L357.4 459.2z"},null,-1)])])}const WP=de(qP,[["render",zP]]),KP={class:"icon-wrapper"},GP={__name:"WatchActionButton",props:{filmId:Number},setup(t){const e=t,n=We(),r=ke(()=>n.isSkipped(e.filmId)),s=()=>{r.value?n.removeSkip(e.filmId):n.addSkip(e.filmId)};return(i,o)=>(q(),Q("span",KP,[r.value?(q(),He(WP,{key:0,class:"unwatch",onClick:Cn(s,["prevent"])})):(q(),He(jP,{key:1,onClick:Cn(s,["prevent"])}))]))}},Ty=de(GP,[["__scopeId","data-v-69ce7b7b"]]),QP={},YP={height:"16",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg"};function JP(t,e){return q(),Q("svg",YP,[...e[0]||(e[0]=[W("path",{fill:"currentColor",d:"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z",class:"star"},null,-1)])])}const XP=de(QP,[["render",JP]]),Ay=t=>{const e=t?.nameRu||t?.nameEn||t?.nameOriginal||" ",n=t?.year||"";return`${e} ${n?`(${n})`:""}`},ZP=t=>{const e=t?.rating||t?.ratingKinopoisk||t?.ratingImdb;return typeof e=="number"?e.toFixed(1):""},e2={key:0,class:"rating"},t2={__name:"FilmRating",props:{filmInfo:Object,isRating:{type:Boolean,default:!0}},setup(t){const e=t,n=ke(()=>ZP(e.filmInfo));return(r,s)=>t.isRating?(q(),Q("span",e2,[ne(XP,{class:"star"}),Ut(at(n.value),1)])):dt("",!0)}},Sy=de(t2,[["__scopeId","data-v-87429142"]]),n2=["href"],r2={class:"icon-actions"},s2={class:"image-wrapper"},i2=["src","alt"],o2={class:"name-wrapper"},a2={__name:"FilmItem",props:{itemFilm:Object,currentIndex:Number,isRating:{type:Boolean,default:!0}},setup(t){const e=t,n=hn(),r=We(),s=Ee(null),i=ke(()=>e.currentIndex===r.currentFocusIndex),o=ke(()=>Ay(e.itemFilm)),c=Ee(!1),l=e.itemFilm.filmId||e.itemFilm.kinopoiskId,u=ke(()=>r.isSkipped(l)),f=()=>{n.push(`/film/${l}`)},p=()=>{c.value=!0},m=()=>{c.value=!1};return cn(i,()=>{if(i.value&&s.value){const _=s.value.getBoundingClientRect(),C=document.documentElement.scrollTop,D=C+window.innerHeight,V=_.bottom+C;(_.top<0||V>D)&&window.scrollTo(0,C+_.top-80)}}),(_,C)=>(q(),Q("li",{class:ot(["card",{focused:i.value|c.value,unwatch:u.value}]),onMouseover:p,onMouseleave:m,tabindex:"0",ref_key:"itemRef",ref:s},[W("a",{href:`/film/${ve(l)}`,class:"card-link",onClick:Cn(f,["prevent"])},null,8,n2),W("div",r2,[ne(wy,{class:"favorite",filmId:ve(l)},null,8,["filmId"]),ne(Ty,{class:"watch",filmId:ve(l)},null,8,["filmId"]),ne(Sy,{filmInfo:e.itemFilm,isRating:e.isRating},null,8,["filmInfo","isRating"])]),W("div",s2,[C[0]||(C[0]=W("svg",{xmlns:"http://www.w3.org/2000/svg",width:"360",height:"540"},null,-1)),W("img",{src:t.itemFilm.posterUrlPreview,alt:e.itemFilm.nameRu},null,8,i2)]),W("div",o2,[W("h3",null,at(o.value),1)])],34))}},c2=de(a2,[["__scopeId","data-v-e5372f13"]]),l2={};function u2(t,e){return q(),Q(je,null,wr(20,n=>W("li",{class:"films__item preload-card",key:n},[...e[0]||(e[0]=[W("div",{class:"item__image"},[W("svg",{xmlns:"http://www.w3.org/2000/svg",width:"360",height:"540"})],-1)])])),64)}const h2=de(l2,[["render",u2],["__scopeId","data-v-aadc4565"]]),f2={key:0,class:"films__list"},d2={key:1,class:"not-found"},p2={__name:"FilmList",props:{showPreload:{type:Boolean,default:!1},items:{type:Array,default:()=>[]},isRating:{type:Boolean,default:!0}},setup(t){const e=We(),n=ft("emitter"),r=t,s=Ee(!1);return n.on("isLoading",i=>{s.value=i}),Yt(()=>{e.hasFilmList=!0}),so(()=>{e.hasFilmList=!1}),(i,o)=>(q(),Q("div",{class:ot(["films__wrap",{loading:s.value}])},[r.items.length?(q(),Q("ul",f2,[(q(!0),Q(je,null,wr(r.items,(c,l)=>(q(),He(c2,{itemFilm:c,key:c.filmId||c.kinopoiskId,currentIndex:l,isRating:r.isRating},null,8,["itemFilm","currentIndex","isRating"]))),128)),r.showPreload?(q(),He(h2,{key:0})):dt("",!0)])):(q(),Q("h2",d2,"  "))],2))}},vo=de(p2,[["__scopeId","data-v-a91ee2b0"]]),m2={},g2={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512"};function _2(t,e){return q(),Q("svg",g2,[...e[0]||(e[0]=[W("path",{d:"M31.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34z"},null,-1)])])}const Ip=de(m2,[["render",_2],["__scopeId","data-v-f06fdeaf"]]),y2={},v2={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"};function E2(t,e){return q(),Q("svg",v2,[...e[0]||(e[0]=[W("path",{d:"M223.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L319.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L393.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34zm-192 34l136 136c9.4 9.4 24.6 9.4 33.9 0l22.6-22.6c9.4-9.4 9.4-24.6 0-33.9L127.9 256l96.4-96.4c9.4-9.4 9.4-24.6 0-33.9L201.7 103c-9.4-9.4-24.6-9.4-33.9 0l-136 136c-9.5 9.4-9.5 24.6-.1 34z"},null,-1)])])}const wp=de(y2,[["render",E2],["__scopeId","data-v-ad51d4f5"]]),I2={class:"pagination"},w2=["onClick"],T2={__name:"PaginationList",props:["total"],setup(t){const e=We(),n=ft("emitter"),r=ke(()=>e.pageNum),s=t,i=c=>{let l=[];if(s.total>6){if(r.value===1)return[1,2,3,"...",c];if(r.value>1&&r.value<3)return[1,2,3,"...",c];if(r.value===3)return[1,2,3,4,"...",c];if(r.value>3&&r.value<c-2)return[1,"...",r.value-1,r.value,r.value+1,"...",c];if(r.value===c-2)return[1,"...",r.value-1,r.value,r.value+1,c];if(r.value===c-1)return[1,"...",r.value-1,r.value,c];if(r.value===c)return[1,"...",r.value-2,r.value-1,c]}else for(let u=1;u<=c;u++)l.push(u);return l},o=(c,l="")=>{if(c==="...")return;let u;l==="prev"?u=e.pageNum-1:l==="next"?u=e.pageNum+1:l==="prevAll"?u=1:l==="nextAll"?u=s.total:u=c,e.pageNum=u,n.emit("clickPage",u)};return(c,l)=>(q(),Q("div",I2,[W("ul",null,[ht(W("li",{class:"pg first",onClick:l[0]||(l[0]=u=>o(null,"prevAll"))},[W("span",null,[ne(wp)])],512),[[Oo,ve(e).pageNum>1]]),ht(W("li",{class:"pg prev",onClick:l[1]||(l[1]=u=>o(null,"prev"))},[W("span",null,[ne(Ip)])],512),[[Oo,ve(e).pageNum>1]]),(q(!0),Q(je,null,wr(i(t.total),u=>(q(),Q("li",{key:u},[W("span",{class:ot({active:ve(e).pageNum===u}),onClick:f=>o(u)},at(u),11,w2)]))),128)),ht(W("li",{class:"pg next",onClick:l[2]||(l[2]=u=>o(null,"next"))},[W("span",null,[ne(Ip)])],512),[[Oo,ve(e).pageNum<s.total]]),ht(W("li",{class:"pg last",onClick:l[3]||(l[3]=u=>o(null,"nextAll"))},[W("span",null,[ne(wp)])],512),[[Oo,ve(e).pageNum<s.total]])])]))}},Oa=de(T2,[["__scopeId","data-v-126b0758"]]),A2={class:"list"},S2={key:0,ref:"observer",class:"observer"},R2={__name:"MainList",setup(t){const e=We(),n=ft("emitter"),r=hn(),s=Ee([]),i=Ee(0),o=Ee(!1),c=async()=>{try{return nb(e.pageNum)}catch(p){console.error("Error load films",p)}};async function l(p,m=""){m==="loading"&&n.emit("isLoading",!0),o.value=m==="preload",e.pageNum=p||e.pageNum;const _=await c();i.value=_.totalPages,m==="preload"?s.value=[...s.value,..._.items]:(s.value=[],s.value=_.items),o.value=!1,m==="loading"&&await _.items&&n.emit("isLoading",!1)}function u(){l(e.pageNum+1,"preload")}function f(){l(e.pageNum,"loading")}return n.on("clickPage",f),cn(()=>s.value,()=>{e.films=s.value}),cn(()=>r.currentRoute.value.href,()=>{e.films=s.value}),Yt(()=>{l()}),(p,m)=>{const _=Bi("title"),C=Bi("intersection");return q(),Q("div",A2,[ht((q(),Q("h1",null,[Ut(at(ve(uh).MAIN),1)])),[[_]]),ne(Oa,{total:i.value},null,8,["total"]),ne(vo,{items:s.value,showPreload:o.value},null,8,["items","showPreload"]),ne(Oa,{total:i.value},null,8,["total"]),ve(e).pageNum<i.value?ht((q(),Q("div",S2,null,512)),[[C,{getMoreFilms:u}]]):dt("",!0)])}}},b2=de(R2,[["__scopeId","data-v-73ba8f0a"]]),C2=["src"],P2={__name:"FilmPlayerClub",setup(t){const n=os().params.id;return(r,s)=>(q(),Q("div",null,[W("iframe",{src:`//496622434375553.svetacdn.in/fcvcbl7auqJG?kp_id=${ve(n)}`,width:"100%",height:"495",allowfullscreen:""},null,8,C2)]))}},k2=de(P2,[["__scopeId","data-v-e9926cdc"]]),N2={class:"player-container"},D2={class:"player-select"},V2={class:"player-name-list"},O2=["onClick"],x2={key:0},L2=["src","title"],M2={key:1},F2={__name:"PlayersList",setup(t){const e=We(),r=os().params.id,s=Ee(null),i=Ee(-1),o=Object.keys(Ep),c=Ee([]),l=f=>{i.value=f};async function u(){e.setFilmPageId(r);const f=await Promise.all(Object.entries(Ep).map(async([p,m])=>{let _=e.apiKey;p==="Alloha"&&(_=e.apiAloha),p==="HDVB"&&(_=e.apiHDBV),p!=="Alloha"&&p!=="HDVB"&&(_=void 0);let C=typeof m=="function"?await m(r,_):null;return{name:p,iframeSrc:C}}));c.value=f.filter(p=>p.iframeSrc),c.value.length>0&&(i.value=0)}return Yt(()=>{s.value&&u()}),(f,p)=>(q(),Q("div",null,[W("div",N2,[W("div",D2,[W("div",V2,[(q(!0),Q(je,null,wr(ve(o),(m,_)=>(q(),Q("button",{key:m,class:ot({"select-button":!0,active:_===i.value}),onClick:C=>l(_)},at(m),11,O2))),128))])]),W("div",{ref_key:"playerList",ref:s,class:"player-list"},[(q(!0),Q(je,null,wr(c.value,(m,_)=>(q(),Q("div",{key:m.name,class:ot({"player-item":!0,active:_===i.value})},[_===i.value?(q(),Q("div",x2,[m.iframeSrc?(q(),Q("iframe",{key:0,src:m.iframeSrc,allowfullscreen:"",loading:"lazy",title:` ${m.name}   ID ${ve(r)}`},null,8,L2)):(q(),Q("div",M2," ..."))])):dt("",!0)],2))),128))],512)])]))}},U2=de(F2,[["__scopeId","data-v-6550976b"]]),B2={class:"tab-titles"},$2={__name:"FilmPlayerSelect",setup(t){const e=Ee(0);return(n,r)=>(q(),Q(je,null,[W("ul",B2,[W("li",{class:ot({selected:e.value===1}),onClick:r[0]||(r[0]=s=>e.value=1)},"  ",2),W("li",{class:ot({selected:e.value===5}),onClick:r[1]||(r[1]=s=>e.value=5)},"Lumex",2)]),e.value===1?(q(),He(U2,{key:0})):dt("",!0),e.value===5?(q(),He(k2,{key:1})):dt("",!0)],64))}},j2=de($2,[["__scopeId","data-v-648923d6"]]),q2={},H2={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"};function z2(t,e){return q(),Q("svg",H2,[...e[0]||(e[0]=[W("path",{fill:"currentColor",d:"M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"},null,-1)])])}const W2=de(q2,[["render",z2]]),K2={__name:"ButtonBack",setup(t){const e=hn(),n=()=>{e.go(-1)};return(r,s)=>(q(),He(Nn,{onClick:n,size:18,class:"back"},{default:Qt(()=>[ne(W2),s[0]||(s[0]=Ut("",-1))]),_:1}))}},G2=de(K2,[["__scopeId","data-v-1edf2875"]]),Q2={class:"image"},Y2={class:"icon-actions"},J2=["src"],X2={__name:"FilmImage",props:{filmInfo:Object},setup(t){const e=t,n=ke(()=>e.filmInfo),r=ke(()=>e.filmInfo?.kinopoiskId??e.filmInfo?.filmId);return(s,i)=>(q(),Q("div",Q2,[W("div",Y2,[ne(wy,{class:"favorite",filmId:r.value},null,8,["filmId"]),ne(Ty,{class:"watch",filmId:r.value},null,8,["filmId"]),ne(Sy,{filmInfo:e.filmInfo,class:"rating"},null,8,["filmInfo"])]),n.value?.posterUrl?(q(),Q("img",{key:0,src:n.value?.posterUrl,alt:"filmTitle"},null,8,J2)):dt("",!0)]))}},Z2=de(X2,[["__scopeId","data-v-15680dd1"]]),e4={class:"genres"},t4=["onClick"],n4={__name:"FilmGenres",props:{genres:Array,title:String},setup(t){const e=hn(),n=t,r=ke(()=>n.genres.map(i=>i.genre)),s=i=>{const c=JSON.parse(localStorage.getItem("genres")).filter(l=>l.genre===i)[0].id;window.scrollTo(0,0),e.push({name:"searchPage",query:{genres:c}})};return(i,o)=>(q(),Q("div",e4,[W("h3",null,at(n.title),1),W("ul",null,[(q(!0),Q(je,null,wr(r.value,c=>(q(),Q("li",{key:c},[W("span",{onClick:l=>s(c)},at(c),9,t4)]))),128))])]))}},r4=de(n4,[["__scopeId","data-v-fd5de188"]]),s4={class:"film__wrap"},i4={class:"film__note"},o4={class:"film__btns"},a4={class:"film__description"},c4={key:0,class:"film__similar"},l4={__name:"FilmPage",setup(t){const e=We(),n=os(),r=Ee([]),s=Ee([]),i=ke(()=>Ay(r.value)),o=async()=>{try{const f=cy(n.params.id);r.value=await f,e.authChange().then(()=>{e.addLastViews(r.value)})}catch(f){console.error("Error load film info",f),r.value=[]}},c=async()=>{try{const p=(await eb(n.params.id)).items||[];s.value=p}catch(f){console.error("Error load similars",f),s.value=[]}},l=async()=>{try{const p=(await tb(n.params.id)).items||[];s.value=[...p,...s.value]}catch(f){console.error("Error load sequels and prequels",f)}},u=ke(()=>e.isSkipped(r.value?.kinopoiskId??r.value?.filmId));return Yt(()=>{o(),c(),l()}),(f,p)=>{const m=Bi("title");return q(),Q(je,null,[ne(G2),ht((q(),Q("h1",null,[Ut(at(i.value),1)])),[[m]]),W("div",s4,[ne(Z2,{filmInfo:r.value,class:ot({unwatch:u.value})},null,8,["filmInfo","class"]),W("div",i4,[W("div",o4,[ne(j2)]),W("div",a4,[p[0]||(p[0]=W("h3",null,":",-1)),Ut(" "+at(r.value.description),1)]),ne(r4,{genres:r.value.genres||[],title:""},null,8,["genres"]),s.value.length>0?(q(),Q("div",c4,[p[1]||(p[1]=W("h3",null," ",-1)),ne(vo,{items:s.value,isRating:!1},null,8,["items"])])):dt("",!0)])])],64)}}},u4=de(l4,[["__scopeId","data-v-8e14fdee"]]),h4={class:"list"},f4={key:0,ref:"observer",class:"observer"},d4={__name:"SearchPage",setup(t){const e=os(),n=Ee([]),r=ft("emitter"),s=We(),i=Ee(0),o=Ee(!1),c=ke(()=>e.query.q),l=ke(()=>e.query.genres),u=Ee(""),f=async()=>{const C={};s.searchQueryStore&&(C.keyword=s.searchQueryStore),s.genreIdStore&&(C.genres=s.genreIdStore),s.pageNum&&(C.page=s.pageNum);try{return rb(C)}catch(D){console.error("Error load films",D)}},p=async(C=!1,D)=>{if(s.pageNum=D||s.pageNum,s.genreIdStore||s.searchQueryStore||C){o.value=!0;const V=await f();i.value=V.totalPages,C?n.value=[...n.value,...V.items]:(n.value=[],n.value=V.items),o.value=!1}},m=()=>{p(!0,s.pageNum+1)},_=()=>{p(!1,s.pageNum)};return r.on("clickPage",_),Yt(async()=>{s.searchQueryStore=c.value,s.genreIdStore=l.value,await p(!1,1),r.on("searchSubmit",()=>{p(!1,1)}),u.value=await s.searchPageTitle()}),(C,D)=>{const V=Bi("title"),H=Bi("intersection");return q(),Q("div",h4,[ht((q(),Q("h1",null,[Ut(at(u.value),1)])),[[V]]),ne(Oa,{total:i.value,onClickPage:p},null,8,["total"]),ne(vo,{items:n.value,showPreload:o.value},null,8,["items","showPreload"]),ne(Oa,{total:i.value,onClickPage:p},null,8,["total"]),ve(s).pageNum<i.value?ht((q(),Q("div",f4,null,512)),[[H,{getMoreFilms:m}]]):dt("",!0)])}}},p4=de(d4,[["__scopeId","data-v-abe3c4ab"]]),m4={};function g4(t,e){const n=um("router-link");return q(),Q(je,null,[e[2]||(e[2]=W("h1",null,"  ",-1)),W("p",null,[e[1]||(e[1]=Ut("  ",-1)),ne(n,{to:"/"},{default:Qt(()=>[...e[0]||(e[0]=[Ut("",-1)])]),_:1})]),e[3]||(e[3]=W("br",null,null,-1))],64)}const _4=de(m4,[["render",g4],["__scopeId","data-v-1dfddbdd"]]),y4={class:"list"},v4={key:0},E4={__name:"FavoritePage",setup(t){const e=We(),n=Ee(!1);return cn(()=>e.favorites,()=>{e.films=e.favorites}),(r,s)=>(q(),Q("div",y4,[W("h1",null,at(ve(uh).FAVORITE),1),ne(vo,{items:ve(e).favoriteList,showPreload:n.value},null,8,["items","showPreload"]),ve(e).favorites.length===0?(q(),Q("h3",v4," ")):dt("",!0)]))}},I4=de(E4,[["__scopeId","data-v-0d9f7e6c"]]),w4={class:"list"},T4={key:0},A4={__name:"LastViews",setup(t){const e=We(),n=Ee(!1);return(r,s)=>(q(),Q("div",w4,[W("h1",null,at(ve(uh).LAST_VIEWS),1),ne(vo,{items:ve(e).lastViews,showPreload:n.value},null,8,["items","showPreload"]),ve(e).lastViews.length===0?(q(),Q("h3",T4," ")):dt("",!0)]))}},S4=de(A4,[["__scopeId","data-v-5dc5bcc8"]]),R4=lC({history:$b("/hometv"),routes:[{path:"/",name:"home",component:b2},{path:"/film/:id",name:"filmPage",component:u4},{path:"/search",name:"searchPage",component:p4},{path:"/favorites",name:"favorite",component:I4},{path:"/last-views",name:"lastViews",component:S4},{path:"/:pathMatch(.*)*",component:_4}]});function b4(t){return{all:t=t||new Map,on:function(e,n){var r=t.get(e);r?r.push(n):t.set(e,[n])},off:function(e,n){var r=t.get(e);r&&(n?r.splice(r.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var r=t.get(e);r&&r.slice().map(function(s){s(n)}),(r=t.get("*"))&&r.slice().map(function(s){s(e,n)})}}}var C4=function(){return!!(window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))},Jl;typeof window<"u"&&(typeof Promise<"u"?Jl=new Promise(function(t){return window.addEventListener("load",t)}):Jl={then:function(t){return window.addEventListener("load",t)}});function P4(t,e){e===void 0&&(e={});var n=e.registrationOptions;n===void 0&&(n={}),delete e.registrationOptions;var r=function(s){for(var i=[],o=arguments.length-1;o-- >0;)i[o]=arguments[o+1];e&&e[s]&&e[s].apply(e,i)};"serviceWorker"in navigator&&Jl.then(function(){C4()?(k4(t,r,n),navigator.serviceWorker.ready.then(function(s){r("ready",s)}).catch(function(s){return eo(r,s)})):(Ry(t,r,n),navigator.serviceWorker.ready.then(function(s){r("ready",s)}).catch(function(s){return eo(r,s)}))})}function eo(t,e){navigator.onLine||t("offline"),t("error",e)}function Ry(t,e,n){navigator.serviceWorker.register(t,n).then(function(r){if(e("registered",r),r.waiting){e("updated",r);return}r.onupdatefound=function(){e("updatefound",r);var s=r.installing;s.onstatechange=function(){s.state==="installed"&&(navigator.serviceWorker.controller?e("updated",r):e("cached",r))}}}).catch(function(r){return eo(e,r)})}function k4(t,e,n){fetch(t).then(function(r){r.status===404?(e("error",new Error("Service worker not found at "+t)),Tp()):r.headers.get("content-type").indexOf("javascript")===-1?(e("error",new Error("Expected "+t+" to have javascript content-type, but received "+r.headers.get("content-type"))),Tp()):Ry(t,e,n)}).catch(function(r){return eo(e,r)})}function Tp(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()}).catch(function(t){return eo(emit,t)})}P4("/hometv/service-worker.js",{ready(){console.log(`App is being served from cache by a service worker.
For more details, visit https://goo.gl/AFskqB`)},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});const N4=b4(),Qs=gI(xP);Qs.directive("intersection",RI);Qs.directive("title",bI);Qs.use(vI());Qs.use(R4);Qs.provide("emitter",N4);Qs.mount("#app");
