(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function wu(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Be={},Dr=[],An=()=>{},nm=()=>!1,Za=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Iu=t=>t.startsWith("onUpdate:"),yt=Object.assign,Tu=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Lv=Object.prototype.hasOwnProperty,Ve=(t,e)=>Lv.call(t,e),he=Array.isArray,Lr=t=>yo(t)==="[object Map]",sm=t=>yo(t)==="[object Set]",Vv=t=>yo(t)==="[object RegExp]",_e=t=>typeof t=="function",Xe=t=>typeof t=="string",es=t=>typeof t=="symbol",We=t=>t!==null&&typeof t=="object",rm=t=>(We(t)||_e(t))&&_e(t.then)&&_e(t.catch),im=Object.prototype.toString,yo=t=>im.call(t),Ov=t=>yo(t).slice(8,-1),om=t=>yo(t)==="[object Object]",Au=t=>Xe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Mi=wu(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ec=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},xv=/-\w/g,an=ec(t=>t.replace(xv,e=>e.slice(1).toUpperCase())),Mv=/\B([A-Z])/g,Ms=ec(t=>t.replace(Mv,"-$1").toLowerCase()),tc=ec(t=>t.charAt(0).toUpperCase()+t.slice(1)),Qc=ec(t=>t?`on${tc(t)}`:""),Is=(t,e)=>!Object.is(t,e),Vr=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},am=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},Su=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Fv=t=>{const e=Xe(t)?Number(t):NaN;return isNaN(e)?t:e};let Sf;const nc=()=>Sf||(Sf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function vo(t){if(he(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=Xe(s)?jv(s):vo(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(Xe(t)||We(t))return t}const Uv=/;(?![^(]*\))/g,$v=/:([^]+)/,Bv=/\/\*[^]*?\*\//g;function jv(t){const e={};return t.replace(Bv,"").split(Uv).forEach(n=>{if(n){const s=n.split($v);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Ge(t){let e="";if(Xe(t))e=t;else if(he(t))for(let n=0;n<t.length;n++){const s=Ge(t[n]);s&&(e+=s+" ")}else if(We(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Hv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Wv=wu(Hv);function cm(t){return!!t||t===""}const lm=t=>!!(t&&t.__v_isRef===!0),nt=t=>Xe(t)?t:t==null?"":he(t)||We(t)&&(t.toString===im||!_e(t.toString))?lm(t)?nt(t.value):JSON.stringify(t,um,2):String(t),um=(t,e)=>lm(e)?um(t,e.value):Lr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[Jc(s,i)+" =>"]=r,n),{})}:sm(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Jc(n))}:es(e)?Jc(e):We(e)&&!he(e)&&!om(e)?String(e):e,Jc=(t,e="")=>{var n;return es(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let Lt;class hm{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Lt,!e&&Lt&&(this.index=(Lt.scopes||(Lt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Lt;try{return Lt=this,e()}finally{Lt=n}}}on(){++this._on===1&&(this.prevScope=Lt,Lt=this)}off(){this._on>0&&--this._on===0&&(Lt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function fm(t){return new hm(t)}function dm(){return Lt}function qv(t,e=!1){Lt&&Lt.cleanups.push(t)}let He;const Yc=new WeakSet;class pm{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Lt&&Lt.active&&Lt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Yc.has(this)&&(Yc.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||gm(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Cf(this),_m(this);const e=He,n=fn;He=this,fn=!0;try{return this.fn()}finally{ym(this),He=e,fn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Ru(e);this.deps=this.depsTail=void 0,Cf(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Yc.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Pl(this)&&this.run()}get dirty(){return Pl(this)}}let mm=0,Fi,Ui;function gm(t,e=!1){if(t.flags|=8,e){t.next=Ui,Ui=t;return}t.next=Fi,Fi=t}function Cu(){mm++}function bu(){if(--mm>0)return;if(Ui){let e=Ui;for(Ui=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Fi;){let e=Fi;for(Fi=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function _m(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function ym(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),Ru(s),zv(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function Pl(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(vm(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function vm(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Xi)||(t.globalVersion=Xi,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Pl(t))))return;t.flags|=2;const e=t.dep,n=He,s=fn;He=t,fn=!0;try{_m(t);const r=t.fn(t._value);(e.version===0||Is(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{He=n,fn=s,ym(t),t.flags&=-3}}function Ru(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Ru(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function zv(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let fn=!0;const Em=[];function Gn(){Em.push(fn),fn=!1}function Kn(){const t=Em.pop();fn=t===void 0?!0:t}function Cf(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=He;He=void 0;try{e()}finally{He=n}}}let Xi=0;class Gv{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Pu{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!He||!fn||He===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==He)n=this.activeLink=new Gv(He,this),He.deps?(n.prevDep=He.depsTail,He.depsTail.nextDep=n,He.depsTail=n):He.deps=He.depsTail=n,wm(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=He.depsTail,n.nextDep=void 0,He.depsTail.nextDep=n,He.depsTail=n,He.deps===n&&(He.deps=s)}return n}trigger(e){this.version++,Xi++,this.notify(e)}notify(e){Cu();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{bu()}}}function wm(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)wm(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const ya=new WeakMap,sr=Symbol(""),kl=Symbol(""),Zi=Symbol("");function Ot(t,e,n){if(fn&&He){let s=ya.get(t);s||ya.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new Pu),r.map=s,r.key=n),r.track()}}function Bn(t,e,n,s,r,i){const o=ya.get(t);if(!o){Xi++;return}const c=l=>{l&&l.trigger()};if(Cu(),e==="clear")o.forEach(c);else{const l=he(t),u=l&&Au(n);if(l&&n==="length"){const f=Number(s);o.forEach((p,m)=>{(m==="length"||m===Zi||!es(m)&&m>=f)&&c(p)})}else switch((n!==void 0||o.has(void 0))&&c(o.get(n)),u&&c(o.get(Zi)),e){case"add":l?u&&c(o.get("length")):(c(o.get(sr)),Lr(t)&&c(o.get(kl)));break;case"delete":l||(c(o.get(sr)),Lr(t)&&c(o.get(kl)));break;case"set":Lr(t)&&c(o.get(sr));break}}bu()}function Kv(t,e){const n=ya.get(t);return n&&n.get(e)}function wr(t){const e=Ne(t);return e===t?e:(Ot(e,"iterate",Zi),on(t)?e:e.map(Tt))}function sc(t){return Ot(t=Ne(t),"iterate",Zi),t}const Qv={__proto__:null,[Symbol.iterator](){return Xc(this,Symbol.iterator,Tt)},concat(...t){return wr(this).concat(...t.map(e=>he(e)?wr(e):e))},entries(){return Xc(this,"entries",t=>(t[1]=Tt(t[1]),t))},every(t,e){return xn(this,"every",t,e,void 0,arguments)},filter(t,e){return xn(this,"filter",t,e,n=>n.map(Tt),arguments)},find(t,e){return xn(this,"find",t,e,Tt,arguments)},findIndex(t,e){return xn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return xn(this,"findLast",t,e,Tt,arguments)},findLastIndex(t,e){return xn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return xn(this,"forEach",t,e,void 0,arguments)},includes(...t){return Zc(this,"includes",t)},indexOf(...t){return Zc(this,"indexOf",t)},join(t){return wr(this).join(t)},lastIndexOf(...t){return Zc(this,"lastIndexOf",t)},map(t,e){return xn(this,"map",t,e,void 0,arguments)},pop(){return Ai(this,"pop")},push(...t){return Ai(this,"push",t)},reduce(t,...e){return bf(this,"reduce",t,e)},reduceRight(t,...e){return bf(this,"reduceRight",t,e)},shift(){return Ai(this,"shift")},some(t,e){return xn(this,"some",t,e,void 0,arguments)},splice(...t){return Ai(this,"splice",t)},toReversed(){return wr(this).toReversed()},toSorted(t){return wr(this).toSorted(t)},toSpliced(...t){return wr(this).toSpliced(...t)},unshift(...t){return Ai(this,"unshift",t)},values(){return Xc(this,"values",Tt)}};function Xc(t,e,n){const s=sc(t),r=s[e]();return s!==t&&!on(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.done||(i.value=n(i.value)),i}),r}const Jv=Array.prototype;function xn(t,e,n,s,r,i){const o=sc(t),c=o!==t&&!on(t),l=o[e];if(l!==Jv[e]){const p=l.apply(t,i);return c?Tt(p):p}let u=n;o!==t&&(c?u=function(p,m){return n.call(this,Tt(p),m,t)}:n.length>2&&(u=function(p,m){return n.call(this,p,m,t)}));const f=l.call(o,u,s);return c&&r?r(f):f}function bf(t,e,n,s){const r=sc(t);let i=n;return r!==t&&(on(t)?n.length>3&&(i=function(o,c,l){return n.call(this,o,c,l,t)}):i=function(o,c,l){return n.call(this,o,Tt(c),l,t)}),r[e](i,...s)}function Zc(t,e,n){const s=Ne(t);Ot(s,"iterate",Zi);const r=s[e](...n);return(r===-1||r===!1)&&Du(n[0])?(n[0]=Ne(n[0]),s[e](...n)):r}function Ai(t,e,n=[]){Gn(),Cu();const s=Ne(t)[e].apply(t,n);return bu(),Kn(),s}const Yv=wu("__proto__,__v_isRef,__isVue"),Im=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(es));function Xv(t){es(t)||(t=String(t));const e=Ne(this);return Ot(e,"has",t),e.hasOwnProperty(t)}class Tm{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?cE:bm:i?Cm:Sm).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=he(e);if(!r){let l;if(o&&(l=Qv[n]))return l;if(n==="hasOwnProperty")return Xv}const c=Reflect.get(e,n,rt(e)?e:s);if((es(n)?Im.has(n):Yv(n))||(r||Ot(e,"get",n),i))return c;if(rt(c)){const l=o&&Au(n)?c:c.value;return r&&We(l)?Dl(l):l}return We(c)?r?Dl(c):Eo(c):c}}class Am extends Tm{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];if(!this._isShallow){const l=Ps(i);if(!on(s)&&!Ps(s)&&(i=Ne(i),s=Ne(s)),!he(e)&&rt(i)&&!rt(s))return l||(i.value=s),!0}const o=he(e)&&Au(n)?Number(n)<e.length:Ve(e,n),c=Reflect.set(e,n,s,rt(e)?e:r);return e===Ne(r)&&(o?Is(s,i)&&Bn(e,"set",n,s):Bn(e,"add",n,s)),c}deleteProperty(e,n){const s=Ve(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&Bn(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!es(n)||!Im.has(n))&&Ot(e,"has",n),s}ownKeys(e){return Ot(e,"iterate",he(e)?"length":sr),Reflect.ownKeys(e)}}class Zv extends Tm{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const eE=new Am,tE=new Zv,nE=new Am(!0);const Nl=t=>t,zo=t=>Reflect.getPrototypeOf(t);function sE(t,e,n){return function(...s){const r=this.__v_raw,i=Ne(r),o=Lr(i),c=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=r[t](...s),f=n?Nl:e?va:Tt;return!e&&Ot(i,"iterate",l?kl:sr),{next(){const{value:p,done:m}=u.next();return m?{value:p,done:m}:{value:c?[f(p[0]),f(p[1])]:f(p),done:m}},[Symbol.iterator](){return this}}}}function Go(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function rE(t,e){const n={get(r){const i=this.__v_raw,o=Ne(i),c=Ne(r);t||(Is(r,c)&&Ot(o,"get",r),Ot(o,"get",c));const{has:l}=zo(o),u=e?Nl:t?va:Tt;if(l.call(o,r))return u(i.get(r));if(l.call(o,c))return u(i.get(c));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&Ot(Ne(r),"iterate",sr),r.size},has(r){const i=this.__v_raw,o=Ne(i),c=Ne(r);return t||(Is(r,c)&&Ot(o,"has",r),Ot(o,"has",c)),r===c?i.has(r):i.has(r)||i.has(c)},forEach(r,i){const o=this,c=o.__v_raw,l=Ne(c),u=e?Nl:t?va:Tt;return!t&&Ot(l,"iterate",sr),c.forEach((f,p)=>r.call(i,u(f),u(p),o))}};return yt(n,t?{add:Go("add"),set:Go("set"),delete:Go("delete"),clear:Go("clear")}:{add(r){!e&&!on(r)&&!Ps(r)&&(r=Ne(r));const i=Ne(this);return zo(i).has.call(i,r)||(i.add(r),Bn(i,"add",r,r)),this},set(r,i){!e&&!on(i)&&!Ps(i)&&(i=Ne(i));const o=Ne(this),{has:c,get:l}=zo(o);let u=c.call(o,r);u||(r=Ne(r),u=c.call(o,r));const f=l.call(o,r);return o.set(r,i),u?Is(i,f)&&Bn(o,"set",r,i):Bn(o,"add",r,i),this},delete(r){const i=Ne(this),{has:o,get:c}=zo(i);let l=o.call(i,r);l||(r=Ne(r),l=o.call(i,r)),c&&c.call(i,r);const u=i.delete(r);return l&&Bn(i,"delete",r,void 0),u},clear(){const r=Ne(this),i=r.size!==0,o=r.clear();return i&&Bn(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=sE(r,t,e)}),n}function ku(t,e){const n=rE(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(Ve(n,r)&&r in s?n:s,r,i)}const iE={get:ku(!1,!1)},oE={get:ku(!1,!0)},aE={get:ku(!0,!1)};const Sm=new WeakMap,Cm=new WeakMap,bm=new WeakMap,cE=new WeakMap;function lE(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function uE(t){return t.__v_skip||!Object.isExtensible(t)?0:lE(Ov(t))}function Eo(t){return Ps(t)?t:Nu(t,!1,eE,iE,Sm)}function Rm(t){return Nu(t,!1,nE,oE,Cm)}function Dl(t){return Nu(t,!0,tE,aE,bm)}function Nu(t,e,n,s,r){if(!We(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=uE(t);if(i===0)return t;const o=r.get(t);if(o)return o;const c=new Proxy(t,i===2?s:n);return r.set(t,c),c}function Ts(t){return Ps(t)?Ts(t.__v_raw):!!(t&&t.__v_isReactive)}function Ps(t){return!!(t&&t.__v_isReadonly)}function on(t){return!!(t&&t.__v_isShallow)}function Du(t){return t?!!t.__v_raw:!1}function Ne(t){const e=t&&t.__v_raw;return e?Ne(e):t}function Lu(t){return!Ve(t,"__v_skip")&&Object.isExtensible(t)&&am(t,"__v_skip",!0),t}const Tt=t=>We(t)?Eo(t):t,va=t=>We(t)?Dl(t):t;function rt(t){return t?t.__v_isRef===!0:!1}function pe(t){return Pm(t,!1)}function hE(t){return Pm(t,!0)}function Pm(t,e){return rt(t)?t:new fE(t,e)}class fE{constructor(e,n){this.dep=new Pu,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Ne(e),this._value=n?e:Tt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||on(e)||Ps(e);e=s?e:Ne(e),Is(e,n)&&(this._rawValue=e,this._value=s?e:Tt(e),this.dep.trigger())}}function me(t){return rt(t)?t.value:t}const dE={get:(t,e,n)=>e==="__v_raw"?t:me(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return rt(r)&&!rt(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function km(t){return Ts(t)?t:new Proxy(t,dE)}function pE(t){const e=he(t)?new Array(t.length):{};for(const n in t)e[n]=gE(t,n);return e}class mE{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Kv(Ne(this._object),this._key)}}function gE(t,e,n){const s=t[e];return rt(s)?s:new mE(t,e,n)}class _E{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Pu(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Xi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&He!==this)return gm(this,!0),!0}get value(){const e=this.dep.track();return vm(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function yE(t,e,n=!1){let s,r;return _e(t)?s=t:(s=t.get,r=t.set),new _E(s,r,n)}const Ko={},Ea=new WeakMap;let Zs;function vE(t,e=!1,n=Zs){if(n){let s=Ea.get(n);s||Ea.set(n,s=[]),s.push(t)}}function EE(t,e,n=Be){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:c,call:l}=n,u=M=>r?M:on(M)||r===!1||r===0?jn(M,1):jn(M);let f,p,m,_,b=!1,N=!1;if(rt(t)?(p=()=>t.value,b=on(t)):Ts(t)?(p=()=>u(t),b=!0):he(t)?(N=!0,b=t.some(M=>Ts(M)||on(M)),p=()=>t.map(M=>{if(rt(M))return M.value;if(Ts(M))return u(M);if(_e(M))return l?l(M,2):M()})):_e(t)?e?p=l?()=>l(t,2):t:p=()=>{if(m){Gn();try{m()}finally{Kn()}}const M=Zs;Zs=f;try{return l?l(t,3,[_]):t(_)}finally{Zs=M}}:p=An,e&&r){const M=p,Z=r===!0?1/0:r;p=()=>jn(M(),Z)}const k=dm(),H=()=>{f.stop(),k&&k.active&&Tu(k.effects,f)};if(i&&e){const M=e;e=(...Z)=>{M(...Z),H()}}let D=N?new Array(t.length).fill(Ko):Ko;const V=M=>{if(!(!(f.flags&1)||!f.dirty&&!M))if(e){const Z=f.run();if(r||b||(N?Z.some((ie,S)=>Is(ie,D[S])):Is(Z,D))){m&&m();const ie=Zs;Zs=f;try{const S=[Z,D===Ko?void 0:N&&D[0]===Ko?[]:D,_];D=Z,l?l(e,3,S):e(...S)}finally{Zs=ie}}}else f.run()};return c&&c(V),f=new pm(p),f.scheduler=o?()=>o(V,!1):V,_=M=>vE(M,!1,f),m=f.onStop=()=>{const M=Ea.get(f);if(M){if(l)l(M,4);else for(const Z of M)Z();Ea.delete(f)}},e?s?V(!0):D=f.run():o?o(V.bind(null,!0),!0):f.run(),H.pause=f.pause.bind(f),H.resume=f.resume.bind(f),H.stop=H,H}function jn(t,e=1/0,n){if(e<=0||!We(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,rt(t))jn(t.value,e,n);else if(he(t))for(let s=0;s<t.length;s++)jn(t[s],e,n);else if(sm(t)||Lr(t))t.forEach(s=>{jn(s,e,n)});else if(om(t)){for(const s in t)jn(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&jn(t[s],e,n)}return t}function wo(t,e,n,s){try{return s?t(...s):t()}catch(r){rc(r,e,n)}}function pn(t,e,n,s){if(_e(t)){const r=wo(t,e,n,s);return r&&rm(r)&&r.catch(i=>{rc(i,e,n)}),r}if(he(t)){const r=[];for(let i=0;i<t.length;i++)r.push(pn(t[i],e,n,s));return r}}function rc(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Be;if(e){let c=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;c;){const f=c.ec;if(f){for(let p=0;p<f.length;p++)if(f[p](t,l,u)===!1)return}c=c.parent}if(i){Gn(),wo(i,null,10,[t,l,u]),Kn();return}}wE(t,n,r,s,o)}function wE(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const Ht=[];let wn=-1;const Or=[];let ds=null,Ar=0;const Nm=Promise.resolve();let wa=null;function Vu(t){const e=wa||Nm;return t?e.then(this?t.bind(this):t):e}function IE(t){let e=wn+1,n=Ht.length;for(;e<n;){const s=e+n>>>1,r=Ht[s],i=eo(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function Ou(t){if(!(t.flags&1)){const e=eo(t),n=Ht[Ht.length-1];!n||!(t.flags&2)&&e>=eo(n)?Ht.push(t):Ht.splice(IE(e),0,t),t.flags|=1,Dm()}}function Dm(){wa||(wa=Nm.then(Vm))}function TE(t){he(t)?Or.push(...t):ds&&t.id===-1?ds.splice(Ar+1,0,t):t.flags&1||(Or.push(t),t.flags|=1),Dm()}function Rf(t,e,n=wn+1){for(;n<Ht.length;n++){const s=Ht[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;Ht.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Lm(t){if(Or.length){const e=[...new Set(Or)].sort((n,s)=>eo(n)-eo(s));if(Or.length=0,ds){ds.push(...e);return}for(ds=e,Ar=0;Ar<ds.length;Ar++){const n=ds[Ar];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}ds=null,Ar=0}}const eo=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Vm(t){try{for(wn=0;wn<Ht.length;wn++){const e=Ht[wn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),wo(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;wn<Ht.length;wn++){const e=Ht[wn];e&&(e.flags&=-2)}wn=-1,Ht.length=0,Lm(),wa=null,(Ht.length||Or.length)&&Vm()}}let Ct=null,Om=null;function Ia(t){const e=Ct;return Ct=t,Om=t&&t.type.__scopeId||null,e}function je(t,e=Ct,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&ba(-1);const i=Ia(e);let o;try{o=t(...r)}finally{Ia(i),s._d&&ba(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function _t(t,e){if(Ct===null)return t;const n=uc(Ct),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,c,l=Be]=e[r];i&&(_e(i)&&(i={mounted:i,updated:i}),i.deep&&jn(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:c,modifiers:l}))}return t}function Qs(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const c=r[o];i&&(c.oldValue=i[o].value);let l=c.dir[s];l&&(Gn(),pn(l,n,8,[t.el,c,t,e]),Kn())}}const AE=Symbol("_vte"),xm=t=>t.__isTeleport,$n=Symbol("_leaveCb"),Qo=Symbol("_enterCb");function SE(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Gt(()=>{t.isMounted=!0}),Yr(()=>{t.isUnmounting=!0}),t}const tn=[Function,Array],Mm={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:tn,onEnter:tn,onAfterEnter:tn,onEnterCancelled:tn,onBeforeLeave:tn,onLeave:tn,onAfterLeave:tn,onLeaveCancelled:tn,onBeforeAppear:tn,onAppear:tn,onAfterAppear:tn,onAppearCancelled:tn},Fm=t=>{const e=t.subTree;return e.component?Fm(e.component):e},CE={name:"BaseTransition",props:Mm,setup(t,{slots:e}){const n=lc(),s=SE();return()=>{const r=e.default&&Bm(e.default(),!0);if(!r||!r.length)return;const i=Um(r),o=Ne(t),{mode:c}=o;if(s.isLeaving)return el(i);const l=Pf(i);if(!l)return el(i);let u=Ll(l,o,s,n,p=>u=p);l.type!==At&&$r(l,u);let f=n.subTree&&Pf(n.subTree);if(f&&f.type!==At&&!gs(f,l)&&Fm(n).type!==At){let p=Ll(f,o,s,n);if($r(f,p),c==="out-in"&&l.type!==At)return s.isLeaving=!0,p.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete p.afterLeave,f=void 0},el(i);c==="in-out"&&l.type!==At?p.delayLeave=(m,_,b)=>{const N=$m(s,f);N[String(f.key)]=f,m[$n]=()=>{_(),m[$n]=void 0,delete u.delayedLeave,f=void 0},u.delayedLeave=()=>{b(),delete u.delayedLeave,f=void 0}}:f=void 0}else f&&(f=void 0);return i}}};function Um(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==At){e=n;break}}return e}const bE=CE;function $m(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function Ll(t,e,n,s,r){const{appear:i,mode:o,persisted:c=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:f,onEnterCancelled:p,onBeforeLeave:m,onLeave:_,onAfterLeave:b,onLeaveCancelled:N,onBeforeAppear:k,onAppear:H,onAfterAppear:D,onAppearCancelled:V}=e,M=String(t.key),Z=$m(n,t),ie=(y,I)=>{y&&pn(y,s,9,I)},S=(y,I)=>{const A=I[1];ie(y,I),he(y)?y.every(T=>T.length<=1)&&A():y.length<=1&&A()},v={mode:o,persisted:c,beforeEnter(y){let I=l;if(!n.isMounted)if(i)I=k||l;else return;y[$n]&&y[$n](!0);const A=Z[M];A&&gs(t,A)&&A.el[$n]&&A.el[$n](),ie(I,[y])},enter(y){let I=u,A=f,T=p;if(!n.isMounted)if(i)I=H||u,A=D||f,T=V||p;else return;let E=!1;const be=y[Qo]=Je=>{E||(E=!0,Je?ie(T,[y]):ie(A,[y]),v.delayedLeave&&v.delayedLeave(),y[Qo]=void 0)};I?S(I,[y,be]):be()},leave(y,I){const A=String(t.key);if(y[Qo]&&y[Qo](!0),n.isUnmounting)return I();ie(m,[y]);let T=!1;const E=y[$n]=be=>{T||(T=!0,I(),be?ie(N,[y]):ie(b,[y]),y[$n]=void 0,Z[A]===t&&delete Z[A])};Z[A]=t,_?S(_,[y,E]):E()},clone(y){const I=Ll(y,e,n,s,r);return r&&r(I),I}};return v}function el(t){if(ic(t))return t=Qn(t),t.children=null,t}function Pf(t){if(!ic(t))return xm(t.type)&&t.children?Um(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&_e(n.default))return n.default()}}function $r(t,e){t.shapeFlag&6&&t.component?(t.transition=e,$r(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Bm(t,e=!1,n){let s=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const c=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===De?(o.patchFlag&128&&r++,s=s.concat(Bm(o.children,e,c))):(e||o.type!==At)&&s.push(c!=null?Qn(o,{key:c}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}function jm(t,e){return _e(t)?yt({name:t.name},e,{setup:t}):t}function Hm(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Ta=new WeakMap;function $i(t,e,n,s,r=!1){if(he(t)){t.forEach((b,N)=>$i(b,e&&(he(e)?e[N]:e),n,s,r));return}if(rr(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&$i(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?uc(s.component):s.el,o=r?null:i,{i:c,r:l}=t,u=e&&e.r,f=c.refs===Be?c.refs={}:c.refs,p=c.setupState,m=Ne(p),_=p===Be?nm:b=>Ve(m,b);if(u!=null&&u!==l){if(kf(e),Xe(u))f[u]=null,_(u)&&(p[u]=null);else if(rt(u)){u.value=null;const b=e;b.k&&(f[b.k]=null)}}if(_e(l))wo(l,c,12,[o,f]);else{const b=Xe(l),N=rt(l);if(b||N){const k=()=>{if(t.f){const H=b?_(l)?p[l]:f[l]:l.value;if(r)he(H)&&Tu(H,i);else if(he(H))H.includes(i)||H.push(i);else if(b)f[l]=[i],_(l)&&(p[l]=f[l]);else{const D=[i];l.value=D,t.k&&(f[t.k]=D)}}else b?(f[l]=o,_(l)&&(p[l]=o)):N&&(l.value=o,t.k&&(f[t.k]=o))};if(o){const H=()=>{k(),Ta.delete(t)};H.id=-1,Ta.set(t,H),wt(H,n)}else kf(t),k()}}}function kf(t){const e=Ta.get(t);e&&(e.flags|=8,Ta.delete(t))}nc().requestIdleCallback;nc().cancelIdleCallback;const rr=t=>!!t.type.__asyncLoader,ic=t=>t.type.__isKeepAlive,RE={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=lc(),s=n.ctx;if(!s.renderer)return()=>{const D=e.default&&e.default();return D&&D.length===1?D[0]:D};const r=new Map,i=new Set;let o=null;const c=n.suspense,{renderer:{p:l,m:u,um:f,o:{createElement:p}}}=s,m=p("div");s.activate=(D,V,M,Z,ie)=>{const S=D.component;u(D,V,M,0,c),l(S.vnode,D,V,M,S,c,Z,D.slotScopeIds,ie),wt(()=>{S.isDeactivated=!1,S.a&&Vr(S.a);const v=D.props&&D.props.onVnodeMounted;v&&nn(v,S.parent,D)},c)},s.deactivate=D=>{const V=D.component;Sa(V.m),Sa(V.a),u(D,m,null,1,c),wt(()=>{V.da&&Vr(V.da);const M=D.props&&D.props.onVnodeUnmounted;M&&nn(M,V.parent,D),V.isDeactivated=!0},c)};function _(D){tl(D),f(D,n,c,!0)}function b(D){r.forEach((V,M)=>{const Z=$l(V.type);Z&&!D(Z)&&N(M)})}function N(D){const V=r.get(D);V&&(!o||!gs(V,o))?_(V):o&&tl(o),r.delete(D),i.delete(D)}dn(()=>[t.include,t.exclude],([D,V])=>{D&&b(M=>Pi(D,M)),V&&b(M=>!Pi(V,M))},{flush:"post",deep:!0});let k=null;const H=()=>{k!=null&&(Ca(n.subTree.type)?wt(()=>{r.set(k,Jo(n.subTree))},n.subTree.suspense):r.set(k,Jo(n.subTree)))};return Gt(H),qm(H),Yr(()=>{r.forEach(D=>{const{subTree:V,suspense:M}=n,Z=Jo(V);if(D.type===Z.type&&D.key===Z.key){tl(Z);const ie=Z.component.da;ie&&wt(ie,M);return}_(D)})}),()=>{if(k=null,!e.default)return o=null;const D=e.default(),V=D[0];if(D.length>1)return o=null,D;if(!Br(V)||!(V.shapeFlag&4)&&!(V.shapeFlag&128))return o=null,V;let M=Jo(V);if(M.type===At)return o=null,M;const Z=M.type,ie=$l(rr(M)?M.type.__asyncResolved||{}:Z),{include:S,exclude:v,max:y}=t;if(S&&(!ie||!Pi(S,ie))||v&&ie&&Pi(v,ie))return M.shapeFlag&=-257,o=M,V;const I=M.key==null?Z:M.key,A=r.get(I);return M.el&&(M=Qn(M),V.shapeFlag&128&&(V.ssContent=M)),k=I,A?(M.el=A.el,M.component=A.component,M.transition&&$r(M,M.transition),M.shapeFlag|=512,i.delete(I),i.add(I)):(i.add(I),y&&i.size>parseInt(y,10)&&N(i.values().next().value)),M.shapeFlag|=256,o=M,Ca(V.type)?V:M}}},PE=RE;function Pi(t,e){return he(t)?t.some(n=>Pi(n,e)):Xe(t)?t.split(",").includes(e):Vv(t)?(t.lastIndex=0,t.test(e)):!1}function kE(t,e){Wm(t,"a",e)}function NE(t,e){Wm(t,"da",e)}function Wm(t,e,n=Mt){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(oc(e,s,n),n){let r=n.parent;for(;r&&r.parent;)ic(r.parent.vnode)&&DE(s,e,n,r),r=r.parent}}function DE(t,e,n,s){const r=oc(e,t,s,!0);xu(()=>{Tu(s[e],r)},n)}function tl(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function Jo(t){return t.shapeFlag&128?t.ssContent:t}function oc(t,e,n=Mt,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Gn();const c=Io(n),l=pn(e,n,t,o);return c(),Kn(),l});return s?r.unshift(i):r.push(i),i}}const ts=t=>(e,n=Mt)=>{(!so||t==="sp")&&oc(t,(...s)=>e(...s),n)},LE=ts("bm"),Gt=ts("m"),VE=ts("bu"),qm=ts("u"),Yr=ts("bum"),xu=ts("um"),OE=ts("sp"),xE=ts("rtg"),ME=ts("rtc");function FE(t,e=Mt){oc("ec",t,e)}const Mu="components",UE="directives";function Fu(t,e){return Uu(Mu,t,!0,e)||t}const zm=Symbol.for("v-ndc");function $E(t){return Xe(t)?Uu(Mu,t,!1)||t:t||zm}function to(t){return Uu(UE,t)}function Uu(t,e,n=!0,s=!1){const r=Ct||Mt;if(r){const i=r.type;if(t===Mu){const c=$l(i,!1);if(c&&(c===e||c===an(e)||c===tc(an(e))))return i}const o=Nf(r[t]||i[t],e)||Nf(r.appContext[t],e);return!o&&s?i:o}}function Nf(t,e){return t&&(t[e]||t[an(e)]||t[tc(an(e))])}function ks(t,e,n,s){let r;const i=n,o=he(t);if(o||Xe(t)){const c=o&&Ts(t);let l=!1,u=!1;c&&(l=!on(t),u=Ps(t),t=sc(t)),r=new Array(t.length);for(let f=0,p=t.length;f<p;f++)r[f]=e(l?u?va(Tt(t[f])):Tt(t[f]):t[f],f,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let c=0;c<t;c++)r[c]=e(c+1,c,void 0,i)}else if(We(t))if(t[Symbol.iterator])r=Array.from(t,(c,l)=>e(c,l,void 0,i));else{const c=Object.keys(t);r=new Array(c.length);for(let l=0,u=c.length;l<u;l++){const f=c[l];r[l]=e(t[f],f,l,i)}}else r=[];return r}function Vl(t,e,n={},s,r){if(Ct.ce||Ct.parent&&rr(Ct.parent)&&Ct.parent.ce){const u=Object.keys(n).length>0;return e!=="default"&&(n.name=e),O(),Ue(De,null,[Q("slot",n,s)],u?-2:64)}let i=t[e];i&&i._c&&(i._d=!1),O();const o=i&&Gm(i(n)),c=n.key||o&&o.key,l=Ue(De,{key:(c&&!es(c)?c:`_${e}`)+(!o&&s?"_fb":"")},o||[],o&&t._===1?64:-2);return i&&i._c&&(i._d=!0),l}function Gm(t){return t.some(e=>Br(e)?!(e.type===At||e.type===De&&!Gm(e.children)):!0)?t:null}const Ol=t=>t?fg(t)?uc(t):Ol(t.parent):null,Bi=yt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Ol(t.parent),$root:t=>Ol(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Qm(t),$forceUpdate:t=>t.f||(t.f=()=>{Ou(t.update)}),$nextTick:t=>t.n||(t.n=Vu.bind(t.proxy)),$watch:t=>cw.bind(t)}),nl=(t,e)=>t!==Be&&!t.__isScriptSetup&&Ve(t,e),BE={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:c,appContext:l}=t;let u;if(e[0]!=="$"){const _=o[e];if(_!==void 0)switch(_){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(nl(s,e))return o[e]=1,s[e];if(r!==Be&&Ve(r,e))return o[e]=2,r[e];if((u=t.propsOptions[0])&&Ve(u,e))return o[e]=3,i[e];if(n!==Be&&Ve(n,e))return o[e]=4,n[e];xl&&(o[e]=0)}}const f=Bi[e];let p,m;if(f)return e==="$attrs"&&Ot(t.attrs,"get",""),f(t);if((p=c.__cssModules)&&(p=p[e]))return p;if(n!==Be&&Ve(n,e))return o[e]=4,n[e];if(m=l.config.globalProperties,Ve(m,e))return m[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return nl(r,e)?(r[e]=n,!0):s!==Be&&Ve(s,e)?(s[e]=n,!0):Ve(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,propsOptions:i,type:o}},c){let l,u;return!!(n[c]||t!==Be&&c[0]!=="$"&&Ve(t,c)||nl(e,c)||(l=i[0])&&Ve(l,c)||Ve(s,c)||Ve(Bi,c)||Ve(r.config.globalProperties,c)||(u=o.__cssModules)&&u[c])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ve(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Df(t){return he(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let xl=!0;function jE(t){const e=Qm(t),n=t.proxy,s=t.ctx;xl=!1,e.beforeCreate&&Lf(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:c,provide:l,inject:u,created:f,beforeMount:p,mounted:m,beforeUpdate:_,updated:b,activated:N,deactivated:k,beforeDestroy:H,beforeUnmount:D,destroyed:V,unmounted:M,render:Z,renderTracked:ie,renderTriggered:S,errorCaptured:v,serverPrefetch:y,expose:I,inheritAttrs:A,components:T,directives:E,filters:be}=e;if(u&&HE(u,s,null),o)for(const ve in o){const Re=o[ve];_e(Re)&&(s[ve]=Re.bind(n))}if(r){const ve=r.call(n,n);We(ve)&&(t.data=Eo(ve))}if(xl=!0,i)for(const ve in i){const Re=i[ve],Wt=_e(Re)?Re.bind(n,n):_e(Re.get)?Re.get.bind(n,n):An,yn=!_e(Re)&&_e(Re.set)?Re.set.bind(n):An,Kt=we({get:Wt,set:yn});Object.defineProperty(s,ve,{enumerable:!0,configurable:!0,get:()=>Kt.value,set:vt=>Kt.value=vt})}if(c)for(const ve in c)Km(c[ve],s,n,ve);if(l){const ve=_e(l)?l.call(n):l;Reflect.ownKeys(ve).forEach(Re=>{ia(Re,ve[Re])})}f&&Lf(f,t,"c");function Me(ve,Re){he(Re)?Re.forEach(Wt=>ve(Wt.bind(n))):Re&&ve(Re.bind(n))}if(Me(LE,p),Me(Gt,m),Me(VE,_),Me(qm,b),Me(kE,N),Me(NE,k),Me(FE,v),Me(ME,ie),Me(xE,S),Me(Yr,D),Me(xu,M),Me(OE,y),he(I))if(I.length){const ve=t.exposed||(t.exposed={});I.forEach(Re=>{Object.defineProperty(ve,Re,{get:()=>n[Re],set:Wt=>n[Re]=Wt,enumerable:!0})})}else t.exposed||(t.exposed={});Z&&t.render===An&&(t.render=Z),A!=null&&(t.inheritAttrs=A),T&&(t.components=T),E&&(t.directives=E),y&&Hm(t)}function HE(t,e,n=An){he(t)&&(t=Ml(t));for(const s in t){const r=t[s];let i;We(r)?"default"in r?i=bt(r.from||s,r.default,!0):i=bt(r.from||s):i=bt(r),rt(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function Lf(t,e,n){pn(he(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function Km(t,e,n,s){let r=s.includes(".")?cg(n,s):()=>n[s];if(Xe(t)){const i=e[t];_e(i)&&dn(r,i)}else if(_e(t))dn(r,t.bind(n));else if(We(t))if(he(t))t.forEach(i=>Km(i,e,n,s));else{const i=_e(t.handler)?t.handler.bind(n):e[t.handler];_e(i)&&dn(r,i,t)}}function Qm(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,c=i.get(e);let l;return c?l=c:!r.length&&!n&&!s?l=e:(l={},r.length&&r.forEach(u=>Aa(l,u,o,!0)),Aa(l,e,o)),We(e)&&i.set(e,l),l}function Aa(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&Aa(t,i,n,!0),r&&r.forEach(o=>Aa(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const c=WE[o]||n&&n[o];t[o]=c?c(t[o],e[o]):e[o]}return t}const WE={data:Vf,props:Of,emits:Of,methods:ki,computed:ki,beforeCreate:Bt,created:Bt,beforeMount:Bt,mounted:Bt,beforeUpdate:Bt,updated:Bt,beforeDestroy:Bt,beforeUnmount:Bt,destroyed:Bt,unmounted:Bt,activated:Bt,deactivated:Bt,errorCaptured:Bt,serverPrefetch:Bt,components:ki,directives:ki,watch:zE,provide:Vf,inject:qE};function Vf(t,e){return e?t?function(){return yt(_e(t)?t.call(this,this):t,_e(e)?e.call(this,this):e)}:e:t}function qE(t,e){return ki(Ml(t),Ml(e))}function Ml(t){if(he(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Bt(t,e){return t?[...new Set([].concat(t,e))]:e}function ki(t,e){return t?yt(Object.create(null),t,e):e}function Of(t,e){return t?he(t)&&he(e)?[...new Set([...t,...e])]:yt(Object.create(null),Df(t),Df(e??{})):e}function zE(t,e){if(!t)return e;if(!e)return t;const n=yt(Object.create(null),t);for(const s in e)n[s]=Bt(t[s],e[s]);return n}function Jm(){return{app:null,config:{isNativeTag:nm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let GE=0;function KE(t,e){return function(s,r=null){_e(s)||(s=yt({},s)),r!=null&&!We(r)&&(r=null);const i=Jm(),o=new WeakSet,c=[];let l=!1;const u=i.app={_uid:GE++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:Pw,get config(){return i.config},set config(f){},use(f,...p){return o.has(f)||(f&&_e(f.install)?(o.add(f),f.install(u,...p)):_e(f)&&(o.add(f),f(u,...p))),u},mixin(f){return i.mixins.includes(f)||i.mixins.push(f),u},component(f,p){return p?(i.components[f]=p,u):i.components[f]},directive(f,p){return p?(i.directives[f]=p,u):i.directives[f]},mount(f,p,m){if(!l){const _=u._ceVNode||Q(s,r);return _.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),t(_,f,m),l=!0,u._container=f,f.__vue_app__=u,uc(_.component)}},onUnmount(f){c.push(f)},unmount(){l&&(pn(c,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(f,p){return i.provides[f]=p,u},runWithContext(f){const p=ir;ir=u;try{return f()}finally{ir=p}}};return u}}let ir=null;function ia(t,e){if(Mt){let n=Mt.provides;const s=Mt.parent&&Mt.parent.provides;s===n&&(n=Mt.provides=Object.create(s)),n[t]=e}}function bt(t,e,n=!1){const s=lc();if(s||ir){let r=ir?ir._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&_e(e)?e.call(s&&s.proxy):e}}function QE(){return!!(lc()||ir)}const Ym={},Xm=()=>Object.create(Ym),Zm=t=>Object.getPrototypeOf(t)===Ym;function JE(t,e,n,s=!1){const r={},i=Xm();t.propsDefaults=Object.create(null),eg(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:Rm(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function YE(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,c=Ne(r),[l]=t.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const f=t.vnode.dynamicProps;for(let p=0;p<f.length;p++){let m=f[p];if(ac(t.emitsOptions,m))continue;const _=e[m];if(l)if(Ve(i,m))_!==i[m]&&(i[m]=_,u=!0);else{const b=an(m);r[b]=Fl(l,c,b,_,t,!1)}else _!==i[m]&&(i[m]=_,u=!0)}}}else{eg(t,e,r,i)&&(u=!0);let f;for(const p in c)(!e||!Ve(e,p)&&((f=Ms(p))===p||!Ve(e,f)))&&(l?n&&(n[p]!==void 0||n[f]!==void 0)&&(r[p]=Fl(l,c,p,void 0,t,!0)):delete r[p]);if(i!==c)for(const p in i)(!e||!Ve(e,p))&&(delete i[p],u=!0)}u&&Bn(t.attrs,"set","")}function eg(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,c;if(e)for(let l in e){if(Mi(l))continue;const u=e[l];let f;r&&Ve(r,f=an(l))?!i||!i.includes(f)?n[f]=u:(c||(c={}))[f]=u:ac(t.emitsOptions,l)||(!(l in s)||u!==s[l])&&(s[l]=u,o=!0)}if(i){const l=Ne(n),u=c||Be;for(let f=0;f<i.length;f++){const p=i[f];n[p]=Fl(r,l,p,u[p],t,!Ve(u,p))}}return o}function Fl(t,e,n,s,r,i){const o=t[n];if(o!=null){const c=Ve(o,"default");if(c&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&_e(l)){const{propsDefaults:u}=r;if(n in u)s=u[n];else{const f=Io(r);s=u[n]=l.call(null,e),f()}}else s=l;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!c?s=!1:o[1]&&(s===""||s===Ms(n))&&(s=!0))}return s}const XE=new WeakMap;function tg(t,e,n=!1){const s=n?XE:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},c=[];let l=!1;if(!_e(t)){const f=p=>{l=!0;const[m,_]=tg(p,e,!0);yt(o,m),_&&c.push(..._)};!n&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}if(!i&&!l)return We(t)&&s.set(t,Dr),Dr;if(he(i))for(let f=0;f<i.length;f++){const p=an(i[f]);xf(p)&&(o[p]=Be)}else if(i)for(const f in i){const p=an(f);if(xf(p)){const m=i[f],_=o[p]=he(m)||_e(m)?{type:m}:yt({},m),b=_.type;let N=!1,k=!0;if(he(b))for(let H=0;H<b.length;++H){const D=b[H],V=_e(D)&&D.name;if(V==="Boolean"){N=!0;break}else V==="String"&&(k=!1)}else N=_e(b)&&b.name==="Boolean";_[0]=N,_[1]=k,(N||Ve(_,"default"))&&c.push(p)}}const u=[o,c];return We(t)&&s.set(t,u),u}function xf(t){return t[0]!=="$"&&!Mi(t)}const $u=t=>t==="_"||t==="_ctx"||t==="$stable",Bu=t=>he(t)?t.map(Tn):[Tn(t)],ZE=(t,e,n)=>{if(e._n)return e;const s=je((...r)=>Bu(e(...r)),n);return s._c=!1,s},ng=(t,e,n)=>{const s=t._ctx;for(const r in t){if($u(r))continue;const i=t[r];if(_e(i))e[r]=ZE(r,i,s);else if(i!=null){const o=Bu(i);e[r]=()=>o}}},sg=(t,e)=>{const n=Bu(e);t.slots.default=()=>n},rg=(t,e,n)=>{for(const s in e)(n||!$u(s))&&(t[s]=e[s])},ew=(t,e,n)=>{const s=t.slots=Xm();if(t.vnode.shapeFlag&32){const r=e._;r?(rg(s,e,n),n&&am(s,"_",r,!0)):ng(e,s)}else e&&sg(t,e)},tw=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=Be;if(s.shapeFlag&32){const c=e._;c?n&&c===1?i=!1:rg(r,e,n):(i=!e.$stable,ng(e,r)),o=e}else e&&(sg(t,e),o={default:1});if(i)for(const c in r)!$u(c)&&o[c]==null&&delete r[c]},wt=gw;function nw(t){return sw(t)}function sw(t,e){const n=nc();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:c,createComment:l,setText:u,setElementText:f,parentNode:p,nextSibling:m,setScopeId:_=An,insertStaticContent:b}=t,N=(w,C,R,$=null,j=null,F=null,Y=void 0,G=null,z=!!C.dynamicChildren)=>{if(w===C)return;w&&!gs(w,C)&&($=U(w),vt(w,j,F,!0),w=null),C.patchFlag===-2&&(z=!1,C.dynamicChildren=null);const{type:W,ref:ce,shapeFlag:ee}=C;switch(W){case cc:k(w,C,R,$);break;case At:H(w,C,R,$);break;case rl:w==null&&D(C,R,$,Y);break;case De:T(w,C,R,$,j,F,Y,G,z);break;default:ee&1?Z(w,C,R,$,j,F,Y,G,z):ee&6?E(w,C,R,$,j,F,Y,G,z):(ee&64||ee&128)&&W.process(w,C,R,$,j,F,Y,G,z,oe)}ce!=null&&j?$i(ce,w&&w.ref,F,C||w,!C):ce==null&&w&&w.ref!=null&&$i(w.ref,null,F,w,!0)},k=(w,C,R,$)=>{if(w==null)s(C.el=c(C.children),R,$);else{const j=C.el=w.el;C.children!==w.children&&u(j,C.children)}},H=(w,C,R,$)=>{w==null?s(C.el=l(C.children||""),R,$):C.el=w.el},D=(w,C,R,$)=>{[w.el,w.anchor]=b(w.children,C,R,$,w.el,w.anchor)},V=({el:w,anchor:C},R,$)=>{let j;for(;w&&w!==C;)j=m(w),s(w,R,$),w=j;s(C,R,$)},M=({el:w,anchor:C})=>{let R;for(;w&&w!==C;)R=m(w),r(w),w=R;r(C)},Z=(w,C,R,$,j,F,Y,G,z)=>{if(C.type==="svg"?Y="svg":C.type==="math"&&(Y="mathml"),w==null)ie(C,R,$,j,F,Y,G,z);else{const W=w.el&&w.el._isVueCE?w.el:null;try{W&&W._beginPatch(),y(w,C,j,F,Y,G,z)}finally{W&&W._endPatch()}}},ie=(w,C,R,$,j,F,Y,G)=>{let z,W;const{props:ce,shapeFlag:ee,transition:ae,dirs:ue}=w;if(z=w.el=o(w.type,F,ce&&ce.is,ce),ee&8?f(z,w.children):ee&16&&v(w.children,z,null,$,j,sl(w,F),Y,G),ue&&Qs(w,null,$,"created"),S(z,w,w.scopeId,Y,$),ce){for(const Fe in ce)Fe!=="value"&&!Mi(Fe)&&i(z,Fe,null,ce[Fe],F,$);"value"in ce&&i(z,"value",null,ce.value,F),(W=ce.onVnodeBeforeMount)&&nn(W,$,w)}ue&&Qs(w,null,$,"beforeMount");const Ie=rw(j,ae);Ie&&ae.beforeEnter(z),s(z,C,R),((W=ce&&ce.onVnodeMounted)||Ie||ue)&&wt(()=>{W&&nn(W,$,w),Ie&&ae.enter(z),ue&&Qs(w,null,$,"mounted")},j)},S=(w,C,R,$,j)=>{if(R&&_(w,R),$)for(let F=0;F<$.length;F++)_(w,$[F]);if(j){let F=j.subTree;if(C===F||Ca(F.type)&&(F.ssContent===C||F.ssFallback===C)){const Y=j.vnode;S(w,Y,Y.scopeId,Y.slotScopeIds,j.parent)}}},v=(w,C,R,$,j,F,Y,G,z=0)=>{for(let W=z;W<w.length;W++){const ce=w[W]=G?ps(w[W]):Tn(w[W]);N(null,ce,C,R,$,j,F,Y,G)}},y=(w,C,R,$,j,F,Y)=>{const G=C.el=w.el;let{patchFlag:z,dynamicChildren:W,dirs:ce}=C;z|=w.patchFlag&16;const ee=w.props||Be,ae=C.props||Be;let ue;if(R&&Js(R,!1),(ue=ae.onVnodeBeforeUpdate)&&nn(ue,R,C,w),ce&&Qs(C,w,R,"beforeUpdate"),R&&Js(R,!0),(ee.innerHTML&&ae.innerHTML==null||ee.textContent&&ae.textContent==null)&&f(G,""),W?I(w.dynamicChildren,W,G,R,$,sl(C,j),F):Y||Re(w,C,G,null,R,$,sl(C,j),F,!1),z>0){if(z&16)A(G,ee,ae,R,j);else if(z&2&&ee.class!==ae.class&&i(G,"class",null,ae.class,j),z&4&&i(G,"style",ee.style,ae.style,j),z&8){const Ie=C.dynamicProps;for(let Fe=0;Fe<Ie.length;Fe++){const ke=Ie[Fe],kt=ee[ke],Nt=ae[ke];(Nt!==kt||ke==="value")&&i(G,ke,kt,Nt,j,R)}}z&1&&w.children!==C.children&&f(G,C.children)}else!Y&&W==null&&A(G,ee,ae,R,j);((ue=ae.onVnodeUpdated)||ce)&&wt(()=>{ue&&nn(ue,R,C,w),ce&&Qs(C,w,R,"updated")},$)},I=(w,C,R,$,j,F,Y)=>{for(let G=0;G<C.length;G++){const z=w[G],W=C[G],ce=z.el&&(z.type===De||!gs(z,W)||z.shapeFlag&198)?p(z.el):R;N(z,W,ce,null,$,j,F,Y,!0)}},A=(w,C,R,$,j)=>{if(C!==R){if(C!==Be)for(const F in C)!Mi(F)&&!(F in R)&&i(w,F,C[F],null,j,$);for(const F in R){if(Mi(F))continue;const Y=R[F],G=C[F];Y!==G&&F!=="value"&&i(w,F,G,Y,j,$)}"value"in R&&i(w,"value",C.value,R.value,j)}},T=(w,C,R,$,j,F,Y,G,z)=>{const W=C.el=w?w.el:c(""),ce=C.anchor=w?w.anchor:c("");let{patchFlag:ee,dynamicChildren:ae,slotScopeIds:ue}=C;ue&&(G=G?G.concat(ue):ue),w==null?(s(W,R,$),s(ce,R,$),v(C.children||[],R,ce,j,F,Y,G,z)):ee>0&&ee&64&&ae&&w.dynamicChildren?(I(w.dynamicChildren,ae,R,j,F,Y,G),(C.key!=null||j&&C===j.subTree)&&ig(w,C,!0)):Re(w,C,R,ce,j,F,Y,G,z)},E=(w,C,R,$,j,F,Y,G,z)=>{C.slotScopeIds=G,w==null?C.shapeFlag&512?j.ctx.activate(C,R,$,Y,z):be(C,R,$,j,F,Y,z):Je(w,C,z)},be=(w,C,R,$,j,F,Y)=>{const G=w.component=Tw(w,$,j);if(ic(w)&&(G.ctx.renderer=oe),Aw(G,!1,Y),G.asyncDep){if(j&&j.registerDep(G,Me,Y),!w.el){const z=G.subTree=Q(At);H(null,z,C,R),w.placeholder=z.el}}else Me(G,w,C,R,j,F,Y)},Je=(w,C,R)=>{const $=C.component=w.component;if(pw(w,C,R))if($.asyncDep&&!$.asyncResolved){ve($,C,R);return}else $.next=C,$.update();else C.el=w.el,$.vnode=C},Me=(w,C,R,$,j,F,Y)=>{const G=()=>{if(w.isMounted){let{next:ee,bu:ae,u:ue,parent:Ie,vnode:Fe}=w;{const Jt=og(w);if(Jt){ee&&(ee.el=Fe.el,ve(w,ee,Y)),Jt.asyncDep.then(()=>{w.isUnmounted||G()});return}}let ke=ee,kt;Js(w,!1),ee?(ee.el=Fe.el,ve(w,ee,Y)):ee=Fe,ae&&Vr(ae),(kt=ee.props&&ee.props.onVnodeBeforeUpdate)&&nn(kt,Ie,ee,Fe),Js(w,!0);const Nt=Mf(w),Qt=w.subTree;w.subTree=Nt,N(Qt,Nt,p(Qt.el),U(Qt),w,j,F),ee.el=Nt.el,ke===null&&mw(w,Nt.el),ue&&wt(ue,j),(kt=ee.props&&ee.props.onVnodeUpdated)&&wt(()=>nn(kt,Ie,ee,Fe),j)}else{let ee;const{el:ae,props:ue}=C,{bm:Ie,m:Fe,parent:ke,root:kt,type:Nt}=w,Qt=rr(C);Js(w,!1),Ie&&Vr(Ie),!Qt&&(ee=ue&&ue.onVnodeBeforeMount)&&nn(ee,ke,C),Js(w,!0);{kt.ce&&kt.ce._def.shadowRoot!==!1&&kt.ce._injectChildStyle(Nt);const Jt=w.subTree=Mf(w);N(null,Jt,R,$,w,j,F),C.el=Jt.el}if(Fe&&wt(Fe,j),!Qt&&(ee=ue&&ue.onVnodeMounted)){const Jt=C;wt(()=>nn(ee,ke,Jt),j)}(C.shapeFlag&256||ke&&rr(ke.vnode)&&ke.vnode.shapeFlag&256)&&w.a&&wt(w.a,j),w.isMounted=!0,C=R=$=null}};w.scope.on();const z=w.effect=new pm(G);w.scope.off();const W=w.update=z.run.bind(z),ce=w.job=z.runIfDirty.bind(z);ce.i=w,ce.id=w.uid,z.scheduler=()=>Ou(ce),Js(w,!0),W()},ve=(w,C,R)=>{C.component=w;const $=w.vnode.props;w.vnode=C,w.next=null,YE(w,C.props,$,R),tw(w,C.children,R),Gn(),Rf(w),Kn()},Re=(w,C,R,$,j,F,Y,G,z=!1)=>{const W=w&&w.children,ce=w?w.shapeFlag:0,ee=C.children,{patchFlag:ae,shapeFlag:ue}=C;if(ae>0){if(ae&128){yn(W,ee,R,$,j,F,Y,G,z);return}else if(ae&256){Wt(W,ee,R,$,j,F,Y,G,z);return}}ue&8?(ce&16&&Pt(W,j,F),ee!==W&&f(R,ee)):ce&16?ue&16?yn(W,ee,R,$,j,F,Y,G,z):Pt(W,j,F,!0):(ce&8&&f(R,""),ue&16&&v(ee,R,$,j,F,Y,G,z))},Wt=(w,C,R,$,j,F,Y,G,z)=>{w=w||Dr,C=C||Dr;const W=w.length,ce=C.length,ee=Math.min(W,ce);let ae;for(ae=0;ae<ee;ae++){const ue=C[ae]=z?ps(C[ae]):Tn(C[ae]);N(w[ae],ue,R,null,j,F,Y,G,z)}W>ce?Pt(w,j,F,!0,!1,ee):v(C,R,$,j,F,Y,G,z,ee)},yn=(w,C,R,$,j,F,Y,G,z)=>{let W=0;const ce=C.length;let ee=w.length-1,ae=ce-1;for(;W<=ee&&W<=ae;){const ue=w[W],Ie=C[W]=z?ps(C[W]):Tn(C[W]);if(gs(ue,Ie))N(ue,Ie,R,null,j,F,Y,G,z);else break;W++}for(;W<=ee&&W<=ae;){const ue=w[ee],Ie=C[ae]=z?ps(C[ae]):Tn(C[ae]);if(gs(ue,Ie))N(ue,Ie,R,null,j,F,Y,G,z);else break;ee--,ae--}if(W>ee){if(W<=ae){const ue=ae+1,Ie=ue<ce?C[ue].el:$;for(;W<=ae;)N(null,C[W]=z?ps(C[W]):Tn(C[W]),R,Ie,j,F,Y,G,z),W++}}else if(W>ae)for(;W<=ee;)vt(w[W],j,F,!0),W++;else{const ue=W,Ie=W,Fe=new Map;for(W=Ie;W<=ae;W++){const Et=C[W]=z?ps(C[W]):Tn(C[W]);Et.key!=null&&Fe.set(Et.key,W)}let ke,kt=0;const Nt=ae-Ie+1;let Qt=!1,Jt=0;const un=new Array(Nt);for(W=0;W<Nt;W++)un[W]=0;for(W=ue;W<=ee;W++){const Et=w[W];if(kt>=Nt){vt(Et,j,F,!0);continue}let dt;if(Et.key!=null)dt=Fe.get(Et.key);else for(ke=Ie;ke<=ae;ke++)if(un[ke-Ie]===0&&gs(Et,C[ke])){dt=ke;break}dt===void 0?vt(Et,j,F,!0):(un[dt-Ie]=W+1,dt>=Jt?Jt=dt:Qt=!0,N(Et,C[dt],R,null,j,F,Y,G,z),kt++)}const _r=Qt?iw(un):Dr;for(ke=_r.length-1,W=Nt-1;W>=0;W--){const Et=Ie+W,dt=C[Et],li=C[Et+1],Ws=Et+1<ce?li.el||li.placeholder:$;un[W]===0?N(null,dt,R,Ws,j,F,Y,G,z):Qt&&(ke<0||W!==_r[ke]?Kt(dt,R,Ws,2):ke--)}}},Kt=(w,C,R,$,j=null)=>{const{el:F,type:Y,transition:G,children:z,shapeFlag:W}=w;if(W&6){Kt(w.component.subTree,C,R,$);return}if(W&128){w.suspense.move(C,R,$);return}if(W&64){Y.move(w,C,R,oe);return}if(Y===De){s(F,C,R);for(let ee=0;ee<z.length;ee++)Kt(z[ee],C,R,$);s(w.anchor,C,R);return}if(Y===rl){V(w,C,R);return}if($!==2&&W&1&&G)if($===0)G.beforeEnter(F),s(F,C,R),wt(()=>G.enter(F),j);else{const{leave:ee,delayLeave:ae,afterLeave:ue}=G,Ie=()=>{w.ctx.isUnmounted?r(F):s(F,C,R)},Fe=()=>{F._isLeaving&&F[$n](!0),ee(F,()=>{Ie(),ue&&ue()})};ae?ae(F,Ie,Fe):Fe()}else s(F,C,R)},vt=(w,C,R,$=!1,j=!1)=>{const{type:F,props:Y,ref:G,children:z,dynamicChildren:W,shapeFlag:ce,patchFlag:ee,dirs:ae,cacheIndex:ue}=w;if(ee===-2&&(j=!1),G!=null&&(Gn(),$i(G,null,R,w,!0),Kn()),ue!=null&&(C.renderCache[ue]=void 0),ce&256){C.ctx.deactivate(w);return}const Ie=ce&1&&ae,Fe=!rr(w);let ke;if(Fe&&(ke=Y&&Y.onVnodeBeforeUnmount)&&nn(ke,C,w),ce&6)ln(w.component,R,$);else{if(ce&128){w.suspense.unmount(R,$);return}Ie&&Qs(w,null,C,"beforeUnmount"),ce&64?w.type.remove(w,C,R,oe,$):W&&!W.hasOnce&&(F!==De||ee>0&&ee&64)?Pt(W,C,R,!1,!0):(F===De&&ee&384||!j&&ce&16)&&Pt(z,C,R),$&&On(w)}(Fe&&(ke=Y&&Y.onVnodeUnmounted)||Ie)&&wt(()=>{ke&&nn(ke,C,w),Ie&&Qs(w,null,C,"unmounted")},R)},On=w=>{const{type:C,el:R,anchor:$,transition:j}=w;if(C===De){cn(R,$);return}if(C===rl){M(w);return}const F=()=>{r(R),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(w.shapeFlag&1&&j&&!j.persisted){const{leave:Y,delayLeave:G}=j,z=()=>Y(R,F);G?G(w.el,F,z):z()}else F()},cn=(w,C)=>{let R;for(;w!==C;)R=m(w),r(w),w=R;r(C)},ln=(w,C,R)=>{const{bum:$,scope:j,job:F,subTree:Y,um:G,m:z,a:W}=w;Sa(z),Sa(W),$&&Vr($),j.stop(),F&&(F.flags|=8,vt(Y,w,C,R)),G&&wt(G,C),wt(()=>{w.isUnmounted=!0},C)},Pt=(w,C,R,$=!1,j=!1,F=0)=>{for(let Y=F;Y<w.length;Y++)vt(w[Y],C,R,$,j)},U=w=>{if(w.shapeFlag&6)return U(w.component.subTree);if(w.shapeFlag&128)return w.suspense.next();const C=m(w.anchor||w.el),R=C&&C[AE];return R?m(R):C};let te=!1;const X=(w,C,R)=>{w==null?C._vnode&&vt(C._vnode,null,null,!0):N(C._vnode||null,w,C,null,null,null,R),C._vnode=w,te||(te=!0,Rf(),Lm(),te=!1)},oe={p:N,um:vt,m:Kt,r:On,mt:be,mc:v,pc:Re,pbc:I,n:U,o:t};return{render:X,hydrate:void 0,createApp:KE(X)}}function sl({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Js({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function rw(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function ig(t,e,n=!1){const s=t.children,r=e.children;if(he(s)&&he(r))for(let i=0;i<s.length;i++){const o=s[i];let c=r[i];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=r[i]=ps(r[i]),c.el=o.el),!n&&c.patchFlag!==-2&&ig(o,c)),c.type===cc&&c.patchFlag!==-1&&(c.el=o.el),c.type===At&&!c.el&&(c.el=o.el)}}function iw(t){const e=t.slice(),n=[0];let s,r,i,o,c;const l=t.length;for(s=0;s<l;s++){const u=t[s];if(u!==0){if(r=n[n.length-1],t[r]<u){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)c=i+o>>1,t[n[c]]<u?i=c+1:o=c;u<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function og(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:og(e)}function Sa(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const ow=Symbol.for("v-scx"),aw=()=>bt(ow);function dn(t,e,n){return ag(t,e,n)}function ag(t,e,n=Be){const{immediate:s,deep:r,flush:i,once:o}=n,c=yt({},n),l=e&&s||!e&&i!=="post";let u;if(so){if(i==="sync"){const _=aw();u=_.__watcherHandles||(_.__watcherHandles=[])}else if(!l){const _=()=>{};return _.stop=An,_.resume=An,_.pause=An,_}}const f=Mt;c.call=(_,b,N)=>pn(_,f,b,N);let p=!1;i==="post"?c.scheduler=_=>{wt(_,f&&f.suspense)}:i!=="sync"&&(p=!0,c.scheduler=(_,b)=>{b?_():Ou(_)}),c.augmentJob=_=>{e&&(_.flags|=4),p&&(_.flags|=2,f&&(_.id=f.uid,_.i=f))};const m=EE(t,e,c);return so&&(u?u.push(m):l&&m()),m}function cw(t,e,n){const s=this.proxy,r=Xe(t)?t.includes(".")?cg(s,t):()=>s[t]:t.bind(s,s);let i;_e(e)?i=e:(i=e.handler,n=e);const o=Io(this),c=ag(r,i.bind(s),n);return o(),c}function cg(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const lw=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${an(e)}Modifiers`]||t[`${Ms(e)}Modifiers`];function uw(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||Be;let r=n;const i=e.startsWith("update:"),o=i&&lw(s,e.slice(7));o&&(o.trim&&(r=n.map(f=>Xe(f)?f.trim():f)),o.number&&(r=n.map(Su)));let c,l=s[c=Qc(e)]||s[c=Qc(an(e))];!l&&i&&(l=s[c=Qc(Ms(e))]),l&&pn(l,t,6,r);const u=s[c+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[c])return;t.emitted[c]=!0,pn(u,t,6,r)}}const hw=new WeakMap;function lg(t,e,n=!1){const s=n?hw:e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},c=!1;if(!_e(t)){const l=u=>{const f=lg(u,e,!0);f&&(c=!0,yt(o,f))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!c?(We(t)&&s.set(t,null),null):(he(i)?i.forEach(l=>o[l]=null):yt(o,i),We(t)&&s.set(t,o),o)}function ac(t,e){return!t||!Za(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ve(t,e[0].toLowerCase()+e.slice(1))||Ve(t,Ms(e))||Ve(t,e))}function Mf(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:c,emit:l,render:u,renderCache:f,props:p,data:m,setupState:_,ctx:b,inheritAttrs:N}=t,k=Ia(t);let H,D;try{if(n.shapeFlag&4){const M=r||s,Z=M;H=Tn(u.call(Z,M,f,p,_,m,b)),D=c}else{const M=e;H=Tn(M.length>1?M(p,{attrs:c,slots:o,emit:l}):M(p,null)),D=e.props?c:fw(c)}}catch(M){ji.length=0,rc(M,t,1),H=Q(At)}let V=H;if(D&&N!==!1){const M=Object.keys(D),{shapeFlag:Z}=V;M.length&&Z&7&&(i&&M.some(Iu)&&(D=dw(D,i)),V=Qn(V,D,!1,!0))}return n.dirs&&(V=Qn(V,null,!1,!0),V.dirs=V.dirs?V.dirs.concat(n.dirs):n.dirs),n.transition&&$r(V,n.transition),H=V,Ia(k),H}const fw=t=>{let e;for(const n in t)(n==="class"||n==="style"||Za(n))&&((e||(e={}))[n]=t[n]);return e},dw=(t,e)=>{const n={};for(const s in t)(!Iu(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function pw(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:c,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?Ff(s,o,u):!!o;if(l&8){const f=e.dynamicProps;for(let p=0;p<f.length;p++){const m=f[p];if(o[m]!==s[m]&&!ac(u,m))return!0}}}else return(r||c)&&(!c||!c.$stable)?!0:s===o?!1:s?o?Ff(s,o,u):!0:!!o;return!1}function Ff(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!ac(n,i))return!0}return!1}function mw({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const Ca=t=>t.__isSuspense;function gw(t,e){e&&e.pendingBranch?he(t)?e.effects.push(...t):e.effects.push(t):TE(t)}const De=Symbol.for("v-fgt"),cc=Symbol.for("v-txt"),At=Symbol.for("v-cmt"),rl=Symbol.for("v-stc"),ji=[];let Xt=null;function O(t=!1){ji.push(Xt=t?null:[])}function _w(){ji.pop(),Xt=ji[ji.length-1]||null}let no=1;function ba(t,e=!1){no+=t,t<0&&Xt&&e&&(Xt.hasOnce=!0)}function ug(t){return t.dynamicChildren=no>0?Xt||Dr:null,_w(),no>0&&Xt&&Xt.push(t),t}function K(t,e,n,s,r,i){return ug(x(t,e,n,s,r,i,!0))}function Ue(t,e,n,s,r){return ug(Q(t,e,n,s,r,!0))}function Br(t){return t?t.__v_isVNode===!0:!1}function gs(t,e){return t.type===e.type&&t.key===e.key}const hg=({key:t})=>t??null,oa=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Xe(t)||rt(t)||_e(t)?{i:Ct,r:t,k:e,f:!!n}:t:null);function x(t,e=null,n=null,s=0,r=null,i=t===De?0:1,o=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&hg(e),ref:e&&oa(e),scopeId:Om,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Ct};return c?(ju(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=Xe(n)?8:16),no>0&&!o&&Xt&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Xt.push(l),l}const Q=yw;function yw(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===zm)&&(t=At),Br(t)){const c=Qn(t,e,!0);return n&&ju(c,n),no>0&&!i&&Xt&&(c.shapeFlag&6?Xt[Xt.indexOf(t)]=c:Xt.push(c)),c.patchFlag=-2,c}if(Rw(t)&&(t=t.__vccOpts),e){e=vw(e);let{class:c,style:l}=e;c&&!Xe(c)&&(e.class=Ge(c)),We(l)&&(Du(l)&&!he(l)&&(l=yt({},l)),e.style=vo(l))}const o=Xe(t)?1:Ca(t)?128:xm(t)?64:We(t)?4:_e(t)?2:0;return x(t,e,n,s,r,o,i,!0)}function vw(t){return t?Du(t)||Zm(t)?yt({},t):t:null}function Qn(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:c,transition:l}=t,u=e?Ew(r||{},e):r,f={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&hg(u),ref:e&&e.ref?n&&i?he(i)?i.concat(oa(e)):[i,oa(e)]:oa(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==De?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Qn(t.ssContent),ssFallback:t.ssFallback&&Qn(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&s&&$r(f,l.clone(f)),f}function Qe(t=" ",e=0){return Q(cc,null,t,e)}function Ke(t="",e=!1){return e?(O(),Ue(At,null,t)):Q(At,null,t)}function Tn(t){return t==null||typeof t=="boolean"?Q(At):he(t)?Q(De,null,t.slice()):Br(t)?ps(t):Q(cc,null,String(t))}function ps(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Qn(t)}function ju(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(he(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),ju(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!Zm(e)?e._ctx=Ct:r===3&&Ct&&(Ct.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else _e(e)?(e={default:e,_ctx:Ct},n=32):(e=String(e),s&64?(n=16,e=[Qe(e)]):n=8);t.children=e,t.shapeFlag|=n}function Ew(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=Ge([e.class,s.class]));else if(r==="style")e.style=vo([e.style,s.style]);else if(Za(r)){const i=e[r],o=s[r];o&&i!==o&&!(he(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function nn(t,e,n,s=null){pn(t,e,7,[n,s])}const ww=Jm();let Iw=0;function Tw(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||ww,i={uid:Iw++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new hm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:tg(s,r),emitsOptions:lg(s,r),emit:null,emitted:null,propsDefaults:Be,inheritAttrs:s.inheritAttrs,ctx:Be,data:Be,props:Be,attrs:Be,slots:Be,refs:Be,setupState:Be,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=uw.bind(null,i),t.ce&&t.ce(i),i}let Mt=null;const lc=()=>Mt||Ct;let Ra,Ul;{const t=nc(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};Ra=e("__VUE_INSTANCE_SETTERS__",n=>Mt=n),Ul=e("__VUE_SSR_SETTERS__",n=>so=n)}const Io=t=>{const e=Mt;return Ra(t),t.scope.on(),()=>{t.scope.off(),Ra(e)}},Uf=()=>{Mt&&Mt.scope.off(),Ra(null)};function fg(t){return t.vnode.shapeFlag&4}let so=!1;function Aw(t,e=!1,n=!1){e&&Ul(e);const{props:s,children:r}=t.vnode,i=fg(t);JE(t,s,i,e),ew(t,r,n||e);const o=i?Sw(t,e):void 0;return e&&Ul(!1),o}function Sw(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,BE);const{setup:s}=n;if(s){Gn();const r=t.setupContext=s.length>1?bw(t):null,i=Io(t),o=wo(s,t,0,[t.props,r]),c=rm(o);if(Kn(),i(),(c||t.sp)&&!rr(t)&&Hm(t),c){if(o.then(Uf,Uf),e)return o.then(l=>{$f(t,l)}).catch(l=>{rc(l,t,0)});t.asyncDep=o}else $f(t,o)}else dg(t)}function $f(t,e,n){_e(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:We(e)&&(t.setupState=km(e)),dg(t)}function dg(t,e,n){const s=t.type;t.render||(t.render=s.render||An);{const r=Io(t);Gn();try{jE(t)}finally{Kn(),r()}}}const Cw={get(t,e){return Ot(t,"get",""),t[e]}};function bw(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,Cw),slots:t.slots,emit:t.emit,expose:e}}function uc(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(km(Lu(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Bi)return Bi[n](t)},has(e,n){return n in e||n in Bi}})):t.proxy}function $l(t,e=!0){return _e(t)?t.displayName||t.name:t.name||e&&t.__name}function Rw(t){return _e(t)&&"__vccOpts"in t}const we=(t,e)=>yE(t,e,so);function Hu(t,e,n){try{ba(-1);const s=arguments.length;return s===2?We(e)&&!he(e)?Br(e)?Q(t,null,[e]):Q(t,e):Q(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Br(n)&&(n=[n]),Q(t,e,n))}finally{ba(1)}}const Pw="3.5.24";let Bl;const Bf=typeof window<"u"&&window.trustedTypes;if(Bf)try{Bl=Bf.createPolicy("vue",{createHTML:t=>t})}catch{}const pg=Bl?t=>Bl.createHTML(t):t=>t,kw="http://www.w3.org/2000/svg",Nw="http://www.w3.org/1998/Math/MathML",Un=typeof document<"u"?document:null,jf=Un&&Un.createElement("template"),Dw={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?Un.createElementNS(kw,t):e==="mathml"?Un.createElementNS(Nw,t):n?Un.createElement(t,{is:n}):Un.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>Un.createTextNode(t),createComment:t=>Un.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Un.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{jf.innerHTML=pg(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const c=jf.content;if(s==="svg"||s==="mathml"){const l=c.firstChild;for(;l.firstChild;)c.appendChild(l.firstChild);c.removeChild(l)}e.insertBefore(c,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},ls="transition",Si="animation",ro=Symbol("_vtc"),mg={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Lw=yt({},Mm,mg),Vw=t=>(t.displayName="Transition",t.props=Lw,t),Ow=Vw((t,{slots:e})=>Hu(bE,xw(t),e)),Ys=(t,e=[])=>{he(t)?t.forEach(n=>n(...e)):t&&t(...e)},Hf=t=>t?he(t)?t.some(e=>e.length>1):t.length>1:!1;function xw(t){const e={};for(const T in t)T in mg||(e[T]=t[T]);if(t.css===!1)return e;const{name:n="v",type:s,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:c=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:u=o,appearToClass:f=c,leaveFromClass:p=`${n}-leave-from`,leaveActiveClass:m=`${n}-leave-active`,leaveToClass:_=`${n}-leave-to`}=t,b=Mw(r),N=b&&b[0],k=b&&b[1],{onBeforeEnter:H,onEnter:D,onEnterCancelled:V,onLeave:M,onLeaveCancelled:Z,onBeforeAppear:ie=H,onAppear:S=D,onAppearCancelled:v=V}=e,y=(T,E,be,Je)=>{T._enterCancelled=Je,Xs(T,E?f:c),Xs(T,E?u:o),be&&be()},I=(T,E)=>{T._isLeaving=!1,Xs(T,p),Xs(T,_),Xs(T,m),E&&E()},A=T=>(E,be)=>{const Je=T?S:D,Me=()=>y(E,T,be);Ys(Je,[E,Me]),Wf(()=>{Xs(E,T?l:i),Mn(E,T?f:c),Hf(Je)||qf(E,s,N,Me)})};return yt(e,{onBeforeEnter(T){Ys(H,[T]),Mn(T,i),Mn(T,o)},onBeforeAppear(T){Ys(ie,[T]),Mn(T,l),Mn(T,u)},onEnter:A(!1),onAppear:A(!0),onLeave(T,E){T._isLeaving=!0;const be=()=>I(T,E);Mn(T,p),T._enterCancelled?(Mn(T,m),Kf(T)):(Kf(T),Mn(T,m)),Wf(()=>{T._isLeaving&&(Xs(T,p),Mn(T,_),Hf(M)||qf(T,s,k,be))}),Ys(M,[T,be])},onEnterCancelled(T){y(T,!1,void 0,!0),Ys(V,[T])},onAppearCancelled(T){y(T,!0,void 0,!0),Ys(v,[T])},onLeaveCancelled(T){I(T),Ys(Z,[T])}})}function Mw(t){if(t==null)return null;if(We(t))return[il(t.enter),il(t.leave)];{const e=il(t);return[e,e]}}function il(t){return Fv(t)}function Mn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[ro]||(t[ro]=new Set)).add(e)}function Xs(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[ro];n&&(n.delete(e),n.size||(t[ro]=void 0))}function Wf(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let Fw=0;function qf(t,e,n,s){const r=t._endId=++Fw,i=()=>{r===t._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:c,propCount:l}=Uw(t,e);if(!o)return s();const u=o+"end";let f=0;const p=()=>{t.removeEventListener(u,m),i()},m=_=>{_.target===t&&++f>=l&&p()};setTimeout(()=>{f<l&&p()},c+1),t.addEventListener(u,m)}function Uw(t,e){const n=window.getComputedStyle(t),s=b=>(n[b]||"").split(", "),r=s(`${ls}Delay`),i=s(`${ls}Duration`),o=zf(r,i),c=s(`${Si}Delay`),l=s(`${Si}Duration`),u=zf(c,l);let f=null,p=0,m=0;e===ls?o>0&&(f=ls,p=o,m=i.length):e===Si?u>0&&(f=Si,p=u,m=l.length):(p=Math.max(o,u),f=p>0?o>u?ls:Si:null,m=f?f===ls?i.length:l.length:0);const _=f===ls&&/\b(?:transform|all)(?:,|$)/.test(s(`${ls}Property`).toString());return{type:f,timeout:p,propCount:m,hasTransform:_}}function zf(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>Gf(n)+Gf(t[s])))}function Gf(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Kf(t){return(t?t.ownerDocument:document).body.offsetHeight}function $w(t,e,n){const s=t[ro];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Pa=Symbol("_vod"),gg=Symbol("_vsh"),Yo={name:"show",beforeMount(t,{value:e},{transition:n}){t[Pa]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Ci(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:s}){!e!=!n&&(s?e?(s.beforeEnter(t),Ci(t,!0),s.enter(t)):s.leave(t,()=>{Ci(t,!1)}):Ci(t,e))},beforeUnmount(t,{value:e}){Ci(t,e)}};function Ci(t,e){t.style.display=e?t[Pa]:"none",t[gg]=!e}const Bw=Symbol(""),jw=/(?:^|;)\s*display\s*:/;function Hw(t,e,n){const s=t.style,r=Xe(n);let i=!1;if(n&&!r){if(e)if(Xe(e))for(const o of e.split(";")){const c=o.slice(0,o.indexOf(":")).trim();n[c]==null&&aa(s,c,"")}else for(const o in e)n[o]==null&&aa(s,o,"");for(const o in n)o==="display"&&(i=!0),aa(s,o,n[o])}else if(r){if(e!==n){const o=s[Bw];o&&(n+=";"+o),s.cssText=n,i=jw.test(n)}}else e&&t.removeAttribute("style");Pa in t&&(t[Pa]=i?s.display:"",t[gg]&&(s.display="none"))}const Qf=/\s*!important$/;function aa(t,e,n){if(he(n))n.forEach(s=>aa(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=Ww(t,e);Qf.test(n)?t.setProperty(Ms(s),n.replace(Qf,""),"important"):t[s]=n}}const Jf=["Webkit","Moz","ms"],ol={};function Ww(t,e){const n=ol[e];if(n)return n;let s=an(e);if(s!=="filter"&&s in t)return ol[e]=s;s=tc(s);for(let r=0;r<Jf.length;r++){const i=Jf[r]+s;if(i in t)return ol[e]=i}return e}const Yf="http://www.w3.org/1999/xlink";function Xf(t,e,n,s,r,i=Wv(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Yf,e.slice(6,e.length)):t.setAttributeNS(Yf,e,n):n==null||i&&!cm(n)?t.removeAttribute(e):t.setAttribute(e,i?"":es(n)?String(n):n)}function Zf(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?pg(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const c=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(c!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=cm(n):n==null&&c==="string"?(n="",o=!0):c==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function Sr(t,e,n,s){t.addEventListener(e,n,s)}function qw(t,e,n,s){t.removeEventListener(e,n,s)}const ed=Symbol("_vei");function zw(t,e,n,s,r=null){const i=t[ed]||(t[ed]={}),o=i[e];if(s&&o)o.value=s;else{const[c,l]=Gw(e);if(s){const u=i[e]=Jw(s,r);Sr(t,c,u,l)}else o&&(qw(t,c,o,l),i[e]=void 0)}}const td=/(?:Once|Passive|Capture)$/;function Gw(t){let e;if(td.test(t)){e={};let s;for(;s=t.match(td);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ms(t.slice(2)),e]}let al=0;const Kw=Promise.resolve(),Qw=()=>al||(Kw.then(()=>al=0),al=Date.now());function Jw(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;pn(Yw(s,n.value),e,5,[s])};return n.value=t,n.attached=Qw(),n}function Yw(t,e){if(he(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const nd=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Xw=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?$w(t,s,o):e==="style"?Hw(t,n,s):Za(e)?Iu(e)||zw(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Zw(t,e,s,o))?(Zf(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Xf(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Xe(s))?Zf(t,an(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),Xf(t,e,s,o))};function Zw(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&nd(e)&&_e(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return nd(e)&&Xe(n)?!1:e in t}const sd=t=>{const e=t.props["onUpdate:modelValue"]||!1;return he(e)?n=>Vr(e,n):e};function eI(t){t.target.composing=!0}function rd(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const cl=Symbol("_assign");function id(t,e,n){return e&&(t=t.trim()),n&&(t=Su(t)),t}const Hn={created(t,{modifiers:{lazy:e,trim:n,number:s}},r){t[cl]=sd(r);const i=s||r.props&&r.props.type==="number";Sr(t,e?"change":"input",o=>{o.target.composing||t[cl](id(t.value,n,i))}),(n||i)&&Sr(t,"change",()=>{t.value=id(t.value,n,i)}),e||(Sr(t,"compositionstart",eI),Sr(t,"compositionend",rd),Sr(t,"change",rd))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:r,number:i}},o){if(t[cl]=sd(o),t.composing)return;const c=(i||t.type==="number")&&!/^0\d/.test(t.value)?Su(t.value):t.value,l=e??"";c!==l&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||r&&t.value.trim()===l)||(t.value=l))}},tI=["ctrl","shift","alt","meta"],nI={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>tI.some(n=>t[`${n}Key`]&&!e.includes(n))},Dn=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=((r,...i)=>{for(let o=0;o<e.length;o++){const c=nI[e[o]];if(c&&c(r,e))return}return t(r,...i)}))},sI={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},rI=(t,e)=>{const n=t._withKeys||(t._withKeys={}),s=e.join(".");return n[s]||(n[s]=(r=>{if(!("key"in r))return;const i=Ms(r.key);if(e.some(o=>o===i||sI[o]===i))return t(r)}))},iI=yt({patchProp:Xw},Dw);let od;function oI(){return od||(od=nw(iI))}const aI=((...t)=>{const e=oI().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=lI(s);if(!r)return;const i=e._component;!_e(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,cI(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e});function cI(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function lI(t){return Xe(t)?document.querySelector(t):t}let _g;const hc=t=>_g=t,yg=Symbol();function jl(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Hi;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Hi||(Hi={}));function uI(){const t=fm(!0),e=t.run(()=>pe({}));let n=[],s=[];const r=Lu({install(i){hc(r),r._a=i,i.provide(yg,r),i.config.globalProperties.$pinia=r,s.forEach(o=>n.push(o)),s=[]},use(i){return this._a?n.push(i):s.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return r}const vg=()=>{};function ad(t,e,n,s=vg){t.add(e);const r=()=>{t.delete(e)&&s()};return!n&&dm()&&qv(r),r}function Ir(t,...e){t.forEach(n=>{n(...e)})}const hI=t=>t(),cd=Symbol(),ll=Symbol();function Hl(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,s)=>t.set(s,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const s=e[n],r=t[n];jl(r)&&jl(s)&&t.hasOwnProperty(n)&&!rt(s)&&!Ts(s)?t[n]=Hl(r,s):t[n]=s}return t}const fI=Symbol();function dI(t){return!jl(t)||!Object.prototype.hasOwnProperty.call(t,fI)}const{assign:fs}=Object;function pI(t){return!!(rt(t)&&t.effect)}function mI(t,e,n,s){const{state:r,actions:i,getters:o}=e,c=n.state.value[t];let l;function u(){c||(n.state.value[t]=r?r():{});const f=pE(n.state.value[t]);return fs(f,i,Object.keys(o||{}).reduce((p,m)=>(p[m]=Lu(we(()=>{hc(n);const _=n._s.get(t);return o[m].call(_,_)})),p),{}))}return l=Eg(t,u,e,n,s,!0),l}function Eg(t,e,n={},s,r,i){let o;const c=fs({actions:{}},n),l={deep:!0};let u,f,p=new Set,m=new Set,_;const b=s.state.value[t];!i&&!b&&(s.state.value[t]={}),pe({});let N;function k(v){let y;u=f=!1,typeof v=="function"?(v(s.state.value[t]),y={type:Hi.patchFunction,storeId:t,events:_}):(Hl(s.state.value[t],v),y={type:Hi.patchObject,payload:v,storeId:t,events:_});const I=N=Symbol();Vu().then(()=>{N===I&&(u=!0)}),f=!0,Ir(p,y,s.state.value[t])}const H=i?function(){const{state:y}=n,I=y?y():{};this.$patch(A=>{fs(A,I)})}:vg;function D(){o.stop(),p.clear(),m.clear(),s._s.delete(t)}const V=(v,y="")=>{if(cd in v)return v[ll]=y,v;const I=function(){hc(s);const A=Array.from(arguments),T=new Set,E=new Set;function be(ve){T.add(ve)}function Je(ve){E.add(ve)}Ir(m,{args:A,name:I[ll],store:Z,after:be,onError:Je});let Me;try{Me=v.apply(this&&this.$id===t?this:Z,A)}catch(ve){throw Ir(E,ve),ve}return Me instanceof Promise?Me.then(ve=>(Ir(T,ve),ve)).catch(ve=>(Ir(E,ve),Promise.reject(ve))):(Ir(T,Me),Me)};return I[cd]=!0,I[ll]=y,I},M={_p:s,$id:t,$onAction:ad.bind(null,m),$patch:k,$reset:H,$subscribe(v,y={}){const I=ad(p,v,y.detached,()=>A()),A=o.run(()=>dn(()=>s.state.value[t],T=>{(y.flush==="sync"?f:u)&&v({storeId:t,type:Hi.direct,events:_},T)},fs({},l,y)));return I},$dispose:D},Z=Eo(M);s._s.set(t,Z);const S=(s._a&&s._a.runWithContext||hI)(()=>s._e.run(()=>(o=fm()).run(()=>e({action:V}))));for(const v in S){const y=S[v];if(rt(y)&&!pI(y)||Ts(y))i||(b&&dI(y)&&(rt(y)?y.value=b[v]:Hl(y,b[v])),s.state.value[t][v]=y);else if(typeof y=="function"){const I=V(y,v);S[v]=I,c.actions[v]=y}}return fs(Z,S),fs(Ne(Z),S),Object.defineProperty(Z,"$state",{get:()=>s.state.value[t],set:v=>{k(y=>{fs(y,v)})}}),s._p.forEach(v=>{fs(Z,o.run(()=>v({store:Z,app:s._a,pinia:s,options:c})))}),b&&i&&n.hydrate&&n.hydrate(Z.$state,b),u=!0,f=!0,Z}function gI(t,e,n){let s;const r=typeof e=="function";s=r?n:e;function i(o,c){const l=QE();return o=o||(l?bt(yg,null):null),o&&hc(o),o=_g,o._s.has(t)||(r?Eg(t,e,s,o):mI(t,s,o)),o._s.get(t)}return i.$id=t,i}const _I={name:"intersection",mounted(t,e){const n={rootMargin:"0px",threshold:1},s=i=>{i[0].isIntersecting&&e.value.getMoreFilms()};new IntersectionObserver(s,n).observe(t)}},ul=function(t){document.title=t},yI={mounted:(t,e)=>ul(e.value||t.innerText),beforeUpdate:(t,e)=>ul(e.value||t.innerText),updated:(t,e)=>ul(e.value||t.innerText)},vI=()=>{};var ld={};const wg=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},EI=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],c=t[n++],l=((r&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Ig={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,c=o?t[r+1]:0,l=r+2<t.length,u=l?t[r+2]:0,f=i>>2,p=(i&3)<<4|c>>4;let m=(c&15)<<2|u>>6,_=u&63;l||(_=64,o||(m=64)),s.push(n[f],n[p],n[m],n[_])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(wg(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):EI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],c=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const p=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||c==null||u==null||p==null)throw new wI;const m=i<<2|c>>4;if(s.push(m),u!==64){const _=c<<4&240|u>>2;if(s.push(_),p!==64){const b=u<<6&192|p;s.push(b)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class wI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const II=function(t){const e=wg(t);return Ig.encodeByteArray(e,!0)},ka=function(t){return II(t).replace(/\./g,"")},Tg=function(t){try{return Ig.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function TI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const AI=()=>TI().__FIREBASE_DEFAULTS__,SI=()=>{if(typeof process>"u"||typeof ld>"u")return;const t=ld.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},CI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Tg(t[1]);return e&&JSON.parse(e)},fc=()=>{try{return vI()||AI()||SI()||CI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ag=t=>fc()?.emulatorHosts?.[t],bI=t=>{const e=Ag(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Sg=()=>fc()?.config,Cg=t=>fc()?.[`_${t}`];class RI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function Xr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function bg(t){return(await fetch(t,{credentials:"include"})).ok}function PI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[ka(JSON.stringify(n)),ka(JSON.stringify(o)),""].join(".")}const Wi={};function kI(){const t={prod:[],emulator:[]};for(const e of Object.keys(Wi))Wi[e]?t.emulator.push(e):t.prod.push(e);return t}function NI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let ud=!1;function Rg(t,e){if(typeof window>"u"||typeof document>"u"||!Xr(window.location.host)||Wi[t]===e||Wi[t]||ud)return;Wi[t]=e;function n(m){return`__firebase__banner__${m}`}const s="__firebase__banner",i=kI().prod.length>0;function o(){const m=document.getElementById(s);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{ud=!0,o()},m}function f(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=NI(s),_=n("text"),b=document.getElementById(_)||document.createElement("span"),N=n("learnmore"),k=document.getElementById(N)||document.createElement("a"),H=n("preprendIcon"),D=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const V=m.element;c(V),f(k,N);const M=u();l(D,H),V.append(D,b,k,M),document.body.appendChild(V)}i?(b.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function DI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ft())}function LI(){const t=fc()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function OI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function xI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MI(){const t=Ft();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function FI(){return!LI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function UI(){try{return typeof indexedDB=="object"}catch{return!1}}function $I(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}const BI="FirebaseError";class ns extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=BI,Object.setPrototypeOf(this,ns.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,To.prototype.create)}}class To{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?jI(i,s):"Error",c=`${this.serviceName}: ${o} (${r}).`;return new ns(r,c,s)}}function jI(t,e){return t.replace(HI,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const HI=/\{\$([^}]+)}/g;function WI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ar(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(hd(i)&&hd(o)){if(!ar(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function hd(t){return t!==null&&typeof t=="object"}function Ao(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Ni(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function Di(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function qI(t,e){const n=new zI(t,e);return n.subscribe.bind(n)}class zI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");GI(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=hl),r.error===void 0&&(r.error=hl),r.complete===void 0&&(r.complete=hl);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function GI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function hl(){}function Ut(t){return t&&t._delegate?t._delegate:t}class cr{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const er="[DEFAULT]";class KI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new RI;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(JI(e))try{this.getOrInitializeService({instanceIdentifier:er})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=er){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=er){return this.instances.has(e)}getOptions(e=er){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);s===c&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:QI(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=er){return this.component?this.component.multipleInstances?e:er:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function QI(t){return t===er?void 0:t}function JI(t){return t.instantiationMode==="EAGER"}class YI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new KI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ae||(Ae={}));const XI={debug:Ae.DEBUG,verbose:Ae.VERBOSE,info:Ae.INFO,warn:Ae.WARN,error:Ae.ERROR,silent:Ae.SILENT},ZI=Ae.INFO,eT={[Ae.DEBUG]:"log",[Ae.VERBOSE]:"log",[Ae.INFO]:"info",[Ae.WARN]:"warn",[Ae.ERROR]:"error"},tT=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=eT[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Wu{constructor(e){this.name=e,this._logLevel=ZI,this._logHandler=tT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?XI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ae.DEBUG,...e),this._logHandler(this,Ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ae.VERBOSE,...e),this._logHandler(this,Ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ae.INFO,...e),this._logHandler(this,Ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ae.WARN,...e),this._logHandler(this,Ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ae.ERROR,...e),this._logHandler(this,Ae.ERROR,...e)}}const nT=(t,e)=>e.some(n=>t instanceof n);let fd,dd;function sT(){return fd||(fd=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rT(){return dd||(dd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Pg=new WeakMap,Wl=new WeakMap,kg=new WeakMap,fl=new WeakMap,qu=new WeakMap;function iT(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(As(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Pg.set(n,t)}).catch(()=>{}),qu.set(e,t),e}function oT(t){if(Wl.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Wl.set(t,e)}let ql={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Wl.get(t);if(e==="objectStoreNames")return t.objectStoreNames||kg.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return As(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function aT(t){ql=t(ql)}function cT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(dl(this),e,...n);return kg.set(s,e.sort?e.sort():[e]),As(s)}:rT().includes(t)?function(...e){return t.apply(dl(this),e),As(Pg.get(this))}:function(...e){return As(t.apply(dl(this),e))}}function lT(t){return typeof t=="function"?cT(t):(t instanceof IDBTransaction&&oT(t),nT(t,sT())?new Proxy(t,ql):t)}function As(t){if(t instanceof IDBRequest)return iT(t);if(fl.has(t))return fl.get(t);const e=lT(t);return e!==t&&(fl.set(t,e),qu.set(e,t)),e}const dl=t=>qu.get(t);function uT(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),c=As(o);return s&&o.addEventListener("upgradeneeded",l=>{s(As(o.result),l.oldVersion,l.newVersion,As(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),c.then(l=>{i&&l.addEventListener("close",()=>i()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}const hT=["get","getKey","getAll","getAllKeys","count"],fT=["put","add","delete","clear"],pl=new Map;function pd(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(pl.get(e))return pl.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=fT.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||hT.includes(n)))return;const i=async function(o,...c){const l=this.transaction(o,r?"readwrite":"readonly");let u=l.store;return s&&(u=u.index(c.shift())),(await Promise.all([u[n](...c),r&&l.done]))[0]};return pl.set(e,i),i}aT(t=>({...t,get:(e,n,s)=>pd(e,n)||t.get(e,n,s),has:(e,n)=>!!pd(e,n)||t.has(e,n)}));class dT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(pT(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function pT(t){return t.getComponent()?.type==="VERSION"}const zl="@firebase/app",md="0.14.6";const Jn=new Wu("@firebase/app"),mT="@firebase/app-compat",gT="@firebase/analytics-compat",_T="@firebase/analytics",yT="@firebase/app-check-compat",vT="@firebase/app-check",ET="@firebase/auth",wT="@firebase/auth-compat",IT="@firebase/database",TT="@firebase/data-connect",AT="@firebase/database-compat",ST="@firebase/functions",CT="@firebase/functions-compat",bT="@firebase/installations",RT="@firebase/installations-compat",PT="@firebase/messaging",kT="@firebase/messaging-compat",NT="@firebase/performance",DT="@firebase/performance-compat",LT="@firebase/remote-config",VT="@firebase/remote-config-compat",OT="@firebase/storage",xT="@firebase/storage-compat",MT="@firebase/firestore",FT="@firebase/ai",UT="@firebase/firestore-compat",$T="firebase",BT="12.6.0";const Gl="[DEFAULT]",jT={[zl]:"fire-core",[mT]:"fire-core-compat",[_T]:"fire-analytics",[gT]:"fire-analytics-compat",[vT]:"fire-app-check",[yT]:"fire-app-check-compat",[ET]:"fire-auth",[wT]:"fire-auth-compat",[IT]:"fire-rtdb",[TT]:"fire-data-connect",[AT]:"fire-rtdb-compat",[ST]:"fire-fn",[CT]:"fire-fn-compat",[bT]:"fire-iid",[RT]:"fire-iid-compat",[PT]:"fire-fcm",[kT]:"fire-fcm-compat",[NT]:"fire-perf",[DT]:"fire-perf-compat",[LT]:"fire-rc",[VT]:"fire-rc-compat",[OT]:"fire-gcs",[xT]:"fire-gcs-compat",[MT]:"fire-fst",[UT]:"fire-fst-compat",[FT]:"fire-vertex","fire-js":"fire-js",[$T]:"fire-js-all"};const Na=new Map,HT=new Map,Kl=new Map;function gd(t,e){try{t.container.addComponent(e)}catch(n){Jn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function jr(t){const e=t.name;if(Kl.has(e))return Jn.debug(`There were multiple attempts to register component ${e}.`),!1;Kl.set(e,t);for(const n of Na.values())gd(n,t);for(const n of HT.values())gd(n,t);return!0}function zu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function sn(t){return t==null?!1:t.settings!==void 0}const WT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ss=new To("app","Firebase",WT);class qT{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new cr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ss.create("app-deleted",{appName:this._name})}}const Zr=BT;function Ng(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:Gl,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw Ss.create("bad-app-name",{appName:String(r)});if(n||(n=Sg()),!n)throw Ss.create("no-options");const i=Na.get(r);if(i){if(ar(n,i.options)&&ar(s,i.config))return i;throw Ss.create("duplicate-app",{appName:r})}const o=new YI(r);for(const l of Kl.values())o.addComponent(l);const c=new qT(n,s,o);return Na.set(r,c),c}function Dg(t=Gl){const e=Na.get(t);if(!e&&t===Gl&&Sg())return Ng();if(!e)throw Ss.create("no-app",{appName:t});return e}function Cs(t,e,n){let s=jT[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Jn.warn(o.join(" "));return}jr(new cr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const zT="firebase-heartbeat-database",GT=1,io="firebase-heartbeat-store";let ml=null;function Lg(){return ml||(ml=uT(zT,GT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(io)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ss.create("idb-open",{originalErrorMessage:t.message})})),ml}async function KT(t){try{const n=(await Lg()).transaction(io),s=await n.objectStore(io).get(Vg(t));return await n.done,s}catch(e){if(e instanceof ns)Jn.warn(e.message);else{const n=Ss.create("idb-get",{originalErrorMessage:e?.message});Jn.warn(n.message)}}}async function _d(t,e){try{const s=(await Lg()).transaction(io,"readwrite");await s.objectStore(io).put(e,Vg(t)),await s.done}catch(n){if(n instanceof ns)Jn.warn(n.message);else{const s=Ss.create("idb-set",{originalErrorMessage:n?.message});Jn.warn(s.message)}}}function Vg(t){return`${t.name}!${t.options.appId}`}const QT=1024,JT=30;class YT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ZT(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=yd();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>JT){const r=e0(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Jn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=yd(),{heartbeatsToSend:n,unsentEntries:s}=XT(this._heartbeatsCache.heartbeats),r=ka(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Jn.warn(e),""}}}function yd(){return new Date().toISOString().substring(0,10)}function XT(t,e=QT){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),vd(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),vd(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class ZT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return UI()?$I().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await KT(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return _d(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return _d(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function vd(t){return ka(JSON.stringify({version:2,heartbeats:t})).length}function e0(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}function t0(t){jr(new cr("platform-logger",e=>new dT(e),"PRIVATE")),jr(new cr("heartbeat",e=>new YT(e),"PRIVATE")),Cs(zl,md,t),Cs(zl,md,"esm2020"),Cs("fire-js","")}t0("");var n0="firebase",s0="12.6.0";Cs(n0,s0,"app");var Ed=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var bs,Og;(function(){var t;function e(S,v){function y(){}y.prototype=v.prototype,S.F=v.prototype,S.prototype=new y,S.prototype.constructor=S,S.D=function(I,A,T){for(var E=Array(arguments.length-2),be=2;be<arguments.length;be++)E[be-2]=arguments[be];return v.prototype[A].apply(I,E)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(S,v,y){y||(y=0);const I=Array(16);if(typeof v=="string")for(var A=0;A<16;++A)I[A]=v.charCodeAt(y++)|v.charCodeAt(y++)<<8|v.charCodeAt(y++)<<16|v.charCodeAt(y++)<<24;else for(A=0;A<16;++A)I[A]=v[y++]|v[y++]<<8|v[y++]<<16|v[y++]<<24;v=S.g[0],y=S.g[1],A=S.g[2];let T=S.g[3],E;E=v+(T^y&(A^T))+I[0]+3614090360&4294967295,v=y+(E<<7&4294967295|E>>>25),E=T+(A^v&(y^A))+I[1]+3905402710&4294967295,T=v+(E<<12&4294967295|E>>>20),E=A+(y^T&(v^y))+I[2]+606105819&4294967295,A=T+(E<<17&4294967295|E>>>15),E=y+(v^A&(T^v))+I[3]+3250441966&4294967295,y=A+(E<<22&4294967295|E>>>10),E=v+(T^y&(A^T))+I[4]+4118548399&4294967295,v=y+(E<<7&4294967295|E>>>25),E=T+(A^v&(y^A))+I[5]+1200080426&4294967295,T=v+(E<<12&4294967295|E>>>20),E=A+(y^T&(v^y))+I[6]+2821735955&4294967295,A=T+(E<<17&4294967295|E>>>15),E=y+(v^A&(T^v))+I[7]+4249261313&4294967295,y=A+(E<<22&4294967295|E>>>10),E=v+(T^y&(A^T))+I[8]+1770035416&4294967295,v=y+(E<<7&4294967295|E>>>25),E=T+(A^v&(y^A))+I[9]+2336552879&4294967295,T=v+(E<<12&4294967295|E>>>20),E=A+(y^T&(v^y))+I[10]+4294925233&4294967295,A=T+(E<<17&4294967295|E>>>15),E=y+(v^A&(T^v))+I[11]+2304563134&4294967295,y=A+(E<<22&4294967295|E>>>10),E=v+(T^y&(A^T))+I[12]+1804603682&4294967295,v=y+(E<<7&4294967295|E>>>25),E=T+(A^v&(y^A))+I[13]+4254626195&4294967295,T=v+(E<<12&4294967295|E>>>20),E=A+(y^T&(v^y))+I[14]+2792965006&4294967295,A=T+(E<<17&4294967295|E>>>15),E=y+(v^A&(T^v))+I[15]+1236535329&4294967295,y=A+(E<<22&4294967295|E>>>10),E=v+(A^T&(y^A))+I[1]+4129170786&4294967295,v=y+(E<<5&4294967295|E>>>27),E=T+(y^A&(v^y))+I[6]+3225465664&4294967295,T=v+(E<<9&4294967295|E>>>23),E=A+(v^y&(T^v))+I[11]+643717713&4294967295,A=T+(E<<14&4294967295|E>>>18),E=y+(T^v&(A^T))+I[0]+3921069994&4294967295,y=A+(E<<20&4294967295|E>>>12),E=v+(A^T&(y^A))+I[5]+3593408605&4294967295,v=y+(E<<5&4294967295|E>>>27),E=T+(y^A&(v^y))+I[10]+38016083&4294967295,T=v+(E<<9&4294967295|E>>>23),E=A+(v^y&(T^v))+I[15]+3634488961&4294967295,A=T+(E<<14&4294967295|E>>>18),E=y+(T^v&(A^T))+I[4]+3889429448&4294967295,y=A+(E<<20&4294967295|E>>>12),E=v+(A^T&(y^A))+I[9]+568446438&4294967295,v=y+(E<<5&4294967295|E>>>27),E=T+(y^A&(v^y))+I[14]+3275163606&4294967295,T=v+(E<<9&4294967295|E>>>23),E=A+(v^y&(T^v))+I[3]+4107603335&4294967295,A=T+(E<<14&4294967295|E>>>18),E=y+(T^v&(A^T))+I[8]+1163531501&4294967295,y=A+(E<<20&4294967295|E>>>12),E=v+(A^T&(y^A))+I[13]+2850285829&4294967295,v=y+(E<<5&4294967295|E>>>27),E=T+(y^A&(v^y))+I[2]+4243563512&4294967295,T=v+(E<<9&4294967295|E>>>23),E=A+(v^y&(T^v))+I[7]+1735328473&4294967295,A=T+(E<<14&4294967295|E>>>18),E=y+(T^v&(A^T))+I[12]+2368359562&4294967295,y=A+(E<<20&4294967295|E>>>12),E=v+(y^A^T)+I[5]+4294588738&4294967295,v=y+(E<<4&4294967295|E>>>28),E=T+(v^y^A)+I[8]+2272392833&4294967295,T=v+(E<<11&4294967295|E>>>21),E=A+(T^v^y)+I[11]+1839030562&4294967295,A=T+(E<<16&4294967295|E>>>16),E=y+(A^T^v)+I[14]+4259657740&4294967295,y=A+(E<<23&4294967295|E>>>9),E=v+(y^A^T)+I[1]+2763975236&4294967295,v=y+(E<<4&4294967295|E>>>28),E=T+(v^y^A)+I[4]+1272893353&4294967295,T=v+(E<<11&4294967295|E>>>21),E=A+(T^v^y)+I[7]+4139469664&4294967295,A=T+(E<<16&4294967295|E>>>16),E=y+(A^T^v)+I[10]+3200236656&4294967295,y=A+(E<<23&4294967295|E>>>9),E=v+(y^A^T)+I[13]+681279174&4294967295,v=y+(E<<4&4294967295|E>>>28),E=T+(v^y^A)+I[0]+3936430074&4294967295,T=v+(E<<11&4294967295|E>>>21),E=A+(T^v^y)+I[3]+3572445317&4294967295,A=T+(E<<16&4294967295|E>>>16),E=y+(A^T^v)+I[6]+76029189&4294967295,y=A+(E<<23&4294967295|E>>>9),E=v+(y^A^T)+I[9]+3654602809&4294967295,v=y+(E<<4&4294967295|E>>>28),E=T+(v^y^A)+I[12]+3873151461&4294967295,T=v+(E<<11&4294967295|E>>>21),E=A+(T^v^y)+I[15]+530742520&4294967295,A=T+(E<<16&4294967295|E>>>16),E=y+(A^T^v)+I[2]+3299628645&4294967295,y=A+(E<<23&4294967295|E>>>9),E=v+(A^(y|~T))+I[0]+4096336452&4294967295,v=y+(E<<6&4294967295|E>>>26),E=T+(y^(v|~A))+I[7]+1126891415&4294967295,T=v+(E<<10&4294967295|E>>>22),E=A+(v^(T|~y))+I[14]+2878612391&4294967295,A=T+(E<<15&4294967295|E>>>17),E=y+(T^(A|~v))+I[5]+4237533241&4294967295,y=A+(E<<21&4294967295|E>>>11),E=v+(A^(y|~T))+I[12]+1700485571&4294967295,v=y+(E<<6&4294967295|E>>>26),E=T+(y^(v|~A))+I[3]+2399980690&4294967295,T=v+(E<<10&4294967295|E>>>22),E=A+(v^(T|~y))+I[10]+4293915773&4294967295,A=T+(E<<15&4294967295|E>>>17),E=y+(T^(A|~v))+I[1]+2240044497&4294967295,y=A+(E<<21&4294967295|E>>>11),E=v+(A^(y|~T))+I[8]+1873313359&4294967295,v=y+(E<<6&4294967295|E>>>26),E=T+(y^(v|~A))+I[15]+4264355552&4294967295,T=v+(E<<10&4294967295|E>>>22),E=A+(v^(T|~y))+I[6]+2734768916&4294967295,A=T+(E<<15&4294967295|E>>>17),E=y+(T^(A|~v))+I[13]+1309151649&4294967295,y=A+(E<<21&4294967295|E>>>11),E=v+(A^(y|~T))+I[4]+4149444226&4294967295,v=y+(E<<6&4294967295|E>>>26),E=T+(y^(v|~A))+I[11]+3174756917&4294967295,T=v+(E<<10&4294967295|E>>>22),E=A+(v^(T|~y))+I[2]+718787259&4294967295,A=T+(E<<15&4294967295|E>>>17),E=y+(T^(A|~v))+I[9]+3951481745&4294967295,S.g[0]=S.g[0]+v&4294967295,S.g[1]=S.g[1]+(A+(E<<21&4294967295|E>>>11))&4294967295,S.g[2]=S.g[2]+A&4294967295,S.g[3]=S.g[3]+T&4294967295}s.prototype.v=function(S,v){v===void 0&&(v=S.length);const y=v-this.blockSize,I=this.C;let A=this.h,T=0;for(;T<v;){if(A==0)for(;T<=y;)r(this,S,T),T+=this.blockSize;if(typeof S=="string"){for(;T<v;)if(I[A++]=S.charCodeAt(T++),A==this.blockSize){r(this,I),A=0;break}}else for(;T<v;)if(I[A++]=S[T++],A==this.blockSize){r(this,I),A=0;break}}this.h=A,this.o+=v},s.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var v=1;v<S.length-8;++v)S[v]=0;v=this.o*8;for(var y=S.length-8;y<S.length;++y)S[y]=v&255,v/=256;for(this.v(S),S=Array(16),v=0,y=0;y<4;++y)for(let I=0;I<32;I+=8)S[v++]=this.g[y]>>>I&255;return S};function i(S,v){var y=c;return Object.prototype.hasOwnProperty.call(y,S)?y[S]:y[S]=v(S)}function o(S,v){this.h=v;const y=[];let I=!0;for(let A=S.length-1;A>=0;A--){const T=S[A]|0;I&&T==v||(y[A]=T,I=!1)}this.g=y}var c={};function l(S){return-128<=S&&S<128?i(S,function(v){return new o([v|0],v<0?-1:0)}):new o([S|0],S<0?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return p;if(S<0)return k(u(-S));const v=[];let y=1;for(let I=0;S>=y;I++)v[I]=S/y|0,y*=4294967296;return new o(v,0)}function f(S,v){if(S.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(S.charAt(0)=="-")return k(f(S.substring(1),v));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const y=u(Math.pow(v,8));let I=p;for(let T=0;T<S.length;T+=8){var A=Math.min(8,S.length-T);const E=parseInt(S.substring(T,T+A),v);A<8?(A=u(Math.pow(v,A)),I=I.j(A).add(u(E))):(I=I.j(y),I=I.add(u(E)))}return I}var p=l(0),m=l(1),_=l(16777216);t=o.prototype,t.m=function(){if(N(this))return-k(this).m();let S=0,v=1;for(let y=0;y<this.g.length;y++){const I=this.i(y);S+=(I>=0?I:4294967296+I)*v,v*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(b(this))return"0";if(N(this))return"-"+k(this).toString(S);const v=u(Math.pow(S,6));var y=this;let I="";for(;;){const A=M(y,v).g;y=H(y,A.j(v));let T=((y.g.length>0?y.g[0]:y.h)>>>0).toString(S);if(y=A,b(y))return T+I;for(;T.length<6;)T="0"+T;I=T+I}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function b(S){if(S.h!=0)return!1;for(let v=0;v<S.g.length;v++)if(S.g[v]!=0)return!1;return!0}function N(S){return S.h==-1}t.l=function(S){return S=H(this,S),N(S)?-1:b(S)?0:1};function k(S){const v=S.g.length,y=[];for(let I=0;I<v;I++)y[I]=~S.g[I];return new o(y,~S.h).add(m)}t.abs=function(){return N(this)?k(this):this},t.add=function(S){const v=Math.max(this.g.length,S.g.length),y=[];let I=0;for(let A=0;A<=v;A++){let T=I+(this.i(A)&65535)+(S.i(A)&65535),E=(T>>>16)+(this.i(A)>>>16)+(S.i(A)>>>16);I=E>>>16,T&=65535,E&=65535,y[A]=E<<16|T}return new o(y,y[y.length-1]&-2147483648?-1:0)};function H(S,v){return S.add(k(v))}t.j=function(S){if(b(this)||b(S))return p;if(N(this))return N(S)?k(this).j(k(S)):k(k(this).j(S));if(N(S))return k(this.j(k(S)));if(this.l(_)<0&&S.l(_)<0)return u(this.m()*S.m());const v=this.g.length+S.g.length,y=[];for(var I=0;I<2*v;I++)y[I]=0;for(I=0;I<this.g.length;I++)for(let A=0;A<S.g.length;A++){const T=this.i(I)>>>16,E=this.i(I)&65535,be=S.i(A)>>>16,Je=S.i(A)&65535;y[2*I+2*A]+=E*Je,D(y,2*I+2*A),y[2*I+2*A+1]+=T*Je,D(y,2*I+2*A+1),y[2*I+2*A+1]+=E*be,D(y,2*I+2*A+1),y[2*I+2*A+2]+=T*be,D(y,2*I+2*A+2)}for(S=0;S<v;S++)y[S]=y[2*S+1]<<16|y[2*S];for(S=v;S<2*v;S++)y[S]=0;return new o(y,0)};function D(S,v){for(;(S[v]&65535)!=S[v];)S[v+1]+=S[v]>>>16,S[v]&=65535,v++}function V(S,v){this.g=S,this.h=v}function M(S,v){if(b(v))throw Error("division by zero");if(b(S))return new V(p,p);if(N(S))return v=M(k(S),v),new V(k(v.g),k(v.h));if(N(v))return v=M(S,k(v)),new V(k(v.g),v.h);if(S.g.length>30){if(N(S)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var y=m,I=v;I.l(S)<=0;)y=Z(y),I=Z(I);var A=ie(y,1),T=ie(I,1);for(I=ie(I,2),y=ie(y,2);!b(I);){var E=T.add(I);E.l(S)<=0&&(A=A.add(y),T=E),I=ie(I,1),y=ie(y,1)}return v=H(S,A.j(v)),new V(A,v)}for(A=p;S.l(v)>=0;){for(y=Math.max(1,Math.floor(S.m()/v.m())),I=Math.ceil(Math.log(y)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),T=u(y),E=T.j(v);N(E)||E.l(S)>0;)y-=I,T=u(y),E=T.j(v);b(T)&&(T=m),A=A.add(T),S=H(S,E)}return new V(A,S)}t.B=function(S){return M(this,S).h},t.and=function(S){const v=Math.max(this.g.length,S.g.length),y=[];for(let I=0;I<v;I++)y[I]=this.i(I)&S.i(I);return new o(y,this.h&S.h)},t.or=function(S){const v=Math.max(this.g.length,S.g.length),y=[];for(let I=0;I<v;I++)y[I]=this.i(I)|S.i(I);return new o(y,this.h|S.h)},t.xor=function(S){const v=Math.max(this.g.length,S.g.length),y=[];for(let I=0;I<v;I++)y[I]=this.i(I)^S.i(I);return new o(y,this.h^S.h)};function Z(S){const v=S.g.length+1,y=[];for(let I=0;I<v;I++)y[I]=S.i(I)<<1|S.i(I-1)>>>31;return new o(y,S.h)}function ie(S,v){const y=v>>5;v%=32;const I=S.g.length-y,A=[];for(let T=0;T<I;T++)A[T]=v>0?S.i(T+y)>>>v|S.i(T+y+1)<<32-v:S.i(T+y);return new o(A,S.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Og=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=f,bs=o}).apply(typeof Ed<"u"?Ed:typeof self<"u"?self:typeof window<"u"?window:{});var Xo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var xg,Li,Mg,ca,Ql,Fg,Ug,$g;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xo=="object"&&Xo];for(var h=0;h<a.length;++h){var d=a[h];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var s=n(this);function r(a,h){if(h)e:{var d=s;a=a.split(".");for(var g=0;g<a.length-1;g++){var P=a[g];if(!(P in d))break e;d=d[P]}a=a[a.length-1],g=d[a],h=h(g),h!=g&&h!=null&&e(d,a,{configurable:!0,writable:!0,value:h})}}r("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(a){return a||function(h){var d=[],g;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&d.push([g,h[g]]);return d}});var i=i||{},o=this||self;function c(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function l(a,h,d){return a.call.apply(a.bind,arguments)}function u(a,h,d){return u=l,u.apply(null,arguments)}function f(a,h){var d=Array.prototype.slice.call(arguments,1);return function(){var g=d.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function p(a,h){function d(){}d.prototype=h.prototype,a.Z=h.prototype,a.prototype=new d,a.prototype.constructor=a,a.Ob=function(g,P,L){for(var J=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)J[Ee-2]=arguments[Ee];return h.prototype[P].apply(g,J)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function _(a){const h=a.length;if(h>0){const d=Array(h);for(let g=0;g<h;g++)d[g]=a[g];return d}return[]}function b(a,h){for(let g=1;g<arguments.length;g++){const P=arguments[g];var d=typeof P;if(d=d!="object"?d:P?Array.isArray(P)?"array":d:"null",d=="array"||d=="object"&&typeof P.length=="number"){d=a.length||0;const L=P.length||0;a.length=d+L;for(let J=0;J<L;J++)a[d+J]=P[J]}else a.push(P)}}class N{constructor(h,d){this.i=h,this.j=d,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function k(a){o.setTimeout(()=>{throw a},0)}function H(){var a=S;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class D{constructor(){this.h=this.g=null}add(h,d){const g=V.get();g.set(h,d),this.h?this.h.next=g:this.g=g,this.h=g}}var V=new N(()=>new M,a=>a.reset());class M{constructor(){this.next=this.g=this.h=null}set(h,d){this.h=h,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,ie=!1,S=new D,v=()=>{const a=Promise.resolve(void 0);Z=()=>{a.then(y)}};function y(){for(var a;a=H();){try{a.h.call(a.g)}catch(d){k(d)}var h=V;h.j(a),h.h<100&&(h.h++,a.next=h.g,h.g=a)}ie=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var T=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};o.addEventListener("test",d,h),o.removeEventListener("test",d,h)}catch{}return a})();function E(a){return/^[\s\xa0]*$/.test(a)}function be(a,h){A.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,h)}p(be,A),be.prototype.init=function(a,h){const d=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget,h||(d=="mouseover"?h=a.fromElement:d=="mouseout"&&(h=a.toElement)),this.relatedTarget=h,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&be.Z.h.call(this)},be.prototype.h=function(){be.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Je="closure_listenable_"+(Math.random()*1e6|0),Me=0;function ve(a,h,d,g,P){this.listener=a,this.proxy=null,this.src=h,this.type=d,this.capture=!!g,this.ha=P,this.key=++Me,this.da=this.fa=!1}function Re(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Wt(a,h,d){for(const g in a)h.call(d,a[g],g,a)}function yn(a,h){for(const d in a)h.call(void 0,a[d],d,a)}function Kt(a){const h={};for(const d in a)h[d]=a[d];return h}const vt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function On(a,h){let d,g;for(let P=1;P<arguments.length;P++){g=arguments[P];for(d in g)a[d]=g[d];for(let L=0;L<vt.length;L++)d=vt[L],Object.prototype.hasOwnProperty.call(g,d)&&(a[d]=g[d])}}function cn(a){this.src=a,this.g={},this.h=0}cn.prototype.add=function(a,h,d,g,P){const L=a.toString();a=this.g[L],a||(a=this.g[L]=[],this.h++);const J=Pt(a,h,g,P);return J>-1?(h=a[J],d||(h.fa=!1)):(h=new ve(h,this.src,L,!!g,P),h.fa=d,a.push(h)),h};function ln(a,h){const d=h.type;if(d in a.g){var g=a.g[d],P=Array.prototype.indexOf.call(g,h,void 0),L;(L=P>=0)&&Array.prototype.splice.call(g,P,1),L&&(Re(h),a.g[d].length==0&&(delete a.g[d],a.h--))}}function Pt(a,h,d,g){for(let P=0;P<a.length;++P){const L=a[P];if(!L.da&&L.listener==h&&L.capture==!!d&&L.ha==g)return P}return-1}var U="closure_lm_"+(Math.random()*1e6|0),te={};function X(a,h,d,g,P){if(Array.isArray(h)){for(let L=0;L<h.length;L++)X(a,h[L],d,g,P);return null}return d=Y(d),a&&a[Je]?a.J(h,d,c(g)?!!g.capture:!1,P):oe(a,h,d,!1,g,P)}function oe(a,h,d,g,P,L){if(!h)throw Error("Invalid event type");const J=c(P)?!!P.capture:!!P;let Ee=j(a);if(Ee||(a[U]=Ee=new cn(a)),d=Ee.add(h,d,g,J,L),d.proxy)return d;if(g=Te(),d.proxy=g,g.src=a,g.listener=d,a.addEventListener)T||(P=J),P===void 0&&(P=!1),a.addEventListener(h.toString(),g,P);else if(a.attachEvent)a.attachEvent(R(h.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Te(){function a(d){return h.call(a.src,a.listener,d)}const h=$;return a}function w(a,h,d,g,P){if(Array.isArray(h))for(var L=0;L<h.length;L++)w(a,h[L],d,g,P);else g=c(g)?!!g.capture:!!g,d=Y(d),a&&a[Je]?(a=a.i,L=String(h).toString(),L in a.g&&(h=a.g[L],d=Pt(h,d,g,P),d>-1&&(Re(h[d]),Array.prototype.splice.call(h,d,1),h.length==0&&(delete a.g[L],a.h--)))):a&&(a=j(a))&&(h=a.g[h.toString()],a=-1,h&&(a=Pt(h,d,g,P)),(d=a>-1?h[a]:null)&&C(d))}function C(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[Je])ln(h.i,a);else{var d=a.type,g=a.proxy;h.removeEventListener?h.removeEventListener(d,g,a.capture):h.detachEvent?h.detachEvent(R(d),g):h.addListener&&h.removeListener&&h.removeListener(g),(d=j(h))?(ln(d,a),d.h==0&&(d.src=null,h[U]=null)):Re(a)}}}function R(a){return a in te?te[a]:te[a]="on"+a}function $(a,h){if(a.da)a=!0;else{h=new be(h,this);const d=a.listener,g=a.ha||a.src;a.fa&&C(a),a=d.call(g,h)}return a}function j(a){return a=a[U],a instanceof cn?a:null}var F="__closure_events_fn_"+(Math.random()*1e9>>>0);function Y(a){return typeof a=="function"?a:(a[F]||(a[F]=function(h){return a.handleEvent(h)}),a[F])}function G(){I.call(this),this.i=new cn(this),this.M=this,this.G=null}p(G,I),G.prototype[Je]=!0,G.prototype.removeEventListener=function(a,h,d,g){w(this,a,h,d,g)};function z(a,h){var d,g=a.G;if(g)for(d=[];g;g=g.G)d.push(g);if(a=a.M,g=h.type||h,typeof h=="string")h=new A(h,a);else if(h instanceof A)h.target=h.target||a;else{var P=h;h=new A(g,a),On(h,P)}P=!0;let L,J;if(d)for(J=d.length-1;J>=0;J--)L=h.g=d[J],P=W(L,g,!0,h)&&P;if(L=h.g=a,P=W(L,g,!0,h)&&P,P=W(L,g,!1,h)&&P,d)for(J=0;J<d.length;J++)L=h.g=d[J],P=W(L,g,!1,h)&&P}G.prototype.N=function(){if(G.Z.N.call(this),this.i){var a=this.i;for(const h in a.g){const d=a.g[h];for(let g=0;g<d.length;g++)Re(d[g]);delete a.g[h],a.h--}}this.G=null},G.prototype.J=function(a,h,d,g){return this.i.add(String(a),h,!1,d,g)},G.prototype.K=function(a,h,d,g){return this.i.add(String(a),h,!0,d,g)};function W(a,h,d,g){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();let P=!0;for(let L=0;L<h.length;++L){const J=h[L];if(J&&!J.da&&J.capture==d){const Ee=J.listener,ct=J.ha||J.src;J.fa&&ln(a.i,J),P=Ee.call(ct,g)!==!1&&P}}return P&&!g.defaultPrevented}function ce(a,h){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=u(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(a,h||0)}function ee(a){a.g=ce(()=>{a.g=null,a.i&&(a.i=!1,ee(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class ae extends I{constructor(h,d){super(),this.m=h,this.l=d,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ue(a){I.call(this),this.h=a,this.g={}}p(ue,I);var Ie=[];function Fe(a){Wt(a.g,function(h,d){this.g.hasOwnProperty(d)&&C(h)},a),a.g={}}ue.prototype.N=function(){ue.Z.N.call(this),Fe(this)},ue.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ke=o.JSON.stringify,kt=o.JSON.parse,Nt=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Qt(){}function Jt(){}var un={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function _r(){A.call(this,"d")}p(_r,A);function Et(){A.call(this,"c")}p(Et,A);var dt={},li=null;function Ws(){return li=li||new G}dt.Ia="serverreachability";function xh(a){A.call(this,dt.Ia,a)}p(xh,A);function ui(a){const h=Ws();z(h,new xh(h))}dt.STAT_EVENT="statevent";function Mh(a,h){A.call(this,dt.STAT_EVENT,a),this.stat=h}p(Mh,A);function $t(a){const h=Ws();z(h,new Mh(h,a))}dt.Ja="timingevent";function Fh(a,h){A.call(this,dt.Ja,a),this.size=h}p(Fh,A);function hi(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},h)}function fi(){this.g=!0}fi.prototype.ua=function(){this.g=!1};function hv(a,h,d,g,P,L){a.info(function(){if(a.g)if(L){var J="",Ee=L.split("&");for(let $e=0;$e<Ee.length;$e++){var ct=Ee[$e].split("=");if(ct.length>1){const pt=ct[0];ct=ct[1];const En=pt.split("_");J=En.length>=2&&En[1]=="type"?J+(pt+"="+ct+"&"):J+(pt+"=redacted&")}}}else J=null;else J=L;return"XMLHTTP REQ ("+g+") [attempt "+P+"]: "+h+`
`+d+`
`+J})}function fv(a,h,d,g,P,L,J){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+P+"]: "+h+`
`+d+`
`+L+" "+J})}function yr(a,h,d,g){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+pv(a,d)+(g?" "+g:"")})}function dv(a,h){a.info(function(){return"TIMEOUT: "+h})}fi.prototype.info=function(){};function pv(a,h){if(!a.g)return h;if(!h)return null;try{const L=JSON.parse(h);if(L){for(a=0;a<L.length;a++)if(Array.isArray(L[a])){var d=L[a];if(!(d.length<2)){var g=d[1];if(Array.isArray(g)&&!(g.length<1)){var P=g[0];if(P!="noop"&&P!="stop"&&P!="close")for(let J=1;J<g.length;J++)g[J]=""}}}}return ke(L)}catch{return h}}var xo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Uh={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},$h;function Oc(){}p(Oc,Qt),Oc.prototype.g=function(){return new XMLHttpRequest},$h=new Oc;function di(a){return encodeURIComponent(String(a))}function mv(a){var h=1;a=a.split(":");const d=[];for(;h>0&&a.length;)d.push(a.shift()),h--;return a.length&&d.push(a.join(":")),d}function ss(a,h,d,g){this.j=a,this.i=h,this.l=d,this.S=g||1,this.V=new ue(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Bh}function Bh(){this.i=null,this.g="",this.h=!1}var jh={},xc={};function Mc(a,h,d){a.M=1,a.A=Fo(vn(h)),a.u=d,a.R=!0,Hh(a,null)}function Hh(a,h){a.F=Date.now(),Mo(a),a.B=vn(a.A);var d=a.B,g=a.S;Array.isArray(g)||(g=[String(g)]),nf(d.i,"t",g),a.C=0,d=a.j.L,a.h=new Bh,a.g=wf(a.j,d?h:null,!a.u),a.P>0&&(a.O=new ae(u(a.Y,a,a.g),a.P)),h=a.V,d=a.g,g=a.ba;var P="readystatechange";Array.isArray(P)||(P&&(Ie[0]=P.toString()),P=Ie);for(let L=0;L<P.length;L++){const J=X(d,P[L],g||h.handleEvent,!1,h.h||h);if(!J)break;h.g[J.key]=J}h=a.J?Kt(a.J):{},a.u?(a.v||(a.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,h)):(a.v="GET",a.g.ea(a.B,a.v,null,h)),ui(),hv(a.i,a.v,a.B,a.l,a.S,a.u)}ss.prototype.ba=function(a){a=a.target;const h=this.O;h&&os(a)==3?h.j():this.Y(a)},ss.prototype.Y=function(a){try{if(a==this.g)e:{const Ee=os(this.g),ct=this.g.ya(),$e=this.g.ca();if(!(Ee<3)&&(Ee!=3||this.g&&(this.h.h||this.g.la()||uf(this.g)))){this.K||Ee!=4||ct==7||(ct==8||$e<=0?ui(3):ui(2)),Fc(this);var h=this.g.ca();this.X=h;var d=gv(this);if(this.o=h==200,fv(this.i,this.v,this.B,this.l,this.S,Ee,h),this.o){if(this.U&&!this.L){t:{if(this.g){var g,P=this.g;if((g=P.g?P.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(g)){var L=g;break t}}L=null}if(a=L)yr(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Uc(this,a);else{this.o=!1,this.m=3,$t(12),qs(this),pi(this);break e}}if(this.R){a=!0;let pt;for(;!this.K&&this.C<d.length;)if(pt=_v(this,d),pt==xc){Ee==4&&(this.m=4,$t(14),a=!1),yr(this.i,this.l,null,"[Incomplete Response]");break}else if(pt==jh){this.m=4,$t(15),yr(this.i,this.l,d,"[Invalid Chunk]"),a=!1;break}else yr(this.i,this.l,pt,null),Uc(this,pt);if(Wh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ee!=4||d.length!=0||this.h.h||(this.m=1,$t(16),a=!1),this.o=this.o&&a,!a)yr(this.i,this.l,d,"[Invalid Chunked Response]"),qs(this),pi(this);else if(d.length>0&&!this.W){this.W=!0;var J=this.j;J.g==this&&J.aa&&!J.P&&(J.j.info("Great, no buffering proxy detected. Bytes received: "+d.length),Gc(J),J.P=!0,$t(11))}}else yr(this.i,this.l,d,null),Uc(this,d);Ee==4&&qs(this),this.o&&!this.K&&(Ee==4?_f(this.j,this):(this.o=!1,Mo(this)))}else Nv(this.g),h==400&&d.indexOf("Unknown SID")>0?(this.m=3,$t(12)):(this.m=0,$t(13)),qs(this),pi(this)}}}catch{}finally{}};function gv(a){if(!Wh(a))return a.g.la();const h=uf(a.g);if(h==="")return"";let d="";const g=h.length,P=os(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return qs(a),pi(a),"";a.h.i=new o.TextDecoder}for(let L=0;L<g;L++)a.h.h=!0,d+=a.h.i.decode(h[L],{stream:!(P&&L==g-1)});return h.length=0,a.h.g+=d,a.C=0,a.h.g}function Wh(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function _v(a,h){var d=a.C,g=h.indexOf(`
`,d);return g==-1?xc:(d=Number(h.substring(d,g)),isNaN(d)?jh:(g+=1,g+d>h.length?xc:(h=h.slice(g,g+d),a.C=g+d,h)))}ss.prototype.cancel=function(){this.K=!0,qs(this)};function Mo(a){a.T=Date.now()+a.H,qh(a,a.H)}function qh(a,h){if(a.D!=null)throw Error("WatchDog timer not null");a.D=hi(u(a.aa,a),h)}function Fc(a){a.D&&(o.clearTimeout(a.D),a.D=null)}ss.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(dv(this.i,this.B),this.M!=2&&(ui(),$t(17)),qs(this),this.m=2,pi(this)):qh(this,this.T-a)};function pi(a){a.j.I==0||a.K||_f(a.j,a)}function qs(a){Fc(a);var h=a.O;h&&typeof h.dispose=="function"&&h.dispose(),a.O=null,Fe(a.V),a.g&&(h=a.g,a.g=null,h.abort(),h.dispose())}function Uc(a,h){try{var d=a.j;if(d.I!=0&&(d.g==a||$c(d.h,a))){if(!a.L&&$c(d.h,a)&&d.I==3){try{var g=d.Ba.g.parse(h)}catch{g=null}if(Array.isArray(g)&&g.length==3){var P=g;if(P[0]==0){e:if(!d.v){if(d.g)if(d.g.F+3e3<a.F)Ho(d),Bo(d);else break e;zc(d),$t(18)}}else d.xa=P[1],0<d.xa-d.K&&P[2]<37500&&d.F&&d.A==0&&!d.C&&(d.C=hi(u(d.Va,d),6e3));Kh(d.h)<=1&&d.ta&&(d.ta=void 0)}else Gs(d,11)}else if((a.L||d.g==a)&&Ho(d),!E(h))for(P=d.Ba.g.parse(h),h=0;h<P.length;h++){let $e=P[h];const pt=$e[0];if(!(pt<=d.K))if(d.K=pt,$e=$e[1],d.I==2)if($e[0]=="c"){d.M=$e[1],d.ba=$e[2];const En=$e[3];En!=null&&(d.ka=En,d.j.info("VER="+d.ka));const Ks=$e[4];Ks!=null&&(d.za=Ks,d.j.info("SVER="+d.za));const as=$e[5];as!=null&&typeof as=="number"&&as>0&&(g=1.5*as,d.O=g,d.j.info("backChannelRequestTimeoutMs_="+g)),g=d;const cs=a.g;if(cs){const qo=cs.g?cs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qo){var L=g.h;L.g||qo.indexOf("spdy")==-1&&qo.indexOf("quic")==-1&&qo.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Bc(L,L.h),L.h=null))}if(g.G){const Kc=cs.g?cs.g.getResponseHeader("X-HTTP-Session-Id"):null;Kc&&(g.wa=Kc,qe(g.J,g.G,Kc))}}d.I=3,d.l&&d.l.ra(),d.aa&&(d.T=Date.now()-a.F,d.j.info("Handshake RTT: "+d.T+"ms")),g=d;var J=a;if(g.na=Ef(g,g.L?g.ba:null,g.W),J.L){Qh(g.h,J);var Ee=J,ct=g.O;ct&&(Ee.H=ct),Ee.D&&(Fc(Ee),Mo(Ee)),g.g=J}else mf(g);d.i.length>0&&jo(d)}else $e[0]!="stop"&&$e[0]!="close"||Gs(d,7);else d.I==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?Gs(d,7):qc(d):$e[0]!="noop"&&d.l&&d.l.qa($e),d.A=0)}}ui(4)}catch{}}var yv=class{constructor(a,h){this.g=a,this.map=h}};function zh(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Gh(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Kh(a){return a.h?1:a.g?a.g.size:0}function $c(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function Bc(a,h){a.g?a.g.add(h):a.h=h}function Qh(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}zh.prototype.cancel=function(){if(this.i=Jh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Jh(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const d of a.g.values())h=h.concat(d.G);return h}return _(a.i)}var Yh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vv(a,h){if(a){a=a.split("&");for(let d=0;d<a.length;d++){const g=a[d].indexOf("=");let P,L=null;g>=0?(P=a[d].substring(0,g),L=a[d].substring(g+1)):P=a[d],h(P,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function rs(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;a instanceof rs?(this.l=a.l,mi(this,a.j),this.o=a.o,this.g=a.g,gi(this,a.u),this.h=a.h,jc(this,sf(a.i)),this.m=a.m):a&&(h=String(a).match(Yh))?(this.l=!1,mi(this,h[1]||"",!0),this.o=_i(h[2]||""),this.g=_i(h[3]||"",!0),gi(this,h[4]),this.h=_i(h[5]||"",!0),jc(this,h[6]||"",!0),this.m=_i(h[7]||"")):(this.l=!1,this.i=new vi(null,this.l))}rs.prototype.toString=function(){const a=[];var h=this.j;h&&a.push(yi(h,Xh,!0),":");var d=this.g;return(d||h=="file")&&(a.push("//"),(h=this.o)&&a.push(yi(h,Xh,!0),"@"),a.push(di(d).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.u,d!=null&&a.push(":",String(d))),(d=this.h)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(yi(d,d.charAt(0)=="/"?Iv:wv,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",yi(d,Av)),a.join("")},rs.prototype.resolve=function(a){const h=vn(this);let d=!!a.j;d?mi(h,a.j):d=!!a.o,d?h.o=a.o:d=!!a.g,d?h.g=a.g:d=a.u!=null;var g=a.h;if(d)gi(h,a.u);else if(d=!!a.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var P=h.h.lastIndexOf("/");P!=-1&&(g=h.h.slice(0,P+1)+g)}if(P=g,P==".."||P==".")g="";else if(P.indexOf("./")!=-1||P.indexOf("/.")!=-1){g=P.lastIndexOf("/",0)==0,P=P.split("/");const L=[];for(let J=0;J<P.length;){const Ee=P[J++];Ee=="."?g&&J==P.length&&L.push(""):Ee==".."?((L.length>1||L.length==1&&L[0]!="")&&L.pop(),g&&J==P.length&&L.push("")):(L.push(Ee),g=!0)}g=L.join("/")}else g=P}return d?h.h=g:d=a.i.toString()!=="",d?jc(h,sf(a.i)):d=!!a.m,d&&(h.m=a.m),h};function vn(a){return new rs(a)}function mi(a,h,d){a.j=d?_i(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function gi(a,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);a.u=h}else a.u=null}function jc(a,h,d){h instanceof vi?(a.i=h,Sv(a.i,a.l)):(d||(h=yi(h,Tv)),a.i=new vi(h,a.l))}function qe(a,h,d){a.i.set(h,d)}function Fo(a){return qe(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function _i(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function yi(a,h,d){return typeof a=="string"?(a=encodeURI(a).replace(h,Ev),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Ev(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Xh=/[#\/\?@]/g,wv=/[#\?:]/g,Iv=/[#\?]/g,Tv=/[#\?@]/g,Av=/#/g;function vi(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function zs(a){a.g||(a.g=new Map,a.h=0,a.i&&vv(a.i,function(h,d){a.add(decodeURIComponent(h.replace(/\+/g," ")),d)}))}t=vi.prototype,t.add=function(a,h){zs(this),this.i=null,a=vr(this,a);let d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(h),this.h+=1,this};function Zh(a,h){zs(a),h=vr(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function ef(a,h){return zs(a),h=vr(a,h),a.g.has(h)}t.forEach=function(a,h){zs(this),this.g.forEach(function(d,g){d.forEach(function(P){a.call(h,P,g,this)},this)},this)};function tf(a,h){zs(a);let d=[];if(typeof h=="string")ef(a,h)&&(d=d.concat(a.g.get(vr(a,h))));else for(a=Array.from(a.g.values()),h=0;h<a.length;h++)d=d.concat(a[h]);return d}t.set=function(a,h){return zs(this),this.i=null,a=vr(this,a),ef(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=tf(this,a),a.length>0?String(a[0]):h):h};function nf(a,h,d){Zh(a,h),d.length>0&&(a.i=null,a.g.set(vr(a,h),_(d)),a.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(let g=0;g<h.length;g++){var d=h[g];const P=di(d);d=tf(this,d);for(let L=0;L<d.length;L++){let J=P;d[L]!==""&&(J+="="+di(d[L])),a.push(J)}}return this.i=a.join("&")};function sf(a){const h=new vi;return h.i=a.i,a.g&&(h.g=new Map(a.g),h.h=a.h),h}function vr(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function Sv(a,h){h&&!a.j&&(zs(a),a.i=null,a.g.forEach(function(d,g){const P=g.toLowerCase();g!=P&&(Zh(this,g),nf(this,P,d))},a)),a.j=h}function Cv(a,h){const d=new fi;if(o.Image){const g=new Image;g.onload=f(is,d,"TestLoadImage: loaded",!0,h,g),g.onerror=f(is,d,"TestLoadImage: error",!1,h,g),g.onabort=f(is,d,"TestLoadImage: abort",!1,h,g),g.ontimeout=f(is,d,"TestLoadImage: timeout",!1,h,g),o.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else h(!1)}function bv(a,h){const d=new fi,g=new AbortController,P=setTimeout(()=>{g.abort(),is(d,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:g.signal}).then(L=>{clearTimeout(P),L.ok?is(d,"TestPingServer: ok",!0,h):is(d,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(P),is(d,"TestPingServer: error",!1,h)})}function is(a,h,d,g,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),g(d)}catch{}}function Rv(){this.g=new Nt}function Hc(a){this.i=a.Sb||null,this.h=a.ab||!1}p(Hc,Qt),Hc.prototype.g=function(){return new Uo(this.i,this.h)};function Uo(a,h){G.call(this),this.H=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Uo,G),t=Uo.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=h,this.readyState=1,wi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(h.body=a),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ei(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,wi(this)),this.g&&(this.readyState=3,wi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;rf(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function rf(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Ei(this):wi(this),this.readyState==3&&rf(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,Ei(this))},t.Na=function(a){this.g&&(this.response=a,Ei(this))},t.ga=function(){this.g&&Ei(this)};function Ei(a){a.readyState=4,a.l=null,a.j=null,a.B=null,wi(a)}t.setRequestHeader=function(a,h){this.A.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var d=h.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=h.next();return a.join(`\r
`)};function wi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Uo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function of(a){let h="";return Wt(a,function(d,g){h+=g,h+=":",h+=d,h+=`\r
`}),h}function Wc(a,h,d){e:{for(g in d){var g=!1;break e}g=!0}g||(d=of(d),typeof a=="string"?d!=null&&di(d):qe(a,h,d))}function et(a){G.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(et,G);var Pv=/^https?$/i,kv=["POST","PUT"];t=et.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,h,d,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():$h.g(),this.g.onreadystatechange=m(u(this.Ca,this));try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(L){af(this,L);return}if(a=d||"",d=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var P in g)d.set(P,g[P]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const L of g.keys())d.set(L,g.get(L));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(d.keys()).find(L=>L.toLowerCase()=="content-type"),P=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(kv,h,void 0)>=0)||g||P||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,J]of d)this.g.setRequestHeader(L,J);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(L){af(this,L)}};function af(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.o=5,cf(a),$o(a)}function cf(a){a.A||(a.A=!0,z(a,"complete"),z(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,z(this,"complete"),z(this,"abort"),$o(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$o(this,!0)),et.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?lf(this):this.Xa())},t.Xa=function(){lf(this)};function lf(a){if(a.h&&typeof i<"u"){if(a.v&&os(a)==4)setTimeout(a.Ca.bind(a),0);else if(z(a,"readystatechange"),os(a)==4){a.h=!1;try{const L=a.ca();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var d;if(!(d=h)){var g;if(g=L===0){let J=String(a.D).match(Yh)[1]||null;!J&&o.self&&o.self.location&&(J=o.self.location.protocol.slice(0,-1)),g=!Pv.test(J?J.toLowerCase():"")}d=g}if(d)z(a,"complete"),z(a,"success");else{a.o=6;try{var P=os(a)>2?a.g.statusText:""}catch{P=""}a.l=P+" ["+a.ca()+"]",cf(a)}}finally{$o(a)}}}}function $o(a,h){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const d=a.g;a.g=null,h||z(a,"ready");try{d.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function os(a){return a.g?a.g.readyState:0}t.ca=function(){try{return os(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),kt(h)}};function uf(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Nv(a){const h={};a=(a.g&&os(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(E(a[g]))continue;var d=mv(a[g]);const P=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const L=h[P]||[];h[P]=L,L.push(d)}yn(h,function(g){return g.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ii(a,h,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||h}function hf(a){this.za=0,this.i=[],this.j=new fi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ii("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ii("baseRetryDelayMs",5e3,a),this.Za=Ii("retryDelaySeedMs",1e4,a),this.Ta=Ii("forwardChannelMaxRetries",2,a),this.va=Ii("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new zh(a&&a.concurrentRequestLimit),this.Ba=new Rv,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=hf.prototype,t.ka=8,t.I=1,t.connect=function(a,h,d,g){$t(0),this.W=a,this.H=h||{},d&&g!==void 0&&(this.H.OSID=d,this.H.OAID=g),this.F=this.X,this.J=Ef(this,null,this.W),jo(this)};function qc(a){if(ff(a),a.I==3){var h=a.V++,d=vn(a.J);if(qe(d,"SID",a.M),qe(d,"RID",h),qe(d,"TYPE","terminate"),Ti(a,d),h=new ss(a,a.j,h),h.M=2,h.A=Fo(vn(d)),d=!1,o.navigator&&o.navigator.sendBeacon)try{d=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!d&&o.Image&&(new Image().src=h.A,d=!0),d||(h.g=wf(h.j,null),h.g.ea(h.A)),h.F=Date.now(),Mo(h)}vf(a)}function Bo(a){a.g&&(Gc(a),a.g.cancel(),a.g=null)}function ff(a){Bo(a),a.v&&(o.clearTimeout(a.v),a.v=null),Ho(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function jo(a){if(!Gh(a.h)&&!a.m){a.m=!0;var h=a.Ea;Z||v(),ie||(Z(),ie=!0),S.add(h,a),a.D=0}}function Dv(a,h){return Kh(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=h.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=hi(u(a.Ea,a,h),yf(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const P=new ss(this,this.j,a);let L=this.o;if(this.U&&(L?(L=Kt(L),On(L,this.U)):L=this.U),this.u!==null||this.R||(P.J=L,L=null),this.S)e:{for(var h=0,d=0;d<this.i.length;d++){t:{var g=this.i[d];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(h+=g,h>4096){h=d;break e}if(h===4096||d===this.i.length-1){h=d+1;break e}}h=1e3}else h=1e3;h=pf(this,P,h),d=vn(this.J),qe(d,"RID",a),qe(d,"CVER",22),this.G&&qe(d,"X-HTTP-Session-Id",this.G),Ti(this,d),L&&(this.R?h="headers="+di(of(L))+"&"+h:this.u&&Wc(d,this.u,L)),Bc(this.h,P),this.Ra&&qe(d,"TYPE","init"),this.S?(qe(d,"$req",h),qe(d,"SID","null"),P.U=!0,Mc(P,d,null)):Mc(P,d,h),this.I=2}}else this.I==3&&(a?df(this,a):this.i.length==0||Gh(this.h)||df(this))};function df(a,h){var d;h?d=h.l:d=a.V++;const g=vn(a.J);qe(g,"SID",a.M),qe(g,"RID",d),qe(g,"AID",a.K),Ti(a,g),a.u&&a.o&&Wc(g,a.u,a.o),d=new ss(a,a.j,d,a.D+1),a.u===null&&(d.J=a.o),h&&(a.i=h.G.concat(a.i)),h=pf(a,d,1e3),d.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Bc(a.h,d),Mc(d,g,h)}function Ti(a,h){a.H&&Wt(a.H,function(d,g){qe(h,g,d)}),a.l&&Wt({},function(d,g){qe(h,g,d)})}function pf(a,h,d){d=Math.min(a.i.length,d);const g=a.l?u(a.l.Ka,a.l,a):null;e:{var P=a.i;let Ee=-1;for(;;){const ct=["count="+d];Ee==-1?d>0?(Ee=P[0].g,ct.push("ofs="+Ee)):Ee=0:ct.push("ofs="+Ee);let $e=!0;for(let pt=0;pt<d;pt++){var L=P[pt].g;const En=P[pt].map;if(L-=Ee,L<0)Ee=Math.max(0,P[pt].g-100),$e=!1;else try{L="req"+L+"_"||"";try{var J=En instanceof Map?En:Object.entries(En);for(const[Ks,as]of J){let cs=as;c(as)&&(cs=ke(as)),ct.push(L+Ks+"="+encodeURIComponent(cs))}}catch(Ks){throw ct.push(L+"type="+encodeURIComponent("_badmap")),Ks}}catch{g&&g(En)}}if($e){J=ct.join("&");break e}}J=void 0}return a=a.i.splice(0,d),h.G=a,J}function mf(a){if(!a.g&&!a.v){a.Y=1;var h=a.Da;Z||v(),ie||(Z(),ie=!0),S.add(h,a),a.A=0}}function zc(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=hi(u(a.Da,a),yf(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,gf(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=hi(u(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,$t(10),Bo(this),gf(this))};function Gc(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function gf(a){a.g=new ss(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var h=vn(a.na);qe(h,"RID","rpc"),qe(h,"SID",a.M),qe(h,"AID",a.K),qe(h,"CI",a.F?"0":"1"),!a.F&&a.ia&&qe(h,"TO",a.ia),qe(h,"TYPE","xmlhttp"),Ti(a,h),a.u&&a.o&&Wc(h,a.u,a.o),a.O&&(a.g.H=a.O);var d=a.g;a=a.ba,d.M=1,d.A=Fo(vn(h)),d.u=null,d.R=!0,Hh(d,a)}t.Va=function(){this.C!=null&&(this.C=null,Bo(this),zc(this),$t(19))};function Ho(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function _f(a,h){var d=null;if(a.g==h){Ho(a),Gc(a),a.g=null;var g=2}else if($c(a.h,h))d=h.G,Qh(a.h,h),g=1;else return;if(a.I!=0){if(h.o)if(g==1){d=h.u?h.u.length:0,h=Date.now()-h.F;var P=a.D;g=Ws(),z(g,new Fh(g,d)),jo(a)}else mf(a);else if(P=h.m,P==3||P==0&&h.X>0||!(g==1&&Dv(a,h)||g==2&&zc(a)))switch(d&&d.length>0&&(h=a.h,h.i=h.i.concat(d)),P){case 1:Gs(a,5);break;case 4:Gs(a,10);break;case 3:Gs(a,6);break;default:Gs(a,2)}}}function yf(a,h){let d=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(d*=2),d*h}function Gs(a,h){if(a.j.info("Error code "+h),h==2){var d=u(a.bb,a),g=a.Ua;const P=!g;g=new rs(g||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||mi(g,"https"),Fo(g),P?Cv(g.toString(),d):bv(g.toString(),d)}else $t(2);a.I=0,a.l&&a.l.pa(h),vf(a),ff(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function vf(a){if(a.I=0,a.ja=[],a.l){const h=Jh(a.h);(h.length!=0||a.i.length!=0)&&(b(a.ja,h),b(a.ja,a.i),a.h.i.length=0,_(a.i),a.i.length=0),a.l.oa()}}function Ef(a,h,d){var g=d instanceof rs?vn(d):new rs(d);if(g.g!="")h&&(g.g=h+"."+g.g),gi(g,g.u);else{var P=o.location;g=P.protocol,h=h?h+"."+P.hostname:P.hostname,P=+P.port;const L=new rs(null);g&&mi(L,g),h&&(L.g=h),P&&gi(L,P),d&&(L.h=d),g=L}return d=a.G,h=a.wa,d&&h&&qe(g,d,h),qe(g,"VER",a.ka),Ti(a,g),g}function wf(a,h,d){if(h&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Aa&&!a.ma?new et(new Hc({ab:d})):new et(a.ma),h.Fa(a.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function If(){}t=If.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Wo(){}Wo.prototype.g=function(a,h){return new Yt(a,h)};function Yt(a,h){G.call(this),this.g=new hf(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(a?a["X-WebChannel-Client-Profile"]=h.sa:a={"X-WebChannel-Client-Profile":h.sa}),this.g.U=a,(a=h&&h.Qb)&&!E(a)&&(this.g.u=a),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!E(h)&&(this.g.G=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Er(this)}p(Yt,G),Yt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Yt.prototype.close=function(){qc(this.g)},Yt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.v&&(d={},d.__data__=ke(a),a=d);h.i.push(new yv(h.Ya++,a)),h.I==3&&jo(h)},Yt.prototype.N=function(){this.g.l=null,delete this.j,qc(this.g),delete this.g,Yt.Z.N.call(this)};function Tf(a){_r.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const d in h){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}p(Tf,_r);function Af(){Et.call(this),this.status=1}p(Af,Et);function Er(a){this.g=a}p(Er,If),Er.prototype.ra=function(){z(this.g,"a")},Er.prototype.qa=function(a){z(this.g,new Tf(a))},Er.prototype.pa=function(a){z(this.g,new Af)},Er.prototype.oa=function(){z(this.g,"b")},Wo.prototype.createWebChannel=Wo.prototype.g,Yt.prototype.send=Yt.prototype.o,Yt.prototype.open=Yt.prototype.m,Yt.prototype.close=Yt.prototype.close,$g=function(){return new Wo},Ug=function(){return Ws()},Fg=dt,Ql={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},xo.NO_ERROR=0,xo.TIMEOUT=8,xo.HTTP_ERROR=6,ca=xo,Uh.COMPLETE="complete",Mg=Uh,Jt.EventType=un,un.OPEN="a",un.CLOSE="b",un.ERROR="c",un.MESSAGE="d",G.prototype.listen=G.prototype.J,Li=Jt,et.prototype.listenOnce=et.prototype.K,et.prototype.getLastError=et.prototype.Ha,et.prototype.getLastErrorCode=et.prototype.ya,et.prototype.getStatus=et.prototype.ca,et.prototype.getResponseJson=et.prototype.La,et.prototype.getResponseText=et.prototype.la,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Fa,xg=et}).apply(typeof Xo<"u"?Xo:typeof self<"u"?self:typeof window<"u"?window:{});const wd="@firebase/firestore",Id="4.9.2";class Vt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vt.UNAUTHENTICATED=new Vt(null),Vt.GOOGLE_CREDENTIALS=new Vt("google-credentials-uid"),Vt.FIRST_PARTY=new Vt("first-party-uid"),Vt.MOCK_USER=new Vt("mock-user");let ei="12.3.0";const lr=new Wu("@firebase/firestore");function Cr(){return lr.logLevel}function ne(t,...e){if(lr.logLevel<=Ae.DEBUG){const n=e.map(Gu);lr.debug(`Firestore (${ei}): ${t}`,...n)}}function Yn(t,...e){if(lr.logLevel<=Ae.ERROR){const n=e.map(Gu);lr.error(`Firestore (${ei}): ${t}`,...n)}}function Hr(t,...e){if(lr.logLevel<=Ae.WARN){const n=e.map(Gu);lr.warn(`Firestore (${ei}): ${t}`,...n)}}function Gu(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function de(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,Bg(t,s,n)}function Bg(t,e,n){let s=`FIRESTORE (${ei}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Yn(s),new Error(s)}function Oe(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||Bg(e,r,s)}function ye(t,e){return t}const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends ns{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Rs{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class jg{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class r0{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Vt.UNAUTHENTICATED)))}shutdown(){}}class i0{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class o0{constructor(e){this.t=e,this.currentUser=Vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Oe(this.o===void 0,42304);let s=this.i;const r=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let i=new Rs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Rs,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const l=i;e.enqueueRetryable((async()=>{await l.promise,await r(this.currentUser)}))},c=l=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>c(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Rs)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Oe(typeof s.accessToken=="string",31837,{l:s}),new jg(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string",2055,{h:e}),new Vt(e)}}class a0{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Vt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class c0{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new a0(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Vt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Td{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class l0{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,sn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Oe(this.o===void 0,3512);const s=i=>{i.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ne("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>s(i)))};const r=i=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>r(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Td(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Oe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Td(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function u0(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}class Ku{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=u0(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function Se(t,e){return t<e?-1:t>e?1:0}function Jl(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return gl(r)===gl(i)?Se(r,i):gl(r)?1:-1}return Se(t.length,e.length)}const h0=55296,f0=57343;function gl(t){const e=t.charCodeAt(0);return e>=h0&&e<=f0}function Wr(t,e,n){return t.length===e.length&&t.every(((s,r)=>n(s,e[r])))}const Ad="__name__";class In{constructor(e,n,s){n===void 0?n=0:n>e.length&&de(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&de(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return In.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof In?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=In.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return Se(e.length,n.length)}static compareSegments(e,n){const s=In.isNumericId(e),r=In.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?In.extractNumericId(e).compare(In.extractNumericId(n)):Jl(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return bs.fromString(e.substring(4,e.length-2))}}class Ye extends In{construct(e,n,s){return new Ye(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new se(q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((r=>r.length>0)))}return new Ye(n)}static emptyPath(){return new Ye([])}}const d0=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class St extends In{construct(e,n,s){return new St(e,n,s)}static isValidIdentifier(e){return d0.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),St.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ad}static keyField(){return new St([Ad])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new se(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const c=e[r];if(c==="\\"){if(r+1===e.length)throw new se(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new se(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=l,r+=2}else c==="`"?(o=!o,r++):c!=="."||o?(s+=c,r++):(i(),r++)}if(i(),o)throw new se(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new St(n)}static emptyPath(){return new St([])}}class le{constructor(e){this.path=e}static fromPath(e){return new le(Ye.fromString(e))}static fromName(e){return new le(Ye.fromString(e).popFirst(5))}static empty(){return new le(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new Ye(e.slice()))}}function p0(t,e,n){if(!n)throw new se(q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function m0(t,e,n,s){if(e===!0&&s===!0)throw new se(q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Sd(t){if(!le.isDocumentKey(t))throw new se(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Hg(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Qu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":de(12329,{type:typeof t})}function ur(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new se(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Qu(t);throw new se(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function at(t,e){const n={typeString:t};return e&&(n.value=e),n}function So(t,e){if(!Hg(t))throw new se(q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new se(q.INVALID_ARGUMENT,n);return!0}const Cd=-62135596800,bd=1e6;class ze{static now(){return ze.fromMillis(Date.now())}static fromDate(e){return ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*bd);return new ze(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new se(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new se(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Cd)throw new se(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bd}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ze._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(So(e,ze._jsonSchema))return new ze(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Cd;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ze._jsonSchemaVersion="firestore/timestamp/1.0",ze._jsonSchema={type:at("string",ze._jsonSchemaVersion),seconds:at("number"),nanoseconds:at("number")};class ge{static fromTimestamp(e){return new ge(e)}static min(){return new ge(new ze(0,0))}static max(){return new ge(new ze(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const oo=-1;function g0(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=ge.fromTimestamp(s===1e9?new ze(n+1,0):new ze(n,s));return new Ns(r,le.empty(),e)}function _0(t){return new Ns(t.readTime,t.key,oo)}class Ns{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Ns(ge.min(),le.empty(),oo)}static max(){return new Ns(ge.max(),le.empty(),oo)}}function y0(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=le.comparator(t.documentKey,e.documentKey),n!==0?n:Se(t.largestBatchId,e.largestBatchId))}const v0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class E0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ti(t){if(t.code!==q.FAILED_PRECONDITION||t.message!==v0)throw t;ne("LocalStore","Unexpectedly lost primary lease")}class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&de(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B(((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):B.reject(n)}static resolve(e){return new B(((n,s)=>{n(e)}))}static reject(e){return new B(((n,s)=>{s(e)}))}static waitFor(e){return new B(((n,s)=>{let r=0,i=0,o=!1;e.forEach((c=>{++r,c.next((()=>{++i,o&&i===r&&n()}),(l=>s(l)))})),o=!0,i===r&&n()}))}static or(e){let n=B.resolve(!1);for(const s of e)n=n.next((r=>r?B.resolve(r):s()));return n}static forEach(e,n){const s=[];return e.forEach(((r,i)=>{s.push(n.call(this,r,i))})),this.waitFor(s)}static mapArray(e,n){return new B(((s,r)=>{const i=e.length,o=new Array(i);let c=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next((f=>{o[u]=f,++c,c===i&&s(o)}),(f=>r(f)))}}))}static doWhile(e,n){return new B(((s,r)=>{const i=()=>{e()===!0?n().next((()=>{i()}),r):s()};i()}))}}function w0(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ni(t){return t.name==="IndexedDbTransactionError"}class dc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}dc.ce=-1;const Ju=-1;function pc(t){return t==null}function Da(t){return t===0&&1/t==-1/0}function I0(t){return typeof t=="number"&&Number.isInteger(t)&&!Da(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const Wg="";function T0(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Rd(e)),e=A0(t.get(n),e);return Rd(e)}function A0(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case Wg:n+="";break;default:n+=i}}return n}function Rd(t){return t+Wg+""}function Pd(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qg(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Ze{constructor(e,n){this.comparator=e,this.root=n||It.EMPTY}insert(e,n){return new Ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,It.BLACK,null,null))}remove(e){return new Ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,It.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zo(this.root,e,this.comparator,!0)}}class Zo{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class It{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??It.RED,this.left=r??It.EMPTY,this.right=i??It.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new It(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return It.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return It.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,It.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,It.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw de(43730,{key:this.key,value:this.value});if(this.right.isRed())throw de(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw de(27949);return e+(this.isRed()?0:1)}}It.EMPTY=null,It.RED=!0,It.BLACK=!1;It.EMPTY=new class{constructor(){this.size=0}get key(){throw de(57766)}get value(){throw de(16141)}get color(){throw de(16727)}get left(){throw de(29726)}get right(){throw de(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new It(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ft{constructor(e){this.comparator=e,this.data=new Ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new kd(this.data.getIterator())}getIteratorFrom(e){return new kd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new ft(this.comparator);return n.data=e,n}}class kd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Zt{constructor(e){this.fields=e,e.sort(St.comparator)}static empty(){return new Zt([])}unionWith(e){let n=new ft(St.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Zt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Wr(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class zg extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new zg("Invalid base64 string: "+i):i}})(e);return new Rt(n)}static fromUint8Array(e){const n=(function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i})(e);return new Rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const S0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ds(t){if(Oe(!!t,39018),typeof t=="string"){let e=0;const n=S0.exec(t);if(Oe(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:st(t.seconds),nanos:st(t.nanos)}}function st(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ls(t){return typeof t=="string"?Rt.fromBase64String(t):Rt.fromUint8Array(t)}const Gg="server_timestamp",Kg="__type__",Qg="__previous_value__",Jg="__local_write_time__";function Yu(t){return(t?.mapValue?.fields||{})[Kg]?.stringValue===Gg}function mc(t){const e=t.mapValue.fields[Qg];return Yu(e)?mc(e):e}function ao(t){const e=Ds(t.mapValue.fields[Jg].timestampValue);return new ze(e.seconds,e.nanos)}class C0{constructor(e,n,s,r,i,o,c,l,u,f){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=f}}const La="(default)";class co{constructor(e,n){this.projectId=e,this.database=n||La}static empty(){return new co("","")}get isDefaultDatabase(){return this.database===La}isEqual(e){return e instanceof co&&e.projectId===this.projectId&&e.database===this.database}}const Yg="__type__",b0="__max__",ea={mapValue:{}},Xg="__vector__",Va="value";function Vs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Yu(t)?4:P0(t)?9007199254740991:R0(t)?10:11:de(28295,{value:t})}function Ln(t,e){if(t===e)return!0;const n=Vs(t);if(n!==Vs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ao(t).isEqual(ao(e));case 3:return(function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Ds(r.timestampValue),c=Ds(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(r,i){return Ls(r.bytesValue).isEqual(Ls(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(r,i){return st(r.geoPointValue.latitude)===st(i.geoPointValue.latitude)&&st(r.geoPointValue.longitude)===st(i.geoPointValue.longitude)})(t,e);case 2:return(function(r,i){if("integerValue"in r&&"integerValue"in i)return st(r.integerValue)===st(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=st(r.doubleValue),c=st(i.doubleValue);return o===c?Da(o)===Da(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return Wr(t.arrayValue.values||[],e.arrayValue.values||[],Ln);case 10:case 11:return(function(r,i){const o=r.mapValue.fields||{},c=i.mapValue.fields||{};if(Pd(o)!==Pd(c))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!Ln(o[l],c[l])))return!1;return!0})(t,e);default:return de(52216,{left:t})}}function lo(t,e){return(t.values||[]).find((n=>Ln(n,e)))!==void 0}function qr(t,e){if(t===e)return 0;const n=Vs(t),s=Vs(e);if(n!==s)return Se(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Se(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const c=st(i.integerValue||i.doubleValue),l=st(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1})(t,e);case 3:return Nd(t.timestampValue,e.timestampValue);case 4:return Nd(ao(t),ao(e));case 5:return Jl(t.stringValue,e.stringValue);case 6:return(function(i,o){const c=Ls(i),l=Ls(o);return c.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const c=i.split("/"),l=o.split("/");for(let u=0;u<c.length&&u<l.length;u++){const f=Se(c[u],l[u]);if(f!==0)return f}return Se(c.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const c=Se(st(i.latitude),st(o.latitude));return c!==0?c:Se(st(i.longitude),st(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Dd(t.arrayValue,e.arrayValue);case 10:return(function(i,o){const c=i.fields||{},l=o.fields||{},u=c[Va]?.arrayValue,f=l[Va]?.arrayValue,p=Se(u?.values?.length||0,f?.values?.length||0);return p!==0?p:Dd(u,f)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===ea.mapValue&&o===ea.mapValue)return 0;if(i===ea.mapValue)return 1;if(o===ea.mapValue)return-1;const c=i.fields||{},l=Object.keys(c),u=o.fields||{},f=Object.keys(u);l.sort(),f.sort();for(let p=0;p<l.length&&p<f.length;++p){const m=Jl(l[p],f[p]);if(m!==0)return m;const _=qr(c[l[p]],u[f[p]]);if(_!==0)return _}return Se(l.length,f.length)})(t.mapValue,e.mapValue);default:throw de(23264,{he:n})}}function Nd(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Se(t,e);const n=Ds(t),s=Ds(e),r=Se(n.seconds,s.seconds);return r!==0?r:Se(n.nanos,s.nanos)}function Dd(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=qr(n[r],s[r]);if(i)return i}return Se(n.length,s.length)}function zr(t){return Yl(t)}function Yl(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const s=Ds(n);return`time(${s.seconds},${s.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Ls(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return le.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=Yl(i);return s+"]"})(t.arrayValue):"mapValue"in t?(function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${Yl(n.fields[o])}`;return r+"}"})(t.mapValue):de(61005,{value:t})}function la(t){switch(Vs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=mc(t);return e?16+la(e):16;case 5:return 2*t.stringValue.length;case 6:return Ls(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((r,i)=>r+la(i)),0)})(t.arrayValue);case 10:case 11:return(function(s){let r=0;return Fs(s.fields,((i,o)=>{r+=i.length+la(o)})),r})(t.mapValue);default:throw de(13486,{value:t})}}function Xl(t){return!!t&&"integerValue"in t}function Xu(t){return!!t&&"arrayValue"in t}function Ld(t){return!!t&&"nullValue"in t}function Vd(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ua(t){return!!t&&"mapValue"in t}function R0(t){return(t?.mapValue?.fields||{})[Yg]?.stringValue===Xg}function qi(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Fs(t.mapValue.fields,((n,s)=>e.mapValue.fields[n]=qi(s))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=qi(t.arrayValue.values[n]);return e}return{...t}}function P0(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===b0}class zt{constructor(e){this.value=e}static empty(){return new zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!ua(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=qi(n)}setAll(e){let n=St.emptyPath(),s={},r=[];e.forEach(((o,c)=>{if(!n.isImmediateParentOf(c)){const l=this.getFieldsMap(n);this.applyChanges(l,s,r),s={},r=[],n=c.popLast()}o?s[c.lastSegment()]=qi(o):r.push(c.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());ua(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ln(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];ua(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){Fs(n,((r,i)=>e[r]=i));for(const r of s)delete e[r]}clone(){return new zt(qi(this.value))}}function Zg(t){const e=[];return Fs(t.fields,((n,s)=>{const r=new St([n]);if(ua(s)){const i=Zg(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)})),new Zt(e)}class xt{constructor(e,n,s,r,i,o,c){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new xt(e,0,ge.min(),ge.min(),ge.min(),zt.empty(),0)}static newFoundDocument(e,n,s,r){return new xt(e,1,n,ge.min(),s,r,0)}static newNoDocument(e,n){return new xt(e,2,n,ge.min(),ge.min(),zt.empty(),0)}static newUnknownDocument(e,n){return new xt(e,3,n,ge.min(),ge.min(),zt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Oa{constructor(e,n){this.position=e,this.inclusive=n}}function Od(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=le.comparator(le.fromName(o.referenceValue),n.key):s=qr(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function xd(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ln(t.position[n],e.position[n]))return!1;return!0}class xa{constructor(e,n="asc"){this.field=e,this.dir=n}}function k0(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class e_{}class ut extends e_{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new D0(e,n,s):n==="array-contains"?new O0(e,s):n==="in"?new x0(e,s):n==="not-in"?new M0(e,s):n==="array-contains-any"?new F0(e,s):new ut(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new L0(e,s):new V0(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(qr(n,this.value)):n!==null&&Vs(this.value)===Vs(n)&&this.matchesComparison(qr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return de(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vn extends e_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Vn(e,n)}matches(e){return t_(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function t_(t){return t.op==="and"}function n_(t){return N0(t)&&t_(t)}function N0(t){for(const e of t.filters)if(e instanceof Vn)return!1;return!0}function Zl(t){if(t instanceof ut)return t.field.canonicalString()+t.op.toString()+zr(t.value);if(n_(t))return t.filters.map((e=>Zl(e))).join(",");{const e=t.filters.map((n=>Zl(n))).join(",");return`${t.op}(${e})`}}function s_(t,e){return t instanceof ut?(function(s,r){return r instanceof ut&&s.op===r.op&&s.field.isEqual(r.field)&&Ln(s.value,r.value)})(t,e):t instanceof Vn?(function(s,r){return r instanceof Vn&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce(((i,o,c)=>i&&s_(o,r.filters[c])),!0):!1})(t,e):void de(19439)}function r_(t){return t instanceof ut?(function(n){return`${n.field.canonicalString()} ${n.op} ${zr(n.value)}`})(t):t instanceof Vn?(function(n){return n.op.toString()+" {"+n.getFilters().map(r_).join(" ,")+"}"})(t):"Filter"}class D0 extends ut{constructor(e,n,s){super(e,n,s),this.key=le.fromName(s.referenceValue)}matches(e){const n=le.comparator(e.key,this.key);return this.matchesComparison(n)}}class L0 extends ut{constructor(e,n){super(e,"in",n),this.keys=i_("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class V0 extends ut{constructor(e,n){super(e,"not-in",n),this.keys=i_("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function i_(t,e){return(e.arrayValue?.values||[]).map((n=>le.fromName(n.referenceValue)))}class O0 extends ut{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Xu(n)&&lo(n.arrayValue,this.value)}}class x0 extends ut{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&lo(this.value.arrayValue,n)}}class M0 extends ut{constructor(e,n){super(e,"not-in",n)}matches(e){if(lo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!lo(this.value.arrayValue,n)}}class F0 extends ut{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Xu(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>lo(this.value.arrayValue,s)))}}class U0{constructor(e,n=null,s=[],r=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=c,this.Te=null}}function Md(t,e=null,n=[],s=[],r=null,i=null,o=null){return new U0(t,e,n,s,r,i,o)}function Zu(t){const e=ye(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Zl(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(i){return i.field.canonicalString()+i.dir})(s))).join(","),pc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>zr(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>zr(s))).join(",")),e.Te=n}return e.Te}function eh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!k0(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!s_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!xd(t.startAt,e.startAt)&&xd(t.endAt,e.endAt)}function eu(t){return le.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class gc{constructor(e,n=null,s=[],r=[],i=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function $0(t,e,n,s,r,i,o,c){return new gc(t,e,n,s,r,i,o,c)}function th(t){return new gc(t)}function Fd(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function B0(t){return t.collectionGroup!==null}function zi(t){const e=ye(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new ft(St.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(c=c.add(u.field))}))})),c})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new xa(i,s))})),n.has(St.keyField().canonicalString())||e.Ie.push(new xa(St.keyField(),s))}return e.Ie}function Sn(t){const e=ye(t);return e.Ee||(e.Ee=j0(e,zi(t))),e.Ee}function j0(t,e){if(t.limitType==="F")return Md(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((r=>{const i=r.dir==="desc"?"asc":"desc";return new xa(r.field,i)}));const n=t.endAt?new Oa(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Oa(t.startAt.position,t.startAt.inclusive):null;return Md(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function tu(t,e,n){return new gc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function _c(t,e){return eh(Sn(t),Sn(e))&&t.limitType===e.limitType}function o_(t){return`${Zu(Sn(t))}|lt:${t.limitType}`}function br(t){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((r=>r_(r))).join(", ")}]`),pc(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((r=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(r))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((r=>zr(r))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((r=>zr(r))).join(",")),`Target(${s})`})(Sn(t))}; limitType=${t.limitType})`}function yc(t,e){return e.isFoundDocument()&&(function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):le.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)})(t,e)&&(function(s,r){for(const i of zi(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0})(t,e)&&(function(s,r){return!(s.startAt&&!(function(o,c,l){const u=Od(o,c,l);return o.inclusive?u<=0:u<0})(s.startAt,zi(s),r)||s.endAt&&!(function(o,c,l){const u=Od(o,c,l);return o.inclusive?u>=0:u>0})(s.endAt,zi(s),r))})(t,e)}function H0(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function a_(t){return(e,n)=>{let s=!1;for(const r of zi(t)){const i=W0(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function W0(t,e,n){const s=t.field.isKeyField()?le.comparator(e.key,n.key):(function(i,o,c){const l=o.data.field(i),u=c.data.field(i);return l!==null&&u!==null?qr(l,u):de(42886)})(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return de(19790,{direction:t.dir})}}class pr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Fs(this.inner,((n,s)=>{for(const[r,i]of s)e(r,i)}))}isEmpty(){return qg(this.inner)}size(){return this.innerSize}}const q0=new Ze(le.comparator);function Xn(){return q0}const c_=new Ze(le.comparator);function Vi(...t){let e=c_;for(const n of t)e=e.insert(n.key,n);return e}function l_(t){let e=c_;return t.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function tr(){return Gi()}function u_(){return Gi()}function Gi(){return new pr((t=>t.toString()),((t,e)=>t.isEqual(e)))}const z0=new Ze(le.comparator),G0=new ft(le.comparator);function Ce(...t){let e=G0;for(const n of t)e=e.add(n);return e}const K0=new ft(Se);function Q0(){return K0}function nh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Da(e)?"-0":e}}function h_(t){return{integerValue:""+t}}function J0(t,e){return I0(e)?h_(e):nh(t,e)}class vc{constructor(){this._=void 0}}function Y0(t,e,n){return t instanceof Ma?(function(r,i){const o={fields:{[Kg]:{stringValue:Gg},[Jg]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Yu(i)&&(i=mc(i)),i&&(o.fields[Qg]=i),{mapValue:o}})(n,e):t instanceof uo?d_(t,e):t instanceof ho?p_(t,e):(function(r,i){const o=f_(r,i),c=Ud(o)+Ud(r.Ae);return Xl(o)&&Xl(r.Ae)?h_(c):nh(r.serializer,c)})(t,e)}function X0(t,e,n){return t instanceof uo?d_(t,e):t instanceof ho?p_(t,e):n}function f_(t,e){return t instanceof Fa?(function(s){return Xl(s)||(function(i){return!!i&&"doubleValue"in i})(s)})(e)?e:{integerValue:0}:null}class Ma extends vc{}class uo extends vc{constructor(e){super(),this.elements=e}}function d_(t,e){const n=m_(e);for(const s of t.elements)n.some((r=>Ln(r,s)))||n.push(s);return{arrayValue:{values:n}}}class ho extends vc{constructor(e){super(),this.elements=e}}function p_(t,e){let n=m_(e);for(const s of t.elements)n=n.filter((r=>!Ln(r,s)));return{arrayValue:{values:n}}}class Fa extends vc{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Ud(t){return st(t.integerValue||t.doubleValue)}function m_(t){return Xu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Z0(t,e){return t.field.isEqual(e.field)&&(function(s,r){return s instanceof uo&&r instanceof uo||s instanceof ho&&r instanceof ho?Wr(s.elements,r.elements,Ln):s instanceof Fa&&r instanceof Fa?Ln(s.Ae,r.Ae):s instanceof Ma&&r instanceof Ma})(t.transform,e.transform)}class e1{constructor(e,n){this.version=e,this.transformResults=n}}class Cn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Cn}static exists(e){return new Cn(void 0,e)}static updateTime(e){return new Cn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ha(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ec{}function g_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new y_(t.key,Cn.none()):new Co(t.key,t.data,Cn.none());{const n=t.data,s=zt.empty();let r=new ft(St.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new Us(t.key,s,new Zt(r.toArray()),Cn.none())}}function t1(t,e,n){t instanceof Co?(function(r,i,o){const c=r.value.clone(),l=Bd(r.fieldTransforms,i,o.transformResults);c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):t instanceof Us?(function(r,i,o){if(!ha(r.precondition,i))return void i.convertToUnknownDocument(o.version);const c=Bd(r.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(__(r)),l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):(function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function Ki(t,e,n,s){return t instanceof Co?(function(i,o,c,l){if(!ha(i.precondition,o))return c;const u=i.value.clone(),f=jd(i.fieldTransforms,l,o);return u.setAll(f),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(t,e,n,s):t instanceof Us?(function(i,o,c,l){if(!ha(i.precondition,o))return c;const u=jd(i.fieldTransforms,l,o),f=o.data;return f.setAll(__(i)),f.setAll(u),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((p=>p.field)))})(t,e,n,s):(function(i,o,c){return ha(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,n)}function n1(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=f_(s.transform,r||null);i!=null&&(n===null&&(n=zt.empty()),n.set(s.field,i))}return n||null}function $d(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Wr(s,r,((i,o)=>Z0(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Co extends Ec{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Us extends Ec{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function __(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}})),e}function Bd(t,e,n){const s=new Map;Oe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,c=e.data.field(i.field);s.set(i.field,X0(o,c,n[r]))}return s}function jd(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,Y0(i,o,e))}return s}class y_ extends Ec{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class s1 extends Ec{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class r1{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&t1(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Ki(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Ki(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=u_();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(r.key)?null:c;const l=g_(o,c);l!==null&&s.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(ge.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ce())}isEqual(e){return this.batchId===e.batchId&&Wr(this.mutations,e.mutations,((n,s)=>$d(n,s)))&&Wr(this.baseMutations,e.baseMutations,((n,s)=>$d(n,s)))}}class sh{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){Oe(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=(function(){return z0})();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new sh(e,n,s,r)}}class i1{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class o1{constructor(e,n){this.count=e,this.unchangedNames=n}}var it,Pe;function a1(t){switch(t){case q.OK:return de(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return de(15467,{code:t})}}function v_(t){if(t===void 0)return Yn("GRPC error has no .code"),q.UNKNOWN;switch(t){case it.OK:return q.OK;case it.CANCELLED:return q.CANCELLED;case it.UNKNOWN:return q.UNKNOWN;case it.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case it.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case it.INTERNAL:return q.INTERNAL;case it.UNAVAILABLE:return q.UNAVAILABLE;case it.UNAUTHENTICATED:return q.UNAUTHENTICATED;case it.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case it.NOT_FOUND:return q.NOT_FOUND;case it.ALREADY_EXISTS:return q.ALREADY_EXISTS;case it.PERMISSION_DENIED:return q.PERMISSION_DENIED;case it.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case it.ABORTED:return q.ABORTED;case it.OUT_OF_RANGE:return q.OUT_OF_RANGE;case it.UNIMPLEMENTED:return q.UNIMPLEMENTED;case it.DATA_LOSS:return q.DATA_LOSS;default:return de(39323,{code:t})}}(Pe=it||(it={}))[Pe.OK=0]="OK",Pe[Pe.CANCELLED=1]="CANCELLED",Pe[Pe.UNKNOWN=2]="UNKNOWN",Pe[Pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pe[Pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pe[Pe.NOT_FOUND=5]="NOT_FOUND",Pe[Pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pe[Pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pe[Pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pe[Pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pe[Pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pe[Pe.ABORTED=10]="ABORTED",Pe[Pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pe[Pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pe[Pe.INTERNAL=13]="INTERNAL",Pe[Pe.UNAVAILABLE=14]="UNAVAILABLE",Pe[Pe.DATA_LOSS=15]="DATA_LOSS";function c1(){return new TextEncoder}const l1=new bs([4294967295,4294967295],0);function Hd(t){const e=c1().encode(t),n=new Og;return n.update(e),new Uint8Array(n.digest())}function Wd(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new bs([n,s],0),new bs([r,i],0)]}class rh{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Oi(`Invalid padding: ${n}`);if(s<0)throw new Oi(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Oi(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Oi(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=bs.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(bs.fromNumber(s)));return r.compare(l1)===1&&(r=new bs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Hd(e),[s,r]=Wd(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new rh(i,r,n);return s.forEach((c=>o.insert(c))),o}insert(e){if(this.ge===0)return;const n=Hd(e),[s,r]=Wd(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Oi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class wc{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,bo.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new wc(ge.min(),r,new Ze(Se),Xn(),Ce())}}class bo{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new bo(s,n,Ce(),Ce(),Ce())}}class fa{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class E_{constructor(e,n){this.targetId=e,this.Ce=n}}class w_{constructor(e,n,s=Rt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class qd{constructor(){this.ve=0,this.Fe=zd(),this.Me=Rt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ce(),n=Ce(),s=Ce();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:de(38017,{changeType:i})}})),new bo(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=zd()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Oe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class u1{constructor(e){this.Ge=e,this.ze=new Map,this.je=Xn(),this.Je=ta(),this.He=ta(),this.Ye=new Ze(Se)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:de(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,r)=>{this.rt(r)&&n(r)}))}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(eu(i))if(s===0){const o=new le(i.path);this.et(n,o,xt.newNoDocument(o,ge.min()))}else Oe(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const c=this.ut(e),l=c?this.ct(c,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,c;try{o=Ls(s).toUint8Array()}catch(l){if(l instanceof zg)return Hr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new rh(o,r,i)}catch(l){return Hr(l instanceof Oi?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.ge===0?null:c}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach((i=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(n,i,null),r++)})),r}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const c=this.ot(o);if(c){if(i.current&&eu(c.target)){const l=new le(c.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,xt.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}}));let s=Ce();this.He.forEach(((i,o)=>{let c=!0;o.forEachWhile((l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(s=s.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const r=new wc(e,n,this.Ye,this.je,s);return this.je=Xn(),this.Je=ta(),this.He=ta(),this.Ye=new Ze(Se),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new qd,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ft(Se),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ft(Se),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ne("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new qd),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ta(){return new Ze(le.comparator)}function zd(){return new Ze(le.comparator)}const h1={asc:"ASCENDING",desc:"DESCENDING"},f1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},d1={and:"AND",or:"OR"};class p1{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function nu(t,e){return t.useProto3Json||pc(e)?e:{value:e}}function Ua(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function I_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function m1(t,e){return Ua(t,e.toTimestamp())}function bn(t){return Oe(!!t,49232),ge.fromTimestamp((function(n){const s=Ds(n);return new ze(s.seconds,s.nanos)})(t))}function ih(t,e){return su(t,e).canonicalString()}function su(t,e){const n=(function(r){return new Ye(["projects",r.projectId,"databases",r.database])})(t).child("documents");return e===void 0?n:n.child(e)}function T_(t){const e=Ye.fromString(t);return Oe(R_(e),10190,{key:e.toString()}),e}function ru(t,e){return ih(t.databaseId,e.path)}function _l(t,e){const n=T_(e);if(n.get(1)!==t.databaseId.projectId)throw new se(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new se(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new le(S_(n))}function A_(t,e){return ih(t.databaseId,e)}function g1(t){const e=T_(t);return e.length===4?Ye.emptyPath():S_(e)}function iu(t){return new Ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function S_(t){return Oe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Gd(t,e,n){return{name:ru(t,e),fields:n.value.mapValue.fields}}function _1(t,e){let n;if("targetChange"in e){e.targetChange;const s=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:de(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=(function(u,f){return u.useProto3Json?(Oe(f===void 0||typeof f=="string",58123),Rt.fromBase64String(f||"")):(Oe(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Rt.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(u){const f=u.code===void 0?q.UNKNOWN:v_(u.code);return new se(f,u.message||"")})(o);n=new w_(s,r,i,c||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=_l(t,s.document.name),i=bn(s.document.updateTime),o=s.document.createTime?bn(s.document.createTime):ge.min(),c=new zt({mapValue:{fields:s.document.fields}}),l=xt.newFoundDocument(r,i,o,c),u=s.targetIds||[],f=s.removedTargetIds||[];n=new fa(u,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=_l(t,s.document),i=s.readTime?bn(s.readTime):ge.min(),o=xt.newNoDocument(r,i),c=s.removedTargetIds||[];n=new fa([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=_l(t,s.document),i=s.removedTargetIds||[];n=new fa([],i,r,null)}else{if(!("filter"in e))return de(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new o1(r,i),c=s.targetId;n=new E_(c,o)}}return n}function y1(t,e){let n;if(e instanceof Co)n={update:Gd(t,e.key,e.value)};else if(e instanceof y_)n={delete:ru(t,e.key)};else if(e instanceof Us)n={update:Gd(t,e.key,e.data),updateMask:b1(e.fieldMask)};else{if(!(e instanceof s1))return de(16599,{Vt:e.type});n={verify:ru(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(i,o){const c=o.transform;if(c instanceof Ma)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof uo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ho)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Fa)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw de(20930,{transform:o.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(r,i){return i.updateTime!==void 0?{updateTime:m1(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:de(27497)})(t,e.precondition)),n}function v1(t,e){return t&&t.length>0?(Oe(e!==void 0,14353),t.map((n=>(function(r,i){let o=r.updateTime?bn(r.updateTime):bn(i);return o.isEqual(ge.min())&&(o=bn(i)),new e1(o,r.transformResults||[])})(n,e)))):[]}function E1(t,e){return{documents:[A_(t,e.path)]}}function w1(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=A_(t,r);const i=(function(u){if(u.length!==0)return b_(Vn.create(u,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(u){if(u.length!==0)return u.map((f=>(function(m){return{field:Rr(m.field),direction:A1(m.dir)}})(f)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=nu(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:r}}function I1(t){let e=g1(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){Oe(s===1,65062);const f=n.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=(function(p){const m=C_(p);return m instanceof Vn&&n_(m)?m.getFilters():[m]})(n.where));let o=[];n.orderBy&&(o=(function(p){return p.map((m=>(function(b){return new xa(Pr(b.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(m)))})(n.orderBy));let c=null;n.limit&&(c=(function(p){let m;return m=typeof p=="object"?p.value:p,pc(m)?null:m})(n.limit));let l=null;n.startAt&&(l=(function(p){const m=!!p.before,_=p.values||[];return new Oa(_,m)})(n.startAt));let u=null;return n.endAt&&(u=(function(p){const m=!p.before,_=p.values||[];return new Oa(_,m)})(n.endAt)),$0(e,r,o,i,c,"F",l,u)}function T1(t,e){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return de(28987,{purpose:r})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function C_(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Pr(n.unaryFilter.field);return ut.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=Pr(n.unaryFilter.field);return ut.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Pr(n.unaryFilter.field);return ut.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Pr(n.unaryFilter.field);return ut.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return de(61313);default:return de(60726)}})(t):t.fieldFilter!==void 0?(function(n){return ut.create(Pr(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return de(58110);default:return de(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Vn.create(n.compositeFilter.filters.map((s=>C_(s))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return de(1026)}})(n.compositeFilter.op))})(t):de(30097,{filter:t})}function A1(t){return h1[t]}function S1(t){return f1[t]}function C1(t){return d1[t]}function Rr(t){return{fieldPath:t.canonicalString()}}function Pr(t){return St.fromServerFormat(t.fieldPath)}function b_(t){return t instanceof ut?(function(n){if(n.op==="=="){if(Vd(n.value))return{unaryFilter:{field:Rr(n.field),op:"IS_NAN"}};if(Ld(n.value))return{unaryFilter:{field:Rr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Vd(n.value))return{unaryFilter:{field:Rr(n.field),op:"IS_NOT_NAN"}};if(Ld(n.value))return{unaryFilter:{field:Rr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rr(n.field),op:S1(n.op),value:n.value}}})(t):t instanceof Vn?(function(n){const s=n.getFilters().map((r=>b_(r)));return s.length===1?s[0]:{compositeFilter:{op:C1(n.op),filters:s}}})(t):de(54877,{filter:t})}function b1(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function R_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class ws{constructor(e,n,s,r,i=ge.min(),o=ge.min(),c=Rt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new ws(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class R1{constructor(e){this.yt=e}}function P1(t){const e=I1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?tu(e,e.limit,"L"):e}class k1{constructor(){this.Cn=new N1}addToCollectionParentIndex(e,n){return this.Cn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Ns.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Ns.min())}updateCollectionGroup(e,n,s){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class N1{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new ft(Ye.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new ft(Ye.comparator)).toArray()}}const Kd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},P_=41943040;class qt{static withCacheSize(e){return new qt(e,qt.DEFAULT_COLLECTION_PERCENTILE,qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}qt.DEFAULT_COLLECTION_PERCENTILE=10,qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qt.DEFAULT=new qt(P_,qt.DEFAULT_COLLECTION_PERCENTILE,qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qt.DISABLED=new qt(-1,0,0);class Gr{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Gr(0)}static cr(){return new Gr(-1)}}const Qd="LruGarbageCollector",D1=1048576;function Jd([t,e],[n,s]){const r=Se(t,n);return r===0?Se(e,s):r}class L1{constructor(e){this.Ir=e,this.buffer=new ft(Jd),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Jd(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class V1{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ne(Qd,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ni(n)?ne(Qd,"Ignoring IndexedDB error during garbage collection: ",n):await ti(n)}await this.Vr(3e5)}))}}class O1{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return B.resolve(dc.ce);const s=new L1(n);return this.mr.forEachTarget(e,(r=>s.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>s.Ar(r))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(Kd)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kd):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,o,c,l,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,o=Date.now(),this.nthSequenceNumber(e,r)))).next((p=>(s=p,c=Date.now(),this.removeTargets(e,s,n)))).next((p=>(i=p,l=Date.now(),this.removeOrphanedDocuments(e,s)))).next((p=>(u=Date.now(),Cr()<=Ae.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${r} in `+(c-o)+`ms
	Removed ${i} targets in `+(l-c)+`ms
	Removed ${p} documents in `+(u-l)+`ms
Total Duration: ${u-f}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:p}))))}}function x1(t,e){return new O1(t,e)}class M1{constructor(){this.changes=new pr((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,xt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?B.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class F1{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class U1{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((r=>(s=r,this.remoteDocumentCache.getEntry(e,n)))).next((r=>(s!==null&&Ki(s.mutation,r,Zt.empty(),ze.now()),r)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Ce()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Ce()){const r=tr();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,s).next((i=>{let o=Vi();return i.forEach(((c,l)=>{o=o.insert(c,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const s=tr();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Ce())))}populateOverlays(e,n,s){const r=[];return s.forEach((i=>{n.has(i)||r.push(i)})),this.documentOverlayCache.getOverlays(e,r).next((i=>{i.forEach(((o,c)=>{n.set(o,c)}))}))}computeViews(e,n,s,r){let i=Xn();const o=Gi(),c=(function(){return Gi()})();return n.forEach(((l,u)=>{const f=s.get(u.key);r.has(u.key)&&(f===void 0||f.mutation instanceof Us)?i=i.insert(u.key,u):f!==void 0?(o.set(u.key,f.mutation.getFieldMask()),Ki(f.mutation,u,f.mutation.getFieldMask(),ze.now())):o.set(u.key,Zt.empty())})),this.recalculateAndSaveOverlays(e,i).next((l=>(l.forEach(((u,f)=>o.set(u,f))),n.forEach(((u,f)=>c.set(u,new F1(f,o.get(u)??null)))),c)))}recalculateAndSaveOverlays(e,n){const s=Gi();let r=new Ze(((o,c)=>o-c)),i=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const c of o)c.keys().forEach((l=>{const u=n.get(l);if(u===null)return;let f=s.get(l)||Zt.empty();f=c.applyToLocalView(u,f),s.set(l,f);const p=(r.get(c.batchId)||Ce()).add(l);r=r.insert(c.batchId,p)}))})).next((()=>{const o=[],c=r.getReverseIterator();for(;c.hasNext();){const l=c.getNext(),u=l.key,f=l.value,p=u_();f.forEach((m=>{if(!i.has(m)){const _=g_(n.get(m),s.get(m));_!==null&&p.set(m,_),i=i.add(m)}})),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return B.waitFor(o)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,r){return(function(o){return le.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):B0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):B.resolve(tr());let c=oo,l=i;return o.next((u=>B.forEach(u,((f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),i.get(f)?B.resolve():this.remoteDocumentCache.getEntry(e,f).next((m=>{l=l.insert(f,m)}))))).next((()=>this.populateOverlays(e,u,i))).next((()=>this.computeViews(e,l,u,Ce()))).next((f=>({batchId:c,changes:l_(f)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new le(n)).next((s=>{let r=Vi();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=Vi();return this.indexManager.getCollectionParents(e,i).next((c=>B.forEach(c,(l=>{const u=(function(p,m){return new gc(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,s,r).next((f=>{f.forEach(((p,m)=>{o=o.insert(p,m)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r)))).next((o=>{i.forEach(((l,u)=>{const f=u.getKey();o.get(f)===null&&(o=o.insert(f,xt.newInvalidDocument(f)))}));let c=Vi();return o.forEach(((l,u)=>{const f=i.get(l);f!==void 0&&Ki(f.mutation,u,Zt.empty(),ze.now()),yc(n,u)&&(c=c.insert(l,u))})),c}))}}class $1{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return B.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:bn(r.createTime)}})(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(r){return{name:r.name,query:P1(r.bundledQuery),readTime:bn(r.readTime)}})(n)),B.resolve()}}class B1{constructor(){this.overlays=new Ze(le.comparator),this.qr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const s=tr();return B.forEach(n,(r=>this.getOverlay(e,r).next((i=>{i!==null&&s.set(r,i)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((r,i)=>{this.St(e,n,i)})),B.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(s)),B.resolve()}getOverlaysForCollection(e,n,s){const r=tr(),i=n.length+1,o=new le(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const l=c.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>s&&r.set(l.getKey(),l)}return B.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Ze(((u,f)=>u-f));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let f=i.get(u.largestBatchId);f===null&&(f=tr(),i=i.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const c=tr(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,f)=>c.set(u,f))),!(c.size()>=r)););return B.resolve(c)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new i1(n,s));let i=this.qr.get(n);i===void 0&&(i=Ce(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}class j1{constructor(){this.sessionToken=Rt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}class oh{constructor(){this.Qr=new ft(gt.$r),this.Ur=new ft(gt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new gt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new gt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new le(new Ye([])),s=new gt(n,e),r=new gt(n,e+1),i=[];return this.Ur.forEachInRange([s,r],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new le(new Ye([])),s=new gt(n,e),r=new gt(n,e+1);let i=Ce();return this.Ur.forEachInRange([s,r],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new gt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class gt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return le.comparator(e.key,n.key)||Se(e.Yr,n.Yr)}static Kr(e,n){return Se(e.Yr,n.Yr)||le.comparator(e.key,n.key)}}class H1{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ft(gt.$r)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new r1(i,n,s,r);this.mutationQueue.push(o);for(const c of r)this.Zr=this.Zr.add(new gt(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return B.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?Ju:this.tr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new gt(n,0),r=new gt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],(o=>{const c=this.Xr(o.Yr);i.push(c)})),B.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new ft(Se);return n.forEach((r=>{const i=new gt(r,0),o=new gt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(c=>{s=s.add(c.Yr)}))})),B.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;le.isDocumentKey(i)||(i=i.child(""));const o=new gt(new le(i),0);let c=new ft(Se);return this.Zr.forEachWhile((l=>{const u=l.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(c=c.add(l.Yr)),!0)}),o),B.resolve(this.ti(c))}ti(e){const n=[];return e.forEach((s=>{const r=this.Xr(s);r!==null&&n.push(r)})),n}removeMutationBatch(e,n){Oe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return B.forEach(n.mutations,(r=>{const i=new gt(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new gt(n,0),r=this.Zr.firstAfterOrEqual(s);return B.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class W1{constructor(e){this.ri=e,this.docs=(function(){return new Ze(le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return B.resolve(s?s.document.mutableCopy():xt.newInvalidDocument(n))}getEntries(e,n){let s=Xn();return n.forEach((r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():xt.newInvalidDocument(r))})),B.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=Xn();const o=n.path,c=new le(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){const{key:u,value:{document:f}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||y0(_0(f),s)<=0||(r.has(f.key)||yc(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return B.resolve(i)}getAllFromCollectionGroup(e,n,s,r){de(9500)}ii(e,n){return B.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new q1(this)}getSize(e){return B.resolve(this.size)}}class q1 extends M1{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)})),B.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class z1{constructor(e){this.persistence=e,this.si=new pr((n=>Zu(n)),eh),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.oi=0,this._i=new oh,this.targetCount=0,this.ai=Gr.ur()}forEachTarget(e,n){return this.si.forEach(((s,r)=>n(r))),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),B.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Gr(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Pr(n),B.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach(((o,c)=>{c.sequenceNumber<=n&&s.get(c.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)})),B.waitFor(i).next((()=>r))}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return B.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),B.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach((o=>{i.push(r.markPotentiallyOrphaned(e,o))})),B.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return B.resolve(s)}containsKey(e,n){return B.resolve(this._i.containsKey(n))}}class k_{constructor(e,n){this.ui={},this.overlays={},this.ci=new dc(0),this.li=!1,this.li=!0,this.hi=new j1,this.referenceDelegate=e(this),this.Pi=new z1(this),this.indexManager=new k1,this.remoteDocumentCache=(function(r){return new W1(r)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new R1(n),this.Ii=new $1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new B1,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new H1(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){ne("MemoryPersistence","Starting transaction:",e);const r=new G1(this.ci.next());return this.referenceDelegate.Ei(),s(r).next((i=>this.referenceDelegate.di(r).next((()=>i)))).toPromise().then((i=>(r.raiseOnCommittedEvent(),i)))}Ai(e,n){return B.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class G1 extends E0{constructor(e){super(),this.currentSequenceNumber=e}}class ah{constructor(e){this.persistence=e,this.Ri=new oh,this.Vi=null}static mi(e){return new ah(e)}get fi(){if(this.Vi)return this.Vi;throw de(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),B.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),B.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((r=>this.fi.add(r.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((r=>{r.forEach((i=>this.fi.add(i.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.fi,(s=>{const r=le.fromPath(s);return this.gi(e,r).next((i=>{i||n.removeEntry(r,ge.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return B.or([()=>B.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class $a{constructor(e,n){this.persistence=e,this.pi=new pr((s=>T0(s.path)),((s,r)=>s.isEqual(r))),this.garbageCollector=x1(this,n)}static mi(e,n){return new $a(e,n)}Ei(){}di(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((r=>s+r))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return B.forEach(this.pi,((s,r)=>this.br(e,s,r).next((i=>i?B.resolve():n(r)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,(o=>this.br(e,o,n).next((c=>{c||(s++,i.removeEntry(o,ge.min()))})))).next((()=>i.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),B.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=la(e.data.value)),n}br(e,n,s){return B.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return B.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class ch{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=Ce(),r=Ce();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new ch(e,n.fromCache,s,r)}}class K1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Q1{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return FI()?8:w0(Ft())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,n,r,s).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new K1;return this.Ss(e,n,o).next((c=>{if(i.result=c,this.Vs)return this.bs(e,n,o,c.size)}))})).next((()=>i.result))}bs(e,n,s,r){return s.documentReadCount<this.fs?(Cr()<=Ae.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",br(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),B.resolve()):(Cr()<=Ae.DEBUG&&ne("QueryEngine","Query:",br(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(Cr()<=Ae.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",br(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sn(n))):B.resolve())}ys(e,n){if(Fd(n))return B.resolve(null);let s=Sn(n);return this.indexManager.getIndexType(e,s).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=tu(n,null,"F"),s=Sn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((i=>{const o=Ce(...i);return this.ps.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,s).next((l=>{const u=this.Ds(n,c);return this.Cs(n,u,o,l.readTime)?this.ys(e,tu(n,null,"F")):this.vs(e,u,n,l)}))))})))))}ws(e,n,s,r){return Fd(n)||r.isEqual(ge.min())?B.resolve(null):this.ps.getDocuments(e,s).next((i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?B.resolve(null):(Cr()<=Ae.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),br(n)),this.vs(e,o,n,g0(r,oo)).next((c=>c)))}))}Ds(e,n){let s=new ft(a_(e));return n.forEach(((r,i)=>{yc(e,i)&&(s=s.add(i))})),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return Cr()<=Ae.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",br(n)),this.ps.getDocumentsMatchingQuery(e,n,Ns.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}const lh="LocalStore",J1=3e8;class Y1{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Ze(Se),this.xs=new pr((i=>Zu(i)),eh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new U1(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function X1(t,e,n,s){return new Y1(t,e,n,s)}async function N_(t,e){const n=ye(t);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next((i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((i=>{const o=[],c=[];let l=Ce();for(const u of r){o.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}for(const u of i){c.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}return n.localDocuments.getDocuments(s,l).next((u=>({Ls:u,removedBatchIds:o,addedBatchIds:c})))}))}))}function Z1(t,e){const n=ye(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,l,u,f){const p=u.batch,m=p.keys();let _=B.resolve();return m.forEach((b=>{_=_.next((()=>f.getEntry(l,b))).next((N=>{const k=u.docVersions.get(b);Oe(k!==null,48541),N.version.compareTo(k)<0&&(p.applyToRemoteDocument(N,u),N.isValidDocument()&&(N.setReadTime(u.commitVersion),f.addEntry(N)))}))})),_.next((()=>c.mutationQueue.removeMutationBatch(l,p)))})(n,s,e,i).next((()=>i.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(c){let l=Ce();for(let u=0;u<c.mutationResults.length;++u)c.mutationResults[u].transformResults.length>0&&(l=l.add(c.batch.mutations[u].key));return l})(e)))).next((()=>n.localDocuments.getDocuments(s,r)))}))}function D_(t){const e=ye(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function eA(t,e){const n=ye(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const c=[];e.targetChanges.forEach(((f,p)=>{const m=r.get(p);if(!m)return;c.push(n.Pi.removeMatchingKeys(i,f.removedDocuments,p).next((()=>n.Pi.addMatchingKeys(i,f.addedDocuments,p))));let _=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(Rt.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,s)),r=r.insert(p,_),(function(N,k,H){return N.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=J1?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(m,_,f)&&c.push(n.Pi.updateTargetData(i,_))}));let l=Xn(),u=Ce();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))})),c.push(tA(i,o,e.documentUpdates).next((f=>{l=f.ks,u=f.qs}))),!s.isEqual(ge.min())){const f=n.Pi.getLastRemoteSnapshotVersion(i).next((p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s)));c.push(f)}return B.waitFor(c).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,l,u))).next((()=>l))})).then((i=>(n.Ms=r,i)))}function tA(t,e,n){let s=Ce(),r=Ce();return n.forEach((i=>s=s.add(i))),e.getEntries(t,s).next((i=>{let o=Xn();return n.forEach(((c,l)=>{const u=i.get(c);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(c)),l.isNoDocument()&&l.version.isEqual(ge.min())?(e.removeEntry(c,l.readTime),o=o.insert(c,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(c,l)):ne(lh,"Ignoring outdated watch update for ",c,". Current version:",u.version," Watch version:",l.version)})),{ks:o,qs:r}}))}function nA(t,e){const n=ye(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Ju),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function sA(t,e){const n=ye(t);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let r;return n.Pi.getTargetData(s,e).next((i=>i?(r=i,B.resolve(r)):n.Pi.allocateTargetId(s).next((o=>(r=new ws(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next((()=>r)))))))})).then((s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function ou(t,e,n){const s=ye(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,(o=>s.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!ni(o))throw o;ne(lh,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function Yd(t,e,n){const s=ye(t);let r=ge.min(),i=Ce();return s.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,u,f){const p=ye(l),m=p.xs.get(f);return m!==void 0?B.resolve(p.Ms.get(m)):p.Pi.getTargetData(u,f)})(s,o,Sn(e)).next((c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,c.targetId).next((l=>{i=l}))})).next((()=>s.Fs.getDocumentsMatchingQuery(o,e,n?r:ge.min(),n?i:Ce()))).next((c=>(rA(s,H0(e),c),{documents:c,Qs:i})))))}function rA(t,e,n){let s=t.Os.get(e)||ge.min();n.forEach(((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)})),t.Os.set(e,s)}class Xd{constructor(){this.activeTargetIds=Q0()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class iA{constructor(){this.Mo=new Xd,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Xd,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class oA{Oo(e){}shutdown(){}}const Zd="ConnectivityMonitor";class ep{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ne(Zd,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ne(Zd,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let na=null;function au(){return na===null?na=(function(){return 268435456+Math.round(2147483648*Math.random())})():na++,"0x"+na.toString(16)}const yl="RestConnection",aA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cA{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===La?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const o=au(),c=this.zo(e,n.toUriEncodedString());ne(yl,`Sending RPC '${e}' ${o}:`,c,s);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,r,i);const{host:u}=new URL(c),f=Xr(u);return this.Jo(e,c,l,s,f).then((p=>(ne(yl,`Received RPC '${e}' ${o}: `,p),p)),(p=>{throw Hr(yl,`RPC '${e}' ${o} failed with error: `,p,"url: ",c,"request:",s),p}))}Ho(e,n,s,r,i,o){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ei})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((r,i)=>e[i]=r)),s&&s.headers.forEach(((r,i)=>e[i]=r))}zo(e,n){const s=aA[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class lA{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Dt="WebChannelConnection";class uA extends cA{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=au();return new Promise(((c,l)=>{const u=new xg;u.setWithCredentials(!0),u.listenOnce(Mg.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case ca.NO_ERROR:const p=u.getResponseJson();ne(Dt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),c(p);break;case ca.TIMEOUT:ne(Dt,`RPC '${e}' ${o} timed out`),l(new se(q.DEADLINE_EXCEEDED,"Request time out"));break;case ca.HTTP_ERROR:const m=u.getStatus();if(ne(Dt,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const b=_?.error;if(b&&b.status&&b.message){const N=(function(H){const D=H.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(D)>=0?D:q.UNKNOWN})(b.status);l(new se(N,b.message))}else l(new se(q.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new se(q.UNAVAILABLE,"Connection failed."));break;default:de(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{ne(Dt,`RPC '${e}' ${o} completed.`)}}));const f=JSON.stringify(r);ne(Dt,`RPC '${e}' ${o} sending request:`,r),u.send(n,"POST",f,s,15)}))}T_(e,n,s){const r=au(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=$g(),c=Ug(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const f=i.join("");ne(Dt,`Creating RPC '${e}' stream ${r}: ${f}`,l);const p=o.createWebChannel(f,l);this.I_(p);let m=!1,_=!1;const b=new lA({Yo:k=>{_?ne(Dt,`Not sending because RPC '${e}' stream ${r} is closed:`,k):(m||(ne(Dt,`Opening RPC '${e}' stream ${r} transport.`),p.open(),m=!0),ne(Dt,`RPC '${e}' stream ${r} sending:`,k),p.send(k))},Zo:()=>p.close()}),N=(k,H,D)=>{k.listen(H,(V=>{try{D(V)}catch(M){setTimeout((()=>{throw M}),0)}}))};return N(p,Li.EventType.OPEN,(()=>{_||(ne(Dt,`RPC '${e}' stream ${r} transport opened.`),b.o_())})),N(p,Li.EventType.CLOSE,(()=>{_||(_=!0,ne(Dt,`RPC '${e}' stream ${r} transport closed`),b.a_(),this.E_(p))})),N(p,Li.EventType.ERROR,(k=>{_||(_=!0,Hr(Dt,`RPC '${e}' stream ${r} transport errored. Name:`,k.name,"Message:",k.message),b.a_(new se(q.UNAVAILABLE,"The operation could not be completed")))})),N(p,Li.EventType.MESSAGE,(k=>{if(!_){const H=k.data[0];Oe(!!H,16349);const D=H,V=D?.error||D[0]?.error;if(V){ne(Dt,`RPC '${e}' stream ${r} received error:`,V);const M=V.status;let Z=(function(v){const y=it[v];if(y!==void 0)return v_(y)})(M),ie=V.message;Z===void 0&&(Z=q.INTERNAL,ie="Unknown error status: "+M+" with message "+V.message),_=!0,b.a_(new se(Z,ie)),p.close()}else ne(Dt,`RPC '${e}' stream ${r} received:`,H),b.u_(H)}})),N(c,Fg.STAT_EVENT,(k=>{k.stat===Ql.PROXY?ne(Dt,`RPC '${e}' stream ${r} detected buffering proxy`):k.stat===Ql.NOPROXY&&ne(Dt,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{b.__()}),0),b}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function vl(){return typeof document<"u"?document:null}function Ic(t){return new p1(t,!0)}class L_{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&ne("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const tp="PersistentStream";class V_{constructor(e,n,s,r,i,o,c,l){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new L_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(Yn(n.toString()),Yn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,r])=>{this.D_===n&&this.G_(s,r)}),(s=>{e((()=>{const r=new se(q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{s((()=>this.z_(r)))})),this.stream.onMessage((r=>{s((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ne(tp,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ne(tp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class hA extends V_{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=_1(this.serializer,e),s=(function(i){if(!("targetChange"in i))return ge.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ge.min():o.readTime?bn(o.readTime):ge.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=iu(this.serializer),n.addTarget=(function(i,o){let c;const l=o.target;if(c=eu(l)?{documents:E1(i,l)}:{query:w1(i,l).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=I_(i,o.resumeToken);const u=nu(i,o.expectedCount);u!==null&&(c.expectedCount=u)}else if(o.snapshotVersion.compareTo(ge.min())>0){c.readTime=Ua(i,o.snapshotVersion.toTimestamp());const u=nu(i,o.expectedCount);u!==null&&(c.expectedCount=u)}return c})(this.serializer,e);const s=T1(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=iu(this.serializer),n.removeTarget=e,this.q_(n)}}class fA extends V_{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Oe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Oe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=v1(e.writeResults,e.commitTime),s=bn(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=iu(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>y1(this.serializer,s)))};this.q_(n)}}class dA{}class pA extends dA{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new se(q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,su(n,s),r,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new se(q.UNKNOWN,i.toString())}))}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Ho(e,su(n,s),r,o,c,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new se(q.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class mA{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Yn(n),this.aa=!1):ne("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const hr="RemoteStore";class gA{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{s.enqueueAndForget((async()=>{mr(this)&&(ne(hr,"Restarting streams for network reachability change."),await(async function(l){const u=ye(l);u.Ea.add(4),await Ro(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Tc(u)})(this))}))})),this.Ra=new mA(s,r)}}async function Tc(t){if(mr(t))for(const e of t.da)await e(!0)}async function Ro(t){for(const e of t.da)await e(!1)}function O_(t,e){const n=ye(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),dh(n)?fh(n):si(n).O_()&&hh(n,e))}function uh(t,e){const n=ye(t),s=si(n);n.Ia.delete(e),s.O_()&&x_(n,e),n.Ia.size===0&&(s.O_()?s.L_():mr(n)&&n.Ra.set("Unknown"))}function hh(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}si(t).Y_(e)}function x_(t,e){t.Va.Ue(e),si(t).Z_(e)}function fh(t){t.Va=new u1({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),si(t).start(),t.Ra.ua()}function dh(t){return mr(t)&&!si(t).x_()&&t.Ia.size>0}function mr(t){return ye(t).Ea.size===0}function M_(t){t.Va=void 0}async function _A(t){t.Ra.set("Online")}async function yA(t){t.Ia.forEach(((e,n)=>{hh(t,e)}))}async function vA(t,e){M_(t),dh(t)?(t.Ra.ha(e),fh(t)):t.Ra.set("Unknown")}async function EA(t,e,n){if(t.Ra.set("Online"),e instanceof w_&&e.state===2&&e.cause)try{await(async function(r,i){const o=i.cause;for(const c of i.targetIds)r.Ia.has(c)&&(await r.remoteSyncer.rejectListen(c,o),r.Ia.delete(c),r.Va.removeTarget(c))})(t,e)}catch(s){ne(hr,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Ba(t,s)}else if(e instanceof fa?t.Va.Ze(e):e instanceof E_?t.Va.st(e):t.Va.tt(e),!n.isEqual(ge.min()))try{const s=await D_(t.localStore);n.compareTo(s)>=0&&await(function(i,o){const c=i.Va.Tt(o);return c.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const f=i.Ia.get(u);f&&i.Ia.set(u,f.withResumeToken(l.resumeToken,o))}})),c.targetMismatches.forEach(((l,u)=>{const f=i.Ia.get(l);if(!f)return;i.Ia.set(l,f.withResumeToken(Rt.EMPTY_BYTE_STRING,f.snapshotVersion)),x_(i,l);const p=new ws(f.target,l,u,f.sequenceNumber);hh(i,p)})),i.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(s){ne(hr,"Failed to raise snapshot:",s),await Ba(t,s)}}async function Ba(t,e,n){if(!ni(e))throw e;t.Ea.add(1),await Ro(t),t.Ra.set("Offline"),n||(n=()=>D_(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ne(hr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Tc(t)}))}function F_(t,e){return e().catch((n=>Ba(t,n,e)))}async function Ac(t){const e=ye(t),n=Os(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ju;for(;wA(e);)try{const r=await nA(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,IA(e,r)}catch(r){await Ba(e,r)}U_(e)&&$_(e)}function wA(t){return mr(t)&&t.Ta.length<10}function IA(t,e){t.Ta.push(e);const n=Os(t);n.O_()&&n.X_&&n.ea(e.mutations)}function U_(t){return mr(t)&&!Os(t).x_()&&t.Ta.length>0}function $_(t){Os(t).start()}async function TA(t){Os(t).ra()}async function AA(t){const e=Os(t);for(const n of t.Ta)e.ea(n.mutations)}async function SA(t,e,n){const s=t.Ta.shift(),r=sh.from(s,e,n);await F_(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await Ac(t)}async function CA(t,e){e&&Os(t).X_&&await(async function(s,r){if((function(o){return a1(o)&&o!==q.ABORTED})(r.code)){const i=s.Ta.shift();Os(s).B_(),await F_(s,(()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r))),await Ac(s)}})(t,e),U_(t)&&$_(t)}async function np(t,e){const n=ye(t);n.asyncQueue.verifyOperationInProgress(),ne(hr,"RemoteStore received new credentials");const s=mr(n);n.Ea.add(3),await Ro(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Tc(n)}async function bA(t,e){const n=ye(t);e?(n.Ea.delete(2),await Tc(n)):e||(n.Ea.add(2),await Ro(n),n.Ra.set("Unknown"))}function si(t){return t.ma||(t.ma=(function(n,s,r){const i=ye(n);return i.sa(),new hA(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(t.datastore,t.asyncQueue,{Xo:_A.bind(null,t),t_:yA.bind(null,t),r_:vA.bind(null,t),H_:EA.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),dh(t)?fh(t):t.Ra.set("Unknown")):(await t.ma.stop(),M_(t))}))),t.ma}function Os(t){return t.fa||(t.fa=(function(n,s,r){const i=ye(n);return i.sa(),new fA(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:TA.bind(null,t),r_:CA.bind(null,t),ta:AA.bind(null,t),na:SA.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Ac(t)):(await t.fa.stop(),t.Ta.length>0&&(ne(hr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class ph{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new Rs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,c=new ph(e,n,o,r,i);return c.start(s),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mh(t,e){if(Yn("AsyncQueue",`${e}: ${t}`),ni(t))return new se(q.UNAVAILABLE,`${e}: ${t}`);throw t}class xr{static emptySet(e){return new xr(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||le.comparator(n.key,s.key):(n,s)=>le.comparator(n.key,s.key),this.keyedMap=Vi(),this.sortedSet=new Ze(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof xr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new xr;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class sp{constructor(){this.ga=new Ze(le.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):de(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Kr{constructor(e,n,s,r,i,o,c,l,u){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach((c=>{o.push({type:0,doc:c})})),new Kr(e,n,xr.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_c(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}class RA{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class PA{constructor(){this.queries=rp(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=ye(n),i=r.queries;r.queries=rp(),i.forEach(((o,c)=>{for(const l of c.Sa)l.onError(s)}))})(this,new se(q.ABORTED,"Firestore shutting down"))}}function rp(){return new pr((t=>o_(t)),_c)}async function kA(t,e){const n=ye(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new RA,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const c=mh(o,`Initialization of query '${br(e.query)}' failed`);return void e.onError(c)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&gh(n)}async function NA(t,e){const n=ye(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function DA(t,e){const n=ye(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const c of o.Sa)c.Fa(r)&&(s=!0);o.wa=r}}s&&gh(n)}function LA(t,e,n){const s=ye(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function gh(t){t.Ca.forEach((e=>{e.next()}))}var cu,ip;(ip=cu||(cu={})).Ma="default",ip.Cache="cache";class VA{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Kr(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Kr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==cu.Cache}}class B_{constructor(e){this.key=e}}class j_{constructor(e){this.key=e}}class OA{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ce(),this.mutatedKeys=Ce(),this.eu=a_(e),this.tu=new xr(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new sp,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,c=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((f,p)=>{const m=r.get(f),_=yc(this.query,p)?p:null,b=!!m&&this.mutatedKeys.has(m.key),N=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let k=!1;m&&_?m.data.isEqual(_.data)?b!==N&&(s.track({type:3,doc:_}),k=!0):this.su(m,_)||(s.track({type:2,doc:_}),k=!0,(l&&this.eu(_,l)>0||u&&this.eu(_,u)<0)&&(c=!0)):!m&&_?(s.track({type:0,doc:_}),k=!0):m&&!_&&(s.track({type:1,doc:m}),k=!0,(l||u)&&(c=!0)),k&&(_?(o=o.add(_),i=N?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),s.track({type:1,doc:f})}return{tu:o,iu:s,Cs:c,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((f,p)=>(function(_,b){const N=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return de(20277,{Rt:k})}};return N(_)-N(b)})(f.type,p.type)||this.eu(f.doc,p.doc))),this.ou(s),r=r??!1;const c=n&&!r?this._u():[],l=this.Xa.size===0&&this.current&&!r?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new Kr(this.query,e.tu,i,o,e.mutatedKeys,l===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new sp,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ce(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new j_(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new B_(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ce();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Kr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const _h="SyncEngine";class xA{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class MA{constructor(e){this.key=e,this.hu=!1}}class FA{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new pr((c=>o_(c)),_c),this.Iu=new Map,this.Eu=new Set,this.du=new Ze(le.comparator),this.Au=new Map,this.Ru=new oh,this.Vu={},this.mu=new Map,this.fu=Gr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function UA(t,e,n=!0){const s=K_(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await H_(s,e,n,!0),r}async function $A(t,e){const n=K_(t);await H_(n,e,!0,!1)}async function H_(t,e,n,s){const r=await sA(t.localStore,Sn(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return s&&(c=await BA(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&O_(t.remoteStore,r),c}async function BA(t,e,n,s,r){t.pu=(p,m,_)=>(async function(N,k,H,D){let V=k.view.ru(H);V.Cs&&(V=await Yd(N.localStore,k.query,!1).then((({documents:S})=>k.view.ru(S,V))));const M=D&&D.targetChanges.get(k.targetId),Z=D&&D.targetMismatches.get(k.targetId)!=null,ie=k.view.applyChanges(V,N.isPrimaryClient,M,Z);return ap(N,k.targetId,ie.au),ie.snapshot})(t,p,m,_);const i=await Yd(t.localStore,e,!0),o=new OA(e,i.Qs),c=o.ru(i.documents),l=bo.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),u=o.applyChanges(c,t.isPrimaryClient,l);ap(t,n,u.au);const f=new xA(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function jA(t,e,n){const s=ye(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter((o=>!_c(o,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await ou(s.localStore,r.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(r.targetId),n&&uh(s.remoteStore,r.targetId),lu(s,r.targetId)})).catch(ti)):(lu(s,r.targetId),await ou(s.localStore,r.targetId,!0))}async function HA(t,e){const n=ye(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),uh(n.remoteStore,s.targetId))}async function WA(t,e,n){const s=YA(t);try{const r=await(function(o,c){const l=ye(o),u=ze.now(),f=c.reduce(((_,b)=>_.add(b.key)),Ce());let p,m;return l.persistence.runTransaction("Locally write mutations","readwrite",(_=>{let b=Xn(),N=Ce();return l.Ns.getEntries(_,f).next((k=>{b=k,b.forEach(((H,D)=>{D.isValidDocument()||(N=N.add(H))}))})).next((()=>l.localDocuments.getOverlayedDocuments(_,b))).next((k=>{p=k;const H=[];for(const D of c){const V=n1(D,p.get(D.key).overlayedDocument);V!=null&&H.push(new Us(D.key,V,Zg(V.value.mapValue),Cn.exists(!0)))}return l.mutationQueue.addMutationBatch(_,u,H,c)})).next((k=>{m=k;const H=k.applyToLocalDocumentSet(p,N);return l.documentOverlayCache.saveOverlays(_,k.batchId,H)}))})).then((()=>({batchId:m.batchId,changes:l_(p)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),(function(o,c,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new Ze(Se)),u=u.insert(c,l),o.Vu[o.currentUser.toKey()]=u})(s,r.batchId,n),await Po(s,r.changes),await Ac(s.remoteStore)}catch(r){const i=mh(r,"Failed to persist write");n.reject(i)}}async function W_(t,e){const n=ye(t);try{const s=await eA(n.localStore,e);e.targetChanges.forEach(((r,i)=>{const o=n.Au.get(i);o&&(Oe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?Oe(o.hu,14607):r.removedDocuments.size>0&&(Oe(o.hu,42227),o.hu=!1))})),await Po(n,s,e)}catch(s){await ti(s)}}function op(t,e,n){const s=ye(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach(((i,o)=>{const c=o.view.va(e);c.snapshot&&r.push(c.snapshot)})),(function(o,c){const l=ye(o);l.onlineState=c;let u=!1;l.queries.forEach(((f,p)=>{for(const m of p.Sa)m.va(c)&&(u=!0)})),u&&gh(l)})(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function qA(t,e,n){const s=ye(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new Ze(le.comparator);o=o.insert(i,xt.newNoDocument(i,ge.min()));const c=Ce().add(i),l=new wc(ge.min(),new Map,new Ze(Se),o,c);await W_(s,l),s.du=s.du.remove(i),s.Au.delete(e),yh(s)}else await ou(s.localStore,e,!1).then((()=>lu(s,e,n))).catch(ti)}async function zA(t,e){const n=ye(t),s=e.batch.batchId;try{const r=await Z1(n.localStore,e);z_(n,s,null),q_(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Po(n,r)}catch(r){await ti(r)}}async function GA(t,e,n){const s=ye(t);try{const r=await(function(o,c){const l=ye(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let f;return l.mutationQueue.lookupMutationBatch(u,c).next((p=>(Oe(p!==null,37113),f=p.keys(),l.mutationQueue.removeMutationBatch(u,p)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,f,c))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f))).next((()=>l.localDocuments.getDocuments(u,f)))}))})(s.localStore,e);z_(s,e,n),q_(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Po(s,r)}catch(r){await ti(r)}}function q_(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function z_(t,e,n){const s=ye(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function lu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((s=>{t.Ru.containsKey(s)||G_(t,s)}))}function G_(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(uh(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),yh(t))}function ap(t,e,n){for(const s of n)s instanceof B_?(t.Ru.addReference(s.key,e),KA(t,s)):s instanceof j_?(ne(_h,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||G_(t,s.key)):de(19791,{wu:s})}function KA(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(ne(_h,"New document in limbo: "+n),t.Eu.add(s),yh(t))}function yh(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new le(Ye.fromString(e)),s=t.fu.next();t.Au.set(s,new MA(n)),t.du=t.du.insert(n,s),O_(t.remoteStore,new ws(Sn(th(n.path)),s,"TargetPurposeLimboResolution",dc.ce))}}async function Po(t,e,n){const s=ye(t),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach(((c,l)=>{o.push(s.pu(l,e,n).then((u=>{if((u||n)&&s.isPrimaryClient){const f=u?!u.fromCache:n?.targetChanges.get(l.targetId)?.current;s.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){r.push(u);const f=ch.As(l.targetId,u);i.push(f)}})))})),await Promise.all(o),s.Pu.H_(r),await(async function(l,u){const f=ye(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>B.forEach(u,(m=>B.forEach(m.Es,(_=>f.persistence.referenceDelegate.addReference(p,m.targetId,_))).next((()=>B.forEach(m.ds,(_=>f.persistence.referenceDelegate.removeReference(p,m.targetId,_)))))))))}catch(p){if(!ni(p))throw p;ne(lh,"Failed to update sequence numbers: "+p)}for(const p of u){const m=p.targetId;if(!p.fromCache){const _=f.Ms.get(m),b=_.snapshotVersion,N=_.withLastLimboFreeSnapshotVersion(b);f.Ms=f.Ms.insert(m,N)}}})(s.localStore,i))}async function QA(t,e){const n=ye(t);if(!n.currentUser.isEqual(e)){ne(_h,"User change. New user:",e.toKey());const s=await N_(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((c=>{c.forEach((l=>{l.reject(new se(q.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Po(n,s.Ls)}}function JA(t,e){const n=ye(t),s=n.Au.get(e);if(s&&s.hu)return Ce().add(s.key);{let r=Ce();const i=n.Iu.get(e);if(!i)return r;for(const o of i){const c=n.Tu.get(o);r=r.unionWith(c.view.nu)}return r}}function K_(t){const e=ye(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=W_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qA.bind(null,e),e.Pu.H_=DA.bind(null,e.eventManager),e.Pu.yu=LA.bind(null,e.eventManager),e}function YA(t){const e=ye(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GA.bind(null,e),e}class ja{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ic(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return X1(this.persistence,new Q1,e.initialUser,this.serializer)}Cu(e){return new k_(ah.mi,this.serializer)}Du(e){return new iA}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ja.provider={build:()=>new ja};class XA extends ja{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Oe(this.persistence.referenceDelegate instanceof $a,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new V1(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?qt.withCacheSize(this.cacheSizeBytes):qt.DEFAULT;return new k_((s=>$a.mi(s,n)),this.serializer)}}class uu{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>op(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=QA.bind(null,this.syncEngine),await bA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new PA})()}createDatastore(e){const n=Ic(e.databaseInfo.databaseId),s=(function(i){return new uA(i)})(e.databaseInfo);return(function(i,o,c,l){return new pA(i,o,c,l)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,r,i,o,c){return new gA(s,r,i,o,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>op(this.syncEngine,n,0)),(function(){return ep.v()?new ep:new oA})())}createSyncEngine(e,n){return(function(r,i,o,c,l,u,f){const p=new FA(r,i,o,c,l,u);return f&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=ye(n);ne(hr,"RemoteStore shutting down."),s.Ea.add(5),await Ro(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}uu.provider={build:()=>new uu};class ZA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Yn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const xs="FirestoreClient";class eS{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=Vt.UNAUTHENTICATED,this.clientId=Ku.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,(async o=>{ne(xs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(s,(o=>(ne(xs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=mh(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function El(t,e){t.asyncQueue.verifyOperationInProgress(),ne(xs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener((async r=>{s.isEqual(r)||(await N_(e.localStore,r),s=r)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function cp(t,e){t.asyncQueue.verifyOperationInProgress();const n=await tS(t);ne(xs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((s=>np(e.remoteStore,s))),t.setAppCheckTokenChangeListener(((s,r)=>np(e.remoteStore,r))),t._onlineComponents=e}async function tS(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ne(xs,"Using user provided OfflineComponentProvider");try{await El(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(r){return r.name==="FirebaseError"?r.code===q.FAILED_PRECONDITION||r.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;Hr("Error using user provided cache. Falling back to memory cache: "+n),await El(t,new ja)}}else ne(xs,"Using default OfflineComponentProvider"),await El(t,new XA(void 0));return t._offlineComponents}async function Q_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ne(xs,"Using user provided OnlineComponentProvider"),await cp(t,t._uninitializedComponentsProvider._online)):(ne(xs,"Using default OnlineComponentProvider"),await cp(t,new uu))),t._onlineComponents}function nS(t){return Q_(t).then((e=>e.syncEngine))}async function sS(t){const e=await Q_(t),n=e.eventManager;return n.onListen=UA.bind(null,e.syncEngine),n.onUnlisten=jA.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$A.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=HA.bind(null,e.syncEngine),n}function rS(t,e,n={}){const s=new Rs;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,c,l,u){const f=new ZA({next:m=>{f.Nu(),o.enqueueAndForget((()=>NA(i,p)));const _=m.docs.has(c);!_&&m.fromCache?u.reject(new se(q.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&l&&l.source==="server"?u.reject(new se(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),p=new VA(th(c.path),f,{includeMetadataChanges:!0,qa:!0});return kA(i,p)})(await sS(t),t.asyncQueue,e,n,s))),s.promise}function J_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const lp=new Map;const Y_="firestore.googleapis.com",up=!0;class hp{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new se(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Y_,this.ssl=up}else this.host=e.host,this.ssl=e.ssl??up;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=P_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<D1)throw new se(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}m0("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=J_(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new se(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new se(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new se(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,r){return s.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vh{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new r0;switch(s.type){case"firstParty":return new c0(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new se(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=lp.get(n);s&&(ne("ComponentProvider","Removing Datastore"),lp.delete(n),s.terminate())})(this),Promise.resolve()}}function iS(t,e,n,s={}){t=ur(t,vh);const r=Xr(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;r&&(bg(`https://${c}`),Rg("Firestore",!0)),i.host!==Y_&&i.host!==c&&Hr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:c,ssl:r,emulatorOptions:s};if(!ar(l,o)&&(t._setSettings(l),s.mockUserToken)){let u,f;if(typeof s.mockUserToken=="string")u=s.mockUserToken,f=Vt.MOCK_USER;else{u=PI(s.mockUserToken,t._app?.options.projectId);const p=s.mockUserToken.sub||s.mockUserToken.user_id;if(!p)throw new se(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Vt(p)}t._authCredentials=new i0(new jg(u,f))}}class Eh{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Eh(this.firestore,e,this._query)}}class ht{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ht(this.firestore,e,this._key)}toJSON(){return{type:ht._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(So(n,ht._jsonSchema))return new ht(e,s||null,new le(Ye.fromString(n.referencePath)))}}ht._jsonSchemaVersion="firestore/documentReference/1.0",ht._jsonSchema={type:at("string",ht._jsonSchemaVersion),referencePath:at("string")};class fo extends Eh{constructor(e,n,s){super(e,n,th(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ht(this.firestore,null,new le(e))}withConverter(e){return new fo(this.firestore,e,this._path)}}function Ha(t,e,...n){if(t=Ut(t),arguments.length===1&&(e=Ku.newId()),p0("doc","path",e),t instanceof vh){const s=Ye.fromString(e,...n);return Sd(s),new ht(t,null,new le(s))}{if(!(t instanceof ht||t instanceof fo))throw new se(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Ye.fromString(e,...n));return Sd(s),new ht(t.firestore,t instanceof fo?t.converter:null,new le(s))}}const fp="AsyncQueue";class dp{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new L_(this,"async_queue_retry"),this._c=()=>{const s=vl();s&&ne(fp,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=vl();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=vl();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Rs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ni(e))throw e;ne(fp,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Yn("INTERNAL UNHANDLED ERROR: ",pp(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=ph.createAndSchedule(this,e,n,s,(i=>this.hc(i)));return this.tc.push(r),r}uc(){this.nc&&de(47125,{Pc:pp(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function pp(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Sc extends vh{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new dp,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new dp(e),this._firestoreClient=void 0,await e}}}function oS(t,e){const n=typeof t=="object"?t:Dg(),s=typeof t=="string"?t:La,r=zu(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=bI("firestore");i&&iS(r,...i)}return r}function X_(t){if(t._terminated)throw new se(q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||aS(t),t._firestoreClient}function aS(t){const e=t._freezeSettings(),n=(function(r,i,o,c){return new C0(r,i,o,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,J_(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new eS(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(r){const i=r?._online.build();return{_offline:r?._offline.build(i),_online:i}})(t._componentsProvider))}class rn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rn(Rt.fromBase64String(e))}catch(n){throw new se(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new rn(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:rn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(So(e,rn._jsonSchema))return rn.fromBase64String(e.bytes)}}rn._jsonSchemaVersion="firestore/bytes/1.0",rn._jsonSchema={type:at("string",rn._jsonSchemaVersion),bytes:at("string")};class Cc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new se(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class wh{constructor(e){this._methodName=e}}class Rn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new se(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new se(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Rn._jsonSchemaVersion}}static fromJSON(e){if(So(e,Rn._jsonSchema))return new Rn(e.latitude,e.longitude)}}Rn._jsonSchemaVersion="firestore/geoPoint/1.0",Rn._jsonSchema={type:at("string",Rn._jsonSchemaVersion),latitude:at("number"),longitude:at("number")};class Pn{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Pn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(So(e,Pn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Pn(e.vectorValues);throw new se(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Pn._jsonSchemaVersion="firestore/vectorValue/1.0",Pn._jsonSchema={type:at("string",Pn._jsonSchemaVersion),vectorValues:at("object")};const cS=/^__.*__$/;class lS{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Us(e,this.data,this.fieldMask,n,this.fieldTransforms):new Co(e,this.data,n,this.fieldTransforms)}}class Z_{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Us(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ey(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw de(40011,{Ac:t})}}class Ih{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ih({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Wa(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(ey(this.Ac)&&cS.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class uS{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Ic(e)}Cc(e,n,s,r=!1){return new Ih({Ac:e,methodName:n,Dc:s,path:St.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ty(t){const e=t._freezeSettings(),n=Ic(t._databaseId);return new uS(t._databaseId,!!e.ignoreUndefinedProperties,n)}function hS(t,e,n,s,r,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);Th("Data must be an object, but it was:",o,s);const c=ny(s,o);let l,u;if(i.merge)l=new Zt(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const m=hu(e,p,n);if(!o.contains(m))throw new se(q.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);ry(f,m)||f.push(m)}l=new Zt(f),u=o.fieldTransforms.filter((p=>l.covers(p.field)))}else l=null,u=o.fieldTransforms;return new lS(new zt(c),l,u)}class bc extends wh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bc}}function fS(t,e,n,s){const r=t.Cc(1,e,n);Th("Data must be an object, but it was:",r,s);const i=[],o=zt.empty();Fs(s,((l,u)=>{const f=Ah(e,l,n);u=Ut(u);const p=r.yc(f);if(u instanceof bc)i.push(f);else{const m=Rc(u,p);m!=null&&(i.push(f),o.set(f,m))}}));const c=new Zt(i);return new Z_(o,c,r.fieldTransforms)}function dS(t,e,n,s,r,i){const o=t.Cc(1,e,n),c=[hu(e,s,n)],l=[r];if(i.length%2!=0)throw new se(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)c.push(hu(e,i[m])),l.push(i[m+1]);const u=[],f=zt.empty();for(let m=c.length-1;m>=0;--m)if(!ry(u,c[m])){const _=c[m];let b=l[m];b=Ut(b);const N=o.yc(_);if(b instanceof bc)u.push(_);else{const k=Rc(b,N);k!=null&&(u.push(_),f.set(_,k))}}const p=new Zt(u);return new Z_(f,p,o.fieldTransforms)}function Rc(t,e){if(sy(t=Ut(t)))return Th("Unsupported field value:",e,t),ny(t,e);if(t instanceof wh)return(function(s,r){if(!ey(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,r){const i=[];let o=0;for(const c of s){let l=Rc(c,r.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}})(t,e)}return(function(s,r){if((s=Ut(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return J0(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=ze.fromDate(s);return{timestampValue:Ua(r.serializer,i)}}if(s instanceof ze){const i=new ze(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ua(r.serializer,i)}}if(s instanceof Rn)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof rn)return{bytesValue:I_(r.serializer,s._byteString)};if(s instanceof ht){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ih(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Pn)return(function(o,c){return{mapValue:{fields:{[Yg]:{stringValue:Xg},[Va]:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw c.Sc("VectorValues must only contain numeric values.");return nh(c.serializer,u)}))}}}}}})(s,r);throw r.Sc(`Unsupported field value: ${Qu(s)}`)})(t,e)}function ny(t,e){const n={};return qg(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fs(t,((s,r)=>{const i=Rc(r,e.mc(s));i!=null&&(n[s]=i)})),{mapValue:{fields:n}}}function sy(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ze||t instanceof Rn||t instanceof rn||t instanceof ht||t instanceof wh||t instanceof Pn)}function Th(t,e,n){if(!sy(n)||!Hg(n)){const s=Qu(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function hu(t,e,n){if((e=Ut(e))instanceof Cc)return e._internalPath;if(typeof e=="string")return Ah(t,e);throw Wa("Field path arguments must be of type string or ",t,!1,void 0,n)}const pS=new RegExp("[~\\*/\\[\\]]");function Ah(t,e,n){if(e.search(pS)>=0)throw Wa(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Cc(...e.split("."))._internalPath}catch{throw Wa(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Wa(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${s}`),o&&(l+=` in document ${r}`),l+=")"),new se(q.INVALID_ARGUMENT,c+t+l)}function ry(t,e){return t.some((n=>n.isEqual(e)))}class iy{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(oy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class mS extends iy{data(){return super.data()}}function oy(t,e){return typeof e=="string"?Ah(t,e):e instanceof Cc?e._internalPath:e._delegate._internalPath}class gS{convertValue(e,n="none"){switch(Vs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return st(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ls(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw de(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Fs(e,((r,i)=>{s[r]=this.convertValue(i,n)})),s}convertVectorValue(e){const n=e.fields?.[Va].arrayValue?.values?.map((s=>st(s.doubleValue)));return new Pn(n)}convertGeoPoint(e){return new Rn(st(e.latitude),st(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=mc(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(ao(e));default:return null}}convertTimestamp(e){const n=Ds(e);return new ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Ye.fromString(e);Oe(R_(s),9688,{name:e});const r=new co(s.get(1),s.get(3)),i=new le(s.popFirst(5));return r.isEqual(n)||Yn(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}function _S(t,e,n){let s;return s=t?t.toFirestore(e):e,s}class xi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class or extends iy{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new da(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(oy("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=or._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}or._jsonSchemaVersion="firestore/documentSnapshot/1.0",or._jsonSchema={type:at("string",or._jsonSchemaVersion),bundleSource:at("string","DocumentSnapshot"),bundleName:at("string"),bundle:at("string")};class da extends or{data(e={}){return super.data(e)}}class Qi{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new xi(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new da(this._firestore,this._userDataWriter,s.key,s,new xi(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new se(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map((c=>{const l=new da(r._firestore,r._userDataWriter,c.doc.key,c.doc,new xi(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((c=>i||c.type!==3)).map((c=>{const l=new da(r._firestore,r._userDataWriter,c.doc.key,c.doc,new xi(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,f=-1;return c.type!==0&&(u=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:yS(c.type),doc:l,oldIndex:u,newIndex:f}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Qi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ku.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function yS(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return de(61501,{type:t})}}function vS(t){t=ur(t,ht);const e=ur(t.firestore,Sc);return rS(X_(e),t._key).then((n=>IS(e,t,n)))}Qi._jsonSchemaVersion="firestore/querySnapshot/1.0",Qi._jsonSchema={type:at("string",Qi._jsonSchemaVersion),bundleSource:at("string","QuerySnapshot"),bundleName:at("string"),bundle:at("string")};class ES extends gS{constructor(e){super(),this.firestore=e}convertBytes(e){return new rn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ht(this.firestore,null,n)}}function wS(t,e,n){t=ur(t,ht);const s=ur(t.firestore,Sc),r=_S(t.converter,e);return ay(s,[hS(ty(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Cn.none())])}function mp(t,e,n,...s){t=ur(t,ht);const r=ur(t.firestore,Sc),i=ty(r);let o;return o=typeof(e=Ut(e))=="string"||e instanceof Cc?dS(i,"updateDoc",t._key,e,n,s):fS(i,"updateDoc",t._key,e),ay(r,[o.toMutation(t._key,Cn.exists(!0))])}function ay(t,e){return(function(s,r){const i=new Rs;return s.asyncQueue.enqueueAndForget((async()=>WA(await nS(s),r,i))),i.promise})(X_(t),e)}function IS(t,e,n){const s=n.docs.get(e._key),r=new ES(t);return new or(t,r,e._key,s,new xi(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){ei=r})(Zr),jr(new cr("firestore",((s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),c=new Sc(new o0(s.getProvider("auth-internal")),new l0(o,s.getProvider("app-check-internal")),(function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new se(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new co(u.options.projectId,f)})(o,r),o);return i={useFetchStreams:n,...i},c._setSettings(i),c}),"PUBLIC").setMultipleInstances(!0)),Cs(wd,Id,e),Cs(wd,Id,"esm2020")})();const TS={apiKey:"AIzaSyDapqMH_oM7h6CDKM0laMGrLIlDVDyb_gY",authDomain:"hometv-c10f8.firebaseapp.com",projectId:"hometv-c10f8",storageBucket:"hometv-c10f8.appspot.com",messagingSenderId:"452296723769",appId:"1:452296723769:web:982a4288b9cf4e189bace8"},AS=Ng(TS),qa=oS(AS);function cy(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const SS=cy,ly=new To("auth","Firebase",cy());const za=new Wu("@firebase/auth");function CS(t,...e){za.logLevel<=Ae.WARN&&za.warn(`Auth (${Zr}): ${t}`,...e)}function pa(t,...e){za.logLevel<=Ae.ERROR&&za.error(`Auth (${Zr}): ${t}`,...e)}function mn(t,...e){throw Sh(t,...e)}function kn(t,...e){return Sh(t,...e)}function uy(t,e,n){const s={...SS(),[e]:n};return new To("auth","Firebase",s).create(e,{appName:t.name})}function zn(t){return uy(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sh(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return ly.create(t,...e)}function fe(t,e,...n){if(!t)throw Sh(e,...n)}function Wn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw pa(e),new Error(e)}function Zn(t,e){t||Wn(e)}function fu(){return typeof self<"u"&&self.location?.href||""}function bS(){return gp()==="http:"||gp()==="https:"}function gp(){return typeof self<"u"&&self.location?.protocol||null}function RS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bS()||OI()||"connection"in navigator)?navigator.onLine:!0}function PS(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class ko{constructor(e,n){this.shortDelay=e,this.longDelay=n,Zn(n>e,"Short delay should be less than long delay!"),this.isMobile=DI()||xI()}get(){return RS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ch(t,e){Zn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class hy{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const kS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const NS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DS=new ko(3e4,6e4);function $s(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Bs(t,e,n,s,r={}){return fy(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const c=Ao({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...i};return VI()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Xr(t.emulatorConfig.host)&&(u.credentials="include"),hy.fetch()(await dy(t,t.config.apiHost,n,c),u)})}async function fy(t,e,n){t._canInitEmulator=!1;const s={...kS,...e};try{const r=new VS(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw sa(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[l,u]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw sa(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw sa(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw sa(t,"user-disabled",o);const f=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw uy(t,f,u);mn(t,f)}}catch(r){if(r instanceof ns)throw r;mn(t,"network-request-failed",{message:String(r)})}}async function No(t,e,n,s,r={}){const i=await Bs(t,e,n,s,r);return"mfaPendingCredential"in i&&mn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function dy(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?Ch(t.config,r):`${t.config.apiScheme}://${r}`;return NS.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function LS(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class VS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(kn(this.auth,"network-request-failed")),DS.get())})}}function sa(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=kn(t,e,s);return r.customData._tokenResponse=n,r}function _p(t){return t!==void 0&&t.enterprise!==void 0}class OS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return LS(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function xS(t,e){return Bs(t,"GET","/v2/recaptchaConfig",$s(t,e))}async function MS(t,e){return Bs(t,"POST","/v1/accounts:delete",e)}async function Ga(t,e){return Bs(t,"POST","/v1/accounts:lookup",e)}function Ji(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function FS(t,e=!1){const n=Ut(t),s=await n.getIdToken(e),r=bh(s);fe(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i?.sign_in_provider;return{claims:r,token:s,authTime:Ji(wl(r.auth_time)),issuedAtTime:Ji(wl(r.iat)),expirationTime:Ji(wl(r.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function wl(t){return Number(t)*1e3}function bh(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return pa("JWT malformed, contained fewer than 3 sections"),null;try{const r=Tg(n);return r?JSON.parse(r):(pa("Failed to decode base64 JWT payload"),null)}catch(r){return pa("Caught error parsing JWT payload as JSON",r?.toString()),null}}function yp(t){const e=bh(t);return fe(e,"internal-error"),fe(typeof e.exp<"u","internal-error"),fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function po(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof ns&&US(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function US({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class $S{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class du{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ji(this.lastLoginAt),this.creationTime=Ji(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ka(t){const e=t.auth,n=await t.getIdToken(),s=await po(t,Ga(e,{idToken:n}));fe(s?.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=r.providerUserInfo?.length?py(r.providerUserInfo):[],o=jS(t.providerData,i),c=t.isAnonymous,l=!(t.email&&r.passwordHash)&&!o?.length,u=c?l:!1,f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new du(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function BS(t){const e=Ut(t);await Ka(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jS(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function py(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function HS(t,e){const n=await fy(t,{},async()=>{const s=Ao({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await dy(t,r,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:c,body:s};return t.emulatorConfig&&Xr(t.emulatorConfig.host)&&(l.credentials="include"),hy.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function WS(t,e){return Bs(t,"POST","/v2/accounts:revokeToken",$s(t,e))}class Mr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){fe(e.idToken,"internal-error"),fe(typeof e.idToken<"u","internal-error"),fe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):yp(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){fe(e.length!==0,"internal-error");const n=yp(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await HS(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new Mr;return s&&(fe(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(fe(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(fe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Mr,this.toJSON())}_performRefresh(){return Wn("not implemented")}}function us(t,e){fe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class hn{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new $S(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new du(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await po(this,this.stsTokenManager.getToken(this.auth,e));return fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return FS(this,e)}reload(){return BS(this)}_assign(e){this!==e&&(fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new hn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Ka(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(sn(this.auth.app))return Promise.reject(zn(this.auth));const e=await this.getIdToken();return await po(this,MS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:_,providerData:b,stsTokenManager:N}=n;fe(p&&N,e,"internal-error");const k=Mr.fromJSON(this.name,N);fe(typeof p=="string",e,"internal-error"),us(s,e.name),us(r,e.name),fe(typeof m=="boolean",e,"internal-error"),fe(typeof _=="boolean",e,"internal-error"),us(i,e.name),us(o,e.name),us(c,e.name),us(l,e.name),us(u,e.name),us(f,e.name);const H=new hn({uid:p,auth:e,email:r,emailVerified:m,displayName:s,isAnonymous:_,photoURL:o,phoneNumber:i,tenantId:c,stsTokenManager:k,createdAt:u,lastLoginAt:f});return b&&Array.isArray(b)&&(H.providerData=b.map(D=>({...D}))),l&&(H._redirectEventId=l),H}static async _fromIdTokenResponse(e,n,s=!1){const r=new Mr;r.updateFromServerResponse(n);const i=new hn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await Ka(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];fe(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?py(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,c=new Mr;c.updateFromIdToken(s);const l=new hn({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new du(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(l,u),l}}const vp=new Map;function qn(t){Zn(t instanceof Function,"Expected a class definition");let e=vp.get(t);return e?(Zn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,vp.set(t,e),e)}class my{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}my.type="NONE";const Ep=my;function ma(t,e,n){return`firebase:${t}:${e}:${n}`}class Fr{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=ma(this.userKey,r.apiKey,i),this.fullPersistenceKey=ma("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ga(this.auth,{idToken:e}).catch(()=>{});return n?hn._fromGetAccountInfoResponse(this.auth,n,e):null}return hn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Fr(qn(Ep),e,s);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=r[0]||qn(Ep);const o=ma(s,e.config.apiKey,e.name);let c=null;for(const u of n)try{const f=await u._get(o);if(f){let p;if(typeof f=="string"){const m=await Ga(e,{idToken:f}).catch(()=>{});if(!m)break;p=await hn._fromGetAccountInfoResponse(e,m,f)}else p=hn._fromJSON(e,f);u!==i&&(c=p),i=u;break}}catch{}const l=r.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Fr(i,e,s):(i=l[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Fr(i,e,s))}}function wp(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vy(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gy(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wy(e))return"Blackberry";if(Iy(e))return"Webos";if(_y(e))return"Safari";if((e.includes("chrome/")||yy(e))&&!e.includes("edge/"))return"Chrome";if(Ey(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function gy(t=Ft()){return/firefox\//i.test(t)}function _y(t=Ft()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yy(t=Ft()){return/crios\//i.test(t)}function vy(t=Ft()){return/iemobile/i.test(t)}function Ey(t=Ft()){return/android/i.test(t)}function wy(t=Ft()){return/blackberry/i.test(t)}function Iy(t=Ft()){return/webos/i.test(t)}function Rh(t=Ft()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function qS(t=Ft()){return Rh(t)&&!!window.navigator?.standalone}function zS(){return MI()&&document.documentMode===10}function Ty(t=Ft()){return Rh(t)||Ey(t)||Iy(t)||wy(t)||/windows phone/i.test(t)||vy(t)}function Ay(t,e=[]){let n;switch(t){case"Browser":n=wp(Ft());break;case"Worker":n=`${wp(Ft())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Zr}/${s}`}class GS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,c)=>{try{const l=e(i);o(l)}catch(l){c(l)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function KS(t,e={}){return Bs(t,"GET","/v2/passwordPolicy",$s(t,e))}const QS=6;class JS{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??QS,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class YS{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ip(this),this.idTokenSubscription=new Ip(this),this.beforeStateQueue=new GS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ly,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=qn(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Fr.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ga(this,{idToken:e}),s=await hn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(sn(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=s?._redirectEventId,c=await this.tryRedirectSignIn(e);(!i||i===o)&&c?.user&&(s=c.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ka(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=PS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(sn(this.app))return Promise.reject(zn(this));const n=e?Ut(e):null;return n&&fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return sn(this.app)?Promise.reject(zn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return sn(this.app)?Promise.reject(zn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await KS(this),n=new JS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new To("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await WS(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&qn(e)||this._popupRedirectResolver;fe(n,this,"argument-error"),this.redirectPersistenceManager=await Fr.create(this,[qn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,s,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ay(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(sn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&CS(`Error while retrieving App Check token: ${e.error}`),e?.token}}function gr(t){return Ut(t)}class Ip{constructor(e){this.auth=e,this.observer=null,this.addObserver=qI(n=>this.observer=n)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Pc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function XS(t){Pc=t}function Sy(t){return Pc.loadJS(t)}function ZS(){return Pc.recaptchaEnterpriseScript}function eC(){return Pc.gapiScript}function tC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class nC{constructor(){this.enterprise=new sC}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class sC{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const rC="recaptcha-enterprise",Cy="NO_RECAPTCHA";class iC{constructor(e){this.type=rC,this.auth=gr(e)}async verify(e="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,c)=>{xS(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const u=new OS(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{c(l)})})}function r(i,o,c){const l=window.grecaptcha;_p(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(Cy)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new nC().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{s(this.auth).then(c=>{if(!n&&_p(window.grecaptcha))r(c,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=ZS();l.length!==0&&(l+=c),Sy(l).then(()=>{r(c,i,o)}).catch(u=>{o(u)})}}).catch(c=>{o(c)})})}}async function Tp(t,e,n,s=!1,r=!1){const i=new iC(t);let o;if(r)o=Cy;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const l=c.phoneEnrollmentInfo.phoneNumber,u=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const l=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return s?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function pu(t,e,n,s,r){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Tp(t,e,n,n==="getOobCode");return s(t,i)}else return s(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Tp(t,e,n,n==="getOobCode");return s(t,o)}else return Promise.reject(i)})}function oC(t,e){const n=zu(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(ar(i,e??{}))return r;mn(r,"already-initialized")}return n.initialize({options:e})}function aC(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(qn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function cC(t,e,n){const s=gr(t);fe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=by(e),{host:o,port:c}=lC(e),l=c===null?"":`:${c}`,u={url:`${i}//${o}${l}/`},f=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){fe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),fe(ar(u,s.config.emulator)&&ar(f,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=f,s.settings.appVerificationDisabledForTesting=!0,Xr(o)?(bg(`${i}//${o}${l}`),Rg("Auth",!0)):uC()}function by(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function lC(t){const e=by(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:Ap(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:Ap(o)}}}function Ap(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function uC(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class Ph{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Wn("not implemented")}_getIdTokenResponse(e){return Wn("not implemented")}_linkToIdToken(e,n){return Wn("not implemented")}_getReauthenticationResolver(e){return Wn("not implemented")}}async function hC(t,e){return Bs(t,"POST","/v1/accounts:signUp",e)}async function fC(t,e){return No(t,"POST","/v1/accounts:signInWithPassword",$s(t,e))}async function dC(t,e){return No(t,"POST","/v1/accounts:signInWithEmailLink",$s(t,e))}async function pC(t,e){return No(t,"POST","/v1/accounts:signInWithEmailLink",$s(t,e))}class mo extends Ph{constructor(e,n,s,r=null){super("password",s),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new mo(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new mo(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pu(e,n,"signInWithPassword",fC);case"emailLink":return dC(e,{email:this._email,oobCode:this._password});default:mn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pu(e,s,"signUpPassword",hC);case"emailLink":return pC(e,{idToken:n,email:this._email,oobCode:this._password});default:mn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ur(t,e){return No(t,"POST","/v1/accounts:signInWithIdp",$s(t,e))}const mC="http://localhost";class fr extends Ph{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new fr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):mn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new fr(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ur(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Ur(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ur(e,n)}buildRequest(){const e={requestUri:mC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ao(n)}return e}}function gC(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _C(t){const e=Ni(Di(t)).link,n=e?Ni(Di(e)).deep_link_id:null,s=Ni(Di(t)).deep_link_id;return(s?Ni(Di(s)).link:null)||s||n||e||t}class kh{constructor(e){const n=Ni(Di(e)),s=n.apiKey??null,r=n.oobCode??null,i=gC(n.mode??null);fe(s&&r&&i,"argument-error"),this.apiKey=s,this.operation=i,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=_C(e);try{return new kh(n)}catch{return null}}}class ri{constructor(){this.providerId=ri.PROVIDER_ID}static credential(e,n){return mo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=kh.parseLink(n);return fe(s,"argument-error"),mo._fromEmailAndCode(e,s.code,s.tenantId)}}ri.PROVIDER_ID="password";ri.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ri.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ry{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Do extends Ry{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class _s extends Do{constructor(){super("facebook.com")}static credential(e){return fr._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _s.credential(e.oauthAccessToken)}catch{return null}}}_s.FACEBOOK_SIGN_IN_METHOD="facebook.com";_s.PROVIDER_ID="facebook.com";class ys extends Do{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return fr._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return ys.credential(n,s)}catch{return null}}}ys.GOOGLE_SIGN_IN_METHOD="google.com";ys.PROVIDER_ID="google.com";class vs extends Do{constructor(){super("github.com")}static credential(e){return fr._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vs.credential(e.oauthAccessToken)}catch{return null}}}vs.GITHUB_SIGN_IN_METHOD="github.com";vs.PROVIDER_ID="github.com";class Es extends Do{constructor(){super("twitter.com")}static credential(e,n){return fr._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Es.credential(n,s)}catch{return null}}}Es.TWITTER_SIGN_IN_METHOD="twitter.com";Es.PROVIDER_ID="twitter.com";async function yC(t,e){return No(t,"POST","/v1/accounts:signUp",$s(t,e))}class dr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await hn._fromIdTokenResponse(e,s,r),o=Sp(s);return new dr({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=Sp(s);return new dr({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function Sp(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Qa extends ns{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,Qa.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new Qa(e,n,s,r)}}function Py(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Qa._fromErrorAndOperation(t,i,e,s):i})}async function vC(t,e,n=!1){const s=await po(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return dr._forOperation(t,"link",s)}async function EC(t,e,n=!1){const{auth:s}=t;if(sn(s.app))return Promise.reject(zn(s));const r="reauthenticate";try{const i=await po(t,Py(s,r,e,t),n);fe(i.idToken,s,"internal-error");const o=bh(i.idToken);fe(o,s,"internal-error");const{sub:c}=o;return fe(t.uid===c,s,"user-mismatch"),dr._forOperation(t,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&mn(s,"user-mismatch"),i}}async function ky(t,e,n=!1){if(sn(t.app))return Promise.reject(zn(t));const s="signIn",r=await Py(t,s,e),i=await dr._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}async function wC(t,e){return ky(gr(t),e)}async function Ny(t){const e=gr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function IC(t,e,n){if(sn(t.app))return Promise.reject(zn(t));const s=gr(t),o=await pu(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yC).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Ny(t),l}),c=await dr._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(c.user),c}function TC(t,e,n){return sn(t.app)?Promise.reject(zn(t)):wC(Ut(t),ri.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Ny(t),s})}function AC(t,e,n,s){return Ut(t).onIdTokenChanged(e,n,s)}function SC(t,e,n){return Ut(t).beforeAuthStateChanged(e,n)}function CC(t,e,n,s){return Ut(t).onAuthStateChanged(e,n,s)}function bC(t){return Ut(t).signOut()}const Ja="__sak";class Dy{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ja,"1"),this.storage.removeItem(Ja),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const RC=1e3,PC=10;class Ly extends Dy{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ty(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,l)=>{this.notifyListeners(o,l)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);zS()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,PC):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},RC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ly.type="LOCAL";const kC=Ly;class Vy extends Dy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Vy.type="SESSION";const Oy=Vy;function NC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class kc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new kc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const c=Array.from(o).map(async u=>u(n.origin,i)),l=await NC(c);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}kc.receivers=[];function Nh(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}class DC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((c,l)=>{const u=Nh("",20);r.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(p){const m=p;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(m.data.response);break;default:clearTimeout(f),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Nn(){return window}function LC(t){Nn().location.href=t}function xy(){return typeof Nn().WorkerGlobalScope<"u"&&typeof Nn().importScripts=="function"}async function VC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function OC(){return navigator?.serviceWorker?.controller||null}function xC(){return xy()?self:null}const My="firebaseLocalStorageDb",MC=1,Ya="firebaseLocalStorage",Fy="fbase_key";class Lo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Nc(t,e){return t.transaction([Ya],e?"readwrite":"readonly").objectStore(Ya)}function FC(){const t=indexedDB.deleteDatabase(My);return new Lo(t).toPromise()}function mu(){const t=indexedDB.open(My,MC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Ya,{keyPath:Fy})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Ya)?e(s):(s.close(),await FC(),e(await mu()))})})}async function Cp(t,e,n){const s=Nc(t,!0).put({[Fy]:e,value:n});return new Lo(s).toPromise()}async function UC(t,e){const n=Nc(t,!1).get(e),s=await new Lo(n).toPromise();return s===void 0?null:s.value}function bp(t,e){const n=Nc(t,!0).delete(e);return new Lo(n).toPromise()}const $C=800,BC=3;class Uy{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mu(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>BC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kc._getInstance(xC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await VC(),!this.activeServiceWorker)return;this.sender=new DC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||OC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mu();return await Cp(e,Ja,"1"),await bp(e,Ja),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Cp(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>UC(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>bp(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=Nc(r,!1).getAll();return new Lo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$C)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Uy.type="LOCAL";const jC=Uy;new ko(3e4,6e4);function HC(t,e){return e?qn(e):(fe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Dh extends Ph{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ur(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ur(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ur(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function WC(t){return ky(t.auth,new Dh(t),t.bypassAuthState)}function qC(t){const{auth:e,user:n}=t;return fe(n,e,"internal-error"),EC(n,new Dh(t),t.bypassAuthState)}async function zC(t){const{auth:e,user:n}=t;return fe(n,e,"internal-error"),vC(n,new Dh(t),t.bypassAuthState)}class $y{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return WC;case"linkViaPopup":case"linkViaRedirect":return zC;case"reauthViaPopup":case"reauthViaRedirect":return qC;default:mn(this.auth,"internal-error")}}resolve(e){Zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const GC=new ko(2e3,1e4);class Nr extends $y{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,Nr.currentPopupAction&&Nr.currentPopupAction.cancel(),Nr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return fe(e,this.auth,"internal-error"),e}async onExecution(){Zn(this.filter.length===1,"Popup operations only handle one event");const e=Nh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(kn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Nr.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(kn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,GC.get())};e()}}Nr.currentPopupAction=null;const KC="pendingRedirect",ga=new Map;class QC extends $y{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=ga.get(this.auth._key());if(!e){try{const s=await JC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}ga.set(this.auth._key(),e)}return this.bypassAuthState||ga.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function JC(t,e){const n=ZC(e),s=XC(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function YC(t,e){ga.set(t._key(),e)}function XC(t){return qn(t._redirectPersistence)}function ZC(t){return ma(KC,t.config.apiKey,t.name)}async function eb(t,e,n=!1){if(sn(t.app))return Promise.reject(zn(t));const s=gr(t),r=HC(s,e),o=await new QC(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}const tb=600*1e3;class nb{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sb(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!By(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(kn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tb&&this.cachedEventUids.clear(),this.cachedEventUids.has(Rp(e))}saveEventToCache(e){this.cachedEventUids.add(Rp(e)),this.lastProcessedEventTime=Date.now()}}function Rp(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function By({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function sb(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return By(t);default:return!1}}async function rb(t,e={}){return Bs(t,"GET","/v1/projects",e)}const ib=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ob=/^https?/;async function ab(t){if(t.config.emulator)return;const{authorizedDomains:e}=await rb(t);for(const n of e)try{if(cb(n))return}catch{}mn(t,"unauthorized-domain")}function cb(t){const e=fu(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!ob.test(n))return!1;if(ib.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}const lb=new ko(3e4,6e4);function Pp(){const t=Nn().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function ub(t){return new Promise((e,n)=>{function s(){Pp(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Pp(),n(kn(t,"network-request-failed"))},timeout:lb.get()})}if(Nn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Nn().gapi?.load)s();else{const r=tC("iframefcb");return Nn()[r]=()=>{gapi.load?s():n(kn(t,"network-request-failed"))},Sy(`${eC()}?onload=${r}`).catch(i=>n(i))}}).catch(e=>{throw _a=null,e})}let _a=null;function hb(t){return _a=_a||ub(t),_a}const fb=new ko(5e3,15e3),db="__/auth/iframe",pb="emulator/auth/iframe",mb={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _b(t){const e=t.config;fe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ch(e,pb):`https://${t.config.authDomain}/${db}`,s={apiKey:e.apiKey,appName:t.name,v:Zr},r=gb.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${Ao(s).slice(1)}`}async function yb(t){const e=await hb(t),n=Nn().gapi;return fe(n,t,"internal-error"),e.open({where:document.body,url:_b(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mb,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=kn(t,"network-request-failed"),c=Nn().setTimeout(()=>{i(o)},fb.get());function l(){Nn().clearTimeout(c),r(s)}s.ping(l).then(l,()=>{i(o)})}))}const vb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Eb=500,wb=600,Ib="_blank",Tb="http://localhost";class kp{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ab(t,e,n,s=Eb,r=wb){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let c="";const l={...vb,width:s.toString(),height:r.toString(),top:i,left:o},u=Ft().toLowerCase();n&&(c=yy(u)?Ib:n),gy(u)&&(e=e||Tb,l.scrollbars="yes");const f=Object.entries(l).reduce((m,[_,b])=>`${m}${_}=${b},`,"");if(qS(u)&&c!=="_self")return Sb(e||"",c),new kp(null);const p=window.open(e||"",c,f);fe(p,t,"popup-blocked");try{p.focus()}catch{}return new kp(p)}function Sb(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const Cb="__/auth/handler",bb="emulator/auth/handler",Rb=encodeURIComponent("fac");async function Np(t,e,n,s,r,i){fe(t.config.authDomain,t,"auth-domain-config-required"),fe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Zr,eventId:r};if(e instanceof Ry){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",WI(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof Do){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const l=await t._getAppCheckToken(),u=l?`#${Rb}=${encodeURIComponent(l)}`:"";return`${Pb(t)}?${Ao(c).slice(1)}${u}`}function Pb({config:t}){return t.emulator?Ch(t,bb):`https://${t.authDomain}/${Cb}`}const Il="webStorageSupport";class kb{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Oy,this._completeRedirectFn=eb,this._overrideRedirectResult=YC}async _openPopup(e,n,s,r){Zn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await Np(e,n,s,fu(),r);return Ab(e,i,Nh())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await Np(e,n,s,fu(),r);return LC(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(Zn(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await yb(e),s=new nb(e);return n.register("authEvent",r=>(fe(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Il,{type:Il},r=>{const i=r?.[0]?.[Il];i!==void 0&&n(!!i),mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ab(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ty()||_y()||Rh()}}const Nb=kb;var Dp="@firebase/auth",Lp="1.11.1";class Db{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Lb(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Vb(t){jr(new cr("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=s.options;fe(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ay(t)},u=new YS(s,r,i,l);return aC(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),jr(new cr("auth-internal",e=>{const n=gr(e.getProvider("auth").getImmediate());return(s=>new Db(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cs(Dp,Lp,Lb(t)),Cs(Dp,Lp,"esm2020")}const Ob=300,xb=Cg("authIdTokenMaxAge")||Ob;let Vp=null;const Mb=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>xb)return;const r=n?.token;Vp!==r&&(Vp=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Fb(t=Dg()){const e=zu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=oC(t,{popupRedirectResolver:Nb,persistence:[jC,kC,Oy]}),s=Cg("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=Mb(i.toString());SC(n,o,()=>o(n.currentUser)),AC(n,c=>o(c))}}const r=Ag("auth");return r&&cC(n,`http://${r}`),n}function Ub(){return document.getElementsByTagName("head")?.[0]??document}XS({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=kn("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",Ub().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Vb("Browser");const Op=async function(t){const e=Ha(qa,"users",t),n=await vS(e);return n.exists()?n.data():null},$b=async function(t,e){await wS(Ha(qa,"users",e),{name:t.user_name||"",email:t.email||"",favorites:[],api_key:t.api_key||""})},Tl=function(t){switch(t){case"auth/wrong-password":return" ";case"auth/internal-error":return" ";case"auth/invalid-email":return" email";case"auth/user-not-found":return"  ";case"auth/weak-password":return"   6 ";default:return" "}},Bb=[""," ","","","","-","","","","",""," ","-","","",""],bi=(t,e)=>{const n=Number(e?.kinopoiskId||e?.filmId||e?.id),s={...e,sortTime:Date.now()},r=t.filter(i=>Number(i?.kinopoiskId||i?.filmId||i?.id)!==n);return[s,...r]},ra=(t,e)=>{const n=Number(e);return t.filter(s=>Number(s?.kinopoiskId||s?.filmId||s?.id)!==n)},jb=t=>t.map(e=>e?.country||e||""),Hb=t=>t.nameRu||t.nameEn||t.nameOriginal||t?.name||" ",Wb=t=>t.map(e=>e?.genre||e||""),qb=t=>{const e=t?.rating||t?.ratingKinopoisk||t?.ratingImdb||t?.rating;return e?typeof e=="number"?e.toFixed(1):e:""},zb=t=>{switch(t.type){case"FILM":return"";case"TV_SERIES":return"";case"MINI_SERIES":return"-";case"TV_SHOW":return"-";default:return t.type}},jy=t=>({id:Number(t.kinopoiskId||t.filmId||t.id),name:Hb(t),description:t?.description||" ",year:t?.year||"",image:t.posterUrlPreview||t.posterUrl||t.image||"",rating:qb(t),countries:jb(t?.countries||[]),genres:Wb(t?.genres||[]),type:zb(t)}),mt=t=>t.map(jy),Gb="404dc583-7efc-4c93-8f21-a782f977b9e7",Hy="https://kinopoiskapiunofficial.tech/api/",Kb="TOP_POPULAR_ALL",Vo=`${Hy}v2.2/films`,Qb=`${Hy}v2.1/films`,ii=async(t,e="Something went wrong")=>{const n=await fetch(t,{headers:{"X-API-KEY":Gb,"Content-Type":"application/json"}});if(!n.ok)throw new Error(e);return await n.json()},Jb=async()=>await ii(`${Vo}/filters`),oi=async t=>{const e=await ii(`${Vo}/${t}`,"Error load film info");return jy(e)},Yb=async t=>{const e=await ii(`${Vo}/${t}/similars`);return mt(e.items||[])||[]},Xb=async t=>{const e=await ii(`${Qb}/${t}/sequels_and_prequels`,"Not found");return mt(e.items||[])},Zb=async(t=1)=>{const e=new URL(`${Vo}/collections`);e.searchParams.set("type",Kb),e.searchParams.set("page",t);const n=await ii(e.toString(),"Error load collections");return{...n,items:mt(n.items)||[]}},eR=async t=>{const e=new URL(Vo);Object.entries(t).forEach(([s,r])=>{e.searchParams.set(s,r)});const n=await ii(e.toString(),"Error load search");return{...n,items:mt(n.items)||[]}},xe=gI("filmStore",{state:()=>({user:null,apiKey:"404dc583-7efc-4c93-8f21-a782f977b9e7",apiAloha:"e7b61f129f4a392ac4bf6726a9dd6a",apiHDBV:"8a22f8e7684404c3815e3ffa940f00a0",auth:Fb(),errorMessage:"",pageNum:1,limit:20,genreIdStore:null,genreListStore:[],searchQueryStore:"",filters:null,filmPageId:0,favorites:[],currentFocusIndex:-1,films:[],focusIds:{},isShowLastSearchList:!1,lastSearchList:[],lastViews:[],watchingList:[],watchList:[],waitingList:[],skippedIds:new Set}),getters:{filterGenres(){if(!this.genreListStore.length)return[];this.genreListStore=this.genreListStore.filter(t=>{if(Bb.indexOf(t.genre)===-1)return t})},favoriteList(){return this.favorites}},actions:{setGenreId(t){this.genreIdStore=t},setFilmPageId(t){this.filmPageId=t},setShowLastSearchList(t){this.isShowLastSearchList=t},async getGenreList(){if(localStorage.getItem("genres"))return this.genreListStore=JSON.parse(localStorage.getItem("genres")),this.genreListStore;try{const t=await Jb();return this.filters=t,this.genreListStore=t.genres,this.filterGenres,localStorage.setItem("genres",JSON.stringify(this.genreListStore)),this.genreListStore}catch(t){console.error("Error load genres",t)}},async addFavorite(t){if(!(!this.user||!t))try{const e=await this.safeUpdateUserData("favorites",n=>bi(n,t));e&&(this.favorites=mt(e||[]))}catch(e){console.warn("   : "+e)}},async removeFavorite(t){if(!(!this.user||!t))try{const e=await this.safeUpdateUserData("favorites",n=>ra(n,t));e&&(this.favorites=mt(e||[]))}catch(e){console.warn("   : "+e)}},async addLastSearchList(t){if(!(!t||!this.user))try{const e=await this.safeUpdateUserData("lastSearchList",n=>{const s=n.filter(r=>r.value.toLowerCase()!==t.toLowerCase());return[{id:Date.now(),value:t},...s].slice(0,30)});e&&(this.lastSearchList=e)}catch(e){console.error("   : "+e)}},async addLastViews(t){if(!(!t||!this.user))try{const e=await this.safeUpdateUserData("lastViews",n=>bi(n,t));e&&(this.lastViews=mt(e.slice(0,40)))}catch(e){console.error("    : "+e)}},async addSkip(t){if(!(!this.user||!t))try{const e=await this.safeUpdateUserData("skippedIds",n=>{const s=new Set(n);return s.add(t),Array.from(s).slice(0,100)});e&&(this.skippedIds=new Set(e))}catch(e){console.error("   : "+e)}},async removeSkip(t){if(!(!this.user||!t))try{const e=await this.safeUpdateUserData("skippedIds",n=>{const s=new Set(n);return s.delete(t),Array.from(s)});e&&(this.skippedIds=new Set(e))}catch(e){console.error("   : "+e)}},async addWatching(t){if(!(!t||!this.user))try{const e=await this.safeUpdateUserData("watchingList",n=>bi(n,t));e&&(this.watchingList=e)}catch(e){console.error("    : "+e)}},async removeWatching(t){if(!(!this.user||!t))try{const e=await this.safeUpdateUserData("watchingList",n=>ra(n,t));e&&(this.watchingList=mt(e||[]))}catch(e){console.warn("    : "+e)}},async addWatchList(t){if(!(!t||!this.user))try{const e=await this.safeUpdateUserData("watchList",n=>bi(n,t));e&&(this.watchList=e)}catch(e){console.error("    : "+e)}},async removeWatchList(t){if(!(!this.user||!t))try{const e=await this.safeUpdateUserData("watchList",n=>ra(n,t));e&&(this.watchList=mt(e||[]))}catch(e){console.warn("    : "+e)}},async addWaitList(t){if(!(!t||!this.user))try{const e=await this.safeUpdateUserData("waitingList",n=>bi(n,t));e&&(this.waitingList=e)}catch(e){console.error("    : "+e)}},async removeWaitList(t){if(!(!this.user||!t))try{const e=await this.safeUpdateUserData("waitingList",n=>ra(n,t));e&&(this.waitingList=mt(e||[]))}catch(e){console.warn("    : "+e)}},isSkipped(t){return this.skippedIds.has(t)},async authWithEmailAndPassword(t){await TC(this.auth,t.email,t.password).then(()=>{this.getUserData()}).catch(e=>{this.errorMessage=Tl(e.code)})},async createAuthWithEmailAndPassword(t){await IC(this.auth,t.email,t.password).then(async e=>{this.user=await e.user,await $b(t,this.user.uid),await this.getUserData()}).catch(e=>{this.errorMessage=Tl(e.code)})},async editAuthNameOrApiKey(t){try{if(this.user){const e=Ha(qa,"users",this.user.uid);await mp(e,{name:t.userName||"",api_key:t.apiKey||this.apiKey})}await this.getUserData()}catch(e){this.errorMessage=Tl(e.code)}},async authLogout(){bC(this.auth).then(async()=>{this.removeUserData()}).catch(t=>{alert(" logout: "+t)})},async authChange(t){CC(this.auth,async e=>{e?(this.user=e,this.getUserData(t)):this.removeUserData(t)})},async getUserData(t){let e=await Op(this.user.uid);this.user.name=e?.name||"",this.user.email=e?.email??"",this.favorites=mt(e?.favorites??[]).sort((n,s)=>(s?.sortTime??0)-(n?.sortTime??0)),this.watchingList=mt(e?.watchingList??[]).sort((n,s)=>(s?.sortTime??0)-(n?.sortTime??0)),this.watchList=mt(e?.watchList??[]).sort((n,s)=>(s?.sortTime??0)-(n?.sortTime??0)),this.waitingList=mt(e?.waitingList??[]).sort((n,s)=>(s?.sortTime??0)-(n?.sortTime??0)),this.lastSearchList=(e?.lastSearchList||[]).slice(0,30),this.lastViews=mt(e?.lastViews??[]).slice(0,40).sort((n,s)=>(s?.sortTime??0)-(n?.sortTime??0)),this.skippedIds=new Set((e?.skippedIds??[]).slice(0,100)),e?.api_key&&(this.apiKey=e.api_key),typeof t=="function"&&t()},removeUserData(t){this.user=null,this.favorites=[],typeof t=="function"&&t()},searchQueryWithGenre(){let t={};return this.searchQueryStore&&(t.q=this.searchQueryStore),this.genreIdStore&&(t.genres=this.genreIdStore),t},setCurrentFocus(t){this.currentFocusIndex=t},setFocusIds(t){this.focusIds={...this.focusIds,[t]:this.currentFocusIndex}},setMountedCurrentFocus(t){this.setCurrentFocus(this.focusIds[t])},async searchPageTitle(){let t=this.genreIdStore?await this.genreListStore.filter(e=>+e.id==+this.genreIdStore)[0].genre:null;return this.searchQueryStore&&this.genreIdStore?`   "${this.searchQueryStore}",  "${t}"`:this.searchQueryStore&&!this.genreIdStore?`   "${this.searchQueryStore}"`:this.genreIdStore&&!this.searchQueryStore?`   "${t}"`:"    "},async safeUpdateUserData(t,e){if(!this.user)return console.warn(" "),null;try{const s=(await Op(this.user.uid))?.[t]||[],r=e(s),i=Ha(qa,"users",this.user.uid);return await mp(i,{[t]:r}),r}catch(n){throw console.error(`  ${t}:`,n),n}}}});const kr=typeof document<"u";function Wy(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function tR(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Wy(t.default)}const Le=Object.assign;function Al(t,e){const n={};for(const s in e){const r=e[s];n[s]=gn(r)?r.map(t):t(r)}return n}const Yi=()=>{},gn=Array.isArray;function xp(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}const qy=/#/g,nR=/&/g,sR=/\//g,rR=/=/g,iR=/\?/g,zy=/\+/g,oR=/%5B/g,aR=/%5D/g,Gy=/%5E/g,cR=/%60/g,Ky=/%7B/g,lR=/%7C/g,Qy=/%7D/g,uR=/%20/g;function Lh(t){return t==null?"":encodeURI(""+t).replace(lR,"|").replace(oR,"[").replace(aR,"]")}function hR(t){return Lh(t).replace(Ky,"{").replace(Qy,"}").replace(Gy,"^")}function gu(t){return Lh(t).replace(zy,"%2B").replace(uR,"+").replace(qy,"%23").replace(nR,"%26").replace(cR,"`").replace(Ky,"{").replace(Qy,"}").replace(Gy,"^")}function fR(t){return gu(t).replace(rR,"%3D")}function dR(t){return Lh(t).replace(qy,"%23").replace(iR,"%3F")}function pR(t){return dR(t).replace(sR,"%2F")}function go(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const mR=/\/$/,gR=t=>t.replace(mR,"");function Sl(t,e,n="/"){let s,r={},i="",o="";const c=e.indexOf("#");let l=e.indexOf("?");return l=c>=0&&l>c?-1:l,l>=0&&(s=e.slice(0,l),i=e.slice(l,c>0?c:e.length),r=t(i.slice(1))),c>=0&&(s=s||e.slice(0,c),o=e.slice(c,e.length)),s=ER(s??e,n),{fullPath:s+i+o,path:s,query:r,hash:go(o)}}function _R(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Mp(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function yR(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&Qr(e.matched[s],n.matched[r])&&Jy(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Qr(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Jy(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!vR(t[n],e[n]))return!1;return!0}function vR(t,e){return gn(t)?Fp(t,e):gn(e)?Fp(e,t):t===e}function Fp(t,e){return gn(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function ER(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,c;for(o=0;o<s.length;o++)if(c=s[o],c!==".")if(c==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const hs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let _u=(function(t){return t.pop="pop",t.push="push",t})({}),Cl=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function wR(t){if(!t)if(kr){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),gR(t)}const IR=/^[^#]+#/;function TR(t,e){return t.replace(IR,"#")+e}function AR(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const Dc=()=>({left:window.scrollX,top:window.scrollY});function SR(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=AR(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Up(t,e){return(history.state?history.state.position-e:-1)+t}const yu=new Map;function CR(t,e){yu.set(t,e)}function bR(t){const e=yu.get(t);return yu.delete(t),e}function RR(t){return typeof t=="string"||t&&typeof t=="object"}function Yy(t){return typeof t=="string"||typeof t=="symbol"}let tt=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const Xy=Symbol("");tt.MATCHER_NOT_FOUND+"",tt.NAVIGATION_GUARD_REDIRECT+"",tt.NAVIGATION_ABORTED+"",tt.NAVIGATION_CANCELLED+"",tt.NAVIGATION_DUPLICATED+"";function Jr(t,e){return Le(new Error,{type:t,[Xy]:!0},e)}function Fn(t,e){return t instanceof Error&&Xy in t&&(e==null||!!(t.type&e))}const PR=["params","query","hash"];function kR(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of PR)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function NR(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const r=n[s].replace(zy," "),i=r.indexOf("="),o=go(i<0?r:r.slice(0,i)),c=i<0?null:go(r.slice(i+1));if(o in e){let l=e[o];gn(l)||(l=e[o]=[l]),l.push(c)}else e[o]=c}return e}function $p(t){let e="";for(let n in t){const s=t[n];if(n=fR(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(gn(s)?s.map(r=>r&&gu(r)):[s&&gu(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function DR(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=gn(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const LR=Symbol(""),Bp=Symbol(""),Lc=Symbol(""),Vh=Symbol(""),vu=Symbol("");function Ri(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function ms(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((c,l)=>{const u=m=>{m===!1?l(Jr(tt.NAVIGATION_ABORTED,{from:n,to:e})):m instanceof Error?l(m):RR(m)?l(Jr(tt.NAVIGATION_GUARD_REDIRECT,{from:e,to:m})):(o&&s.enterCallbacks[r]===o&&typeof m=="function"&&o.push(m),c())},f=i(()=>t.call(s&&s.instances[r],e,n,u));let p=Promise.resolve(f);t.length<3&&(p=p.then(u)),p.catch(m=>l(m))})}function bl(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const c in o.components){let l=o.components[c];if(!(e!=="beforeRouteEnter"&&!o.instances[c]))if(Wy(l)){const u=(l.__vccOpts||l)[e];u&&i.push(ms(u,n,s,o,c,r))}else{let u=l();i.push(()=>u.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${c}" at "${o.path}"`);const p=tR(f)?f.default:f;o.mods[c]=f,o.components[c]=p;const m=(p.__vccOpts||p)[e];return m&&ms(m,n,s,o,c,r)()}))}}return i}function VR(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const c=e.matched[o];c&&(t.matched.find(u=>Qr(u,c))?s.push(c):n.push(c));const l=t.matched[o];l&&(e.matched.find(u=>Qr(u,l))||r.push(l))}return[n,s,r]}let OR=()=>location.protocol+"//"+location.host;function Zy(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let o=r.includes(t.slice(i))?t.slice(i).length:1,c=r.slice(o);return c[0]!=="/"&&(c="/"+c),Mp(c,"")}return Mp(n,t)+s+r}function xR(t,e,n,s){let r=[],i=[],o=null;const c=({state:m})=>{const _=Zy(t,location),b=n.value,N=e.value;let k=0;if(m){if(n.value=_,e.value=m,o&&o===b){o=null;return}k=N?m.position-N.position:0}else s(_);r.forEach(H=>{H(n.value,b,{delta:k,type:_u.pop,direction:k?k>0?Cl.forward:Cl.back:Cl.unknown})})};function l(){o=n.value}function u(m){r.push(m);const _=()=>{const b=r.indexOf(m);b>-1&&r.splice(b,1)};return i.push(_),_}function f(){if(document.visibilityState==="hidden"){const{history:m}=window;if(!m.state)return;m.replaceState(Le({},m.state,{scroll:Dc()}),"")}}function p(){for(const m of i)m();i=[],window.removeEventListener("popstate",c),window.removeEventListener("pagehide",f),document.removeEventListener("visibilitychange",f)}return window.addEventListener("popstate",c),window.addEventListener("pagehide",f),document.addEventListener("visibilitychange",f),{pauseListeners:l,listen:u,destroy:p}}function jp(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?Dc():null}}function MR(t){const{history:e,location:n}=window,s={value:Zy(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,f){const p=t.indexOf("#"),m=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+l:OR()+t+l;try{e[f?"replaceState":"pushState"](u,"",m),r.value=u}catch(_){console.error(_),n[f?"replace":"assign"](m)}}function o(l,u){i(l,Le({},e.state,jp(r.value.back,l,r.value.forward,!0),u,{position:r.value.position}),!0),s.value=l}function c(l,u){const f=Le({},r.value,e.state,{forward:l,scroll:Dc()});i(f.current,f,!0),i(l,Le({},jp(s.value,l,null),{position:f.position+1},u),!1),s.value=l}return{location:s,state:r,push:c,replace:o}}function FR(t){t=wR(t);const e=MR(t),n=xR(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=Le({location:"",base:t,go:s,createHref:TR.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}let nr=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var lt=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(lt||{});const UR={type:nr.Static,value:""},$R=/[a-zA-Z0-9_]/;function BR(t){if(!t)return[[]];if(t==="/")return[[UR]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(_){throw new Error(`ERR (${n})/"${u}": ${_}`)}let n=lt.Static,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let c=0,l,u="",f="";function p(){u&&(n===lt.Static?i.push({type:nr.Static,value:u}):n===lt.Param||n===lt.ParamRegExp||n===lt.ParamRegExpEnd?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:nr.Param,value:u,regexp:f,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function m(){u+=l}for(;c<t.length;){if(l=t[c++],l==="\\"&&n!==lt.ParamRegExp){s=n,n=lt.EscapeNext;continue}switch(n){case lt.Static:l==="/"?(u&&p(),o()):l===":"?(p(),n=lt.Param):m();break;case lt.EscapeNext:m(),n=s;break;case lt.Param:l==="("?n=lt.ParamRegExp:$R.test(l)?m():(p(),n=lt.Static,l!=="*"&&l!=="?"&&l!=="+"&&c--);break;case lt.ParamRegExp:l===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+l:n=lt.ParamRegExpEnd:f+=l;break;case lt.ParamRegExpEnd:p(),n=lt.Static,l!=="*"&&l!=="?"&&l!=="+"&&c--,f="";break;default:e("Unknown state");break}}return n===lt.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),p(),o(),r}const Hp="[^/]+?",jR={sensitive:!1,strict:!1,start:!0,end:!0};var jt=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(jt||{});const HR=/[.+*?^${}()[\]/\\]/g;function WR(t,e){const n=Le({},jR,e),s=[];let r=n.start?"^":"";const i=[];for(const u of t){const f=u.length?[]:[jt.Root];n.strict&&!u.length&&(r+="/");for(let p=0;p<u.length;p++){const m=u[p];let _=jt.Segment+(n.sensitive?jt.BonusCaseSensitive:0);if(m.type===nr.Static)p||(r+="/"),r+=m.value.replace(HR,"\\$&"),_+=jt.Static;else if(m.type===nr.Param){const{value:b,repeatable:N,optional:k,regexp:H}=m;i.push({name:b,repeatable:N,optional:k});const D=H||Hp;if(D!==Hp){_+=jt.BonusCustomRegExp;try{`${D}`}catch(M){throw new Error(`Invalid custom RegExp for param "${b}" (${D}): `+M.message)}}let V=N?`((?:${D})(?:/(?:${D}))*)`:`(${D})`;p||(V=k&&u.length<2?`(?:/${V})`:"/"+V),k&&(V+="?"),r+=V,_+=jt.Dynamic,k&&(_+=jt.BonusOptional),N&&(_+=jt.BonusRepeatable),D===".*"&&(_+=jt.BonusWildcard)}f.push(_)}s.push(f)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=jt.BonusStrict}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function c(u){const f=u.match(o),p={};if(!f)return null;for(let m=1;m<f.length;m++){const _=f[m]||"",b=i[m-1];p[b.name]=_&&b.repeatable?_.split("/"):_}return p}function l(u){let f="",p=!1;for(const m of t){(!p||!f.endsWith("/"))&&(f+="/"),p=!1;for(const _ of m)if(_.type===nr.Static)f+=_.value;else if(_.type===nr.Param){const{value:b,repeatable:N,optional:k}=_,H=b in u?u[b]:"";if(gn(H)&&!N)throw new Error(`Provided param "${b}" is an array but it is not repeatable (* or + modifiers)`);const D=gn(H)?H.join("/"):H;if(!D)if(k)m.length<2&&(f.endsWith("/")?f=f.slice(0,-1):p=!0);else throw new Error(`Missing required param "${b}"`);f+=D}}return f||"/"}return{re:o,score:s,keys:i,parse:c,stringify:l}}function qR(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===jt.Static+jt.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===jt.Static+jt.Segment?1:-1:0}function ev(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=qR(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(Wp(s))return 1;if(Wp(r))return-1}return r.length-s.length}function Wp(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const zR={strict:!1,end:!0,sensitive:!1};function GR(t,e,n){const s=WR(BR(t.path),n),r=Le(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function KR(t,e){const n=[],s=new Map;e=xp(zR,e);function r(p){return s.get(p)}function i(p,m,_){const b=!_,N=zp(p);N.aliasOf=_&&_.record;const k=xp(e,p),H=[N];if("alias"in p){const M=typeof p.alias=="string"?[p.alias]:p.alias;for(const Z of M)H.push(zp(Le({},N,{components:_?_.record.components:N.components,path:Z,aliasOf:_?_.record:N})))}let D,V;for(const M of H){const{path:Z}=M;if(m&&Z[0]!=="/"){const ie=m.record.path,S=ie[ie.length-1]==="/"?"":"/";M.path=m.record.path+(Z&&S+Z)}if(D=GR(M,m,k),_?_.alias.push(D):(V=V||D,V!==D&&V.alias.push(D),b&&p.name&&!Gp(D)&&o(p.name)),tv(D)&&l(D),N.children){const ie=N.children;for(let S=0;S<ie.length;S++)i(ie[S],D,_&&_.children[S])}_=_||D}return V?()=>{o(V)}:Yi}function o(p){if(Yy(p)){const m=s.get(p);m&&(s.delete(p),n.splice(n.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=n.indexOf(p);m>-1&&(n.splice(m,1),p.record.name&&s.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function c(){return n}function l(p){const m=YR(p,n);n.splice(m,0,p),p.record.name&&!Gp(p)&&s.set(p.record.name,p)}function u(p,m){let _,b={},N,k;if("name"in p&&p.name){if(_=s.get(p.name),!_)throw Jr(tt.MATCHER_NOT_FOUND,{location:p});k=_.record.name,b=Le(qp(m.params,_.keys.filter(V=>!V.optional).concat(_.parent?_.parent.keys.filter(V=>V.optional):[]).map(V=>V.name)),p.params&&qp(p.params,_.keys.map(V=>V.name))),N=_.stringify(b)}else if(p.path!=null)N=p.path,_=n.find(V=>V.re.test(N)),_&&(b=_.parse(N),k=_.record.name);else{if(_=m.name?s.get(m.name):n.find(V=>V.re.test(m.path)),!_)throw Jr(tt.MATCHER_NOT_FOUND,{location:p,currentLocation:m});k=_.record.name,b=Le({},m.params,p.params),N=_.stringify(b)}const H=[];let D=_;for(;D;)H.unshift(D.record),D=D.parent;return{name:k,path:N,params:b,matched:H,meta:JR(H)}}t.forEach(p=>i(p));function f(){n.length=0,s.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:f,getRoutes:c,getRecordMatcher:r}}function qp(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function zp(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:QR(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function QR(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function Gp(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function JR(t){return t.reduce((e,n)=>Le(e,n.meta),{})}function YR(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;ev(t,e[i])<0?s=i:n=i+1}const r=XR(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function XR(t){let e=t;for(;e=e.parent;)if(tv(e)&&ev(t,e)===0)return e}function tv({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Kp(t){const e=bt(Lc),n=bt(Vh),s=we(()=>{const l=me(t.to);return e.resolve(l)}),r=we(()=>{const{matched:l}=s.value,{length:u}=l,f=l[u-1],p=n.matched;if(!f||!p.length)return-1;const m=p.findIndex(Qr.bind(null,f));if(m>-1)return m;const _=Qp(l[u-2]);return u>1&&Qp(f)===_&&p[p.length-1].path!==_?p.findIndex(Qr.bind(null,l[u-2])):m}),i=we(()=>r.value>-1&&s2(n.params,s.value.params)),o=we(()=>r.value>-1&&r.value===n.matched.length-1&&Jy(n.params,s.value.params));function c(l={}){if(n2(l)){const u=e[me(t.replace)?"replace":"push"](me(t.to)).catch(Yi);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:s,href:we(()=>s.value.href),isActive:i,isExactActive:o,navigate:c}}function ZR(t){return t.length===1?t[0]:t}const e2=jm({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Kp,setup(t,{slots:e}){const n=Eo(Kp(t)),{options:s}=bt(Lc),r=we(()=>({[Jp(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Jp(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&ZR(e.default(n));return t.custom?i:Hu("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),t2=e2;function n2(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function s2(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!gn(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function Qp(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Jp=(t,e,n)=>t??e??n,r2=jm({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=bt(vu),r=we(()=>t.route||s.value),i=bt(Bp,0),o=we(()=>{let u=me(i);const{matched:f}=r.value;let p;for(;(p=f[u])&&!p.components;)u++;return u}),c=we(()=>r.value.matched[o.value]);ia(Bp,we(()=>o.value+1)),ia(LR,c),ia(vu,r);const l=pe();return dn(()=>[l.value,c.value,t.name],([u,f,p],[m,_,b])=>{f&&(f.instances[p]=u,_&&_!==f&&u&&u===m&&(f.leaveGuards.size||(f.leaveGuards=_.leaveGuards),f.updateGuards.size||(f.updateGuards=_.updateGuards))),u&&f&&(!_||!Qr(f,_)||!m)&&(f.enterCallbacks[p]||[]).forEach(N=>N(u))},{flush:"post"}),()=>{const u=r.value,f=t.name,p=c.value,m=p&&p.components[f];if(!m)return Yp(n.default,{Component:m,route:u});const _=p.props[f],b=_?_===!0?u.params:typeof _=="function"?_(u):_:null,k=Hu(m,Le({},b,e,{onVnodeUnmounted:H=>{H.component.isUnmounted&&(p.instances[f]=null)},ref:l}));return Yp(n.default,{Component:k,route:u})||k}}});function Yp(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const i2=r2;function o2(t){const e=KR(t.routes,t),n=t.parseQuery||NR,s=t.stringifyQuery||$p,r=t.history,i=Ri(),o=Ri(),c=Ri(),l=hE(hs);let u=hs;kr&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=Al.bind(null,U=>""+U),p=Al.bind(null,pR),m=Al.bind(null,go);function _(U,te){let X,oe;return Yy(U)?(X=e.getRecordMatcher(U),oe=te):oe=U,e.addRoute(oe,X)}function b(U){const te=e.getRecordMatcher(U);te&&e.removeRoute(te)}function N(){return e.getRoutes().map(U=>U.record)}function k(U){return!!e.getRecordMatcher(U)}function H(U,te){if(te=Le({},te||l.value),typeof U=="string"){const R=Sl(n,U,te.path),$=e.resolve({path:R.path},te),j=r.createHref(R.fullPath);return Le(R,$,{params:m($.params),hash:go(R.hash),redirectedFrom:void 0,href:j})}let X;if(U.path!=null)X=Le({},U,{path:Sl(n,U.path,te.path).path});else{const R=Le({},U.params);for(const $ in R)R[$]==null&&delete R[$];X=Le({},U,{params:p(R)}),te.params=p(te.params)}const oe=e.resolve(X,te),Te=U.hash||"";oe.params=f(m(oe.params));const w=_R(s,Le({},U,{hash:hR(Te),path:oe.path})),C=r.createHref(w);return Le({fullPath:w,hash:Te,query:s===$p?DR(U.query):U.query||{}},oe,{redirectedFrom:void 0,href:C})}function D(U){return typeof U=="string"?Sl(n,U,l.value.path):Le({},U)}function V(U,te){if(u!==U)return Jr(tt.NAVIGATION_CANCELLED,{from:te,to:U})}function M(U){return S(U)}function Z(U){return M(Le(D(U),{replace:!0}))}function ie(U,te){const X=U.matched[U.matched.length-1];if(X&&X.redirect){const{redirect:oe}=X;let Te=typeof oe=="function"?oe(U,te):oe;return typeof Te=="string"&&(Te=Te.includes("?")||Te.includes("#")?Te=D(Te):{path:Te},Te.params={}),Le({query:U.query,hash:U.hash,params:Te.path!=null?{}:U.params},Te)}}function S(U,te){const X=u=H(U),oe=l.value,Te=U.state,w=U.force,C=U.replace===!0,R=ie(X,oe);if(R)return S(Le(D(R),{state:typeof R=="object"?Le({},Te,R.state):Te,force:w,replace:C}),te||X);const $=X;$.redirectedFrom=te;let j;return!w&&yR(s,oe,X)&&(j=Jr(tt.NAVIGATION_DUPLICATED,{to:$,from:oe}),Kt(oe,oe,!0,!1)),(j?Promise.resolve(j):I($,oe)).catch(F=>Fn(F)?Fn(F,tt.NAVIGATION_GUARD_REDIRECT)?F:yn(F):Re(F,$,oe)).then(F=>{if(F){if(Fn(F,tt.NAVIGATION_GUARD_REDIRECT))return S(Le({replace:C},D(F.to),{state:typeof F.to=="object"?Le({},Te,F.to.state):Te,force:w}),te||$)}else F=T($,oe,!0,C,Te);return A($,oe,F),F})}function v(U,te){const X=V(U,te);return X?Promise.reject(X):Promise.resolve()}function y(U){const te=cn.values().next().value;return te&&typeof te.runWithContext=="function"?te.runWithContext(U):U()}function I(U,te){let X;const[oe,Te,w]=VR(U,te);X=bl(oe.reverse(),"beforeRouteLeave",U,te);for(const R of oe)R.leaveGuards.forEach($=>{X.push(ms($,U,te))});const C=v.bind(null,U,te);return X.push(C),Pt(X).then(()=>{X=[];for(const R of i.list())X.push(ms(R,U,te));return X.push(C),Pt(X)}).then(()=>{X=bl(Te,"beforeRouteUpdate",U,te);for(const R of Te)R.updateGuards.forEach($=>{X.push(ms($,U,te))});return X.push(C),Pt(X)}).then(()=>{X=[];for(const R of w)if(R.beforeEnter)if(gn(R.beforeEnter))for(const $ of R.beforeEnter)X.push(ms($,U,te));else X.push(ms(R.beforeEnter,U,te));return X.push(C),Pt(X)}).then(()=>(U.matched.forEach(R=>R.enterCallbacks={}),X=bl(w,"beforeRouteEnter",U,te,y),X.push(C),Pt(X))).then(()=>{X=[];for(const R of o.list())X.push(ms(R,U,te));return X.push(C),Pt(X)}).catch(R=>Fn(R,tt.NAVIGATION_CANCELLED)?R:Promise.reject(R))}function A(U,te,X){c.list().forEach(oe=>y(()=>oe(U,te,X)))}function T(U,te,X,oe,Te){const w=V(U,te);if(w)return w;const C=te===hs,R=kr?history.state:{};X&&(oe||C?r.replace(U.fullPath,Le({scroll:C&&R&&R.scroll},Te)):r.push(U.fullPath,Te)),l.value=U,Kt(U,te,X,C),yn()}let E;function be(){E||(E=r.listen((U,te,X)=>{if(!ln.listening)return;const oe=H(U),Te=ie(oe,ln.currentRoute.value);if(Te){S(Le(Te,{replace:!0,force:!0}),oe).catch(Yi);return}u=oe;const w=l.value;kr&&CR(Up(w.fullPath,X.delta),Dc()),I(oe,w).catch(C=>Fn(C,tt.NAVIGATION_ABORTED|tt.NAVIGATION_CANCELLED)?C:Fn(C,tt.NAVIGATION_GUARD_REDIRECT)?(S(Le(D(C.to),{force:!0}),oe).then(R=>{Fn(R,tt.NAVIGATION_ABORTED|tt.NAVIGATION_DUPLICATED)&&!X.delta&&X.type===_u.pop&&r.go(-1,!1)}).catch(Yi),Promise.reject()):(X.delta&&r.go(-X.delta,!1),Re(C,oe,w))).then(C=>{C=C||T(oe,w,!1),C&&(X.delta&&!Fn(C,tt.NAVIGATION_CANCELLED)?r.go(-X.delta,!1):X.type===_u.pop&&Fn(C,tt.NAVIGATION_ABORTED|tt.NAVIGATION_DUPLICATED)&&r.go(-1,!1)),A(oe,w,C)}).catch(Yi)}))}let Je=Ri(),Me=Ri(),ve;function Re(U,te,X){yn(U);const oe=Me.list();return oe.length?oe.forEach(Te=>Te(U,te,X)):console.error(U),Promise.reject(U)}function Wt(){return ve&&l.value!==hs?Promise.resolve():new Promise((U,te)=>{Je.add([U,te])})}function yn(U){return ve||(ve=!U,be(),Je.list().forEach(([te,X])=>U?X(U):te()),Je.reset()),U}function Kt(U,te,X,oe){const{scrollBehavior:Te}=t;if(!kr||!Te)return Promise.resolve();const w=!X&&bR(Up(U.fullPath,0))||(oe||!X)&&history.state&&history.state.scroll||null;return Vu().then(()=>Te(U,te,w)).then(C=>C&&SR(C)).catch(C=>Re(C,U,te))}const vt=U=>r.go(U);let On;const cn=new Set,ln={currentRoute:l,listening:!0,addRoute:_,removeRoute:b,clearRoutes:e.clearRoutes,hasRoute:k,getRoutes:N,resolve:H,options:t,push:M,replace:Z,go:vt,back:()=>vt(-1),forward:()=>vt(1),beforeEach:i.add,beforeResolve:o.add,afterEach:c.add,onError:Me.add,isReady:Wt,install(U){U.component("RouterLink",t2),U.component("RouterView",i2),U.config.globalProperties.$router=ln,Object.defineProperty(U.config.globalProperties,"$route",{enumerable:!0,get:()=>me(l)}),kr&&!On&&l.value===hs&&(On=!0,M(r.location).catch(oe=>{}));const te={};for(const oe in hs)Object.defineProperty(te,oe,{get:()=>l.value[oe],enumerable:!0});U.provide(Lc,ln),U.provide(Vh,Rm(te)),U.provide(vu,l);const X=U.unmount;cn.add(U),U.unmount=function(){cn.delete(U),cn.size<1&&(u=hs,E&&E(),E=null,l.value=hs,On=!1,ve=!1),X()}}};function Pt(U){return U.reduce((te,X)=>te.then(()=>y(X)),Promise.resolve())}return ln}function _n(){return bt(Lc)}function js(t){return bt(Vh)}const re=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n},a2={},c2={viewBox:"0 0 576 512",xmlns:"http://www.w3.org/2000/svg"};function l2(t,e){return O(),K("svg",c2,[...e[0]||(e[0]=[x("path",{fill:"currentColor",d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},null,-1)])])}const u2=re(a2,[["render",l2]]),h2=["type"],f2={__name:"ButtonBlue",props:{type:{type:String,default:"button"},class:{type:String,default:""},size:{type:Number,default:16},border:{type:Boolean,default:!1},isOpen:{type:Boolean,default:!1}},setup(t){const e=t,n=we(()=>({"--svg-size":`${e.size}px`}));return(s,r)=>(O(),K("button",{style:vo(n.value),type:e.type,class:Ge(["button",e.class,{border:e.border,isOpen:e.isOpen}])},[Vl(s.$slots,"default",{},void 0)],14,h2))}},en=re(f2,[["__scopeId","data-v-6f52e23a"]]),d2={__name:"HomeButton",setup(t){const e=_n(),n=xe(),s=()=>{n.pageNum=1,n.genreIdStore=null,e.push({name:"home"})};return(r,i)=>(O(),Ue(en,{onClick:s,size:18},{default:je(()=>[Q(u2),i[0]||(i[0]=Qe("Home",-1))]),_:1}))}},p2={},m2={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 496 512"};function g2(t,e){return O(),K("svg",m2,[...e[0]||(e[0]=[x("path",{fill:"currentColor",d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"},null,-1)])])}const _2=re(p2,[["render",g2]]),y2={name:"IconGoogle"},v2={class:"icon-google"};function E2(t,e,n,s,r,i){return O(),K("span",v2)}const w2=re(y2,[["render",E2],["__scopeId","data-v-e8f2dc2a"]]),I2={class:"registration--form"},T2={key:0,class:"err-string"},A2={class:"btns"},S2={__name:"RegistrationComponent",emits:["setForm"],setup(t,{emit:e}){const n=e,s=xe(),r=pe(""),i=pe(""),o=pe(""),c=pe(""),l=async()=>{await s.createAuthWithEmailAndPassword({email:r.value,password:i.value,user_name:o.value,api_key:c.value})},u=()=>{n("setForm","sign")},f=()=>{console.warn("ok")};return(p,m)=>(O(),K("div",I2,[m[5]||(m[5]=x("h3",{class:"name"},"",-1)),x("p",null,[_t(x("input",{type:"text",placeholder:"","onUpdate:modelValue":m[0]||(m[0]=_=>r.value=_)},null,512),[[Hn,r.value]])]),x("p",null,[_t(x("input",{type:"text",placeholder:"","onUpdate:modelValue":m[1]||(m[1]=_=>o.value=_)},null,512),[[Hn,o.value]])]),x("p",null,[_t(x("input",{type:"text",placeholder:"Api ","onUpdate:modelValue":m[2]||(m[2]=_=>c.value=_)},null,512),[[Hn,c.value]]),m[4]||(m[4]=x("small",null,[x("a",{target:"_blank",href:"https://kinopoiskapiunofficial.tech/signup"},"  API")],-1))]),x("p",null,[_t(x("input",{type:"password",placeholder:"Password","onUpdate:modelValue":m[3]||(m[3]=_=>i.value=_)},null,512),[[Hn,i.value]])]),me(s).errorMessage?(O(),K("p",T2,nt(me(s).errorMessage),1)):Ke("",!0),x("div",A2,[x("button",{class:"reg",onClick:Dn(l,["prevent"])},""),x("button",{class:"sign",onClick:Dn(u,["prevent"])},""),Q(w2,{onClick:f})])]))}},C2=re(S2,[["__scopeId","data-v-08b0bcdd"]]),b2={class:"registration--form"},R2={key:0,class:"err-string"},P2={class:"btns"},k2={__name:"SignInComponent",emits:["setForm"],setup(t,{emit:e}){const n=e,s=pe(""),r=pe(""),i=xe(),o=async()=>{await i.authWithEmailAndPassword({email:s.value,password:r.value})},c=()=>{n("setForm","reg")};return(l,u)=>(O(),K("div",b2,[u[2]||(u[2]=x("h3",{class:"name"},"",-1)),x("p",null,[_t(x("input",{type:"text",placeholder:"Email","onUpdate:modelValue":u[0]||(u[0]=f=>s.value=f)},null,512),[[Hn,s.value]])]),x("p",null,[_t(x("input",{type:"password",placeholder:"Password","onUpdate:modelValue":u[1]||(u[1]=f=>r.value=f)},null,512),[[Hn,r.value]])]),me(i).errorMessage?(O(),K("p",R2,nt(me(i).errorMessage),1)):Ke("",!0),x("div",P2,[x("button",{class:"sign",onClick:Dn(o,["prevent"])},""),x("button",{class:"reg",onClick:Dn(c,["prevent"])},"")])]))}},N2=re(k2,[["__scopeId","data-v-a2d42fb1"]]),D2={},L2={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640"};function V2(t,e){return O(),K("svg",L2,[...e[0]||(e[0]=[x("path",{fill:"currentColor",d:"M535.6 85.7C513.7 63.8 478.3 63.8 456.4 85.7L432 110.1L529.9 208L554.3 183.6C576.2 161.7 576.2 126.3 554.3 104.4L535.6 85.7zM236.4 305.7C230.3 311.8 225.6 319.3 222.9 327.6L193.3 416.4C190.4 425 192.7 434.5 199.1 441C205.5 447.5 215 449.7 223.7 446.8L312.5 417.2C320.7 414.5 328.2 409.8 334.4 403.7L496 241.9L398.1 144L236.4 305.7zM160 128C107 128 64 171 64 224L64 480C64 533 107 576 160 576L416 576C469 576 512 533 512 480L512 384C512 366.3 497.7 352 480 352C462.3 352 448 366.3 448 384L448 480C448 497.7 433.7 512 416 512L160 512C142.3 512 128 497.7 128 480L128 224C128 206.3 142.3 192 160 192L256 192C273.7 192 288 177.7 288 160C288 142.3 273.7 128 256 128L160 128z"},null,-1)])])}const O2=re(D2,[["render",V2]]),x2={class:"registration--form"},M2={class:"heading"},F2={class:"name"},U2={key:0,class:"container"},$2={class:"btns"},B2={__name:"LogoutComponent",setup(t){const e=xe(),n=pe(!1),s=pe(e.user.name),r=pe(e.apiKey),i=async()=>{s.value.length<3||(n.value=!1,await e.editAuthNameOrApiKey({userName:s.value,apiKey:r.value}))},o=()=>{n.value=!n.value},c=async()=>{await e.authLogout()};return(l,u)=>(O(),K("div",x2,[x("h3",M2,[u[2]||(u[2]=Qe("   : ",-1)),x("strong",F2,nt(me(e).user.name),1),x("button",{class:"edit",onClick:o},[Q(O2)])]),n.value?(O(),K("div",U2,[x("p",null,[_t(x("input",{type:"text",placeholder:"","onUpdate:modelValue":u[0]||(u[0]=f=>s.value=f)},null,512),[[Hn,s.value]])]),x("p",null,[_t(x("input",{type:"text",placeholder:"Api ","onUpdate:modelValue":u[1]||(u[1]=f=>r.value=f)},null,512),[[Hn,r.value]])]),x("button",{onClick:i},"")])):Ke("",!0),x("div",$2,[x("button",{class:"reg",onClick:Dn(c,["prevent"])},"")])]))}},j2=re(B2,[["__scopeId","data-v-a4df64c2"]]),H2={__name:"PopupContainer",props:{width:{type:String,default:"auto"},position:{type:String,default:"left",validator:t=>["left","right","center"].includes(t)},maxWidth:{type:String,default:"400px"},buttonClass:{type:[String,Array,Object],default:""}},emits:["open","close","toggle"],setup(t,{expose:e,emit:n}){const s=t,r=n,i=pe(!1),o=pe(null),c=we(()=>({width:s.width,maxWidth:s.maxWidth})),l=()=>{i.value=!i.value,r("toggle",i.value),i.value?r("open"):r("close")},u=()=>{i.value&&(i.value=!1,r("close"))},f=m=>{i.value&&o.value&&!o.value.contains(m.target)&&u()},p=m=>{m.key==="Escape"&&i.value&&u()};return Gt(()=>{document.addEventListener("click",f),document.addEventListener("keydown",p)}),xu(()=>{document.removeEventListener("click",f),document.removeEventListener("keydown",p)}),e({open:()=>{i.value=!0,r("open")},close:u,toggle:l}),(m,_)=>(O(),K("div",{class:"popup-container",ref_key:"containerRef",ref:o},[Q(en,{onClick:l,size:30,class:Ge(["trigger",t.buttonClass]),isOpen:i.value},{default:je(()=>[Vl(m.$slots,"icon",{},void 0,!0)]),_:3},8,["class","isOpen"]),Q(Ow,{name:"popup"},{default:je(()=>[i.value?(O(),K("div",{key:0,class:Ge(["popup-content",`position-${t.position}`]),style:vo(c.value)},[Vl(m.$slots,"content",{},void 0,!0)],6)):Ke("",!0)]),_:3})],512))}},Oh=re(H2,[["__scopeId","data-v-5c4aed5b"]]),W2={class:"registration-wrap--pop"},q2={__name:"RegistrationWrap",setup(t){const e=xe(),n=pe("sign"),s=bt("emitter"),r=o=>{e.errorMessage="",n.value=o},i=()=>{s.emit("setUserData")};return Gt(async()=>{await e.authChange(i),await s.emit("setUserData")}),(o,c)=>(O(),Ue(Oh,{position:"right",maxWidth:"auto",class:"popup"},{icon:je(()=>[Q(_2,{class:"icon"})]),content:je(()=>[x("div",W2,[me(e).user?(O(),Ue(j2,{key:0})):n.value==="sign"?(O(),Ue(N2,{key:1,onSetForm:r})):n.value==="reg"?(O(),Ue(C2,{key:2,onSetForm:r})):Ke("",!0)])]),_:1}))}},z2=re(q2,[["__scopeId","data-v-89c6b8a9"]]),G2={},K2={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640"};function Q2(t,e){return O(),K("svg",K2,[...e[0]||(e[0]=[x("path",{fill:"currentColor",d:"M96 160C96 124.7 124.7 96 160 96L480 96C515.3 96 544 124.7 544 160L544 480C544 515.3 515.3 544 480 544L160 544C124.7 544 96 515.3 96 480L96 160zM144 432L144 464C144 472.8 151.2 480 160 480L192 480C200.8 480 208 472.8 208 464L208 432C208 423.2 200.8 416 192 416L160 416C151.2 416 144 423.2 144 432zM448 416C439.2 416 432 423.2 432 432L432 464C432 472.8 439.2 480 448 480L480 480C488.8 480 496 472.8 496 464L496 432C496 423.2 488.8 416 480 416L448 416zM144 304L144 336C144 344.8 151.2 352 160 352L192 352C200.8 352 208 344.8 208 336L208 304C208 295.2 200.8 288 192 288L160 288C151.2 288 144 295.2 144 304zM448 288C439.2 288 432 295.2 432 304L432 336C432 344.8 439.2 352 448 352L480 352C488.8 352 496 344.8 496 336L496 304C496 295.2 488.8 288 480 288L448 288zM144 176L144 208C144 216.8 151.2 224 160 224L192 224C200.8 224 208 216.8 208 208L208 176C208 167.2 200.8 160 192 160L160 160C151.2 160 144 167.2 144 176zM448 160C439.2 160 432 167.2 432 176L432 208C432 216.8 439.2 224 448 224L480 224C488.8 224 496 216.8 496 208L496 176C496 167.2 488.8 160 480 160L448 160z"},null,-1)])])}const nv=re(G2,[["render",Q2]]),J2={__name:"LastViewButton",setup(t){const e=_n(),n=xe(),s=()=>{n.pageNum=1,n.genreIdStore=null,e.push({name:"lastViews"})};return(r,i)=>(O(),Ue(en,{onClick:s,size:26},{default:je(()=>[Q(nv)]),_:1}))}},Y2={},X2={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"};function Z2(t,e){return O(),K("svg",X2,[...e[0]||(e[0]=[x("path",{fill:"currentColor",d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},null,-1)])])}const Vc=re(Y2,[["render",Z2]]),eP={__name:"FavoriteButton",setup(t){const e=_n(),n=xe(),s=we(()=>n.favoriteList.length),r=we(()=>n.user===null?"disabled":""),i=()=>{n.pageNum=1,n.genreIdStore=null,e.push({name:"favorite"})};return(o,c)=>(O(),Ue(en,{onClick:i,class:Ge(r.value),size:18},{default:je(()=>[Q(Vc),Qe(nt(s.value),1)]),_:1},8,["class"]))}},tP=re(eP,[["__scopeId","data-v-d99dd994"]]),nP={__name:"SearchPopup",setup(t){const e=xe(),n=_n(),s=i=>{e.pageNum=1,e.searchQueryStore=i,n.push({name:"searchPage",query:{q:e.searchQueryStore}}),e.setShowLastSearchList(!1)},r=()=>{e.setShowLastSearchList(!1)};return(i,o)=>me(e).lastSearchList.length?(O(),K("div",{key:0,class:Ge(["search-popup",{opened:me(e).isShowLastSearchList}])},[x("button",{type:"button",class:"close-list",onClick:r},""),x("ul",null,[(O(!0),K(De,null,ks(me(e).lastSearchList,c=>(O(),K("li",{key:c.id},[Q(en,{onClick:l=>s(c.value)},{default:je(()=>[Qe(nt(c.value),1)]),_:2},1032,["onClick"])]))),128))])],2)):Ke("",!0)}},sP=re(nP,[["__scopeId","data-v-af99dc44"]]),rP={class:"input-wrap"},iP={__name:"SearchForm",props:{visibleSearch:{type:Boolean,default:!1}},setup(t){const e=t,n=js(),s=_n(),r=xe();Gt(()=>{r.searchQueryStore=i.value});const i=we(()=>n.query.q),o=pe(null),c=async()=>{r.addLastSearchList(r.searchQueryStore),r.pageNum=1,s.push({name:"searchPage",query:r.searchQueryWithGenre()}),r.setShowLastSearchList(!1)},l=()=>{r.setShowLastSearchList(!0)},u=()=>{r.searchQueryStore="",o.value.focus()};return(f,p)=>(O(),K("form",{action:"#",class:Ge(["search-form",{show:e.visibleSearch}]),onSubmit:Dn(c,["prevent"])},[x("div",rP,[_t(x("input",{ref_key:"searchInput",ref:o,autocomplete:"off",type:"text",onKeyup:rI(c,["enter"]),onFocus:l,placeholder:"  / ID ","onUpdate:modelValue":p[0]||(p[0]=m=>me(r).searchQueryStore=m),name:"keyword"},null,544),[[Hn,me(r).searchQueryStore,void 0,{trim:!0}]]),Q(en,{class:Ge(["clear-input",{show:me(r).searchQueryStore}]),onClick:u},{default:je(()=>[...p[1]||(p[1]=[Qe("",-1)])]),_:1},8,["class"])]),Q(en,{type:"submit",border:!0},{default:je(()=>[...p[2]||(p[2]=[Qe("",-1)])]),_:1}),Q(sP)],34))}},oP=re(iP,[["__scopeId","data-v-84c0a647"]]),aP={},cP={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"};function lP(t,e){return O(),K("svg",cP,[...e[0]||(e[0]=[x("path",{fill:"currentColor",d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM184 296c0 13.3 10.7 24 24 24s24-10.7 24-24l0-64 64 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-64 0 0-64c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 64-64 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l64 0 0 64z"},null,-1)])])}const uP=re(aP,[["render",lP]]),hP={},fP={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"};function dP(t,e){return O(),K("svg",fP,[...e[0]||(e[0]=[x("path",{fill:"currentColor",d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM136 184c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0z"},null,-1)])])}const pP=re(hP,[["render",dP]]),mP={},gP={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640"};function _P(t,e){return O(),K("svg",gP,[...e[0]||(e[0]=[x("path",{fill:"currentColor",d:"M96 320C96 289.1 121.1 264 152 264C182.9 264 208 289.1 208 320C208 350.9 182.9 376 152 376C121.1 376 96 350.9 96 320zM264 320C264 289.1 289.1 264 320 264C350.9 264 376 289.1 376 320C376 350.9 350.9 376 320 376C289.1 376 264 350.9 264 320zM488 264C518.9 264 544 289.1 544 320C544 350.9 518.9 376 488 376C457.1 376 432 350.9 432 320C432 289.1 457.1 264 488 264z"},null,-1)])])}const yP=re(mP,[["render",_P]]),vP={},EP={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"};function wP(t,e){return O(),K("svg",EP,[...e[0]||(e[0]=[x("path",{fill:"currentColor",d:"M142.9 142.9c-17.5 17.5-30.1 38-37.8 59.8c-5.9 16.7-24.2 25.4-40.8 19.5s-25.4-24.2-19.5-40.8C55.6 150.7 73.2 122 97.6 97.6c87.2-87.2 228.3-87.5 315.8-1L455 55c6.9-6.9 17.2-8.9 26.2-5.2s14.8 12.5 14.8 22.2l0 128c0 13.3-10.7 24-24 24l-8.4 0c0 0 0 0 0 0L344 224c-9.7 0-18.5-5.8-22.2-14.8s-1.7-19.3 5.2-26.2l41.1-41.1c-62.6-61.5-163.1-61.2-225.3 1zM16 312c0-13.3 10.7-24 24-24l7.6 0 .7 0L168 288c9.7 0 18.5 5.8 22.2 14.8s1.7 19.3-5.2 26.2l-41.1 41.1c62.6 61.5 163.1 61.2 225.3-1c17.5-17.5 30.1-38 37.8-59.8c5.9-16.7 24.2-25.4 40.8-19.5s25.4 24.2 19.5 40.8c-10.8 30.6-28.4 59.3-52.9 83.8c-87.2 87.2-228.3 87.5-315.8 1L57 457c-6.9 6.9-17.2 8.9-26.2 5.2S16 449.7 16 440l0-119.6 0-.7 0-7.6z"},null,-1)])])}const IP=re(vP,[["render",wP]]),TP={},AP={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640"};function SP(t,e){return O(),K("svg",AP,[...e[0]||(e[0]=[x("path",{fill:"currentColor",d:"M64 320C64 178.6 178.6 64 320 64C461.4 64 576 178.6 576 320C576 461.4 461.4 576 320 576C178.6 576 64 461.4 64 320zM252.3 211.1C244.7 215.3 240 223.4 240 232L240 408C240 416.7 244.7 424.7 252.3 428.9C259.9 433.1 269.1 433 276.6 428.4L420.6 340.4C427.7 336 432.1 328.3 432.1 319.9C432.1 311.5 427.7 303.8 420.6 299.4L276.6 211.4C269.2 206.9 259.9 206.7 252.3 210.9z"},null,-1)])])}const sv=re(TP,[["render",SP]]),CP={},bP={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640"};function RP(t,e){return O(),K("svg",bP,[...e[0]||(e[0]=[x("path",{fill:"currentColor",d:"M320 64C461.4 64 576 178.6 576 320C576 461.4 461.4 576 320 576C178.6 576 64 461.4 64 320C64 178.6 178.6 64 320 64zM296 184L296 320C296 328 300 335.5 306.7 340L402.7 404C413.7 411.4 428.6 408.4 436 397.3C443.4 386.2 440.4 371.4 429.3 364L344 307.2L344 184C344 170.7 333.3 160 320 160C306.7 160 296 170.7 296 184z"},null,-1)])])}const rv=re(CP,[["render",RP]]),PP={},kP={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640"};function NP(t,e){return O(),K("svg",kP,[...e[0]||(e[0]=[x("path",{fill:"currentColor",d:"M533.6 96.5C523.3 88.1 508.2 89.7 499.8 100C491.4 110.3 493 125.4 503.3 133.8C557.5 177.8 592 244.8 592 320C592 395.2 557.5 462.2 503.3 506.3C493 514.7 491.5 529.8 499.8 540.1C508.1 550.4 523.3 551.9 533.6 543.6C598.5 490.7 640 410.2 640 320C640 229.8 598.5 149.2 533.6 96.5zM473.1 171C462.8 162.6 447.7 164.2 439.3 174.5C430.9 184.8 432.5 199.9 442.8 208.3C475.3 234.7 496 274.9 496 320C496 365.1 475.3 405.3 442.8 431.8C432.5 440.2 431 455.3 439.3 465.6C447.6 475.9 462.8 477.4 473.1 469.1C516.3 433.9 544 380.2 544 320.1C544 260 516.3 206.3 473.1 171.1zM412.6 245.5C402.3 237.1 387.2 238.7 378.8 249C370.4 259.3 372 274.4 382.3 282.8C393.1 291.6 400 305 400 320C400 335 393.1 348.4 382.3 357.3C372 365.7 370.5 380.8 378.8 391.1C387.1 401.4 402.3 402.9 412.6 394.6C434.1 376.9 448 350.1 448 320C448 289.9 434.1 263.1 412.6 245.5zM80 416L128 416L262.1 535.2C268.5 540.9 276.7 544 285.2 544C304.4 544 320 528.4 320 509.2L320 130.8C320 111.6 304.4 96 285.2 96C276.7 96 268.5 99.1 262.1 104.8L128 224L80 224C53.5 224 32 245.5 32 272L32 368C32 394.5 53.5 416 80 416z"},null,-1)])])}const iv=re(PP,[["render",NP]]),Tr={ArrowDown:"ArrowDown",ArrowUp:"ArrowUp",ArrowRight:"ArrowRight",ArrowLeft:"ArrowLeft",Enter:"Enter",NumpadEnter:"Enter"},Rl={desktop:1024,tablet:768,mobile:480},Xp={Alloha:(t,e)=>`https://harald-as.newplayjj.com/?kp=${t}&token=${e}`,Collaps:t=>`https://api.atomics.ws/embed/kp/${t}`,VideoCDN:t=>`https://p.lumex.space/j3mqebEPqCLB?domain=nayteruz.github.io&kp_id=${t}`,Coll:async t=>{const e=`https://api.bhcesh.me/list?token=4c250f7ac0a8c8a658c789186b9a58a5&kinopoisk_id=${t}`;try{const s=await(await fetch(e)).json();if(Array.isArray(s.results)&&s.results.length>0&&s.results?.[0].iframe_url)return s.results?.[0].iframe_url}catch(n){console.error("HDVB error:",n)}return null},kodi:async t=>{const e=`https://kodikapi.com/search?token=41dd95f84c21719b09d6c71182237a25&kinopoisk_id=${t}`;try{const s=await(await fetch(e)).json();if(Array.isArray(s.results)&&s.results.length>0&&s.results?.[0].link)return s.results?.[0].link}catch(n){console.error("HDVB error:",n)}return null},HDVB:async(t,e)=>{const n=`https://apivb.com/api/videos.json?id_kp=${t}&token=${e}`;try{const r=await(await fetch(n)).json();if(Array.isArray(r)&&r.length>0&&r[0].iframe_url)return r[0].iframe_url}catch(s){console.error("HDVB error:",s)}return null},Kodik:t=>`https:////kodik.cc/find-player?kinopoiskID=${t}`,:t=>`https://api.atomics.ws/embed/trailer-kp/${t}`},ai={MAIN:"  ",LAST_VIEWS:" ",FAVORITE:" /  ",WATCHING:" ",WATCH_LIST:"  ",WAIT_LIST:"    "},ot={HOME:{path:"/",name:"home"},FILM_PAGE:{path:"/film/:id",name:"filmPage"},SEARCH:{path:"/search",name:"searchPage"},FAVORITES:{path:"/favorites",name:"favorite"},LAST_VIEWS:{path:"/last-views",name:"lastViews"},WATCHING:{path:"/watching",name:"watchingNow"},WATCH_LIST:{path:"/watch-list",name:"watchList"},WAITING_LIST:{path:"/waiting-list",name:"waitingList"}},DP={class:"list"},LP={__name:"MenuPopup",setup(t){const e=()=>{document.location.reload()};return(n,s)=>{const r=Fu("router-link");return O(),Ue(Oh,{class:"popup",position:"right"},{icon:je(()=>[Q(yP)]),content:je(()=>[x("ul",DP,[x("li",null,[Q(r,{to:me(ot).WATCHING.path,class:"item"},{default:je(()=>[Q(sv),s[0]||(s[0]=Qe(" ",-1))]),_:1},8,["to"])]),x("li",null,[Q(r,{to:me(ot).WATCH_LIST.path,class:"item"},{default:je(()=>[Q(iv),s[1]||(s[1]=Qe(" ",-1))]),_:1},8,["to"])]),x("li",null,[Q(r,{to:me(ot).WAITING_LIST.path,class:"item"},{default:je(()=>[Q(rv),s[2]||(s[2]=Qe(" ",-1))]),_:1},8,["to"])]),x("li",null,[Q(r,{to:me(ot).LAST_VIEWS.path,class:"item"},{default:je(()=>[Q(nv),s[3]||(s[3]=Qe("",-1))]),_:1},8,["to"])]),x("li",null,[x("div",{class:"item",onClick:e},[Q(IP),s[4]||(s[4]=Qe(" ",-1))])])])]),_:1})}}},VP=re(LP,[["__scopeId","data-v-eb4ff941"]]),OP={__name:"HeaderFilm",setup(t){const e=js(),n=we(()=>e.query.q),s=pe(!!(n.value|e.name==="searchPage")),r=()=>{s.value=!s.value};return(i,o)=>(O(),K("header",null,[Q(d2),Q(J2),Q(tP),Q(oP,{visibleSearch:s.value},null,8,["visibleSearch"]),Q(z2),Q(VP),Q(en,{onClick:r,size:20,class:Ge(["search-popup-btn",{opened:s.value}])},{default:je(()=>[s.value?(O(),Ue(pP,{key:0})):(O(),Ue(uP,{key:1}))]),_:1},8,["class"])]))}},xP=re(OP,[["__scopeId","data-v-0948d27c"]]),MP={class:"genres-wrap"},FP={class:"genres"},UP=["onClick"],$P={__name:"GenreList",setup(t){const e=js(),n=_n(),s=xe(),r=we(()=>e.query.genres),i=c=>{+s.genreIdStore==+c?s.genreIdStore=null:s.genreIdStore=c,s.pageNum=1,n.push({name:"searchPage",query:s.searchQueryWithGenre()})};async function o(){await s.getGenreList()}return Gt(async()=>{s.genreIdStore=r.value,await o()}),(c,l)=>(O(),K("div",MP,[x("ul",FP,[(O(!0),K(De,null,ks(me(s).genreListStore,u=>(O(),K("li",{class:Ge({active:+u.id==+me(s).genreIdStore}),key:u.id},[x("span",{onClick:f=>i(u.id)},nt(u.genre),9,UP)],2))),128))])]))}},BP=re($P,[["__scopeId","data-v-4244b635"]]),jP={__name:"ToTop",setup(t){const e=()=>{window.scrollTo({top:0,behavior:"smooth"})};return(n,s)=>(O(),K("button",{class:"button",onClick:e}))}},HP=re(jP,[["__scopeId","data-v-6917231d"]]),WP={__name:"NavigationByKeys",setup(t){const e=_n(),n=xe(),s=pe(0),r=pe(n.films.length),i=pe(e.currentRoute.value.href||document.location.pathname),o=()=>{n.currentFocusIndex===-1?n.currentFocusIndex=0:n.currentFocusIndex=Math.min(r.value-1,n.currentFocusIndex+s.value)},c=()=>{n.currentFocusIndex=Math.max(0,n.currentFocusIndex-s.value)},l=()=>{n.currentFocusIndex=Math.min(r.value-1,n.currentFocusIndex+1)},u=()=>{n.currentFocusIndex=Math.max(0,n.currentFocusIndex-1)},f=()=>{const _=n.currentFocusIndex;if(_===-1)return;const b=n.films[_].id;e.push(`/film/${b}`)},p=_=>{switch(_.key){case Tr.ArrowDown:o();break;case Tr.ArrowUp:c();break;case Tr.ArrowRight:l();break;case Tr.ArrowLeft:u();break;case Tr.Enter:case Tr.NumpadEnter:f();break}},m=()=>{window.innerWidth>Rl.desktop?s.value=5:window.innerWidth>Rl.tablet?s.value=4:window.innerWidth>Rl.mobile?s.value=3:s.value=2};return dn(()=>n.films,_=>{r.value=_.length}),Gt(()=>{window.removeEventListener("keydown",p),e.currentRoute.value.name!=="filmPage"&&(window.addEventListener("keydown",p),setTimeout(()=>{if(e.currentRoute.value.name!=="filmPage")if(window.scrollY===0){const _=e.currentRoute.value.href||document.location.pathname;n.focusIds={...n.focusIds,[_]:-1},n.currentFocusIndex=-1}else n.currentFocusIndex=n.focusIds[i.value]||-1},1),m())}),Yr(()=>{window.removeEventListener("keydown",p),e.currentRoute.value&&(n.focusIds={...n.focusIds,[i.value]:n.currentFocusIndex})}),(_,b)=>(O(),K("div"))}},qP={class:"wrapper"},zP={class:"content"},GP={__name:"App",setup(t){const e=xe(),n=s=>{s.target.closest(".search-form")||e.setShowLastSearchList(!1)};return Gt(()=>{document.addEventListener("click",n)}),Yr(()=>{document.removeEventListener("click",n)}),(s,r)=>{const i=Fu("RouterView");return O(),K("div",qP,[(O(),Ue(xP,{key:s.$route.fullPath})),Q(BP),x("main",zP,[Q(i,null,{default:je(({Component:o})=>[(O(),Ue(PE,{include:"MainList"},[(O(),Ue($E(o),{key:s.$route.fullPath}))],1024))]),_:1})]),Q(HP),(O(),Ue(WP,{key:s.$route.fullPath}))])}}},ov=t=>{const e=t?.name||"",n=t?.year||"";return`${e} ${n?`(${n})`:""}`},Oo=(t,e)=>!Array.isArray(t)||t.length===0||!e?!1:new Map(t.map(s=>[Number(s?.kinopoiskId||s?.filmId||s?.id),s])).has(Number(e)),KP={class:"favorite-icon"},QP={key:0,class:"loading-round"},JP={__name:"FavoriteActionButton",props:{id:Number},setup(t){const e=t,n=pe(!1),s=xe(),r=we(()=>Oo(s.favorites,e.id));async function i(){if(!s.user){alert(" ");return}if(n.value=!0,r.value)await s.removeFavorite(e.id);else{const o=await oi(e.id);await s.addFavorite(await o)}n.value=!1}return(o,c)=>(O(),K("span",KP,[n.value?(O(),K("span",QP)):Ke("",!0),Q(Vc,{class:Ge({active:r.value}),onClick:Dn(i,["prevent"])},null,8,["class"])]))}},av=re(JP,[["__scopeId","data-v-2fac666d"]]),YP={},XP={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640"};function ZP(t,e){return O(),K("svg",XP,[...e[0]||(e[0]=[x("path",{fill:"currentColor",d:"M320 96C239.2 96 174.5 132.8 127.4 176.6C80.6 220.1 49.3 272 34.4 307.7C31.1 315.6 31.1 324.4 34.4 332.3C49.3 368 80.6 420 127.4 463.4C174.5 507.1 239.2 544 320 544C400.8 544 465.5 507.2 512.6 463.4C559.4 419.9 590.7 368 605.6 332.3C608.9 324.4 608.9 315.6 605.6 307.7C590.7 272 559.4 220 512.6 176.6C465.5 132.9 400.8 96 320 96zM176 320C176 240.5 240.5 176 320 176C399.5 176 464 240.5 464 320C464 399.5 399.5 464 320 464C240.5 464 176 399.5 176 320zM320 256C320 291.3 291.3 320 256 320C244.5 320 233.7 317 224.3 311.6C223.3 322.5 224.2 333.7 227.2 344.8C240.9 396 293.6 426.4 344.8 412.7C396 399 426.4 346.3 412.7 295.1C400.5 249.4 357.2 220.3 311.6 224.3C316.9 233.6 320 244.4 320 256z"},null,-1)])])}const e4=re(YP,[["render",ZP]]),t4={},n4={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640"};function s4(t,e){return O(),K("svg",n4,[...e[0]||(e[0]=[x("path",{fill:"currentColor",d:"M73 39.1C63.6 29.7 48.4 29.7 39.1 39.1C29.8 48.5 29.7 63.7 39 73.1L567 601.1C576.4 610.5 591.6 610.5 600.9 601.1C610.2 591.7 610.3 576.5 600.9 567.2L504.5 470.8C507.2 468.4 509.9 466 512.5 463.6C559.3 420.1 590.6 368.2 605.5 332.5C608.8 324.6 608.8 315.8 605.5 307.9C590.6 272.2 559.3 220.2 512.5 176.8C465.4 133.1 400.7 96.2 319.9 96.2C263.1 96.2 214.3 114.4 173.9 140.4L73 39.1zM236.5 202.7C260 185.9 288.9 176 320 176C399.5 176 464 240.5 464 320C464 351.1 454.1 379.9 437.3 403.5L402.6 368.8C415.3 347.4 419.6 321.1 412.7 295.1C399 243.9 346.3 213.5 295.1 227.2C286.5 229.5 278.4 232.9 271.1 237.2L236.4 202.5zM357.3 459.1C345.4 462.3 332.9 464 320 464C240.5 464 176 399.5 176 320C176 307.1 177.7 294.6 180.9 282.7L101.4 203.2C68.8 240 46.4 279 34.5 307.7C31.2 315.6 31.2 324.4 34.5 332.3C49.4 368 80.7 420 127.5 463.4C174.6 507.1 239.3 544 320.1 544C357.4 544 391.3 536.1 421.6 523.4L357.4 459.2z"},null,-1)])])}const r4=re(t4,[["render",s4]]),i4={class:"icon-wrapper"},o4={__name:"WatchActionButton",props:{id:Number},setup(t){const e=t,n=xe(),s=we(()=>n.isSkipped(e.id)),r=()=>{s.value?n.removeSkip(e.id):n.addSkip(e.id)};return(i,o)=>(O(),K("span",i4,[s.value?(O(),Ue(r4,{key:0,class:"unwatch",onClick:Dn(r,["prevent"])})):(O(),Ue(e4,{key:1,onClick:Dn(r,["prevent"])}))]))}},cv=re(o4,[["__scopeId","data-v-88ca2d7e"]]),a4={},c4={height:"16",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg"};function l4(t,e){return O(),K("svg",c4,[...e[0]||(e[0]=[x("path",{fill:"currentColor",d:"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z",class:"star"},null,-1)])])}const u4=re(a4,[["render",l4]]),h4={key:0,class:"rating"},f4={__name:"FilmRating",props:{rating:String,isRating:{type:Boolean,default:!0}},setup(t){const e=t;return(n,s)=>t.isRating?(O(),K("span",h4,[Q(u4,{class:"star"}),Qe(nt(e.rating),1)])):Ke("",!0)}},lv=re(f4,[["__scopeId","data-v-d9cc70a8"]]),d4=["href"],p4={class:"icon-actions"},m4={class:"image-wrapper"},g4=["src","alt"],_4={class:"name-wrapper"},y4={__name:"FilmItem",props:{itemFilm:Object,currentIndex:Number,isRating:{type:Boolean,default:!0}},setup(t){const e=t,n=_n(),s=xe(),r=pe(null),i=we(()=>e.currentIndex===s.currentFocusIndex),o=we(()=>ov(e.itemFilm)),c=pe(!1),l=we(()=>e.itemFilm.id),u=we(()=>s.isSkipped(l.value)),f=()=>{n.push(`/film/${l.value}`)},p=()=>{c.value=!0},m=()=>{c.value=!1};return dn(i,()=>{if(i.value&&r.value){const _=r.value.getBoundingClientRect(),b=document.documentElement.scrollTop,N=b+window.innerHeight,k=_.bottom+b;(_.top<0||k>N)&&window.scrollTo(0,b+_.top-80)}}),(_,b)=>(O(),K("li",{class:Ge(["card",{focused:i.value|c.value,unwatch:u.value}]),onMouseover:p,onMouseleave:m,tabindex:"0",ref_key:"itemRef",ref:r},[x("a",{href:`/film/${e.itemFilm.id}`,class:"card-link",onClick:Dn(f,["prevent"])},null,8,d4),x("div",p4,[Q(av,{class:"favorite",id:l.value},null,8,["id"]),Q(cv,{class:"watch",id:l.value},null,8,["id"]),Q(lv,{rating:e.itemFilm.rating,isRating:e.isRating},null,8,["rating","isRating"])]),x("div",m4,[b[0]||(b[0]=x("svg",{xmlns:"http://www.w3.org/2000/svg",width:"360",height:"540"},null,-1)),x("img",{src:t.itemFilm.image,alt:e.itemFilm.name},null,8,g4)]),x("div",_4,[x("h3",null,nt(o.value),1)])],34))}},v4=re(y4,[["__scopeId","data-v-0c276104"]]),E4={};function w4(t,e){return O(),K(De,null,ks(20,n=>x("li",{class:"films__item preload-card",key:n},[...e[0]||(e[0]=[x("div",{class:"item__image"},[x("svg",{xmlns:"http://www.w3.org/2000/svg",width:"360",height:"540"})],-1)])])),64)}const I4=re(E4,[["render",w4],["__scopeId","data-v-aadc4565"]]),T4={key:0,class:"films__list"},A4={key:1,class:"not-found"},S4={__name:"FilmList",props:{showPreload:{type:Boolean,default:!1},items:{type:Array,default:()=>[]},isRating:{type:Boolean,default:!0}},setup(t){const e=xe(),n=bt("emitter"),s=t,r=pe(!1);return n.on("isLoading",i=>{r.value=i}),Gt(()=>{e.hasFilmList=!0}),Yr(()=>{e.hasFilmList=!1}),(i,o)=>(O(),K("div",{class:Ge(["films__wrap",{loading:r.value}])},[s.items.length?(O(),K("ul",T4,[(O(!0),K(De,null,ks(s.items,(c,l)=>(O(),Ue(v4,{itemFilm:c,key:c.id,currentIndex:l,isRating:s.isRating},null,8,["itemFilm","currentIndex","isRating"]))),128)),s.showPreload?(O(),Ue(I4,{key:0})):Ke("",!0)])):(O(),K("h2",A4,"  "))],2))}},Hs=re(S4,[["__scopeId","data-v-36af1c34"]]),C4={},b4={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512"};function R4(t,e){return O(),K("svg",b4,[...e[0]||(e[0]=[x("path",{d:"M31.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34z"},null,-1)])])}const Zp=re(C4,[["render",R4],["__scopeId","data-v-f06fdeaf"]]),P4={},k4={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"};function N4(t,e){return O(),K("svg",k4,[...e[0]||(e[0]=[x("path",{d:"M223.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L319.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L393.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34zm-192 34l136 136c9.4 9.4 24.6 9.4 33.9 0l22.6-22.6c9.4-9.4 9.4-24.6 0-33.9L127.9 256l96.4-96.4c9.4-9.4 9.4-24.6 0-33.9L201.7 103c-9.4-9.4-24.6-9.4-33.9 0l-136 136c-9.5 9.4-9.5 24.6-.1 34z"},null,-1)])])}const em=re(P4,[["render",N4],["__scopeId","data-v-ad51d4f5"]]),D4={class:"pagination"},L4=["onClick"],V4={__name:"PaginationList",props:["total"],setup(t){const e=xe(),n=bt("emitter"),s=we(()=>e.pageNum),r=t,i=c=>{let l=[];if(r.total>6){if(s.value===1)return[1,2,3,"...",c];if(s.value>1&&s.value<3)return[1,2,3,"...",c];if(s.value===3)return[1,2,3,4,"...",c];if(s.value>3&&s.value<c-2)return[1,"...",s.value-1,s.value,s.value+1,"...",c];if(s.value===c-2)return[1,"...",s.value-1,s.value,s.value+1,c];if(s.value===c-1)return[1,"...",s.value-1,s.value,c];if(s.value===c)return[1,"...",s.value-2,s.value-1,c]}else for(let u=1;u<=c;u++)l.push(u);return l},o=(c,l="")=>{if(c==="...")return;let u;l==="prev"?u=e.pageNum-1:l==="next"?u=e.pageNum+1:l==="prevAll"?u=1:l==="nextAll"?u=r.total:u=c,e.pageNum=u,n.emit("clickPage",u)};return(c,l)=>(O(),K("div",D4,[x("ul",null,[_t(x("li",{class:"pg first",onClick:l[0]||(l[0]=u=>o(null,"prevAll"))},[x("span",null,[Q(em)])],512),[[Yo,me(e).pageNum>1]]),_t(x("li",{class:"pg prev",onClick:l[1]||(l[1]=u=>o(null,"prev"))},[x("span",null,[Q(Zp)])],512),[[Yo,me(e).pageNum>1]]),(O(!0),K(De,null,ks(i(t.total),u=>(O(),K("li",{key:u},[x("span",{class:Ge({active:me(e).pageNum===u}),onClick:f=>o(u)},nt(u),11,L4)]))),128)),_t(x("li",{class:"pg next",onClick:l[2]||(l[2]=u=>o(null,"next"))},[x("span",null,[Q(Zp)])],512),[[Yo,me(e).pageNum<r.total]]),_t(x("li",{class:"pg last",onClick:l[3]||(l[3]=u=>o(null,"nextAll"))},[x("span",null,[Q(em)])],512),[[Yo,me(e).pageNum<r.total]])])]))}},Xa=re(V4,[["__scopeId","data-v-edfaf1b2"]]),O4={key:0,ref:"observer",class:"observer"},x4={__name:"MainList",setup(t){const e=xe(),n=bt("emitter"),s=_n(),r=pe([]),i=pe(0),o=pe(!1),c=async()=>{try{return Zb(e.pageNum)}catch(p){console.error("Error load films",p)}};async function l(p,m=""){m==="loading"&&n.emit("isLoading",!0),o.value=m==="preload",e.pageNum=p||e.pageNum;const _=await c();i.value=_.totalPages,m==="preload"?r.value=[...r.value,..._.items]:(r.value=[],r.value=_.items),o.value=!1,m==="loading"&&await _.items&&n.emit("isLoading",!1)}function u(){l(e.pageNum+1,"preload")}function f(){l(e.pageNum,"loading")}return n.on("clickPage",f),dn(()=>r.value,()=>{e.films=r.value}),dn(()=>s.currentRoute.value.href,()=>{e.films=r.value}),Gt(()=>{l()}),(p,m)=>{const _=to("title"),b=to("intersection");return O(),K(De,null,[_t((O(),K("h1",null,[Qe(nt(me(ai).MAIN),1)])),[[_]]),Q(Xa,{total:i.value},null,8,["total"]),Q(Hs,{items:r.value,showPreload:o.value},null,8,["items","showPreload"]),Q(Xa,{total:i.value},null,8,["total"]),me(e).pageNum<i.value?_t((O(),K("div",O4,null,512)),[[b,{getMoreFilms:u}]]):Ke("",!0)],64)}}},M4=re(x4,[["__scopeId","data-v-a13e747c"]]),F4=["src"],U4={__name:"FilmPlayerClub",setup(t){const n=js().params.id;return(s,r)=>(O(),K("div",null,[x("iframe",{src:`//496622434375553.svetacdn.in/fcvcbl7auqJG?kp_id=${me(n)}`,width:"100%",height:"495",allowfullscreen:""},null,8,F4)]))}},$4=re(U4,[["__scopeId","data-v-e9926cdc"]]),B4={class:"player-container"},j4={class:"player-select"},H4={class:"player-name-list"},W4=["onClick"],q4={key:0},z4=["src","title"],G4={key:1},K4={key:2},Q4={__name:"PlayersList",setup(t){const e=xe(),s=js().params.id,r=Object.keys(Xp),i=pe({}),o=pe({}),c=pe(null),l=pe(null),u=async b=>{c.value=b;const N=i.value[b];N.loaded||N.loading||await p(b)},f=b=>{if(b==="Alloha")return e.apiAloha;if(b==="HDVB")return e.apiHDBV},p=async b=>{o.value[b]=!0;const N=i.value[b];N&&(N.loading=!0);try{const k=Xp[b],H=f(b);let D=typeof k=="function"?await k(s,H):null;N&&(i.value[b]={...N,iframeSrc:D,loading:!1,loaded:!0,error:!D})}catch(k){console.error(`   ${b}:`,k),N&&(i.value[b]={...N,loading:!1,loaded:!0,error:!0})}finally{o.value[b]=!1}},m=()=>{for(const b of r)i.value[b]={name:b,iframeSrc:null,loading:!1,loaded:!1,error:!1}},_=async()=>{r.length>0&&(c.value=r[0],await p(r[0]))};return Gt(()=>{l.value&&(e.setFilmPageId(s),m(),_())}),(b,N)=>(O(),K("div",null,[x("div",B4,[x("div",j4,[x("div",H4,[(O(!0),K(De,null,ks(me(r),k=>(O(),K("button",{key:k,class:Ge({"select-button":!0,active:k===c.value,loading:o.value[k]}),onClick:H=>u(k)},nt(k),11,W4))),128))])]),x("div",{ref_key:"playerList",ref:l,class:"player-list"},[(O(!0),K(De,null,ks(i.value,k=>(O(),K("div",{key:k.name,class:Ge({"player-item":!0,active:k.name===c.value})},[k.name===c.value?(O(),K("div",q4,[k.iframeSrc?(O(),K("iframe",{key:0,src:k.iframeSrc,allowfullscreen:"",loading:"lazy",title:` ${k.name}   ID ${me(s)}`},null,8,z4)):k.loading?(O(),K("div",G4," ...")):(O(),K("div",K4,"  "))])):Ke("",!0)],2))),128))],512)])]))}},J4=re(Q4,[["__scopeId","data-v-ed13d71e"]]),Y4={key:0,class:"loading-round"},X4={__name:"ActionFavorite",props:{id:String},setup(t){const e=t,n=xe(),s=we(()=>Oo(n.favorites,e.id)),r=pe(!1);async function i(){if(!n.user){alert(" ");return}if(r.value=!0,s.value)await n.removeFavorite(e.id);else{const o=await oi(e.id);await n.addFavorite(await o)}r.value=!1}return(o,c)=>(O(),Ue(en,{class:Ge(["button",{selected:s.value}]),size:20,onClick:i,disabled:r.value},{default:je(()=>[r.value?(O(),K("span",Y4)):Ke("",!0),Q(Vc),c[0]||(c[0]=Qe("  ",-1))]),_:1},8,["class","disabled"]))}},Z4=re(X4,[["__scopeId","data-v-02ba588e"]]),ek={key:0,class:"loading-round"},tk={__name:"ActionWatching",props:{id:String},setup(t){const e=t,n=xe(),s=we(()=>Oo(n.watchingList,e.id)),r=pe(!1);async function i(){if(!n.user){alert(" ");return}if(r.value=!0,s.value)await n.removeWatching(e.id);else{const o=await oi(e.id);await n.addWatching(await o)}r.value=!1}return(o,c)=>(O(),Ue(en,{class:Ge(["button",{selected:s.value}]),size:20,onClick:i,disabled:r.value},{default:je(()=>[r.value?(O(),K("span",ek)):Ke("",!0),Q(sv),c[0]||(c[0]=Qe("   ",-1))]),_:1},8,["class","disabled"]))}},nk=re(tk,[["__scopeId","data-v-6801ff4f"]]),sk={key:0,class:"loading-round"},rk={__name:"ActionWatchList",props:{id:String},setup(t){const e=t,n=xe(),s=we(()=>Oo(n.watchList,e.id)),r=pe(!1);async function i(){if(!n.user){alert(" ");return}if(r.value=!0,s.value)await n.removeWatchList(e.id);else{const o=await oi(e.id);await n.addWatchList(await o)}r.value=!1}return(o,c)=>(O(),Ue(en,{class:Ge(["button",{selected:s.value}]),size:20,onClick:i,disabled:r.value},{default:je(()=>[r.value?(O(),K("span",sk)):Ke("",!0),Q(iv),c[0]||(c[0]=Qe("   ",-1))]),_:1},8,["class","disabled"]))}},ik=re(rk,[["__scopeId","data-v-50917f77"]]),ok={key:0,class:"loading-round"},ak={__name:"ActionWaitingList",props:{id:String},setup(t){const e=t,n=xe(),s=we(()=>Oo(n.waitingList,e.id)),r=pe(!1);async function i(){if(!n.user){alert(" ");return}if(r.value=!0,s.value)await n.removeWaitList(e.id);else{const o=await oi(e.id);await n.addWaitList(await o)}r.value=!1}return(o,c)=>(O(),Ue(en,{class:Ge(["button",{selected:s.value}]),size:20,onClick:i,disabled:r.value},{default:je(()=>[r.value?(O(),K("span",ok)):Ke("",!0),Q(rv),c[0]||(c[0]=Qe("   ",-1))]),_:1},8,["class","disabled"]))}},ck=re(ak,[["__scopeId","data-v-131c776b"]]),lk={class:"list"},uk={__name:"FilmActionList",setup(t){const n=js().params.id;return(s,r)=>(O(),Ue(Oh,{class:"popup",position:"right",maxWidth:"auto",buttonClass:"buttonTrigger"},{icon:je(()=>[Q(Vc,{class:"icon"})]),content:je(()=>[x("ul",lk,[x("li",null,[Q(Z4,{id:me(n),class:"item"},null,8,["id"])]),x("li",null,[Q(nk,{id:me(n),class:"item"},null,8,["id"])]),x("li",null,[Q(ik,{id:me(n),class:"item"},null,8,["id"])]),x("li",null,[Q(ck,{id:me(n),class:"item"},null,8,["id"])])])]),_:1}))}},hk=re(uk,[["__scopeId","data-v-4efff184"]]),fk={class:"tab-titles"},dk={class:"actions"},pk={__name:"FilmPlayerSelect",setup(t){const e=pe(0);return(n,s)=>(O(),K(De,null,[x("ul",fk,[x("li",{class:Ge({selected:e.value===1}),onClick:s[0]||(s[0]=r=>e.value=1)},"  ",2),x("li",{class:Ge({selected:e.value===5}),onClick:s[1]||(s[1]=r=>e.value=5)},"Lumex",2),x("li",dk,[Q(hk)])]),e.value===1?(O(),Ue(J4,{key:0})):Ke("",!0),e.value===5?(O(),Ue($4,{key:1})):Ke("",!0)],64))}},mk=re(pk,[["__scopeId","data-v-7a9636a7"]]),gk={},_k={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"};function yk(t,e){return O(),K("svg",_k,[...e[0]||(e[0]=[x("path",{fill:"currentColor",d:"M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"},null,-1)])])}const vk=re(gk,[["render",yk]]),Ek={__name:"ButtonBack",setup(t){const e=_n(),n=()=>{e.go(-1)};return(s,r)=>(O(),Ue(en,{onClick:n,size:18,class:"back"},{default:je(()=>[Q(vk),r[0]||(r[0]=Qe("",-1))]),_:1}))}},wk=re(Ek,[["__scopeId","data-v-a9e95ac4"]]),Ik={class:"image"},Tk={class:"icon-actions"},Ak=["src"],Sk={__name:"FilmImage",props:{filmInfo:Object},setup(t){const e=t,n=we(()=>e.filmInfo);return(s,r)=>(O(),K("div",Ik,[x("div",Tk,[Q(av,{class:"favorite",id:n.value.id},null,8,["id"]),Q(cv,{class:"watch",id:n.value.id},null,8,["id"]),Q(lv,{rating:n.value.rating,class:"rating"},null,8,["rating"])]),n.value?.image?(O(),K("img",{key:0,src:n.value?.image,alt:"filmTitle"},null,8,Ak)):Ke("",!0)]))}},Ck=re(Sk,[["__scopeId","data-v-18a271a1"]]),bk={class:"genres"},Rk=["onClick"],Pk={__name:"FilmGenres",props:{genres:Array,title:String},setup(t){const e=_n(),n=t,s=r=>{const o=JSON.parse(localStorage.getItem("genres")).filter(c=>c.genre===r)[0].id;window.scrollTo(0,0),e.push({name:"searchPage",query:{genres:o}})};return(r,i)=>(O(),K("div",bk,[x("h3",null,nt(n.title),1),x("ul",null,[(O(!0),K(De,null,ks(n.genres,o=>(O(),K("li",{key:o},[x("span",{onClick:c=>s(o)},nt(o),9,Rk)]))),128))])]))}},kk=re(Pk,[["__scopeId","data-v-f7385005"]]),Nk={class:"film__wrap"},Dk={class:"film__note"},Lk={class:"film__btns"},Vk={class:"film__description"},Ok={key:0,class:"film__similar"},xk={__name:"FilmPage",setup(t){const e=xe(),n=js(),s=pe([]),r=pe([]),i=we(()=>ov(s.value)),o=async()=>{try{const f=oi(n.params.id);s.value=await f,e.authChange().then(()=>{e.addLastViews(s.value)})}catch(f){console.error("Error load film info",f),s.value=[]}},c=async()=>{try{r.value=await Yb(n.params.id)}catch(f){console.error("Error load similars",f),r.value=[]}},l=async()=>{try{const p=(await Xb(n.params.id)).items||[];r.value=[...p,...r.value]}catch(f){console.error("Error load sequels and prequels",f)}},u=we(()=>e.isSkipped(s.value?.kinopoiskId||s.value?.filmId||s.value?.id));return Gt(()=>{o(),c(),l()}),(f,p)=>{const m=to("title");return O(),K(De,null,[Q(wk),_t((O(),K("h1",null,[Qe(nt(i.value),1)])),[[m]]),x("div",Nk,[Q(Ck,{filmInfo:s.value,class:Ge({unwatch:u.value})},null,8,["filmInfo","class"]),x("div",Dk,[x("div",Lk,[Q(mk)]),x("div",Vk,[p[0]||(p[0]=x("h3",null,":",-1)),Qe(" "+nt(s.value.description),1)]),Q(kk,{genres:s.value.genres||[],title:""},null,8,["genres"]),r.value.length>0?(O(),K("div",Ok,[p[1]||(p[1]=x("h3",null," ",-1)),Q(Hs,{items:r.value,isRating:!1},null,8,["items"])])):Ke("",!0)])])],64)}}},Mk=re(xk,[["__scopeId","data-v-2b2a596b"]]),Fk={key:0,ref:"observer",class:"observer"},Uk={__name:"SearchPage",setup(t){const e=js(),n=pe([]),s=bt("emitter"),r=xe(),i=pe(0),o=pe(!1),c=we(()=>e.query.q),l=we(()=>e.query.genres),u=pe(""),f=async()=>{const b={};r.searchQueryStore&&(b.keyword=r.searchQueryStore),r.genreIdStore&&(b.genres=r.genreIdStore),r.pageNum&&(b.page=r.pageNum);try{return eR(b)}catch(N){console.error("Error load films",N)}},p=async(b=!1,N)=>{if(r.pageNum=N||r.pageNum,r.genreIdStore||r.searchQueryStore||b){o.value=!0;const k=await f();i.value=k.totalPages,b?n.value=[...n.value,...k.items]:(n.value=[],n.value=k.items),o.value=!1}},m=()=>{p(!0,r.pageNum+1)},_=()=>{p(!1,r.pageNum)};return s.on("clickPage",_),Gt(async()=>{r.searchQueryStore=c.value,r.genreIdStore=l.value,await p(!1,1),s.on("searchSubmit",()=>{p(!1,1)}),u.value=await r.searchPageTitle()}),(b,N)=>{const k=to("title"),H=to("intersection");return O(),K(De,null,[_t((O(),K("h1",null,[Qe(nt(u.value),1)])),[[k]]),Q(Xa,{total:i.value,onClickPage:p},null,8,["total"]),Q(Hs,{items:n.value,showPreload:o.value},null,8,["items","showPreload"]),Q(Xa,{total:i.value,onClickPage:p},null,8,["total"]),me(r).pageNum<i.value?_t((O(),K("div",Fk,null,512)),[[H,{getMoreFilms:m}]]):Ke("",!0)],64)}}},$k={};function Bk(t,e){const n=Fu("router-link");return O(),K(De,null,[e[2]||(e[2]=x("h1",null,"  ",-1)),x("p",null,[e[1]||(e[1]=Qe("  ",-1)),Q(n,{to:"/"},{default:je(()=>[...e[0]||(e[0]=[Qe("",-1)])]),_:1})]),e[3]||(e[3]=x("br",null,null,-1))],64)}const jk=re($k,[["render",Bk],["__scopeId","data-v-1dfddbdd"]]),Hk={key:0},Wk={__name:"FavoritePage",setup(t){const e=xe(),n=pe(!1);return dn(()=>e.favorites,()=>{e.films=e.favorites}),(s,r)=>(O(),K(De,null,[x("h1",null,nt(me(ai).FAVORITE),1),Q(Hs,{items:me(e).favorites,showPreload:n.value},null,8,["items","showPreload"]),me(e).favorites.length===0?(O(),K("h3",Hk," ")):Ke("",!0)],64))}},qk=re(Wk,[["__scopeId","data-v-60454cc5"]]),zk={key:0},Gk={__name:"LastViews",setup(t){const e=xe(),n=we(()=>e.lastViews),s=pe(!1);return(r,i)=>(O(),K(De,null,[x("h1",null,nt(me(ai).LAST_VIEWS),1),Q(Hs,{items:n.value,showPreload:s.value},null,8,["items","showPreload"]),n.value.length===0?(O(),K("h3",zk," ")):Ke("",!0)],64))}},Kk=re(Gk,[["__scopeId","data-v-81ccf3e5"]]),Qk={key:0},Jk={__name:"WatchingPage",setup(t){const e=xe(),n=we(()=>mt(e.watchingList)),s=pe(!1);return(r,i)=>(O(),K(De,null,[x("h1",null,nt(me(ai).WATCHING),1),Q(Hs,{items:n.value,showPreload:s.value},null,8,["items","showPreload"]),n.value.length===0?(O(),K("h3",Qk," ")):Ke("",!0)],64))}},Yk=re(Jk,[["__scopeId","data-v-67175231"]]),Xk={key:0},Zk={__name:"WatchListPage",setup(t){const e=xe(),n=we(()=>mt(e.watchList)),s=pe(!1);return(r,i)=>(O(),K(De,null,[x("h1",null,nt(me(ai).WATCH_LIST),1),Q(Hs,{items:n.value,showPreload:s.value},null,8,["items","showPreload"]),n.value.length===0?(O(),K("h3",Xk," ")):Ke("",!0)],64))}},eN=re(Zk,[["__scopeId","data-v-18a12a67"]]),tN={key:0},nN={__name:"WaitListPage",setup(t){const e=xe(),n=we(()=>mt(e.waitingList)),s=pe(!1);return(r,i)=>(O(),K(De,null,[x("h1",null,nt(me(ai).WAIT_LIST),1),Q(Hs,{items:n.value,showPreload:s.value},null,8,["items","showPreload"]),n.value.length===0?(O(),K("h3",tN," ")):Ke("",!0)],64))}},sN=re(nN,[["__scopeId","data-v-3f8e8cfb"]]),rN=o2({history:FR("/hometv"),routes:[{path:ot.HOME.path,name:ot.HOME.name,component:M4},{path:ot.FILM_PAGE.path,name:ot.FILM_PAGE.name,component:Mk},{path:ot.SEARCH.path,name:ot.SEARCH.name,component:Uk},{path:ot.FAVORITES.path,name:ot.FAVORITES.name,component:qk},{path:ot.LAST_VIEWS.path,name:ot.LAST_VIEWS.name,component:Kk},{path:ot.WATCHING.path,name:ot.WATCHING.name,component:Yk},{path:ot.WATCH_LIST.path,name:ot.WATCH_LIST.name,component:eN},{path:ot.WAITING_LIST.path,name:ot.WAITING_LIST.name,component:sN},{path:"/:pathMatch(.*)*",component:jk}]});function iN(t){return{all:t=t||new Map,on:function(e,n){var s=t.get(e);s?s.push(n):t.set(e,[n])},off:function(e,n){var s=t.get(e);s&&(n?s.splice(s.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var s=t.get(e);s&&s.slice().map(function(r){r(n)}),(s=t.get("*"))&&s.slice().map(function(r){r(e,n)})}}}var oN=function(){return!!(window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))},Eu;typeof window<"u"&&(typeof Promise<"u"?Eu=new Promise(function(t){return window.addEventListener("load",t)}):Eu={then:function(t){return window.addEventListener("load",t)}});function aN(t,e){e===void 0&&(e={});var n=e.registrationOptions;n===void 0&&(n={}),delete e.registrationOptions;var s=function(r){for(var i=[],o=arguments.length-1;o-- >0;)i[o]=arguments[o+1];e&&e[r]&&e[r].apply(e,i)};"serviceWorker"in navigator&&Eu.then(function(){oN()?(cN(t,s,n),navigator.serviceWorker.ready.then(function(r){s("ready",r)}).catch(function(r){return _o(s,r)})):(uv(t,s,n),navigator.serviceWorker.ready.then(function(r){s("ready",r)}).catch(function(r){return _o(s,r)}))})}function _o(t,e){navigator.onLine||t("offline"),t("error",e)}function uv(t,e,n){navigator.serviceWorker.register(t,n).then(function(s){if(e("registered",s),s.waiting){e("updated",s);return}s.onupdatefound=function(){e("updatefound",s);var r=s.installing;r.onstatechange=function(){r.state==="installed"&&(navigator.serviceWorker.controller?e("updated",s):e("cached",s))}}}).catch(function(s){return _o(e,s)})}function cN(t,e,n){fetch(t).then(function(s){s.status===404?(e("error",new Error("Service worker not found at "+t)),tm()):s.headers.get("content-type").indexOf("javascript")===-1?(e("error",new Error("Expected "+t+" to have javascript content-type, but received "+s.headers.get("content-type"))),tm()):uv(t,e,n)}).catch(function(s){return _o(e,s)})}function tm(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()}).catch(function(t){return _o(emit,t)})}aN("/hometv/service-worker.js",{ready(){console.log(`App is being served from cache by a service worker.
For more details, visit https://goo.gl/AFskqB`)},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});const lN=iN(),ci=aI(GP);ci.directive("intersection",_I);ci.directive("title",yI);ci.use(uI());ci.use(rN);ci.provide("emitter",lN);ci.mount("#app");
