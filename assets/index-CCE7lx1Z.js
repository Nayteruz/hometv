(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function Eu(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Be={},Nr=[],Tn=()=>{},tm=()=>!1,Xa=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),wu=t=>t.startsWith("onUpdate:"),_t=Object.assign,Iu=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Nv=Object.prototype.hasOwnProperty,Ve=(t,e)=>Nv.call(t,e),fe=Array.isArray,Dr=t=>go(t)==="[object Map]",nm=t=>go(t)==="[object Set]",Dv=t=>go(t)==="[object RegExp]",_e=t=>typeof t=="function",Xe=t=>typeof t=="string",Zn=t=>typeof t=="symbol",We=t=>t!==null&&typeof t=="object",sm=t=>(We(t)||_e(t))&&_e(t.then)&&_e(t.catch),rm=Object.prototype.toString,go=t=>rm.call(t),Lv=t=>go(t).slice(8,-1),im=t=>go(t)==="[object Object]",Tu=t=>Xe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Oi=Eu(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Za=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},Vv=/-\w/g,on=Za(t=>t.replace(Vv,e=>e.slice(1).toUpperCase())),Ov=/\B([A-Z])/g,xs=Za(t=>t.replace(Ov,"-$1").toLowerCase()),ec=Za(t=>t.charAt(0).toUpperCase()+t.slice(1)),Kc=Za(t=>t?`on${ec(t)}`:""),ws=(t,e)=>!Object.is(t,e),Lr=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},om=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},Au=t=>{const e=parseFloat(t);return isNaN(e)?t:e},xv=t=>{const e=Xe(t)?Number(t):NaN;return isNaN(e)?t:e};let Af;const tc=()=>Af||(Af=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function _o(t){if(fe(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=Xe(s)?$v(s):_o(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(Xe(t)||We(t))return t}const Mv=/;(?![^(]*\))/g,Fv=/:([^]+)/,Uv=/\/\*[^]*?\*\//g;function $v(t){const e={};return t.replace(Uv,"").split(Mv).forEach(n=>{if(n){const s=n.split(Fv);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Ge(t){let e="";if(Xe(t))e=t;else if(fe(t))for(let n=0;n<t.length;n++){const s=Ge(t[n]);s&&(e+=s+" ")}else if(We(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Bv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",jv=Eu(Bv);function am(t){return!!t||t===""}const cm=t=>!!(t&&t.__v_isRef===!0),nt=t=>Xe(t)?t:t==null?"":fe(t)||We(t)&&(t.toString===rm||!_e(t.toString))?cm(t)?nt(t.value):JSON.stringify(t,lm,2):String(t),lm=(t,e)=>cm(e)?lm(t,e.value):Dr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[Qc(s,i)+" =>"]=r,n),{})}:nm(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Qc(n))}:Zn(e)?Qc(e):We(e)&&!fe(e)&&!im(e)?String(e):e,Qc=(t,e="")=>{var n;return Zn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let Dt;class um{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Dt,!e&&Dt&&(this.index=(Dt.scopes||(Dt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Dt;try{return Dt=this,e()}finally{Dt=n}}}on(){++this._on===1&&(this.prevScope=Dt,Dt=this)}off(){this._on>0&&--this._on===0&&(Dt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function hm(t){return new um(t)}function fm(){return Dt}function Hv(t,e=!1){Dt&&Dt.cleanups.push(t)}let He;const Yc=new WeakSet;class dm{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Dt&&Dt.active&&Dt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Yc.has(this)&&(Yc.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||mm(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Sf(this),gm(this);const e=He,n=hn;He=this,hn=!0;try{return this.fn()}finally{_m(this),He=e,hn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)bu(e);this.deps=this.depsTail=void 0,Sf(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Yc.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Rl(this)&&this.run()}get dirty(){return Rl(this)}}let pm=0,xi,Mi;function mm(t,e=!1){if(t.flags|=8,e){t.next=Mi,Mi=t;return}t.next=xi,xi=t}function Su(){pm++}function Cu(){if(--pm>0)return;if(Mi){let e=Mi;for(Mi=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;xi;){let e=xi;for(xi=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function gm(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function _m(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),bu(s),Wv(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function Rl(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(ym(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function ym(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Yi)||(t.globalVersion=Yi,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Rl(t))))return;t.flags|=2;const e=t.dep,n=He,s=hn;He=t,hn=!0;try{gm(t);const r=t.fn(t._value);(e.version===0||ws(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{He=n,hn=s,_m(t),t.flags&=-3}}function bu(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)bu(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Wv(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let hn=!0;const vm=[];function zn(){vm.push(hn),hn=!1}function Gn(){const t=vm.pop();hn=t===void 0?!0:t}function Sf(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=He;He=void 0;try{e()}finally{He=n}}}let Yi=0;class qv{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ru{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!He||!hn||He===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==He)n=this.activeLink=new qv(He,this),He.deps?(n.prevDep=He.depsTail,He.depsTail.nextDep=n,He.depsTail=n):He.deps=He.depsTail=n,Em(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=He.depsTail,n.nextDep=void 0,He.depsTail.nextDep=n,He.depsTail=n,He.deps===n&&(He.deps=s)}return n}trigger(e){this.version++,Yi++,this.notify(e)}notify(e){Su();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Cu()}}}function Em(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)Em(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const _a=new WeakMap,nr=Symbol(""),Pl=Symbol(""),Ji=Symbol("");function Vt(t,e,n){if(hn&&He){let s=_a.get(t);s||_a.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new Ru),r.map=s,r.key=n),r.track()}}function $n(t,e,n,s,r,i){const o=_a.get(t);if(!o){Yi++;return}const c=l=>{l&&l.trigger()};if(Su(),e==="clear")o.forEach(c);else{const l=fe(t),u=l&&Tu(n);if(l&&n==="length"){const f=Number(s);o.forEach((d,m)=>{(m==="length"||m===Ji||!Zn(m)&&m>=f)&&c(d)})}else switch((n!==void 0||o.has(void 0))&&c(o.get(n)),u&&c(o.get(Ji)),e){case"add":l?u&&c(o.get("length")):(c(o.get(nr)),Dr(t)&&c(o.get(Pl)));break;case"delete":l||(c(o.get(nr)),Dr(t)&&c(o.get(Pl)));break;case"set":Dr(t)&&c(o.get(nr));break}}Cu()}function zv(t,e){const n=_a.get(t);return n&&n.get(e)}function Er(t){const e=Ne(t);return e===t?e:(Vt(e,"iterate",Ji),rn(t)?e:e.map(It))}function nc(t){return Vt(t=Ne(t),"iterate",Ji),t}const Gv={__proto__:null,[Symbol.iterator](){return Jc(this,Symbol.iterator,It)},concat(...t){return Er(this).concat(...t.map(e=>fe(e)?Er(e):e))},entries(){return Jc(this,"entries",t=>(t[1]=It(t[1]),t))},every(t,e){return On(this,"every",t,e,void 0,arguments)},filter(t,e){return On(this,"filter",t,e,n=>n.map(It),arguments)},find(t,e){return On(this,"find",t,e,It,arguments)},findIndex(t,e){return On(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return On(this,"findLast",t,e,It,arguments)},findLastIndex(t,e){return On(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return On(this,"forEach",t,e,void 0,arguments)},includes(...t){return Xc(this,"includes",t)},indexOf(...t){return Xc(this,"indexOf",t)},join(t){return Er(this).join(t)},lastIndexOf(...t){return Xc(this,"lastIndexOf",t)},map(t,e){return On(this,"map",t,e,void 0,arguments)},pop(){return Ti(this,"pop")},push(...t){return Ti(this,"push",t)},reduce(t,...e){return Cf(this,"reduce",t,e)},reduceRight(t,...e){return Cf(this,"reduceRight",t,e)},shift(){return Ti(this,"shift")},some(t,e){return On(this,"some",t,e,void 0,arguments)},splice(...t){return Ti(this,"splice",t)},toReversed(){return Er(this).toReversed()},toSorted(t){return Er(this).toSorted(t)},toSpliced(...t){return Er(this).toSpliced(...t)},unshift(...t){return Ti(this,"unshift",t)},values(){return Jc(this,"values",It)}};function Jc(t,e,n){const s=nc(t),r=s[e]();return s!==t&&!rn(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.done||(i.value=n(i.value)),i}),r}const Kv=Array.prototype;function On(t,e,n,s,r,i){const o=nc(t),c=o!==t&&!rn(t),l=o[e];if(l!==Kv[e]){const d=l.apply(t,i);return c?It(d):d}let u=n;o!==t&&(c?u=function(d,m){return n.call(this,It(d),m,t)}:n.length>2&&(u=function(d,m){return n.call(this,d,m,t)}));const f=l.call(o,u,s);return c&&r?r(f):f}function Cf(t,e,n,s){const r=nc(t);let i=n;return r!==t&&(rn(t)?n.length>3&&(i=function(o,c,l){return n.call(this,o,c,l,t)}):i=function(o,c,l){return n.call(this,o,It(c),l,t)}),r[e](i,...s)}function Xc(t,e,n){const s=Ne(t);Vt(s,"iterate",Ji);const r=s[e](...n);return(r===-1||r===!1)&&Nu(n[0])?(n[0]=Ne(n[0]),s[e](...n)):r}function Ti(t,e,n=[]){zn(),Su();const s=Ne(t)[e].apply(t,n);return Cu(),Gn(),s}const Qv=Eu("__proto__,__v_isRef,__isVue"),wm=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Zn));function Yv(t){Zn(t)||(t=String(t));const e=Ne(this);return Vt(e,"has",t),e.hasOwnProperty(t)}class Im{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?oE:Cm:i?Sm:Am).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=fe(e);if(!r){let l;if(o&&(l=Gv[n]))return l;if(n==="hasOwnProperty")return Yv}const c=Reflect.get(e,n,rt(e)?e:s);if((Zn(n)?wm.has(n):Qv(n))||(r||Vt(e,"get",n),i))return c;if(rt(c)){const l=o&&Tu(n)?c:c.value;return r&&We(l)?Nl(l):l}return We(c)?r?Nl(c):yo(c):c}}class Tm extends Im{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];if(!this._isShallow){const l=Rs(i);if(!rn(s)&&!Rs(s)&&(i=Ne(i),s=Ne(s)),!fe(e)&&rt(i)&&!rt(s))return l||(i.value=s),!0}const o=fe(e)&&Tu(n)?Number(n)<e.length:Ve(e,n),c=Reflect.set(e,n,s,rt(e)?e:r);return e===Ne(r)&&(o?ws(s,i)&&$n(e,"set",n,s):$n(e,"add",n,s)),c}deleteProperty(e,n){const s=Ve(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&$n(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!Zn(n)||!wm.has(n))&&Vt(e,"has",n),s}ownKeys(e){return Vt(e,"iterate",fe(e)?"length":nr),Reflect.ownKeys(e)}}class Jv extends Im{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Xv=new Tm,Zv=new Jv,eE=new Tm(!0);const kl=t=>t,Wo=t=>Reflect.getPrototypeOf(t);function tE(t,e,n){return function(...s){const r=this.__v_raw,i=Ne(r),o=Dr(i),c=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=r[t](...s),f=n?kl:e?ya:It;return!e&&Vt(i,"iterate",l?Pl:nr),{next(){const{value:d,done:m}=u.next();return m?{value:d,done:m}:{value:c?[f(d[0]),f(d[1])]:f(d),done:m}},[Symbol.iterator](){return this}}}}function qo(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function nE(t,e){const n={get(r){const i=this.__v_raw,o=Ne(i),c=Ne(r);t||(ws(r,c)&&Vt(o,"get",r),Vt(o,"get",c));const{has:l}=Wo(o),u=e?kl:t?ya:It;if(l.call(o,r))return u(i.get(r));if(l.call(o,c))return u(i.get(c));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&Vt(Ne(r),"iterate",nr),r.size},has(r){const i=this.__v_raw,o=Ne(i),c=Ne(r);return t||(ws(r,c)&&Vt(o,"has",r),Vt(o,"has",c)),r===c?i.has(r):i.has(r)||i.has(c)},forEach(r,i){const o=this,c=o.__v_raw,l=Ne(c),u=e?kl:t?ya:It;return!t&&Vt(l,"iterate",nr),c.forEach((f,d)=>r.call(i,u(f),u(d),o))}};return _t(n,t?{add:qo("add"),set:qo("set"),delete:qo("delete"),clear:qo("clear")}:{add(r){!e&&!rn(r)&&!Rs(r)&&(r=Ne(r));const i=Ne(this);return Wo(i).has.call(i,r)||(i.add(r),$n(i,"add",r,r)),this},set(r,i){!e&&!rn(i)&&!Rs(i)&&(i=Ne(i));const o=Ne(this),{has:c,get:l}=Wo(o);let u=c.call(o,r);u||(r=Ne(r),u=c.call(o,r));const f=l.call(o,r);return o.set(r,i),u?ws(i,f)&&$n(o,"set",r,i):$n(o,"add",r,i),this},delete(r){const i=Ne(this),{has:o,get:c}=Wo(i);let l=o.call(i,r);l||(r=Ne(r),l=o.call(i,r)),c&&c.call(i,r);const u=i.delete(r);return l&&$n(i,"delete",r,void 0),u},clear(){const r=Ne(this),i=r.size!==0,o=r.clear();return i&&$n(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=tE(r,t,e)}),n}function Pu(t,e){const n=nE(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(Ve(n,r)&&r in s?n:s,r,i)}const sE={get:Pu(!1,!1)},rE={get:Pu(!1,!0)},iE={get:Pu(!0,!1)};const Am=new WeakMap,Sm=new WeakMap,Cm=new WeakMap,oE=new WeakMap;function aE(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function cE(t){return t.__v_skip||!Object.isExtensible(t)?0:aE(Lv(t))}function yo(t){return Rs(t)?t:ku(t,!1,Xv,sE,Am)}function bm(t){return ku(t,!1,eE,rE,Sm)}function Nl(t){return ku(t,!0,Zv,iE,Cm)}function ku(t,e,n,s,r){if(!We(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=cE(t);if(i===0)return t;const o=r.get(t);if(o)return o;const c=new Proxy(t,i===2?s:n);return r.set(t,c),c}function Is(t){return Rs(t)?Is(t.__v_raw):!!(t&&t.__v_isReactive)}function Rs(t){return!!(t&&t.__v_isReadonly)}function rn(t){return!!(t&&t.__v_isShallow)}function Nu(t){return t?!!t.__v_raw:!1}function Ne(t){const e=t&&t.__v_raw;return e?Ne(e):t}function Du(t){return!Ve(t,"__v_skip")&&Object.isExtensible(t)&&om(t,"__v_skip",!0),t}const It=t=>We(t)?yo(t):t,ya=t=>We(t)?Nl(t):t;function rt(t){return t?t.__v_isRef===!0:!1}function me(t){return Rm(t,!1)}function lE(t){return Rm(t,!0)}function Rm(t,e){return rt(t)?t:new uE(t,e)}class uE{constructor(e,n){this.dep=new Ru,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Ne(e),this._value=n?e:It(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||rn(e)||Rs(e);e=s?e:Ne(e),ws(e,n)&&(this._rawValue=e,this._value=s?e:It(e),this.dep.trigger())}}function oe(t){return rt(t)?t.value:t}const hE={get:(t,e,n)=>e==="__v_raw"?t:oe(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return rt(r)&&!rt(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function Pm(t){return Is(t)?t:new Proxy(t,hE)}function fE(t){const e=fe(t)?new Array(t.length):{};for(const n in t)e[n]=pE(t,n);return e}class dE{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return zv(Ne(this._object),this._key)}}function pE(t,e,n){const s=t[e];return rt(s)?s:new dE(t,e,n)}class mE{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Ru(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Yi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&He!==this)return mm(this,!0),!0}get value(){const e=this.dep.track();return ym(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function gE(t,e,n=!1){let s,r;return _e(t)?s=t:(s=t.get,r=t.set),new mE(s,r,n)}const zo={},va=new WeakMap;let Xs;function _E(t,e=!1,n=Xs){if(n){let s=va.get(n);s||va.set(n,s=[]),s.push(t)}}function yE(t,e,n=Be){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:c,call:l}=n,u=M=>r?M:rn(M)||r===!1||r===0?Bn(M,1):Bn(M);let f,d,m,_,b=!1,N=!1;if(rt(t)?(d=()=>t.value,b=rn(t)):Is(t)?(d=()=>u(t),b=!0):fe(t)?(N=!0,b=t.some(M=>Is(M)||rn(M)),d=()=>t.map(M=>{if(rt(M))return M.value;if(Is(M))return u(M);if(_e(M))return l?l(M,2):M()})):_e(t)?e?d=l?()=>l(t,2):t:d=()=>{if(m){zn();try{m()}finally{Gn()}}const M=Xs;Xs=f;try{return l?l(t,3,[_]):t(_)}finally{Xs=M}}:d=Tn,e&&r){const M=d,Z=r===!0?1/0:r;d=()=>Bn(M(),Z)}const L=fm(),H=()=>{f.stop(),L&&L.active&&Iu(L.effects,f)};if(i&&e){const M=e;e=(...Z)=>{M(...Z),H()}}let D=N?new Array(t.length).fill(zo):zo;const V=M=>{if(!(!(f.flags&1)||!f.dirty&&!M))if(e){const Z=f.run();if(r||b||(N?Z.some((ie,S)=>ws(ie,D[S])):ws(Z,D))){m&&m();const ie=Xs;Xs=f;try{const S=[Z,D===zo?void 0:N&&D[0]===zo?[]:D,_];D=Z,l?l(e,3,S):e(...S)}finally{Xs=ie}}}else f.run()};return c&&c(V),f=new dm(d),f.scheduler=o?()=>o(V,!1):V,_=M=>_E(M,!1,f),m=f.onStop=()=>{const M=va.get(f);if(M){if(l)l(M,4);else for(const Z of M)Z();va.delete(f)}},e?s?V(!0):D=f.run():o?o(V.bind(null,!0),!0):f.run(),H.pause=f.pause.bind(f),H.resume=f.resume.bind(f),H.stop=H,H}function Bn(t,e=1/0,n){if(e<=0||!We(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,rt(t))Bn(t.value,e,n);else if(fe(t))for(let s=0;s<t.length;s++)Bn(t[s],e,n);else if(nm(t)||Dr(t))t.forEach(s=>{Bn(s,e,n)});else if(im(t)){for(const s in t)Bn(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&Bn(t[s],e,n)}return t}function vo(t,e,n,s){try{return s?t(...s):t()}catch(r){sc(r,e,n)}}function dn(t,e,n,s){if(_e(t)){const r=vo(t,e,n,s);return r&&sm(r)&&r.catch(i=>{sc(i,e,n)}),r}if(fe(t)){const r=[];for(let i=0;i<t.length;i++)r.push(dn(t[i],e,n,s));return r}}function sc(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Be;if(e){let c=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;c;){const f=c.ec;if(f){for(let d=0;d<f.length;d++)if(f[d](t,l,u)===!1)return}c=c.parent}if(i){zn(),vo(i,null,10,[t,l,u]),Gn();return}}vE(t,n,r,s,o)}function vE(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const jt=[];let En=-1;const Vr=[];let fs=null,Tr=0;const km=Promise.resolve();let Ea=null;function Lu(t){const e=Ea||km;return t?e.then(this?t.bind(this):t):e}function EE(t){let e=En+1,n=jt.length;for(;e<n;){const s=e+n>>>1,r=jt[s],i=Xi(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function Vu(t){if(!(t.flags&1)){const e=Xi(t),n=jt[jt.length-1];!n||!(t.flags&2)&&e>=Xi(n)?jt.push(t):jt.splice(EE(e),0,t),t.flags|=1,Nm()}}function Nm(){Ea||(Ea=km.then(Lm))}function wE(t){fe(t)?Vr.push(...t):fs&&t.id===-1?fs.splice(Tr+1,0,t):t.flags&1||(Vr.push(t),t.flags|=1),Nm()}function bf(t,e,n=En+1){for(;n<jt.length;n++){const s=jt[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;jt.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Dm(t){if(Vr.length){const e=[...new Set(Vr)].sort((n,s)=>Xi(n)-Xi(s));if(Vr.length=0,fs){fs.push(...e);return}for(fs=e,Tr=0;Tr<fs.length;Tr++){const n=fs[Tr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}fs=null,Tr=0}}const Xi=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Lm(t){try{for(En=0;En<jt.length;En++){const e=jt[En];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),vo(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;En<jt.length;En++){const e=jt[En];e&&(e.flags&=-2)}En=-1,jt.length=0,Dm(),Ea=null,(jt.length||Vr.length)&&Lm()}}let St=null,Vm=null;function wa(t){const e=St;return St=t,Vm=t&&t.type.__scopeId||null,e}function je(t,e=St,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&Ca(-1);const i=wa(e);let o;try{o=t(...r)}finally{wa(i),s._d&&Ca(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function gt(t,e){if(St===null)return t;const n=lc(St),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,c,l=Be]=e[r];i&&(_e(i)&&(i={mounted:i,updated:i}),i.deep&&Bn(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:c,modifiers:l}))}return t}function Ks(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const c=r[o];i&&(c.oldValue=i[o].value);let l=c.dir[s];l&&(zn(),dn(l,n,8,[t.el,c,t,e]),Gn())}}const IE=Symbol("_vte"),Om=t=>t.__isTeleport,Un=Symbol("_leaveCb"),Go=Symbol("_enterCb");function TE(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return zt(()=>{t.isMounted=!0}),Yr(()=>{t.isUnmounting=!0}),t}const en=[Function,Array],xm={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:en,onEnter:en,onAfterEnter:en,onEnterCancelled:en,onBeforeLeave:en,onLeave:en,onAfterLeave:en,onLeaveCancelled:en,onBeforeAppear:en,onAppear:en,onAfterAppear:en,onAppearCancelled:en},Mm=t=>{const e=t.subTree;return e.component?Mm(e.component):e},AE={name:"BaseTransition",props:xm,setup(t,{slots:e}){const n=cc(),s=TE();return()=>{const r=e.default&&$m(e.default(),!0);if(!r||!r.length)return;const i=Fm(r),o=Ne(t),{mode:c}=o;if(s.isLeaving)return Zc(i);const l=Rf(i);if(!l)return Zc(i);let u=Dl(l,o,s,n,d=>u=d);l.type!==Tt&&Ur(l,u);let f=n.subTree&&Rf(n.subTree);if(f&&f.type!==Tt&&!ms(f,l)&&Mm(n).type!==Tt){let d=Dl(f,o,s,n);if(Ur(f,d),c==="out-in"&&l.type!==Tt)return s.isLeaving=!0,d.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,f=void 0},Zc(i);c==="in-out"&&l.type!==Tt?d.delayLeave=(m,_,b)=>{const N=Um(s,f);N[String(f.key)]=f,m[Un]=()=>{_(),m[Un]=void 0,delete u.delayedLeave,f=void 0},u.delayedLeave=()=>{b(),delete u.delayedLeave,f=void 0}}:f=void 0}else f&&(f=void 0);return i}}};function Fm(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==Tt){e=n;break}}return e}const SE=AE;function Um(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function Dl(t,e,n,s,r){const{appear:i,mode:o,persisted:c=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:f,onEnterCancelled:d,onBeforeLeave:m,onLeave:_,onAfterLeave:b,onLeaveCancelled:N,onBeforeAppear:L,onAppear:H,onAfterAppear:D,onAppearCancelled:V}=e,M=String(t.key),Z=Um(n,t),ie=(y,I)=>{y&&dn(y,s,9,I)},S=(y,I)=>{const A=I[1];ie(y,I),fe(y)?y.every(T=>T.length<=1)&&A():y.length<=1&&A()},v={mode:o,persisted:c,beforeEnter(y){let I=l;if(!n.isMounted)if(i)I=L||l;else return;y[Un]&&y[Un](!0);const A=Z[M];A&&ms(t,A)&&A.el[Un]&&A.el[Un](),ie(I,[y])},enter(y){let I=u,A=f,T=d;if(!n.isMounted)if(i)I=H||u,A=D||f,T=V||d;else return;let E=!1;const be=y[Go]=Ye=>{E||(E=!0,Ye?ie(T,[y]):ie(A,[y]),v.delayedLeave&&v.delayedLeave(),y[Go]=void 0)};I?S(I,[y,be]):be()},leave(y,I){const A=String(t.key);if(y[Go]&&y[Go](!0),n.isUnmounting)return I();ie(m,[y]);let T=!1;const E=y[Un]=be=>{T||(T=!0,I(),be?ie(N,[y]):ie(b,[y]),y[Un]=void 0,Z[A]===t&&delete Z[A])};Z[A]=t,_?S(_,[y,E]):E()},clone(y){const I=Dl(y,e,n,s,r);return r&&r(I),I}};return v}function Zc(t){if(rc(t))return t=Kn(t),t.children=null,t}function Rf(t){if(!rc(t))return Om(t.type)&&t.children?Fm(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&_e(n.default))return n.default()}}function Ur(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Ur(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function $m(t,e=!1,n){let s=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const c=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===De?(o.patchFlag&128&&r++,s=s.concat($m(o.children,e,c))):(e||o.type!==Tt)&&s.push(c!=null?Kn(o,{key:c}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}function Bm(t,e){return _e(t)?_t({name:t.name},e,{setup:t}):t}function jm(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Ia=new WeakMap;function Fi(t,e,n,s,r=!1){if(fe(t)){t.forEach((b,N)=>Fi(b,e&&(fe(e)?e[N]:e),n,s,r));return}if(sr(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Fi(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?lc(s.component):s.el,o=r?null:i,{i:c,r:l}=t,u=e&&e.r,f=c.refs===Be?c.refs={}:c.refs,d=c.setupState,m=Ne(d),_=d===Be?tm:b=>Ve(m,b);if(u!=null&&u!==l){if(Pf(e),Xe(u))f[u]=null,_(u)&&(d[u]=null);else if(rt(u)){u.value=null;const b=e;b.k&&(f[b.k]=null)}}if(_e(l))vo(l,c,12,[o,f]);else{const b=Xe(l),N=rt(l);if(b||N){const L=()=>{if(t.f){const H=b?_(l)?d[l]:f[l]:l.value;if(r)fe(H)&&Iu(H,i);else if(fe(H))H.includes(i)||H.push(i);else if(b)f[l]=[i],_(l)&&(d[l]=f[l]);else{const D=[i];l.value=D,t.k&&(f[t.k]=D)}}else b?(f[l]=o,_(l)&&(d[l]=o)):N&&(l.value=o,t.k&&(f[t.k]=o))};if(o){const H=()=>{L(),Ia.delete(t)};H.id=-1,Ia.set(t,H),Et(H,n)}else Pf(t),L()}}}function Pf(t){const e=Ia.get(t);e&&(e.flags|=8,Ia.delete(t))}tc().requestIdleCallback;tc().cancelIdleCallback;const sr=t=>!!t.type.__asyncLoader,rc=t=>t.type.__isKeepAlive,CE={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=cc(),s=n.ctx;if(!s.renderer)return()=>{const D=e.default&&e.default();return D&&D.length===1?D[0]:D};const r=new Map,i=new Set;let o=null;const c=n.suspense,{renderer:{p:l,m:u,um:f,o:{createElement:d}}}=s,m=d("div");s.activate=(D,V,M,Z,ie)=>{const S=D.component;u(D,V,M,0,c),l(S.vnode,D,V,M,S,c,Z,D.slotScopeIds,ie),Et(()=>{S.isDeactivated=!1,S.a&&Lr(S.a);const v=D.props&&D.props.onVnodeMounted;v&&tn(v,S.parent,D)},c)},s.deactivate=D=>{const V=D.component;Aa(V.m),Aa(V.a),u(D,m,null,1,c),Et(()=>{V.da&&Lr(V.da);const M=D.props&&D.props.onVnodeUnmounted;M&&tn(M,V.parent,D),V.isDeactivated=!0},c)};function _(D){el(D),f(D,n,c,!0)}function b(D){r.forEach((V,M)=>{const Z=Ul(V.type);Z&&!D(Z)&&N(M)})}function N(D){const V=r.get(D);V&&(!o||!ms(V,o))?_(V):o&&el(o),r.delete(D),i.delete(D)}fn(()=>[t.include,t.exclude],([D,V])=>{D&&b(M=>bi(D,M)),V&&b(M=>!bi(V,M))},{flush:"post",deep:!0});let L=null;const H=()=>{L!=null&&(Sa(n.subTree.type)?Et(()=>{r.set(L,Ko(n.subTree))},n.subTree.suspense):r.set(L,Ko(n.subTree)))};return zt(H),Wm(H),Yr(()=>{r.forEach(D=>{const{subTree:V,suspense:M}=n,Z=Ko(V);if(D.type===Z.type&&D.key===Z.key){el(Z);const ie=Z.component.da;ie&&Et(ie,M);return}_(D)})}),()=>{if(L=null,!e.default)return o=null;const D=e.default(),V=D[0];if(D.length>1)return o=null,D;if(!$r(V)||!(V.shapeFlag&4)&&!(V.shapeFlag&128))return o=null,V;let M=Ko(V);if(M.type===Tt)return o=null,M;const Z=M.type,ie=Ul(sr(M)?M.type.__asyncResolved||{}:Z),{include:S,exclude:v,max:y}=t;if(S&&(!ie||!bi(S,ie))||v&&ie&&bi(v,ie))return M.shapeFlag&=-257,o=M,V;const I=M.key==null?Z:M.key,A=r.get(I);return M.el&&(M=Kn(M),V.shapeFlag&128&&(V.ssContent=M)),L=I,A?(M.el=A.el,M.component=A.component,M.transition&&Ur(M,M.transition),M.shapeFlag|=512,i.delete(I),i.add(I)):(i.add(I),y&&i.size>parseInt(y,10)&&N(i.values().next().value)),M.shapeFlag|=256,o=M,Sa(V.type)?V:M}}},bE=CE;function bi(t,e){return fe(t)?t.some(n=>bi(n,e)):Xe(t)?t.split(",").includes(e):Dv(t)?(t.lastIndex=0,t.test(e)):!1}function RE(t,e){Hm(t,"a",e)}function PE(t,e){Hm(t,"da",e)}function Hm(t,e,n=xt){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(ic(e,s,n),n){let r=n.parent;for(;r&&r.parent;)rc(r.parent.vnode)&&kE(s,e,n,r),r=r.parent}}function kE(t,e,n,s){const r=ic(e,t,s,!0);Ou(()=>{Iu(s[e],r)},n)}function el(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function Ko(t){return t.shapeFlag&128?t.ssContent:t}function ic(t,e,n=xt,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{zn();const c=Eo(n),l=dn(e,n,t,o);return c(),Gn(),l});return s?r.unshift(i):r.push(i),i}}const es=t=>(e,n=xt)=>{(!to||t==="sp")&&ic(t,(...s)=>e(...s),n)},NE=es("bm"),zt=es("m"),DE=es("bu"),Wm=es("u"),Yr=es("bum"),Ou=es("um"),LE=es("sp"),VE=es("rtg"),OE=es("rtc");function xE(t,e=xt){ic("ec",t,e)}const xu="components",ME="directives";function Mu(t,e){return Fu(xu,t,!0,e)||t}const qm=Symbol.for("v-ndc");function FE(t){return Xe(t)?Fu(xu,t,!1)||t:t||qm}function Zi(t){return Fu(ME,t)}function Fu(t,e,n=!0,s=!1){const r=St||xt;if(r){const i=r.type;if(t===xu){const c=Ul(i,!1);if(c&&(c===e||c===on(e)||c===ec(on(e))))return i}const o=kf(r[t]||i[t],e)||kf(r.appContext[t],e);return!o&&s?i:o}}function kf(t,e){return t&&(t[e]||t[on(e)]||t[ec(on(e))])}function Ps(t,e,n,s){let r;const i=n,o=fe(t);if(o||Xe(t)){const c=o&&Is(t);let l=!1,u=!1;c&&(l=!rn(t),u=Rs(t),t=nc(t)),r=new Array(t.length);for(let f=0,d=t.length;f<d;f++)r[f]=e(l?u?ya(It(t[f])):It(t[f]):t[f],f,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let c=0;c<t;c++)r[c]=e(c+1,c,void 0,i)}else if(We(t))if(t[Symbol.iterator])r=Array.from(t,(c,l)=>e(c,l,void 0,i));else{const c=Object.keys(t);r=new Array(c.length);for(let l=0,u=c.length;l<u;l++){const f=c[l];r[l]=e(t[f],f,l,i)}}else r=[];return r}function Ll(t,e,n={},s,r){if(St.ce||St.parent&&sr(St.parent)&&St.parent.ce){const u=Object.keys(n).length>0;return e!=="default"&&(n.name=e),O(),Ue(De,null,[Q("slot",n,s)],u?-2:64)}let i=t[e];i&&i._c&&(i._d=!1),O();const o=i&&zm(i(n)),c=n.key||o&&o.key,l=Ue(De,{key:(c&&!Zn(c)?c:`_${e}`)+(!o&&s?"_fb":"")},o||[],o&&t._===1?64:-2);return i&&i._c&&(i._d=!0),l}function zm(t){return t.some(e=>$r(e)?!(e.type===Tt||e.type===De&&!zm(e.children)):!0)?t:null}const Vl=t=>t?hg(t)?lc(t):Vl(t.parent):null,Ui=_t(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Vl(t.parent),$root:t=>Vl(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Km(t),$forceUpdate:t=>t.f||(t.f=()=>{Vu(t.update)}),$nextTick:t=>t.n||(t.n=Lu.bind(t.proxy)),$watch:t=>ow.bind(t)}),tl=(t,e)=>t!==Be&&!t.__isScriptSetup&&Ve(t,e),UE={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:c,appContext:l}=t;let u;if(e[0]!=="$"){const _=o[e];if(_!==void 0)switch(_){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(tl(s,e))return o[e]=1,s[e];if(r!==Be&&Ve(r,e))return o[e]=2,r[e];if((u=t.propsOptions[0])&&Ve(u,e))return o[e]=3,i[e];if(n!==Be&&Ve(n,e))return o[e]=4,n[e];Ol&&(o[e]=0)}}const f=Ui[e];let d,m;if(f)return e==="$attrs"&&Vt(t.attrs,"get",""),f(t);if((d=c.__cssModules)&&(d=d[e]))return d;if(n!==Be&&Ve(n,e))return o[e]=4,n[e];if(m=l.config.globalProperties,Ve(m,e))return m[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return tl(r,e)?(r[e]=n,!0):s!==Be&&Ve(s,e)?(s[e]=n,!0):Ve(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,propsOptions:i,type:o}},c){let l,u;return!!(n[c]||t!==Be&&c[0]!=="$"&&Ve(t,c)||tl(e,c)||(l=i[0])&&Ve(l,c)||Ve(s,c)||Ve(Ui,c)||Ve(r.config.globalProperties,c)||(u=o.__cssModules)&&u[c])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ve(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Nf(t){return fe(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Ol=!0;function $E(t){const e=Km(t),n=t.proxy,s=t.ctx;Ol=!1,e.beforeCreate&&Df(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:c,provide:l,inject:u,created:f,beforeMount:d,mounted:m,beforeUpdate:_,updated:b,activated:N,deactivated:L,beforeDestroy:H,beforeUnmount:D,destroyed:V,unmounted:M,render:Z,renderTracked:ie,renderTriggered:S,errorCaptured:v,serverPrefetch:y,expose:I,inheritAttrs:A,components:T,directives:E,filters:be}=e;if(u&&BE(u,s,null),o)for(const ve in o){const Re=o[ve];_e(Re)&&(s[ve]=Re.bind(n))}if(r){const ve=r.call(n,n);We(ve)&&(t.data=yo(ve))}if(Ol=!0,i)for(const ve in i){const Re=i[ve],Ht=_e(Re)?Re.bind(n,n):_e(Re.get)?Re.get.bind(n,n):Tn,_n=!_e(Re)&&_e(Re.set)?Re.set.bind(n):Tn,Gt=Ie({get:Ht,set:_n});Object.defineProperty(s,ve,{enumerable:!0,configurable:!0,get:()=>Gt.value,set:yt=>Gt.value=yt})}if(c)for(const ve in c)Gm(c[ve],s,n,ve);if(l){const ve=_e(l)?l.call(n):l;Reflect.ownKeys(ve).forEach(Re=>{ra(Re,ve[Re])})}f&&Df(f,t,"c");function Me(ve,Re){fe(Re)?Re.forEach(Ht=>ve(Ht.bind(n))):Re&&ve(Re.bind(n))}if(Me(NE,d),Me(zt,m),Me(DE,_),Me(Wm,b),Me(RE,N),Me(PE,L),Me(xE,v),Me(OE,ie),Me(VE,S),Me(Yr,D),Me(Ou,M),Me(LE,y),fe(I))if(I.length){const ve=t.exposed||(t.exposed={});I.forEach(Re=>{Object.defineProperty(ve,Re,{get:()=>n[Re],set:Ht=>n[Re]=Ht,enumerable:!0})})}else t.exposed||(t.exposed={});Z&&t.render===Tn&&(t.render=Z),A!=null&&(t.inheritAttrs=A),T&&(t.components=T),E&&(t.directives=E),y&&jm(t)}function BE(t,e,n=Tn){fe(t)&&(t=xl(t));for(const s in t){const r=t[s];let i;We(r)?"default"in r?i=Ct(r.from||s,r.default,!0):i=Ct(r.from||s):i=Ct(r),rt(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function Df(t,e,n){dn(fe(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function Gm(t,e,n,s){let r=s.includes(".")?ag(n,s):()=>n[s];if(Xe(t)){const i=e[t];_e(i)&&fn(r,i)}else if(_e(t))fn(r,t.bind(n));else if(We(t))if(fe(t))t.forEach(i=>Gm(i,e,n,s));else{const i=_e(t.handler)?t.handler.bind(n):e[t.handler];_e(i)&&fn(r,i,t)}}function Km(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,c=i.get(e);let l;return c?l=c:!r.length&&!n&&!s?l=e:(l={},r.length&&r.forEach(u=>Ta(l,u,o,!0)),Ta(l,e,o)),We(e)&&i.set(e,l),l}function Ta(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&Ta(t,i,n,!0),r&&r.forEach(o=>Ta(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const c=jE[o]||n&&n[o];t[o]=c?c(t[o],e[o]):e[o]}return t}const jE={data:Lf,props:Vf,emits:Vf,methods:Ri,computed:Ri,beforeCreate:$t,created:$t,beforeMount:$t,mounted:$t,beforeUpdate:$t,updated:$t,beforeDestroy:$t,beforeUnmount:$t,destroyed:$t,unmounted:$t,activated:$t,deactivated:$t,errorCaptured:$t,serverPrefetch:$t,components:Ri,directives:Ri,watch:WE,provide:Lf,inject:HE};function Lf(t,e){return e?t?function(){return _t(_e(t)?t.call(this,this):t,_e(e)?e.call(this,this):e)}:e:t}function HE(t,e){return Ri(xl(t),xl(e))}function xl(t){if(fe(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function $t(t,e){return t?[...new Set([].concat(t,e))]:e}function Ri(t,e){return t?_t(Object.create(null),t,e):e}function Vf(t,e){return t?fe(t)&&fe(e)?[...new Set([...t,...e])]:_t(Object.create(null),Nf(t),Nf(e??{})):e}function WE(t,e){if(!t)return e;if(!e)return t;const n=_t(Object.create(null),t);for(const s in e)n[s]=$t(t[s],e[s]);return n}function Qm(){return{app:null,config:{isNativeTag:tm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let qE=0;function zE(t,e){return function(s,r=null){_e(s)||(s=_t({},s)),r!=null&&!We(r)&&(r=null);const i=Qm(),o=new WeakSet,c=[];let l=!1;const u=i.app={_uid:qE++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:bw,get config(){return i.config},set config(f){},use(f,...d){return o.has(f)||(f&&_e(f.install)?(o.add(f),f.install(u,...d)):_e(f)&&(o.add(f),f(u,...d))),u},mixin(f){return i.mixins.includes(f)||i.mixins.push(f),u},component(f,d){return d?(i.components[f]=d,u):i.components[f]},directive(f,d){return d?(i.directives[f]=d,u):i.directives[f]},mount(f,d,m){if(!l){const _=u._ceVNode||Q(s,r);return _.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),t(_,f,m),l=!0,u._container=f,f.__vue_app__=u,lc(_.component)}},onUnmount(f){c.push(f)},unmount(){l&&(dn(c,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(f,d){return i.provides[f]=d,u},runWithContext(f){const d=rr;rr=u;try{return f()}finally{rr=d}}};return u}}let rr=null;function ra(t,e){if(xt){let n=xt.provides;const s=xt.parent&&xt.parent.provides;s===n&&(n=xt.provides=Object.create(s)),n[t]=e}}function Ct(t,e,n=!1){const s=cc();if(s||rr){let r=rr?rr._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&_e(e)?e.call(s&&s.proxy):e}}function GE(){return!!(cc()||rr)}const Ym={},Jm=()=>Object.create(Ym),Xm=t=>Object.getPrototypeOf(t)===Ym;function KE(t,e,n,s=!1){const r={},i=Jm();t.propsDefaults=Object.create(null),Zm(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:bm(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function QE(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,c=Ne(r),[l]=t.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const f=t.vnode.dynamicProps;for(let d=0;d<f.length;d++){let m=f[d];if(oc(t.emitsOptions,m))continue;const _=e[m];if(l)if(Ve(i,m))_!==i[m]&&(i[m]=_,u=!0);else{const b=on(m);r[b]=Ml(l,c,b,_,t,!1)}else _!==i[m]&&(i[m]=_,u=!0)}}}else{Zm(t,e,r,i)&&(u=!0);let f;for(const d in c)(!e||!Ve(e,d)&&((f=xs(d))===d||!Ve(e,f)))&&(l?n&&(n[d]!==void 0||n[f]!==void 0)&&(r[d]=Ml(l,c,d,void 0,t,!0)):delete r[d]);if(i!==c)for(const d in i)(!e||!Ve(e,d))&&(delete i[d],u=!0)}u&&$n(t.attrs,"set","")}function Zm(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,c;if(e)for(let l in e){if(Oi(l))continue;const u=e[l];let f;r&&Ve(r,f=on(l))?!i||!i.includes(f)?n[f]=u:(c||(c={}))[f]=u:oc(t.emitsOptions,l)||(!(l in s)||u!==s[l])&&(s[l]=u,o=!0)}if(i){const l=Ne(n),u=c||Be;for(let f=0;f<i.length;f++){const d=i[f];n[d]=Ml(r,l,d,u[d],t,!Ve(u,d))}}return o}function Ml(t,e,n,s,r,i){const o=t[n];if(o!=null){const c=Ve(o,"default");if(c&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&_e(l)){const{propsDefaults:u}=r;if(n in u)s=u[n];else{const f=Eo(r);s=u[n]=l.call(null,e),f()}}else s=l;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!c?s=!1:o[1]&&(s===""||s===xs(n))&&(s=!0))}return s}const YE=new WeakMap;function eg(t,e,n=!1){const s=n?YE:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},c=[];let l=!1;if(!_e(t)){const f=d=>{l=!0;const[m,_]=eg(d,e,!0);_t(o,m),_&&c.push(..._)};!n&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}if(!i&&!l)return We(t)&&s.set(t,Nr),Nr;if(fe(i))for(let f=0;f<i.length;f++){const d=on(i[f]);Of(d)&&(o[d]=Be)}else if(i)for(const f in i){const d=on(f);if(Of(d)){const m=i[f],_=o[d]=fe(m)||_e(m)?{type:m}:_t({},m),b=_.type;let N=!1,L=!0;if(fe(b))for(let H=0;H<b.length;++H){const D=b[H],V=_e(D)&&D.name;if(V==="Boolean"){N=!0;break}else V==="String"&&(L=!1)}else N=_e(b)&&b.name==="Boolean";_[0]=N,_[1]=L,(N||Ve(_,"default"))&&c.push(d)}}const u=[o,c];return We(t)&&s.set(t,u),u}function Of(t){return t[0]!=="$"&&!Oi(t)}const Uu=t=>t==="_"||t==="_ctx"||t==="$stable",$u=t=>fe(t)?t.map(In):[In(t)],JE=(t,e,n)=>{if(e._n)return e;const s=je((...r)=>$u(e(...r)),n);return s._c=!1,s},tg=(t,e,n)=>{const s=t._ctx;for(const r in t){if(Uu(r))continue;const i=t[r];if(_e(i))e[r]=JE(r,i,s);else if(i!=null){const o=$u(i);e[r]=()=>o}}},ng=(t,e)=>{const n=$u(e);t.slots.default=()=>n},sg=(t,e,n)=>{for(const s in e)(n||!Uu(s))&&(t[s]=e[s])},XE=(t,e,n)=>{const s=t.slots=Jm();if(t.vnode.shapeFlag&32){const r=e._;r?(sg(s,e,n),n&&om(s,"_",r,!0)):tg(e,s)}else e&&ng(t,e)},ZE=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=Be;if(s.shapeFlag&32){const c=e._;c?n&&c===1?i=!1:sg(r,e,n):(i=!e.$stable,tg(e,r)),o=e}else e&&(ng(t,e),o={default:1});if(i)for(const c in r)!Uu(c)&&o[c]==null&&delete r[c]},Et=pw;function ew(t){return tw(t)}function tw(t,e){const n=tc();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:c,createComment:l,setText:u,setElementText:f,parentNode:d,nextSibling:m,setScopeId:_=Tn,insertStaticContent:b}=t,N=(w,C,R,$=null,j=null,F=null,J=void 0,G=null,z=!!C.dynamicChildren)=>{if(w===C)return;w&&!ms(w,C)&&($=U(w),yt(w,j,F,!0),w=null),C.patchFlag===-2&&(z=!1,C.dynamicChildren=null);const{type:W,ref:le,shapeFlag:ee}=C;switch(W){case ac:L(w,C,R,$);break;case Tt:H(w,C,R,$);break;case sl:w==null&&D(C,R,$,J);break;case De:T(w,C,R,$,j,F,J,G,z);break;default:ee&1?Z(w,C,R,$,j,F,J,G,z):ee&6?E(w,C,R,$,j,F,J,G,z):(ee&64||ee&128)&&W.process(w,C,R,$,j,F,J,G,z,ae)}le!=null&&j?Fi(le,w&&w.ref,F,C||w,!C):le==null&&w&&w.ref!=null&&Fi(w.ref,null,F,w,!0)},L=(w,C,R,$)=>{if(w==null)s(C.el=c(C.children),R,$);else{const j=C.el=w.el;C.children!==w.children&&u(j,C.children)}},H=(w,C,R,$)=>{w==null?s(C.el=l(C.children||""),R,$):C.el=w.el},D=(w,C,R,$)=>{[w.el,w.anchor]=b(w.children,C,R,$,w.el,w.anchor)},V=({el:w,anchor:C},R,$)=>{let j;for(;w&&w!==C;)j=m(w),s(w,R,$),w=j;s(C,R,$)},M=({el:w,anchor:C})=>{let R;for(;w&&w!==C;)R=m(w),r(w),w=R;r(C)},Z=(w,C,R,$,j,F,J,G,z)=>{if(C.type==="svg"?J="svg":C.type==="math"&&(J="mathml"),w==null)ie(C,R,$,j,F,J,G,z);else{const W=w.el&&w.el._isVueCE?w.el:null;try{W&&W._beginPatch(),y(w,C,j,F,J,G,z)}finally{W&&W._endPatch()}}},ie=(w,C,R,$,j,F,J,G)=>{let z,W;const{props:le,shapeFlag:ee,transition:ce,dirs:he}=w;if(z=w.el=o(w.type,F,le&&le.is,le),ee&8?f(z,w.children):ee&16&&v(w.children,z,null,$,j,nl(w,F),J,G),he&&Ks(w,null,$,"created"),S(z,w,w.scopeId,J,$),le){for(const Fe in le)Fe!=="value"&&!Oi(Fe)&&i(z,Fe,null,le[Fe],F,$);"value"in le&&i(z,"value",null,le.value,F),(W=le.onVnodeBeforeMount)&&tn(W,$,w)}he&&Ks(w,null,$,"beforeMount");const we=nw(j,ce);we&&ce.beforeEnter(z),s(z,C,R),((W=le&&le.onVnodeMounted)||we||he)&&Et(()=>{W&&tn(W,$,w),we&&ce.enter(z),he&&Ks(w,null,$,"mounted")},j)},S=(w,C,R,$,j)=>{if(R&&_(w,R),$)for(let F=0;F<$.length;F++)_(w,$[F]);if(j){let F=j.subTree;if(C===F||Sa(F.type)&&(F.ssContent===C||F.ssFallback===C)){const J=j.vnode;S(w,J,J.scopeId,J.slotScopeIds,j.parent)}}},v=(w,C,R,$,j,F,J,G,z=0)=>{for(let W=z;W<w.length;W++){const le=w[W]=G?ds(w[W]):In(w[W]);N(null,le,C,R,$,j,F,J,G)}},y=(w,C,R,$,j,F,J)=>{const G=C.el=w.el;let{patchFlag:z,dynamicChildren:W,dirs:le}=C;z|=w.patchFlag&16;const ee=w.props||Be,ce=C.props||Be;let he;if(R&&Qs(R,!1),(he=ce.onVnodeBeforeUpdate)&&tn(he,R,C,w),le&&Ks(C,w,R,"beforeUpdate"),R&&Qs(R,!0),(ee.innerHTML&&ce.innerHTML==null||ee.textContent&&ce.textContent==null)&&f(G,""),W?I(w.dynamicChildren,W,G,R,$,nl(C,j),F):J||Re(w,C,G,null,R,$,nl(C,j),F,!1),z>0){if(z&16)A(G,ee,ce,R,j);else if(z&2&&ee.class!==ce.class&&i(G,"class",null,ce.class,j),z&4&&i(G,"style",ee.style,ce.style,j),z&8){const we=C.dynamicProps;for(let Fe=0;Fe<we.length;Fe++){const ke=we[Fe],Pt=ee[ke],kt=ce[ke];(kt!==Pt||ke==="value")&&i(G,ke,Pt,kt,j,R)}}z&1&&w.children!==C.children&&f(G,C.children)}else!J&&W==null&&A(G,ee,ce,R,j);((he=ce.onVnodeUpdated)||le)&&Et(()=>{he&&tn(he,R,C,w),le&&Ks(C,w,R,"updated")},$)},I=(w,C,R,$,j,F,J)=>{for(let G=0;G<C.length;G++){const z=w[G],W=C[G],le=z.el&&(z.type===De||!ms(z,W)||z.shapeFlag&198)?d(z.el):R;N(z,W,le,null,$,j,F,J,!0)}},A=(w,C,R,$,j)=>{if(C!==R){if(C!==Be)for(const F in C)!Oi(F)&&!(F in R)&&i(w,F,C[F],null,j,$);for(const F in R){if(Oi(F))continue;const J=R[F],G=C[F];J!==G&&F!=="value"&&i(w,F,G,J,j,$)}"value"in R&&i(w,"value",C.value,R.value,j)}},T=(w,C,R,$,j,F,J,G,z)=>{const W=C.el=w?w.el:c(""),le=C.anchor=w?w.anchor:c("");let{patchFlag:ee,dynamicChildren:ce,slotScopeIds:he}=C;he&&(G=G?G.concat(he):he),w==null?(s(W,R,$),s(le,R,$),v(C.children||[],R,le,j,F,J,G,z)):ee>0&&ee&64&&ce&&w.dynamicChildren?(I(w.dynamicChildren,ce,R,j,F,J,G),(C.key!=null||j&&C===j.subTree)&&rg(w,C,!0)):Re(w,C,R,le,j,F,J,G,z)},E=(w,C,R,$,j,F,J,G,z)=>{C.slotScopeIds=G,w==null?C.shapeFlag&512?j.ctx.activate(C,R,$,J,z):be(C,R,$,j,F,J,z):Ye(w,C,z)},be=(w,C,R,$,j,F,J)=>{const G=w.component=ww(w,$,j);if(rc(w)&&(G.ctx.renderer=ae),Iw(G,!1,J),G.asyncDep){if(j&&j.registerDep(G,Me,J),!w.el){const z=G.subTree=Q(Tt);H(null,z,C,R),w.placeholder=z.el}}else Me(G,w,C,R,j,F,J)},Ye=(w,C,R)=>{const $=C.component=w.component;if(fw(w,C,R))if($.asyncDep&&!$.asyncResolved){ve($,C,R);return}else $.next=C,$.update();else C.el=w.el,$.vnode=C},Me=(w,C,R,$,j,F,J)=>{const G=()=>{if(w.isMounted){let{next:ee,bu:ce,u:he,parent:we,vnode:Fe}=w;{const Qt=ig(w);if(Qt){ee&&(ee.el=Fe.el,ve(w,ee,J)),Qt.asyncDep.then(()=>{w.isUnmounted||G()});return}}let ke=ee,Pt;Qs(w,!1),ee?(ee.el=Fe.el,ve(w,ee,J)):ee=Fe,ce&&Lr(ce),(Pt=ee.props&&ee.props.onVnodeBeforeUpdate)&&tn(Pt,we,ee,Fe),Qs(w,!0);const kt=xf(w),Kt=w.subTree;w.subTree=kt,N(Kt,kt,d(Kt.el),U(Kt),w,j,F),ee.el=kt.el,ke===null&&dw(w,kt.el),he&&Et(he,j),(Pt=ee.props&&ee.props.onVnodeUpdated)&&Et(()=>tn(Pt,we,ee,Fe),j)}else{let ee;const{el:ce,props:he}=C,{bm:we,m:Fe,parent:ke,root:Pt,type:kt}=w,Kt=sr(C);Qs(w,!1),we&&Lr(we),!Kt&&(ee=he&&he.onVnodeBeforeMount)&&tn(ee,ke,C),Qs(w,!0);{Pt.ce&&Pt.ce._def.shadowRoot!==!1&&Pt.ce._injectChildStyle(kt);const Qt=w.subTree=xf(w);N(null,Qt,R,$,w,j,F),C.el=Qt.el}if(Fe&&Et(Fe,j),!Kt&&(ee=he&&he.onVnodeMounted)){const Qt=C;Et(()=>tn(ee,ke,Qt),j)}(C.shapeFlag&256||ke&&sr(ke.vnode)&&ke.vnode.shapeFlag&256)&&w.a&&Et(w.a,j),w.isMounted=!0,C=R=$=null}};w.scope.on();const z=w.effect=new dm(G);w.scope.off();const W=w.update=z.run.bind(z),le=w.job=z.runIfDirty.bind(z);le.i=w,le.id=w.uid,z.scheduler=()=>Vu(le),Qs(w,!0),W()},ve=(w,C,R)=>{C.component=w;const $=w.vnode.props;w.vnode=C,w.next=null,QE(w,C.props,$,R),ZE(w,C.children,R),zn(),bf(w),Gn()},Re=(w,C,R,$,j,F,J,G,z=!1)=>{const W=w&&w.children,le=w?w.shapeFlag:0,ee=C.children,{patchFlag:ce,shapeFlag:he}=C;if(ce>0){if(ce&128){_n(W,ee,R,$,j,F,J,G,z);return}else if(ce&256){Ht(W,ee,R,$,j,F,J,G,z);return}}he&8?(le&16&&Rt(W,j,F),ee!==W&&f(R,ee)):le&16?he&16?_n(W,ee,R,$,j,F,J,G,z):Rt(W,j,F,!0):(le&8&&f(R,""),he&16&&v(ee,R,$,j,F,J,G,z))},Ht=(w,C,R,$,j,F,J,G,z)=>{w=w||Nr,C=C||Nr;const W=w.length,le=C.length,ee=Math.min(W,le);let ce;for(ce=0;ce<ee;ce++){const he=C[ce]=z?ds(C[ce]):In(C[ce]);N(w[ce],he,R,null,j,F,J,G,z)}W>le?Rt(w,j,F,!0,!1,ee):v(C,R,$,j,F,J,G,z,ee)},_n=(w,C,R,$,j,F,J,G,z)=>{let W=0;const le=C.length;let ee=w.length-1,ce=le-1;for(;W<=ee&&W<=ce;){const he=w[W],we=C[W]=z?ds(C[W]):In(C[W]);if(ms(he,we))N(he,we,R,null,j,F,J,G,z);else break;W++}for(;W<=ee&&W<=ce;){const he=w[ee],we=C[ce]=z?ds(C[ce]):In(C[ce]);if(ms(he,we))N(he,we,R,null,j,F,J,G,z);else break;ee--,ce--}if(W>ee){if(W<=ce){const he=ce+1,we=he<le?C[he].el:$;for(;W<=ce;)N(null,C[W]=z?ds(C[W]):In(C[W]),R,we,j,F,J,G,z),W++}}else if(W>ce)for(;W<=ee;)yt(w[W],j,F,!0),W++;else{const he=W,we=W,Fe=new Map;for(W=we;W<=ce;W++){const vt=C[W]=z?ds(C[W]):In(C[W]);vt.key!=null&&Fe.set(vt.key,W)}let ke,Pt=0;const kt=ce-we+1;let Kt=!1,Qt=0;const ln=new Array(kt);for(W=0;W<kt;W++)ln[W]=0;for(W=he;W<=ee;W++){const vt=w[W];if(Pt>=kt){yt(vt,j,F,!0);continue}let dt;if(vt.key!=null)dt=Fe.get(vt.key);else for(ke=we;ke<=ce;ke++)if(ln[ke-we]===0&&ms(vt,C[ke])){dt=ke;break}dt===void 0?yt(vt,j,F,!0):(ln[dt-we]=W+1,dt>=Qt?Qt=dt:Kt=!0,N(vt,C[dt],R,null,j,F,J,G,z),Pt++)}const gr=Kt?sw(ln):Nr;for(ke=gr.length-1,W=kt-1;W>=0;W--){const vt=we+W,dt=C[vt],ci=C[vt+1],Hs=vt+1<le?ci.el||ci.placeholder:$;ln[W]===0?N(null,dt,R,Hs,j,F,J,G,z):Kt&&(ke<0||W!==gr[ke]?Gt(dt,R,Hs,2):ke--)}}},Gt=(w,C,R,$,j=null)=>{const{el:F,type:J,transition:G,children:z,shapeFlag:W}=w;if(W&6){Gt(w.component.subTree,C,R,$);return}if(W&128){w.suspense.move(C,R,$);return}if(W&64){J.move(w,C,R,ae);return}if(J===De){s(F,C,R);for(let ee=0;ee<z.length;ee++)Gt(z[ee],C,R,$);s(w.anchor,C,R);return}if(J===sl){V(w,C,R);return}if($!==2&&W&1&&G)if($===0)G.beforeEnter(F),s(F,C,R),Et(()=>G.enter(F),j);else{const{leave:ee,delayLeave:ce,afterLeave:he}=G,we=()=>{w.ctx.isUnmounted?r(F):s(F,C,R)},Fe=()=>{F._isLeaving&&F[Un](!0),ee(F,()=>{we(),he&&he()})};ce?ce(F,we,Fe):Fe()}else s(F,C,R)},yt=(w,C,R,$=!1,j=!1)=>{const{type:F,props:J,ref:G,children:z,dynamicChildren:W,shapeFlag:le,patchFlag:ee,dirs:ce,cacheIndex:he}=w;if(ee===-2&&(j=!1),G!=null&&(zn(),Fi(G,null,R,w,!0),Gn()),he!=null&&(C.renderCache[he]=void 0),le&256){C.ctx.deactivate(w);return}const we=le&1&&ce,Fe=!sr(w);let ke;if(Fe&&(ke=J&&J.onVnodeBeforeUnmount)&&tn(ke,C,w),le&6)cn(w.component,R,$);else{if(le&128){w.suspense.unmount(R,$);return}we&&Ks(w,null,C,"beforeUnmount"),le&64?w.type.remove(w,C,R,ae,$):W&&!W.hasOnce&&(F!==De||ee>0&&ee&64)?Rt(W,C,R,!1,!0):(F===De&&ee&384||!j&&le&16)&&Rt(z,C,R),$&&Vn(w)}(Fe&&(ke=J&&J.onVnodeUnmounted)||we)&&Et(()=>{ke&&tn(ke,C,w),we&&Ks(w,null,C,"unmounted")},R)},Vn=w=>{const{type:C,el:R,anchor:$,transition:j}=w;if(C===De){an(R,$);return}if(C===sl){M(w);return}const F=()=>{r(R),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(w.shapeFlag&1&&j&&!j.persisted){const{leave:J,delayLeave:G}=j,z=()=>J(R,F);G?G(w.el,F,z):z()}else F()},an=(w,C)=>{let R;for(;w!==C;)R=m(w),r(w),w=R;r(C)},cn=(w,C,R)=>{const{bum:$,scope:j,job:F,subTree:J,um:G,m:z,a:W}=w;Aa(z),Aa(W),$&&Lr($),j.stop(),F&&(F.flags|=8,yt(J,w,C,R)),G&&Et(G,C),Et(()=>{w.isUnmounted=!0},C)},Rt=(w,C,R,$=!1,j=!1,F=0)=>{for(let J=F;J<w.length;J++)yt(w[J],C,R,$,j)},U=w=>{if(w.shapeFlag&6)return U(w.component.subTree);if(w.shapeFlag&128)return w.suspense.next();const C=m(w.anchor||w.el),R=C&&C[IE];return R?m(R):C};let te=!1;const X=(w,C,R)=>{w==null?C._vnode&&yt(C._vnode,null,null,!0):N(C._vnode||null,w,C,null,null,null,R),C._vnode=w,te||(te=!0,bf(),Dm(),te=!1)},ae={p:N,um:yt,m:Gt,r:Vn,mt:be,mc:v,pc:Re,pbc:I,n:U,o:t};return{render:X,hydrate:void 0,createApp:zE(X)}}function nl({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Qs({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function nw(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function rg(t,e,n=!1){const s=t.children,r=e.children;if(fe(s)&&fe(r))for(let i=0;i<s.length;i++){const o=s[i];let c=r[i];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=r[i]=ds(r[i]),c.el=o.el),!n&&c.patchFlag!==-2&&rg(o,c)),c.type===ac&&c.patchFlag!==-1&&(c.el=o.el),c.type===Tt&&!c.el&&(c.el=o.el)}}function sw(t){const e=t.slice(),n=[0];let s,r,i,o,c;const l=t.length;for(s=0;s<l;s++){const u=t[s];if(u!==0){if(r=n[n.length-1],t[r]<u){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)c=i+o>>1,t[n[c]]<u?i=c+1:o=c;u<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function ig(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:ig(e)}function Aa(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const rw=Symbol.for("v-scx"),iw=()=>Ct(rw);function fn(t,e,n){return og(t,e,n)}function og(t,e,n=Be){const{immediate:s,deep:r,flush:i,once:o}=n,c=_t({},n),l=e&&s||!e&&i!=="post";let u;if(to){if(i==="sync"){const _=iw();u=_.__watcherHandles||(_.__watcherHandles=[])}else if(!l){const _=()=>{};return _.stop=Tn,_.resume=Tn,_.pause=Tn,_}}const f=xt;c.call=(_,b,N)=>dn(_,f,b,N);let d=!1;i==="post"?c.scheduler=_=>{Et(_,f&&f.suspense)}:i!=="sync"&&(d=!0,c.scheduler=(_,b)=>{b?_():Vu(_)}),c.augmentJob=_=>{e&&(_.flags|=4),d&&(_.flags|=2,f&&(_.id=f.uid,_.i=f))};const m=yE(t,e,c);return to&&(u?u.push(m):l&&m()),m}function ow(t,e,n){const s=this.proxy,r=Xe(t)?t.includes(".")?ag(s,t):()=>s[t]:t.bind(s,s);let i;_e(e)?i=e:(i=e.handler,n=e);const o=Eo(this),c=og(r,i.bind(s),n);return o(),c}function ag(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const aw=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${on(e)}Modifiers`]||t[`${xs(e)}Modifiers`];function cw(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||Be;let r=n;const i=e.startsWith("update:"),o=i&&aw(s,e.slice(7));o&&(o.trim&&(r=n.map(f=>Xe(f)?f.trim():f)),o.number&&(r=n.map(Au)));let c,l=s[c=Kc(e)]||s[c=Kc(on(e))];!l&&i&&(l=s[c=Kc(xs(e))]),l&&dn(l,t,6,r);const u=s[c+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[c])return;t.emitted[c]=!0,dn(u,t,6,r)}}const lw=new WeakMap;function cg(t,e,n=!1){const s=n?lw:e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},c=!1;if(!_e(t)){const l=u=>{const f=cg(u,e,!0);f&&(c=!0,_t(o,f))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!c?(We(t)&&s.set(t,null),null):(fe(i)?i.forEach(l=>o[l]=null):_t(o,i),We(t)&&s.set(t,o),o)}function oc(t,e){return!t||!Xa(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ve(t,e[0].toLowerCase()+e.slice(1))||Ve(t,xs(e))||Ve(t,e))}function xf(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:c,emit:l,render:u,renderCache:f,props:d,data:m,setupState:_,ctx:b,inheritAttrs:N}=t,L=wa(t);let H,D;try{if(n.shapeFlag&4){const M=r||s,Z=M;H=In(u.call(Z,M,f,d,_,m,b)),D=c}else{const M=e;H=In(M.length>1?M(d,{attrs:c,slots:o,emit:l}):M(d,null)),D=e.props?c:uw(c)}}catch(M){$i.length=0,sc(M,t,1),H=Q(Tt)}let V=H;if(D&&N!==!1){const M=Object.keys(D),{shapeFlag:Z}=V;M.length&&Z&7&&(i&&M.some(wu)&&(D=hw(D,i)),V=Kn(V,D,!1,!0))}return n.dirs&&(V=Kn(V,null,!1,!0),V.dirs=V.dirs?V.dirs.concat(n.dirs):n.dirs),n.transition&&Ur(V,n.transition),H=V,wa(L),H}const uw=t=>{let e;for(const n in t)(n==="class"||n==="style"||Xa(n))&&((e||(e={}))[n]=t[n]);return e},hw=(t,e)=>{const n={};for(const s in t)(!wu(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function fw(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:c,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?Mf(s,o,u):!!o;if(l&8){const f=e.dynamicProps;for(let d=0;d<f.length;d++){const m=f[d];if(o[m]!==s[m]&&!oc(u,m))return!0}}}else return(r||c)&&(!c||!c.$stable)?!0:s===o?!1:s?o?Mf(s,o,u):!0:!!o;return!1}function Mf(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!oc(n,i))return!0}return!1}function dw({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const Sa=t=>t.__isSuspense;function pw(t,e){e&&e.pendingBranch?fe(t)?e.effects.push(...t):e.effects.push(t):wE(t)}const De=Symbol.for("v-fgt"),ac=Symbol.for("v-txt"),Tt=Symbol.for("v-cmt"),sl=Symbol.for("v-stc"),$i=[];let Jt=null;function O(t=!1){$i.push(Jt=t?null:[])}function mw(){$i.pop(),Jt=$i[$i.length-1]||null}let eo=1;function Ca(t,e=!1){eo+=t,t<0&&Jt&&e&&(Jt.hasOnce=!0)}function lg(t){return t.dynamicChildren=eo>0?Jt||Nr:null,mw(),eo>0&&Jt&&Jt.push(t),t}function K(t,e,n,s,r,i){return lg(x(t,e,n,s,r,i,!0))}function Ue(t,e,n,s,r){return lg(Q(t,e,n,s,r,!0))}function $r(t){return t?t.__v_isVNode===!0:!1}function ms(t,e){return t.type===e.type&&t.key===e.key}const ug=({key:t})=>t??null,ia=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Xe(t)||rt(t)||_e(t)?{i:St,r:t,k:e,f:!!n}:t:null);function x(t,e=null,n=null,s=0,r=null,i=t===De?0:1,o=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ug(e),ref:e&&ia(e),scopeId:Vm,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:St};return c?(Bu(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=Xe(n)?8:16),eo>0&&!o&&Jt&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Jt.push(l),l}const Q=gw;function gw(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===qm)&&(t=Tt),$r(t)){const c=Kn(t,e,!0);return n&&Bu(c,n),eo>0&&!i&&Jt&&(c.shapeFlag&6?Jt[Jt.indexOf(t)]=c:Jt.push(c)),c.patchFlag=-2,c}if(Cw(t)&&(t=t.__vccOpts),e){e=_w(e);let{class:c,style:l}=e;c&&!Xe(c)&&(e.class=Ge(c)),We(l)&&(Nu(l)&&!fe(l)&&(l=_t({},l)),e.style=_o(l))}const o=Xe(t)?1:Sa(t)?128:Om(t)?64:We(t)?4:_e(t)?2:0;return x(t,e,n,s,r,o,i,!0)}function _w(t){return t?Nu(t)||Xm(t)?_t({},t):t:null}function Kn(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:c,transition:l}=t,u=e?yw(r||{},e):r,f={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&ug(u),ref:e&&e.ref?n&&i?fe(i)?i.concat(ia(e)):[i,ia(e)]:ia(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==De?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Kn(t.ssContent),ssFallback:t.ssFallback&&Kn(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&s&&Ur(f,l.clone(f)),f}function Qe(t=" ",e=0){return Q(ac,null,t,e)}function Ke(t="",e=!1){return e?(O(),Ue(Tt,null,t)):Q(Tt,null,t)}function In(t){return t==null||typeof t=="boolean"?Q(Tt):fe(t)?Q(De,null,t.slice()):$r(t)?ds(t):Q(ac,null,String(t))}function ds(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Kn(t)}function Bu(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(fe(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),Bu(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!Xm(e)?e._ctx=St:r===3&&St&&(St.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else _e(e)?(e={default:e,_ctx:St},n=32):(e=String(e),s&64?(n=16,e=[Qe(e)]):n=8);t.children=e,t.shapeFlag|=n}function yw(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=Ge([e.class,s.class]));else if(r==="style")e.style=_o([e.style,s.style]);else if(Xa(r)){const i=e[r],o=s[r];o&&i!==o&&!(fe(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function tn(t,e,n,s=null){dn(t,e,7,[n,s])}const vw=Qm();let Ew=0;function ww(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||vw,i={uid:Ew++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new um(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:eg(s,r),emitsOptions:cg(s,r),emit:null,emitted:null,propsDefaults:Be,inheritAttrs:s.inheritAttrs,ctx:Be,data:Be,props:Be,attrs:Be,slots:Be,refs:Be,setupState:Be,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=cw.bind(null,i),t.ce&&t.ce(i),i}let xt=null;const cc=()=>xt||St;let ba,Fl;{const t=tc(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};ba=e("__VUE_INSTANCE_SETTERS__",n=>xt=n),Fl=e("__VUE_SSR_SETTERS__",n=>to=n)}const Eo=t=>{const e=xt;return ba(t),t.scope.on(),()=>{t.scope.off(),ba(e)}},Ff=()=>{xt&&xt.scope.off(),ba(null)};function hg(t){return t.vnode.shapeFlag&4}let to=!1;function Iw(t,e=!1,n=!1){e&&Fl(e);const{props:s,children:r}=t.vnode,i=hg(t);KE(t,s,i,e),XE(t,r,n||e);const o=i?Tw(t,e):void 0;return e&&Fl(!1),o}function Tw(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,UE);const{setup:s}=n;if(s){zn();const r=t.setupContext=s.length>1?Sw(t):null,i=Eo(t),o=vo(s,t,0,[t.props,r]),c=sm(o);if(Gn(),i(),(c||t.sp)&&!sr(t)&&jm(t),c){if(o.then(Ff,Ff),e)return o.then(l=>{Uf(t,l)}).catch(l=>{sc(l,t,0)});t.asyncDep=o}else Uf(t,o)}else fg(t)}function Uf(t,e,n){_e(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:We(e)&&(t.setupState=Pm(e)),fg(t)}function fg(t,e,n){const s=t.type;t.render||(t.render=s.render||Tn);{const r=Eo(t);zn();try{$E(t)}finally{Gn(),r()}}}const Aw={get(t,e){return Vt(t,"get",""),t[e]}};function Sw(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,Aw),slots:t.slots,emit:t.emit,expose:e}}function lc(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Pm(Du(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Ui)return Ui[n](t)},has(e,n){return n in e||n in Ui}})):t.proxy}function Ul(t,e=!0){return _e(t)?t.displayName||t.name:t.name||e&&t.__name}function Cw(t){return _e(t)&&"__vccOpts"in t}const Ie=(t,e)=>gE(t,e,to);function ju(t,e,n){try{Ca(-1);const s=arguments.length;return s===2?We(e)&&!fe(e)?$r(e)?Q(t,null,[e]):Q(t,e):Q(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&$r(n)&&(n=[n]),Q(t,e,n))}finally{Ca(1)}}const bw="3.5.24";let $l;const $f=typeof window<"u"&&window.trustedTypes;if($f)try{$l=$f.createPolicy("vue",{createHTML:t=>t})}catch{}const dg=$l?t=>$l.createHTML(t):t=>t,Rw="http://www.w3.org/2000/svg",Pw="http://www.w3.org/1998/Math/MathML",Fn=typeof document<"u"?document:null,Bf=Fn&&Fn.createElement("template"),kw={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?Fn.createElementNS(Rw,t):e==="mathml"?Fn.createElementNS(Pw,t):n?Fn.createElement(t,{is:n}):Fn.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>Fn.createTextNode(t),createComment:t=>Fn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Fn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{Bf.innerHTML=dg(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const c=Bf.content;if(s==="svg"||s==="mathml"){const l=c.firstChild;for(;l.firstChild;)c.appendChild(l.firstChild);c.removeChild(l)}e.insertBefore(c,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},cs="transition",Ai="animation",no=Symbol("_vtc"),pg={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Nw=_t({},xm,pg),Dw=t=>(t.displayName="Transition",t.props=Nw,t),Lw=Dw((t,{slots:e})=>ju(SE,Vw(t),e)),Ys=(t,e=[])=>{fe(t)?t.forEach(n=>n(...e)):t&&t(...e)},jf=t=>t?fe(t)?t.some(e=>e.length>1):t.length>1:!1;function Vw(t){const e={};for(const T in t)T in pg||(e[T]=t[T]);if(t.css===!1)return e;const{name:n="v",type:s,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:c=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:u=o,appearToClass:f=c,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:m=`${n}-leave-active`,leaveToClass:_=`${n}-leave-to`}=t,b=Ow(r),N=b&&b[0],L=b&&b[1],{onBeforeEnter:H,onEnter:D,onEnterCancelled:V,onLeave:M,onLeaveCancelled:Z,onBeforeAppear:ie=H,onAppear:S=D,onAppearCancelled:v=V}=e,y=(T,E,be,Ye)=>{T._enterCancelled=Ye,Js(T,E?f:c),Js(T,E?u:o),be&&be()},I=(T,E)=>{T._isLeaving=!1,Js(T,d),Js(T,_),Js(T,m),E&&E()},A=T=>(E,be)=>{const Ye=T?S:D,Me=()=>y(E,T,be);Ys(Ye,[E,Me]),Hf(()=>{Js(E,T?l:i),xn(E,T?f:c),jf(Ye)||Wf(E,s,N,Me)})};return _t(e,{onBeforeEnter(T){Ys(H,[T]),xn(T,i),xn(T,o)},onBeforeAppear(T){Ys(ie,[T]),xn(T,l),xn(T,u)},onEnter:A(!1),onAppear:A(!0),onLeave(T,E){T._isLeaving=!0;const be=()=>I(T,E);xn(T,d),T._enterCancelled?(xn(T,m),Gf(T)):(Gf(T),xn(T,m)),Hf(()=>{T._isLeaving&&(Js(T,d),xn(T,_),jf(M)||Wf(T,s,L,be))}),Ys(M,[T,be])},onEnterCancelled(T){y(T,!1,void 0,!0),Ys(V,[T])},onAppearCancelled(T){y(T,!0,void 0,!0),Ys(v,[T])},onLeaveCancelled(T){I(T),Ys(Z,[T])}})}function Ow(t){if(t==null)return null;if(We(t))return[rl(t.enter),rl(t.leave)];{const e=rl(t);return[e,e]}}function rl(t){return xv(t)}function xn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[no]||(t[no]=new Set)).add(e)}function Js(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[no];n&&(n.delete(e),n.size||(t[no]=void 0))}function Hf(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let xw=0;function Wf(t,e,n,s){const r=t._endId=++xw,i=()=>{r===t._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:c,propCount:l}=Mw(t,e);if(!o)return s();const u=o+"end";let f=0;const d=()=>{t.removeEventListener(u,m),i()},m=_=>{_.target===t&&++f>=l&&d()};setTimeout(()=>{f<l&&d()},c+1),t.addEventListener(u,m)}function Mw(t,e){const n=window.getComputedStyle(t),s=b=>(n[b]||"").split(", "),r=s(`${cs}Delay`),i=s(`${cs}Duration`),o=qf(r,i),c=s(`${Ai}Delay`),l=s(`${Ai}Duration`),u=qf(c,l);let f=null,d=0,m=0;e===cs?o>0&&(f=cs,d=o,m=i.length):e===Ai?u>0&&(f=Ai,d=u,m=l.length):(d=Math.max(o,u),f=d>0?o>u?cs:Ai:null,m=f?f===cs?i.length:l.length:0);const _=f===cs&&/\b(?:transform|all)(?:,|$)/.test(s(`${cs}Property`).toString());return{type:f,timeout:d,propCount:m,hasTransform:_}}function qf(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>zf(n)+zf(t[s])))}function zf(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Gf(t){return(t?t.ownerDocument:document).body.offsetHeight}function Fw(t,e,n){const s=t[no];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Ra=Symbol("_vod"),mg=Symbol("_vsh"),Qo={name:"show",beforeMount(t,{value:e},{transition:n}){t[Ra]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Si(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:s}){!e!=!n&&(s?e?(s.beforeEnter(t),Si(t,!0),s.enter(t)):s.leave(t,()=>{Si(t,!1)}):Si(t,e))},beforeUnmount(t,{value:e}){Si(t,e)}};function Si(t,e){t.style.display=e?t[Ra]:"none",t[mg]=!e}const Uw=Symbol(""),$w=/(?:^|;)\s*display\s*:/;function Bw(t,e,n){const s=t.style,r=Xe(n);let i=!1;if(n&&!r){if(e)if(Xe(e))for(const o of e.split(";")){const c=o.slice(0,o.indexOf(":")).trim();n[c]==null&&oa(s,c,"")}else for(const o in e)n[o]==null&&oa(s,o,"");for(const o in n)o==="display"&&(i=!0),oa(s,o,n[o])}else if(r){if(e!==n){const o=s[Uw];o&&(n+=";"+o),s.cssText=n,i=$w.test(n)}}else e&&t.removeAttribute("style");Ra in t&&(t[Ra]=i?s.display:"",t[mg]&&(s.display="none"))}const Kf=/\s*!important$/;function oa(t,e,n){if(fe(n))n.forEach(s=>oa(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=jw(t,e);Kf.test(n)?t.setProperty(xs(s),n.replace(Kf,""),"important"):t[s]=n}}const Qf=["Webkit","Moz","ms"],il={};function jw(t,e){const n=il[e];if(n)return n;let s=on(e);if(s!=="filter"&&s in t)return il[e]=s;s=ec(s);for(let r=0;r<Qf.length;r++){const i=Qf[r]+s;if(i in t)return il[e]=i}return e}const Yf="http://www.w3.org/1999/xlink";function Jf(t,e,n,s,r,i=jv(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Yf,e.slice(6,e.length)):t.setAttributeNS(Yf,e,n):n==null||i&&!am(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Zn(n)?String(n):n)}function Xf(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?dg(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const c=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(c!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=am(n):n==null&&c==="string"?(n="",o=!0):c==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function Ar(t,e,n,s){t.addEventListener(e,n,s)}function Hw(t,e,n,s){t.removeEventListener(e,n,s)}const Zf=Symbol("_vei");function Ww(t,e,n,s,r=null){const i=t[Zf]||(t[Zf]={}),o=i[e];if(s&&o)o.value=s;else{const[c,l]=qw(e);if(s){const u=i[e]=Kw(s,r);Ar(t,c,u,l)}else o&&(Hw(t,c,o,l),i[e]=void 0)}}const ed=/(?:Once|Passive|Capture)$/;function qw(t){let e;if(ed.test(t)){e={};let s;for(;s=t.match(ed);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):xs(t.slice(2)),e]}let ol=0;const zw=Promise.resolve(),Gw=()=>ol||(zw.then(()=>ol=0),ol=Date.now());function Kw(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;dn(Qw(s,n.value),e,5,[s])};return n.value=t,n.attached=Gw(),n}function Qw(t,e){if(fe(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const td=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Yw=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?Fw(t,s,o):e==="style"?Bw(t,n,s):Xa(e)?wu(e)||Ww(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Jw(t,e,s,o))?(Xf(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Jf(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Xe(s))?Xf(t,on(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),Jf(t,e,s,o))};function Jw(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&td(e)&&_e(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return td(e)&&Xe(n)?!1:e in t}const nd=t=>{const e=t.props["onUpdate:modelValue"]||!1;return fe(e)?n=>Lr(e,n):e};function Xw(t){t.target.composing=!0}function sd(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const al=Symbol("_assign");function rd(t,e,n){return e&&(t=t.trim()),n&&(t=Au(t)),t}const jn={created(t,{modifiers:{lazy:e,trim:n,number:s}},r){t[al]=nd(r);const i=s||r.props&&r.props.type==="number";Ar(t,e?"change":"input",o=>{o.target.composing||t[al](rd(t.value,n,i))}),(n||i)&&Ar(t,"change",()=>{t.value=rd(t.value,n,i)}),e||(Ar(t,"compositionstart",Xw),Ar(t,"compositionend",sd),Ar(t,"change",sd))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:r,number:i}},o){if(t[al]=nd(o),t.composing)return;const c=(i||t.type==="number")&&!/^0\d/.test(t.value)?Au(t.value):t.value,l=e??"";c!==l&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||r&&t.value.trim()===l)||(t.value=l))}},Zw=["ctrl","shift","alt","meta"],eI={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Zw.some(n=>t[`${n}Key`]&&!e.includes(n))},Nn=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=((r,...i)=>{for(let o=0;o<e.length;o++){const c=eI[e[o]];if(c&&c(r,e))return}return t(r,...i)}))},tI={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},nI=(t,e)=>{const n=t._withKeys||(t._withKeys={}),s=e.join(".");return n[s]||(n[s]=(r=>{if(!("key"in r))return;const i=xs(r.key);if(e.some(o=>o===i||tI[o]===i))return t(r)}))},sI=_t({patchProp:Yw},kw);let id;function rI(){return id||(id=ew(sI))}const iI=((...t)=>{const e=rI().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=aI(s);if(!r)return;const i=e._component;!_e(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,oI(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e});function oI(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function aI(t){return Xe(t)?document.querySelector(t):t}let gg;const uc=t=>gg=t,_g=Symbol();function Bl(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Bi;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Bi||(Bi={}));function cI(){const t=hm(!0),e=t.run(()=>me({}));let n=[],s=[];const r=Du({install(i){uc(r),r._a=i,i.provide(_g,r),i.config.globalProperties.$pinia=r,s.forEach(o=>n.push(o)),s=[]},use(i){return this._a?n.push(i):s.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return r}const yg=()=>{};function od(t,e,n,s=yg){t.add(e);const r=()=>{t.delete(e)&&s()};return!n&&fm()&&Hv(r),r}function wr(t,...e){t.forEach(n=>{n(...e)})}const lI=t=>t(),ad=Symbol(),cl=Symbol();function jl(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,s)=>t.set(s,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const s=e[n],r=t[n];Bl(r)&&Bl(s)&&t.hasOwnProperty(n)&&!rt(s)&&!Is(s)?t[n]=jl(r,s):t[n]=s}return t}const uI=Symbol();function hI(t){return!Bl(t)||!Object.prototype.hasOwnProperty.call(t,uI)}const{assign:hs}=Object;function fI(t){return!!(rt(t)&&t.effect)}function dI(t,e,n,s){const{state:r,actions:i,getters:o}=e,c=n.state.value[t];let l;function u(){c||(n.state.value[t]=r?r():{});const f=fE(n.state.value[t]);return hs(f,i,Object.keys(o||{}).reduce((d,m)=>(d[m]=Du(Ie(()=>{uc(n);const _=n._s.get(t);return o[m].call(_,_)})),d),{}))}return l=vg(t,u,e,n,s,!0),l}function vg(t,e,n={},s,r,i){let o;const c=hs({actions:{}},n),l={deep:!0};let u,f,d=new Set,m=new Set,_;const b=s.state.value[t];!i&&!b&&(s.state.value[t]={}),me({});let N;function L(v){let y;u=f=!1,typeof v=="function"?(v(s.state.value[t]),y={type:Bi.patchFunction,storeId:t,events:_}):(jl(s.state.value[t],v),y={type:Bi.patchObject,payload:v,storeId:t,events:_});const I=N=Symbol();Lu().then(()=>{N===I&&(u=!0)}),f=!0,wr(d,y,s.state.value[t])}const H=i?function(){const{state:y}=n,I=y?y():{};this.$patch(A=>{hs(A,I)})}:yg;function D(){o.stop(),d.clear(),m.clear(),s._s.delete(t)}const V=(v,y="")=>{if(ad in v)return v[cl]=y,v;const I=function(){uc(s);const A=Array.from(arguments),T=new Set,E=new Set;function be(ve){T.add(ve)}function Ye(ve){E.add(ve)}wr(m,{args:A,name:I[cl],store:Z,after:be,onError:Ye});let Me;try{Me=v.apply(this&&this.$id===t?this:Z,A)}catch(ve){throw wr(E,ve),ve}return Me instanceof Promise?Me.then(ve=>(wr(T,ve),ve)).catch(ve=>(wr(E,ve),Promise.reject(ve))):(wr(T,Me),Me)};return I[ad]=!0,I[cl]=y,I},M={_p:s,$id:t,$onAction:od.bind(null,m),$patch:L,$reset:H,$subscribe(v,y={}){const I=od(d,v,y.detached,()=>A()),A=o.run(()=>fn(()=>s.state.value[t],T=>{(y.flush==="sync"?f:u)&&v({storeId:t,type:Bi.direct,events:_},T)},hs({},l,y)));return I},$dispose:D},Z=yo(M);s._s.set(t,Z);const S=(s._a&&s._a.runWithContext||lI)(()=>s._e.run(()=>(o=hm()).run(()=>e({action:V}))));for(const v in S){const y=S[v];if(rt(y)&&!fI(y)||Is(y))i||(b&&hI(y)&&(rt(y)?y.value=b[v]:jl(y,b[v])),s.state.value[t][v]=y);else if(typeof y=="function"){const I=V(y,v);S[v]=I,c.actions[v]=y}}return hs(Z,S),hs(Ne(Z),S),Object.defineProperty(Z,"$state",{get:()=>s.state.value[t],set:v=>{L(y=>{hs(y,v)})}}),s._p.forEach(v=>{hs(Z,o.run(()=>v({store:Z,app:s._a,pinia:s,options:c})))}),b&&i&&n.hydrate&&n.hydrate(Z.$state,b),u=!0,f=!0,Z}function pI(t,e,n){let s;const r=typeof e=="function";s=r?n:e;function i(o,c){const l=GE();return o=o||(l?Ct(_g,null):null),o&&uc(o),o=gg,o._s.has(t)||(r?vg(t,e,s,o):dI(t,s,o)),o._s.get(t)}return i.$id=t,i}const mI={name:"intersection",mounted(t,e){const n={rootMargin:"0px",threshold:1},s=i=>{i[0].isIntersecting&&e.value.getMoreFilms()};new IntersectionObserver(s,n).observe(t)}},ll=function(t){document.title=t},gI={mounted:(t,e)=>ll(e.value||t.innerText),beforeUpdate:(t,e)=>ll(e.value||t.innerText),updated:(t,e)=>ll(e.value||t.innerText)},_I=()=>{};var cd={};const Eg=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},yI=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],c=t[n++],l=((r&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},wg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,c=o?t[r+1]:0,l=r+2<t.length,u=l?t[r+2]:0,f=i>>2,d=(i&3)<<4|c>>4;let m=(c&15)<<2|u>>6,_=u&63;l||(_=64,o||(m=64)),s.push(n[f],n[d],n[m],n[_])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Eg(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],c=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||c==null||u==null||d==null)throw new vI;const m=i<<2|c>>4;if(s.push(m),u!==64){const _=c<<4&240|u>>2;if(s.push(_),d!==64){const b=u<<6&192|d;s.push(b)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class vI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const EI=function(t){const e=Eg(t);return wg.encodeByteArray(e,!0)},Pa=function(t){return EI(t).replace(/\./g,"")},Ig=function(t){try{return wg.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function wI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const II=()=>wI().__FIREBASE_DEFAULTS__,TI=()=>{if(typeof process>"u"||typeof cd>"u")return;const t=cd.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},AI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ig(t[1]);return e&&JSON.parse(e)},hc=()=>{try{return _I()||II()||TI()||AI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Tg=t=>hc()?.emulatorHosts?.[t],SI=t=>{const e=Tg(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Ag=()=>hc()?.config,Sg=t=>hc()?.[`_${t}`];class CI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function Jr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Cg(t){return(await fetch(t,{credentials:"include"})).ok}function bI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Pa(JSON.stringify(n)),Pa(JSON.stringify(o)),""].join(".")}const ji={};function RI(){const t={prod:[],emulator:[]};for(const e of Object.keys(ji))ji[e]?t.emulator.push(e):t.prod.push(e);return t}function PI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let ld=!1;function bg(t,e){if(typeof window>"u"||typeof document>"u"||!Jr(window.location.host)||ji[t]===e||ji[t]||ld)return;ji[t]=e;function n(m){return`__firebase__banner__${m}`}const s="__firebase__banner",i=RI().prod.length>0;function o(){const m=document.getElementById(s);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{ld=!0,o()},m}function f(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function d(){const m=PI(s),_=n("text"),b=document.getElementById(_)||document.createElement("span"),N=n("learnmore"),L=document.getElementById(N)||document.createElement("a"),H=n("preprendIcon"),D=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const V=m.element;c(V),f(L,N);const M=u();l(D,H),V.append(D,b,L,M),document.body.appendChild(V)}i?(b.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function Mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mt())}function NI(){const t=hc()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function DI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function LI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function VI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function OI(){const t=Mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function xI(){return!NI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function MI(){try{return typeof indexedDB=="object"}catch{return!1}}function FI(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}const UI="FirebaseError";class ts extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=UI,Object.setPrototypeOf(this,ts.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wo.prototype.create)}}class wo{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?$I(i,s):"Error",c=`${this.serviceName}: ${o} (${r}).`;return new ts(r,c,s)}}function $I(t,e){return t.replace(BI,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const BI=/\{\$([^}]+)}/g;function jI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function or(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(ud(i)&&ud(o)){if(!or(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function ud(t){return t!==null&&typeof t=="object"}function Io(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Pi(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function ki(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function HI(t,e){const n=new WI(t,e);return n.subscribe.bind(n)}class WI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");qI(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=ul),r.error===void 0&&(r.error=ul),r.complete===void 0&&(r.complete=ul);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ul(){}function Ft(t){return t&&t._delegate?t._delegate:t}class ar{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Zs="[DEFAULT]";class zI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new CI;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KI(e))try{this.getOrInitializeService({instanceIdentifier:Zs})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=Zs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zs){return this.instances.has(e)}getOptions(e=Zs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);s===c&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:GI(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Zs){return this.component?this.component.multipleInstances?e:Zs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function GI(t){return t===Zs?void 0:t}function KI(t){return t.instantiationMode==="EAGER"}class QI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ae||(Ae={}));const YI={debug:Ae.DEBUG,verbose:Ae.VERBOSE,info:Ae.INFO,warn:Ae.WARN,error:Ae.ERROR,silent:Ae.SILENT},JI=Ae.INFO,XI={[Ae.DEBUG]:"log",[Ae.VERBOSE]:"log",[Ae.INFO]:"info",[Ae.WARN]:"warn",[Ae.ERROR]:"error"},ZI=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=XI[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hu{constructor(e){this.name=e,this._logLevel=JI,this._logHandler=ZI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ae.DEBUG,...e),this._logHandler(this,Ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ae.VERBOSE,...e),this._logHandler(this,Ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ae.INFO,...e),this._logHandler(this,Ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ae.WARN,...e),this._logHandler(this,Ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ae.ERROR,...e),this._logHandler(this,Ae.ERROR,...e)}}const eT=(t,e)=>e.some(n=>t instanceof n);let hd,fd;function tT(){return hd||(hd=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nT(){return fd||(fd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Rg=new WeakMap,Hl=new WeakMap,Pg=new WeakMap,hl=new WeakMap,Wu=new WeakMap;function sT(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ts(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Rg.set(n,t)}).catch(()=>{}),Wu.set(e,t),e}function rT(t){if(Hl.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Hl.set(t,e)}let Wl={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Hl.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Pg.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ts(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function iT(t){Wl=t(Wl)}function oT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(fl(this),e,...n);return Pg.set(s,e.sort?e.sort():[e]),Ts(s)}:nT().includes(t)?function(...e){return t.apply(fl(this),e),Ts(Rg.get(this))}:function(...e){return Ts(t.apply(fl(this),e))}}function aT(t){return typeof t=="function"?oT(t):(t instanceof IDBTransaction&&rT(t),eT(t,tT())?new Proxy(t,Wl):t)}function Ts(t){if(t instanceof IDBRequest)return sT(t);if(hl.has(t))return hl.get(t);const e=aT(t);return e!==t&&(hl.set(t,e),Wu.set(e,t)),e}const fl=t=>Wu.get(t);function cT(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),c=Ts(o);return s&&o.addEventListener("upgradeneeded",l=>{s(Ts(o.result),l.oldVersion,l.newVersion,Ts(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),c.then(l=>{i&&l.addEventListener("close",()=>i()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}const lT=["get","getKey","getAll","getAllKeys","count"],uT=["put","add","delete","clear"],dl=new Map;function dd(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(dl.get(e))return dl.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=uT.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||lT.includes(n)))return;const i=async function(o,...c){const l=this.transaction(o,r?"readwrite":"readonly");let u=l.store;return s&&(u=u.index(c.shift())),(await Promise.all([u[n](...c),r&&l.done]))[0]};return dl.set(e,i),i}iT(t=>({...t,get:(e,n,s)=>dd(e,n)||t.get(e,n,s),has:(e,n)=>!!dd(e,n)||t.has(e,n)}));class hT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(fT(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function fT(t){return t.getComponent()?.type==="VERSION"}const ql="@firebase/app",pd="0.14.6";const Qn=new Hu("@firebase/app"),dT="@firebase/app-compat",pT="@firebase/analytics-compat",mT="@firebase/analytics",gT="@firebase/app-check-compat",_T="@firebase/app-check",yT="@firebase/auth",vT="@firebase/auth-compat",ET="@firebase/database",wT="@firebase/data-connect",IT="@firebase/database-compat",TT="@firebase/functions",AT="@firebase/functions-compat",ST="@firebase/installations",CT="@firebase/installations-compat",bT="@firebase/messaging",RT="@firebase/messaging-compat",PT="@firebase/performance",kT="@firebase/performance-compat",NT="@firebase/remote-config",DT="@firebase/remote-config-compat",LT="@firebase/storage",VT="@firebase/storage-compat",OT="@firebase/firestore",xT="@firebase/ai",MT="@firebase/firestore-compat",FT="firebase",UT="12.6.0";const zl="[DEFAULT]",$T={[ql]:"fire-core",[dT]:"fire-core-compat",[mT]:"fire-analytics",[pT]:"fire-analytics-compat",[_T]:"fire-app-check",[gT]:"fire-app-check-compat",[yT]:"fire-auth",[vT]:"fire-auth-compat",[ET]:"fire-rtdb",[wT]:"fire-data-connect",[IT]:"fire-rtdb-compat",[TT]:"fire-fn",[AT]:"fire-fn-compat",[ST]:"fire-iid",[CT]:"fire-iid-compat",[bT]:"fire-fcm",[RT]:"fire-fcm-compat",[PT]:"fire-perf",[kT]:"fire-perf-compat",[NT]:"fire-rc",[DT]:"fire-rc-compat",[LT]:"fire-gcs",[VT]:"fire-gcs-compat",[OT]:"fire-fst",[MT]:"fire-fst-compat",[xT]:"fire-vertex","fire-js":"fire-js",[FT]:"fire-js-all"};const ka=new Map,BT=new Map,Gl=new Map;function md(t,e){try{t.container.addComponent(e)}catch(n){Qn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Br(t){const e=t.name;if(Gl.has(e))return Qn.debug(`There were multiple attempts to register component ${e}.`),!1;Gl.set(e,t);for(const n of ka.values())md(n,t);for(const n of BT.values())md(n,t);return!0}function qu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function nn(t){return t==null?!1:t.settings!==void 0}const jT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},As=new wo("app","Firebase",jT);class HT{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ar("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw As.create("app-deleted",{appName:this._name})}}const Xr=UT;function kg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:zl,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw As.create("bad-app-name",{appName:String(r)});if(n||(n=Ag()),!n)throw As.create("no-options");const i=ka.get(r);if(i){if(or(n,i.options)&&or(s,i.config))return i;throw As.create("duplicate-app",{appName:r})}const o=new QI(r);for(const l of Gl.values())o.addComponent(l);const c=new HT(n,s,o);return ka.set(r,c),c}function Ng(t=zl){const e=ka.get(t);if(!e&&t===zl&&Ag())return kg();if(!e)throw As.create("no-app",{appName:t});return e}function Ss(t,e,n){let s=$T[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qn.warn(o.join(" "));return}Br(new ar(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const WT="firebase-heartbeat-database",qT=1,so="firebase-heartbeat-store";let pl=null;function Dg(){return pl||(pl=cT(WT,qT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(so)}catch(n){console.warn(n)}}}}).catch(t=>{throw As.create("idb-open",{originalErrorMessage:t.message})})),pl}async function zT(t){try{const n=(await Dg()).transaction(so),s=await n.objectStore(so).get(Lg(t));return await n.done,s}catch(e){if(e instanceof ts)Qn.warn(e.message);else{const n=As.create("idb-get",{originalErrorMessage:e?.message});Qn.warn(n.message)}}}async function gd(t,e){try{const s=(await Dg()).transaction(so,"readwrite");await s.objectStore(so).put(e,Lg(t)),await s.done}catch(n){if(n instanceof ts)Qn.warn(n.message);else{const s=As.create("idb-set",{originalErrorMessage:n?.message});Qn.warn(s.message)}}}function Lg(t){return`${t.name}!${t.options.appId}`}const GT=1024,KT=30;class QT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new JT(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=_d();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>KT){const r=XT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Qn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=_d(),{heartbeatsToSend:n,unsentEntries:s}=YT(this._heartbeatsCache.heartbeats),r=Pa(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Qn.warn(e),""}}}function _d(){return new Date().toISOString().substring(0,10)}function YT(t,e=GT){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),yd(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),yd(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class JT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return MI()?FI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await zT(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return gd(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return gd(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function yd(t){return Pa(JSON.stringify({version:2,heartbeats:t})).length}function XT(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}function ZT(t){Br(new ar("platform-logger",e=>new hT(e),"PRIVATE")),Br(new ar("heartbeat",e=>new QT(e),"PRIVATE")),Ss(ql,pd,t),Ss(ql,pd,"esm2020"),Ss("fire-js","")}ZT("");var e0="firebase",t0="12.6.0";Ss(e0,t0,"app");var vd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Cs,Vg;(function(){var t;function e(S,v){function y(){}y.prototype=v.prototype,S.F=v.prototype,S.prototype=new y,S.prototype.constructor=S,S.D=function(I,A,T){for(var E=Array(arguments.length-2),be=2;be<arguments.length;be++)E[be-2]=arguments[be];return v.prototype[A].apply(I,E)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(S,v,y){y||(y=0);const I=Array(16);if(typeof v=="string")for(var A=0;A<16;++A)I[A]=v.charCodeAt(y++)|v.charCodeAt(y++)<<8|v.charCodeAt(y++)<<16|v.charCodeAt(y++)<<24;else for(A=0;A<16;++A)I[A]=v[y++]|v[y++]<<8|v[y++]<<16|v[y++]<<24;v=S.g[0],y=S.g[1],A=S.g[2];let T=S.g[3],E;E=v+(T^y&(A^T))+I[0]+3614090360&4294967295,v=y+(E<<7&4294967295|E>>>25),E=T+(A^v&(y^A))+I[1]+3905402710&4294967295,T=v+(E<<12&4294967295|E>>>20),E=A+(y^T&(v^y))+I[2]+606105819&4294967295,A=T+(E<<17&4294967295|E>>>15),E=y+(v^A&(T^v))+I[3]+3250441966&4294967295,y=A+(E<<22&4294967295|E>>>10),E=v+(T^y&(A^T))+I[4]+4118548399&4294967295,v=y+(E<<7&4294967295|E>>>25),E=T+(A^v&(y^A))+I[5]+1200080426&4294967295,T=v+(E<<12&4294967295|E>>>20),E=A+(y^T&(v^y))+I[6]+2821735955&4294967295,A=T+(E<<17&4294967295|E>>>15),E=y+(v^A&(T^v))+I[7]+4249261313&4294967295,y=A+(E<<22&4294967295|E>>>10),E=v+(T^y&(A^T))+I[8]+1770035416&4294967295,v=y+(E<<7&4294967295|E>>>25),E=T+(A^v&(y^A))+I[9]+2336552879&4294967295,T=v+(E<<12&4294967295|E>>>20),E=A+(y^T&(v^y))+I[10]+4294925233&4294967295,A=T+(E<<17&4294967295|E>>>15),E=y+(v^A&(T^v))+I[11]+2304563134&4294967295,y=A+(E<<22&4294967295|E>>>10),E=v+(T^y&(A^T))+I[12]+1804603682&4294967295,v=y+(E<<7&4294967295|E>>>25),E=T+(A^v&(y^A))+I[13]+4254626195&4294967295,T=v+(E<<12&4294967295|E>>>20),E=A+(y^T&(v^y))+I[14]+2792965006&4294967295,A=T+(E<<17&4294967295|E>>>15),E=y+(v^A&(T^v))+I[15]+1236535329&4294967295,y=A+(E<<22&4294967295|E>>>10),E=v+(A^T&(y^A))+I[1]+4129170786&4294967295,v=y+(E<<5&4294967295|E>>>27),E=T+(y^A&(v^y))+I[6]+3225465664&4294967295,T=v+(E<<9&4294967295|E>>>23),E=A+(v^y&(T^v))+I[11]+643717713&4294967295,A=T+(E<<14&4294967295|E>>>18),E=y+(T^v&(A^T))+I[0]+3921069994&4294967295,y=A+(E<<20&4294967295|E>>>12),E=v+(A^T&(y^A))+I[5]+3593408605&4294967295,v=y+(E<<5&4294967295|E>>>27),E=T+(y^A&(v^y))+I[10]+38016083&4294967295,T=v+(E<<9&4294967295|E>>>23),E=A+(v^y&(T^v))+I[15]+3634488961&4294967295,A=T+(E<<14&4294967295|E>>>18),E=y+(T^v&(A^T))+I[4]+3889429448&4294967295,y=A+(E<<20&4294967295|E>>>12),E=v+(A^T&(y^A))+I[9]+568446438&4294967295,v=y+(E<<5&4294967295|E>>>27),E=T+(y^A&(v^y))+I[14]+3275163606&4294967295,T=v+(E<<9&4294967295|E>>>23),E=A+(v^y&(T^v))+I[3]+4107603335&4294967295,A=T+(E<<14&4294967295|E>>>18),E=y+(T^v&(A^T))+I[8]+1163531501&4294967295,y=A+(E<<20&4294967295|E>>>12),E=v+(A^T&(y^A))+I[13]+2850285829&4294967295,v=y+(E<<5&4294967295|E>>>27),E=T+(y^A&(v^y))+I[2]+4243563512&4294967295,T=v+(E<<9&4294967295|E>>>23),E=A+(v^y&(T^v))+I[7]+1735328473&4294967295,A=T+(E<<14&4294967295|E>>>18),E=y+(T^v&(A^T))+I[12]+2368359562&4294967295,y=A+(E<<20&4294967295|E>>>12),E=v+(y^A^T)+I[5]+4294588738&4294967295,v=y+(E<<4&4294967295|E>>>28),E=T+(v^y^A)+I[8]+2272392833&4294967295,T=v+(E<<11&4294967295|E>>>21),E=A+(T^v^y)+I[11]+1839030562&4294967295,A=T+(E<<16&4294967295|E>>>16),E=y+(A^T^v)+I[14]+4259657740&4294967295,y=A+(E<<23&4294967295|E>>>9),E=v+(y^A^T)+I[1]+2763975236&4294967295,v=y+(E<<4&4294967295|E>>>28),E=T+(v^y^A)+I[4]+1272893353&4294967295,T=v+(E<<11&4294967295|E>>>21),E=A+(T^v^y)+I[7]+4139469664&4294967295,A=T+(E<<16&4294967295|E>>>16),E=y+(A^T^v)+I[10]+3200236656&4294967295,y=A+(E<<23&4294967295|E>>>9),E=v+(y^A^T)+I[13]+681279174&4294967295,v=y+(E<<4&4294967295|E>>>28),E=T+(v^y^A)+I[0]+3936430074&4294967295,T=v+(E<<11&4294967295|E>>>21),E=A+(T^v^y)+I[3]+3572445317&4294967295,A=T+(E<<16&4294967295|E>>>16),E=y+(A^T^v)+I[6]+76029189&4294967295,y=A+(E<<23&4294967295|E>>>9),E=v+(y^A^T)+I[9]+3654602809&4294967295,v=y+(E<<4&4294967295|E>>>28),E=T+(v^y^A)+I[12]+3873151461&4294967295,T=v+(E<<11&4294967295|E>>>21),E=A+(T^v^y)+I[15]+530742520&4294967295,A=T+(E<<16&4294967295|E>>>16),E=y+(A^T^v)+I[2]+3299628645&4294967295,y=A+(E<<23&4294967295|E>>>9),E=v+(A^(y|~T))+I[0]+4096336452&4294967295,v=y+(E<<6&4294967295|E>>>26),E=T+(y^(v|~A))+I[7]+1126891415&4294967295,T=v+(E<<10&4294967295|E>>>22),E=A+(v^(T|~y))+I[14]+2878612391&4294967295,A=T+(E<<15&4294967295|E>>>17),E=y+(T^(A|~v))+I[5]+4237533241&4294967295,y=A+(E<<21&4294967295|E>>>11),E=v+(A^(y|~T))+I[12]+1700485571&4294967295,v=y+(E<<6&4294967295|E>>>26),E=T+(y^(v|~A))+I[3]+2399980690&4294967295,T=v+(E<<10&4294967295|E>>>22),E=A+(v^(T|~y))+I[10]+4293915773&4294967295,A=T+(E<<15&4294967295|E>>>17),E=y+(T^(A|~v))+I[1]+2240044497&4294967295,y=A+(E<<21&4294967295|E>>>11),E=v+(A^(y|~T))+I[8]+1873313359&4294967295,v=y+(E<<6&4294967295|E>>>26),E=T+(y^(v|~A))+I[15]+4264355552&4294967295,T=v+(E<<10&4294967295|E>>>22),E=A+(v^(T|~y))+I[6]+2734768916&4294967295,A=T+(E<<15&4294967295|E>>>17),E=y+(T^(A|~v))+I[13]+1309151649&4294967295,y=A+(E<<21&4294967295|E>>>11),E=v+(A^(y|~T))+I[4]+4149444226&4294967295,v=y+(E<<6&4294967295|E>>>26),E=T+(y^(v|~A))+I[11]+3174756917&4294967295,T=v+(E<<10&4294967295|E>>>22),E=A+(v^(T|~y))+I[2]+718787259&4294967295,A=T+(E<<15&4294967295|E>>>17),E=y+(T^(A|~v))+I[9]+3951481745&4294967295,S.g[0]=S.g[0]+v&4294967295,S.g[1]=S.g[1]+(A+(E<<21&4294967295|E>>>11))&4294967295,S.g[2]=S.g[2]+A&4294967295,S.g[3]=S.g[3]+T&4294967295}s.prototype.v=function(S,v){v===void 0&&(v=S.length);const y=v-this.blockSize,I=this.C;let A=this.h,T=0;for(;T<v;){if(A==0)for(;T<=y;)r(this,S,T),T+=this.blockSize;if(typeof S=="string"){for(;T<v;)if(I[A++]=S.charCodeAt(T++),A==this.blockSize){r(this,I),A=0;break}}else for(;T<v;)if(I[A++]=S[T++],A==this.blockSize){r(this,I),A=0;break}}this.h=A,this.o+=v},s.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var v=1;v<S.length-8;++v)S[v]=0;v=this.o*8;for(var y=S.length-8;y<S.length;++y)S[y]=v&255,v/=256;for(this.v(S),S=Array(16),v=0,y=0;y<4;++y)for(let I=0;I<32;I+=8)S[v++]=this.g[y]>>>I&255;return S};function i(S,v){var y=c;return Object.prototype.hasOwnProperty.call(y,S)?y[S]:y[S]=v(S)}function o(S,v){this.h=v;const y=[];let I=!0;for(let A=S.length-1;A>=0;A--){const T=S[A]|0;I&&T==v||(y[A]=T,I=!1)}this.g=y}var c={};function l(S){return-128<=S&&S<128?i(S,function(v){return new o([v|0],v<0?-1:0)}):new o([S|0],S<0?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return d;if(S<0)return L(u(-S));const v=[];let y=1;for(let I=0;S>=y;I++)v[I]=S/y|0,y*=4294967296;return new o(v,0)}function f(S,v){if(S.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(S.charAt(0)=="-")return L(f(S.substring(1),v));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const y=u(Math.pow(v,8));let I=d;for(let T=0;T<S.length;T+=8){var A=Math.min(8,S.length-T);const E=parseInt(S.substring(T,T+A),v);A<8?(A=u(Math.pow(v,A)),I=I.j(A).add(u(E))):(I=I.j(y),I=I.add(u(E)))}return I}var d=l(0),m=l(1),_=l(16777216);t=o.prototype,t.m=function(){if(N(this))return-L(this).m();let S=0,v=1;for(let y=0;y<this.g.length;y++){const I=this.i(y);S+=(I>=0?I:4294967296+I)*v,v*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(b(this))return"0";if(N(this))return"-"+L(this).toString(S);const v=u(Math.pow(S,6));var y=this;let I="";for(;;){const A=M(y,v).g;y=H(y,A.j(v));let T=((y.g.length>0?y.g[0]:y.h)>>>0).toString(S);if(y=A,b(y))return T+I;for(;T.length<6;)T="0"+T;I=T+I}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function b(S){if(S.h!=0)return!1;for(let v=0;v<S.g.length;v++)if(S.g[v]!=0)return!1;return!0}function N(S){return S.h==-1}t.l=function(S){return S=H(this,S),N(S)?-1:b(S)?0:1};function L(S){const v=S.g.length,y=[];for(let I=0;I<v;I++)y[I]=~S.g[I];return new o(y,~S.h).add(m)}t.abs=function(){return N(this)?L(this):this},t.add=function(S){const v=Math.max(this.g.length,S.g.length),y=[];let I=0;for(let A=0;A<=v;A++){let T=I+(this.i(A)&65535)+(S.i(A)&65535),E=(T>>>16)+(this.i(A)>>>16)+(S.i(A)>>>16);I=E>>>16,T&=65535,E&=65535,y[A]=E<<16|T}return new o(y,y[y.length-1]&-2147483648?-1:0)};function H(S,v){return S.add(L(v))}t.j=function(S){if(b(this)||b(S))return d;if(N(this))return N(S)?L(this).j(L(S)):L(L(this).j(S));if(N(S))return L(this.j(L(S)));if(this.l(_)<0&&S.l(_)<0)return u(this.m()*S.m());const v=this.g.length+S.g.length,y=[];for(var I=0;I<2*v;I++)y[I]=0;for(I=0;I<this.g.length;I++)for(let A=0;A<S.g.length;A++){const T=this.i(I)>>>16,E=this.i(I)&65535,be=S.i(A)>>>16,Ye=S.i(A)&65535;y[2*I+2*A]+=E*Ye,D(y,2*I+2*A),y[2*I+2*A+1]+=T*Ye,D(y,2*I+2*A+1),y[2*I+2*A+1]+=E*be,D(y,2*I+2*A+1),y[2*I+2*A+2]+=T*be,D(y,2*I+2*A+2)}for(S=0;S<v;S++)y[S]=y[2*S+1]<<16|y[2*S];for(S=v;S<2*v;S++)y[S]=0;return new o(y,0)};function D(S,v){for(;(S[v]&65535)!=S[v];)S[v+1]+=S[v]>>>16,S[v]&=65535,v++}function V(S,v){this.g=S,this.h=v}function M(S,v){if(b(v))throw Error("division by zero");if(b(S))return new V(d,d);if(N(S))return v=M(L(S),v),new V(L(v.g),L(v.h));if(N(v))return v=M(S,L(v)),new V(L(v.g),v.h);if(S.g.length>30){if(N(S)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var y=m,I=v;I.l(S)<=0;)y=Z(y),I=Z(I);var A=ie(y,1),T=ie(I,1);for(I=ie(I,2),y=ie(y,2);!b(I);){var E=T.add(I);E.l(S)<=0&&(A=A.add(y),T=E),I=ie(I,1),y=ie(y,1)}return v=H(S,A.j(v)),new V(A,v)}for(A=d;S.l(v)>=0;){for(y=Math.max(1,Math.floor(S.m()/v.m())),I=Math.ceil(Math.log(y)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),T=u(y),E=T.j(v);N(E)||E.l(S)>0;)y-=I,T=u(y),E=T.j(v);b(T)&&(T=m),A=A.add(T),S=H(S,E)}return new V(A,S)}t.B=function(S){return M(this,S).h},t.and=function(S){const v=Math.max(this.g.length,S.g.length),y=[];for(let I=0;I<v;I++)y[I]=this.i(I)&S.i(I);return new o(y,this.h&S.h)},t.or=function(S){const v=Math.max(this.g.length,S.g.length),y=[];for(let I=0;I<v;I++)y[I]=this.i(I)|S.i(I);return new o(y,this.h|S.h)},t.xor=function(S){const v=Math.max(this.g.length,S.g.length),y=[];for(let I=0;I<v;I++)y[I]=this.i(I)^S.i(I);return new o(y,this.h^S.h)};function Z(S){const v=S.g.length+1,y=[];for(let I=0;I<v;I++)y[I]=S.i(I)<<1|S.i(I-1)>>>31;return new o(y,S.h)}function ie(S,v){const y=v>>5;v%=32;const I=S.g.length-y,A=[];for(let T=0;T<I;T++)A[T]=v>0?S.i(T+y)>>>v|S.i(T+y+1)<<32-v:S.i(T+y);return new o(A,S.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Vg=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=f,Cs=o}).apply(typeof vd<"u"?vd:typeof self<"u"?self:typeof window<"u"?window:{});var Yo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Og,Ni,xg,aa,Kl,Mg,Fg,Ug;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yo=="object"&&Yo];for(var h=0;h<a.length;++h){var p=a[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var s=n(this);function r(a,h){if(h)e:{var p=s;a=a.split(".");for(var g=0;g<a.length-1;g++){var P=a[g];if(!(P in p))break e;p=p[P]}a=a[a.length-1],g=p[a],h=h(g),h!=g&&h!=null&&e(p,a,{configurable:!0,writable:!0,value:h})}}r("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(a){return a||function(h){var p=[],g;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&p.push([g,h[g]]);return p}});var i=i||{},o=this||self;function c(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function l(a,h,p){return a.call.apply(a.bind,arguments)}function u(a,h,p){return u=l,u.apply(null,arguments)}function f(a,h){var p=Array.prototype.slice.call(arguments,1);return function(){var g=p.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function d(a,h){function p(){}p.prototype=h.prototype,a.Z=h.prototype,a.prototype=new p,a.prototype.constructor=a,a.Ob=function(g,P,k){for(var Y=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)Y[Ee-2]=arguments[Ee];return h.prototype[P].apply(g,Y)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function _(a){const h=a.length;if(h>0){const p=Array(h);for(let g=0;g<h;g++)p[g]=a[g];return p}return[]}function b(a,h){for(let g=1;g<arguments.length;g++){const P=arguments[g];var p=typeof P;if(p=p!="object"?p:P?Array.isArray(P)?"array":p:"null",p=="array"||p=="object"&&typeof P.length=="number"){p=a.length||0;const k=P.length||0;a.length=p+k;for(let Y=0;Y<k;Y++)a[p+Y]=P[Y]}else a.push(P)}}class N{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function L(a){o.setTimeout(()=>{throw a},0)}function H(){var a=S;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class D{constructor(){this.h=this.g=null}add(h,p){const g=V.get();g.set(h,p),this.h?this.h.next=g:this.g=g,this.h=g}}var V=new N(()=>new M,a=>a.reset());class M{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,ie=!1,S=new D,v=()=>{const a=Promise.resolve(void 0);Z=()=>{a.then(y)}};function y(){for(var a;a=H();){try{a.h.call(a.g)}catch(p){L(p)}var h=V;h.j(a),h.h<100&&(h.h++,a.next=h.g,h.g=a)}ie=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var T=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};o.addEventListener("test",p,h),o.removeEventListener("test",p,h)}catch{}return a})();function E(a){return/^[\s\xa0]*$/.test(a)}function be(a,h){A.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,h)}d(be,A),be.prototype.init=function(a,h){const p=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget,h||(p=="mouseover"?h=a.fromElement:p=="mouseout"&&(h=a.toElement)),this.relatedTarget=h,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&be.Z.h.call(this)},be.prototype.h=function(){be.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Ye="closure_listenable_"+(Math.random()*1e6|0),Me=0;function ve(a,h,p,g,P){this.listener=a,this.proxy=null,this.src=h,this.type=p,this.capture=!!g,this.ha=P,this.key=++Me,this.da=this.fa=!1}function Re(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ht(a,h,p){for(const g in a)h.call(p,a[g],g,a)}function _n(a,h){for(const p in a)h.call(void 0,a[p],p,a)}function Gt(a){const h={};for(const p in a)h[p]=a[p];return h}const yt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Vn(a,h){let p,g;for(let P=1;P<arguments.length;P++){g=arguments[P];for(p in g)a[p]=g[p];for(let k=0;k<yt.length;k++)p=yt[k],Object.prototype.hasOwnProperty.call(g,p)&&(a[p]=g[p])}}function an(a){this.src=a,this.g={},this.h=0}an.prototype.add=function(a,h,p,g,P){const k=a.toString();a=this.g[k],a||(a=this.g[k]=[],this.h++);const Y=Rt(a,h,g,P);return Y>-1?(h=a[Y],p||(h.fa=!1)):(h=new ve(h,this.src,k,!!g,P),h.fa=p,a.push(h)),h};function cn(a,h){const p=h.type;if(p in a.g){var g=a.g[p],P=Array.prototype.indexOf.call(g,h,void 0),k;(k=P>=0)&&Array.prototype.splice.call(g,P,1),k&&(Re(h),a.g[p].length==0&&(delete a.g[p],a.h--))}}function Rt(a,h,p,g){for(let P=0;P<a.length;++P){const k=a[P];if(!k.da&&k.listener==h&&k.capture==!!p&&k.ha==g)return P}return-1}var U="closure_lm_"+(Math.random()*1e6|0),te={};function X(a,h,p,g,P){if(Array.isArray(h)){for(let k=0;k<h.length;k++)X(a,h[k],p,g,P);return null}return p=J(p),a&&a[Ye]?a.J(h,p,c(g)?!!g.capture:!1,P):ae(a,h,p,!1,g,P)}function ae(a,h,p,g,P,k){if(!h)throw Error("Invalid event type");const Y=c(P)?!!P.capture:!!P;let Ee=j(a);if(Ee||(a[U]=Ee=new an(a)),p=Ee.add(h,p,g,Y,k),p.proxy)return p;if(g=Te(),p.proxy=g,g.src=a,g.listener=p,a.addEventListener)T||(P=Y),P===void 0&&(P=!1),a.addEventListener(h.toString(),g,P);else if(a.attachEvent)a.attachEvent(R(h.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Te(){function a(p){return h.call(a.src,a.listener,p)}const h=$;return a}function w(a,h,p,g,P){if(Array.isArray(h))for(var k=0;k<h.length;k++)w(a,h[k],p,g,P);else g=c(g)?!!g.capture:!!g,p=J(p),a&&a[Ye]?(a=a.i,k=String(h).toString(),k in a.g&&(h=a.g[k],p=Rt(h,p,g,P),p>-1&&(Re(h[p]),Array.prototype.splice.call(h,p,1),h.length==0&&(delete a.g[k],a.h--)))):a&&(a=j(a))&&(h=a.g[h.toString()],a=-1,h&&(a=Rt(h,p,g,P)),(p=a>-1?h[a]:null)&&C(p))}function C(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[Ye])cn(h.i,a);else{var p=a.type,g=a.proxy;h.removeEventListener?h.removeEventListener(p,g,a.capture):h.detachEvent?h.detachEvent(R(p),g):h.addListener&&h.removeListener&&h.removeListener(g),(p=j(h))?(cn(p,a),p.h==0&&(p.src=null,h[U]=null)):Re(a)}}}function R(a){return a in te?te[a]:te[a]="on"+a}function $(a,h){if(a.da)a=!0;else{h=new be(h,this);const p=a.listener,g=a.ha||a.src;a.fa&&C(a),a=p.call(g,h)}return a}function j(a){return a=a[U],a instanceof an?a:null}var F="__closure_events_fn_"+(Math.random()*1e9>>>0);function J(a){return typeof a=="function"?a:(a[F]||(a[F]=function(h){return a.handleEvent(h)}),a[F])}function G(){I.call(this),this.i=new an(this),this.M=this,this.G=null}d(G,I),G.prototype[Ye]=!0,G.prototype.removeEventListener=function(a,h,p,g){w(this,a,h,p,g)};function z(a,h){var p,g=a.G;if(g)for(p=[];g;g=g.G)p.push(g);if(a=a.M,g=h.type||h,typeof h=="string")h=new A(h,a);else if(h instanceof A)h.target=h.target||a;else{var P=h;h=new A(g,a),Vn(h,P)}P=!0;let k,Y;if(p)for(Y=p.length-1;Y>=0;Y--)k=h.g=p[Y],P=W(k,g,!0,h)&&P;if(k=h.g=a,P=W(k,g,!0,h)&&P,P=W(k,g,!1,h)&&P,p)for(Y=0;Y<p.length;Y++)k=h.g=p[Y],P=W(k,g,!1,h)&&P}G.prototype.N=function(){if(G.Z.N.call(this),this.i){var a=this.i;for(const h in a.g){const p=a.g[h];for(let g=0;g<p.length;g++)Re(p[g]);delete a.g[h],a.h--}}this.G=null},G.prototype.J=function(a,h,p,g){return this.i.add(String(a),h,!1,p,g)},G.prototype.K=function(a,h,p,g){return this.i.add(String(a),h,!0,p,g)};function W(a,h,p,g){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();let P=!0;for(let k=0;k<h.length;++k){const Y=h[k];if(Y&&!Y.da&&Y.capture==p){const Ee=Y.listener,ct=Y.ha||Y.src;Y.fa&&cn(a.i,Y),P=Ee.call(ct,g)!==!1&&P}}return P&&!g.defaultPrevented}function le(a,h){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=u(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(a,h||0)}function ee(a){a.g=le(()=>{a.g=null,a.i&&(a.i=!1,ee(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class ce extends I{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function he(a){I.call(this),this.h=a,this.g={}}d(he,I);var we=[];function Fe(a){Ht(a.g,function(h,p){this.g.hasOwnProperty(p)&&C(h)},a),a.g={}}he.prototype.N=function(){he.Z.N.call(this),Fe(this)},he.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ke=o.JSON.stringify,Pt=o.JSON.parse,kt=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Kt(){}function Qt(){}var ln={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function gr(){A.call(this,"d")}d(gr,A);function vt(){A.call(this,"c")}d(vt,A);var dt={},ci=null;function Hs(){return ci=ci||new G}dt.Ia="serverreachability";function Oh(a){A.call(this,dt.Ia,a)}d(Oh,A);function li(a){const h=Hs();z(h,new Oh(h))}dt.STAT_EVENT="statevent";function xh(a,h){A.call(this,dt.STAT_EVENT,a),this.stat=h}d(xh,A);function Ut(a){const h=Hs();z(h,new xh(h,a))}dt.Ja="timingevent";function Mh(a,h){A.call(this,dt.Ja,a),this.size=h}d(Mh,A);function ui(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},h)}function hi(){this.g=!0}hi.prototype.ua=function(){this.g=!1};function lv(a,h,p,g,P,k){a.info(function(){if(a.g)if(k){var Y="",Ee=k.split("&");for(let $e=0;$e<Ee.length;$e++){var ct=Ee[$e].split("=");if(ct.length>1){const pt=ct[0];ct=ct[1];const vn=pt.split("_");Y=vn.length>=2&&vn[1]=="type"?Y+(pt+"="+ct+"&"):Y+(pt+"=redacted&")}}}else Y=null;else Y=k;return"XMLHTTP REQ ("+g+") [attempt "+P+"]: "+h+`
`+p+`
`+Y})}function uv(a,h,p,g,P,k,Y){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+P+"]: "+h+`
`+p+`
`+k+" "+Y})}function _r(a,h,p,g){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+fv(a,p)+(g?" "+g:"")})}function hv(a,h){a.info(function(){return"TIMEOUT: "+h})}hi.prototype.info=function(){};function fv(a,h){if(!a.g)return h;if(!h)return null;try{const k=JSON.parse(h);if(k){for(a=0;a<k.length;a++)if(Array.isArray(k[a])){var p=k[a];if(!(p.length<2)){var g=p[1];if(Array.isArray(g)&&!(g.length<1)){var P=g[0];if(P!="noop"&&P!="stop"&&P!="close")for(let Y=1;Y<g.length;Y++)g[Y]=""}}}}return ke(k)}catch{return h}}var Vo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Fh={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Uh;function Vc(){}d(Vc,Kt),Vc.prototype.g=function(){return new XMLHttpRequest},Uh=new Vc;function fi(a){return encodeURIComponent(String(a))}function dv(a){var h=1;a=a.split(":");const p=[];for(;h>0&&a.length;)p.push(a.shift()),h--;return a.length&&p.push(a.join(":")),p}function ns(a,h,p,g){this.j=a,this.i=h,this.l=p,this.S=g||1,this.V=new he(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new $h}function $h(){this.i=null,this.g="",this.h=!1}var Bh={},Oc={};function xc(a,h,p){a.M=1,a.A=xo(yn(h)),a.u=p,a.R=!0,jh(a,null)}function jh(a,h){a.F=Date.now(),Oo(a),a.B=yn(a.A);var p=a.B,g=a.S;Array.isArray(g)||(g=[String(g)]),tf(p.i,"t",g),a.C=0,p=a.j.L,a.h=new $h,a.g=Ef(a.j,p?h:null,!a.u),a.P>0&&(a.O=new ce(u(a.Y,a,a.g),a.P)),h=a.V,p=a.g,g=a.ba;var P="readystatechange";Array.isArray(P)||(P&&(we[0]=P.toString()),P=we);for(let k=0;k<P.length;k++){const Y=X(p,P[k],g||h.handleEvent,!1,h.h||h);if(!Y)break;h.g[Y.key]=Y}h=a.J?Gt(a.J):{},a.u?(a.v||(a.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,h)):(a.v="GET",a.g.ea(a.B,a.v,null,h)),li(),lv(a.i,a.v,a.B,a.l,a.S,a.u)}ns.prototype.ba=function(a){a=a.target;const h=this.O;h&&is(a)==3?h.j():this.Y(a)},ns.prototype.Y=function(a){try{if(a==this.g)e:{const Ee=is(this.g),ct=this.g.ya(),$e=this.g.ca();if(!(Ee<3)&&(Ee!=3||this.g&&(this.h.h||this.g.la()||lf(this.g)))){this.K||Ee!=4||ct==7||(ct==8||$e<=0?li(3):li(2)),Mc(this);var h=this.g.ca();this.X=h;var p=pv(this);if(this.o=h==200,uv(this.i,this.v,this.B,this.l,this.S,Ee,h),this.o){if(this.U&&!this.L){t:{if(this.g){var g,P=this.g;if((g=P.g?P.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(g)){var k=g;break t}}k=null}if(a=k)_r(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Fc(this,a);else{this.o=!1,this.m=3,Ut(12),Ws(this),di(this);break e}}if(this.R){a=!0;let pt;for(;!this.K&&this.C<p.length;)if(pt=mv(this,p),pt==Oc){Ee==4&&(this.m=4,Ut(14),a=!1),_r(this.i,this.l,null,"[Incomplete Response]");break}else if(pt==Bh){this.m=4,Ut(15),_r(this.i,this.l,p,"[Invalid Chunk]"),a=!1;break}else _r(this.i,this.l,pt,null),Fc(this,pt);if(Hh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ee!=4||p.length!=0||this.h.h||(this.m=1,Ut(16),a=!1),this.o=this.o&&a,!a)_r(this.i,this.l,p,"[Invalid Chunked Response]"),Ws(this),di(this);else if(p.length>0&&!this.W){this.W=!0;var Y=this.j;Y.g==this&&Y.aa&&!Y.P&&(Y.j.info("Great, no buffering proxy detected. Bytes received: "+p.length),zc(Y),Y.P=!0,Ut(11))}}else _r(this.i,this.l,p,null),Fc(this,p);Ee==4&&Ws(this),this.o&&!this.K&&(Ee==4?gf(this.j,this):(this.o=!1,Oo(this)))}else Pv(this.g),h==400&&p.indexOf("Unknown SID")>0?(this.m=3,Ut(12)):(this.m=0,Ut(13)),Ws(this),di(this)}}}catch{}finally{}};function pv(a){if(!Hh(a))return a.g.la();const h=lf(a.g);if(h==="")return"";let p="";const g=h.length,P=is(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Ws(a),di(a),"";a.h.i=new o.TextDecoder}for(let k=0;k<g;k++)a.h.h=!0,p+=a.h.i.decode(h[k],{stream:!(P&&k==g-1)});return h.length=0,a.h.g+=p,a.C=0,a.h.g}function Hh(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function mv(a,h){var p=a.C,g=h.indexOf(`
`,p);return g==-1?Oc:(p=Number(h.substring(p,g)),isNaN(p)?Bh:(g+=1,g+p>h.length?Oc:(h=h.slice(g,g+p),a.C=g+p,h)))}ns.prototype.cancel=function(){this.K=!0,Ws(this)};function Oo(a){a.T=Date.now()+a.H,Wh(a,a.H)}function Wh(a,h){if(a.D!=null)throw Error("WatchDog timer not null");a.D=ui(u(a.aa,a),h)}function Mc(a){a.D&&(o.clearTimeout(a.D),a.D=null)}ns.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(hv(this.i,this.B),this.M!=2&&(li(),Ut(17)),Ws(this),this.m=2,di(this)):Wh(this,this.T-a)};function di(a){a.j.I==0||a.K||gf(a.j,a)}function Ws(a){Mc(a);var h=a.O;h&&typeof h.dispose=="function"&&h.dispose(),a.O=null,Fe(a.V),a.g&&(h=a.g,a.g=null,h.abort(),h.dispose())}function Fc(a,h){try{var p=a.j;if(p.I!=0&&(p.g==a||Uc(p.h,a))){if(!a.L&&Uc(p.h,a)&&p.I==3){try{var g=p.Ba.g.parse(h)}catch{g=null}if(Array.isArray(g)&&g.length==3){var P=g;if(P[0]==0){e:if(!p.v){if(p.g)if(p.g.F+3e3<a.F)Bo(p),Uo(p);else break e;qc(p),Ut(18)}}else p.xa=P[1],0<p.xa-p.K&&P[2]<37500&&p.F&&p.A==0&&!p.C&&(p.C=ui(u(p.Va,p),6e3));Gh(p.h)<=1&&p.ta&&(p.ta=void 0)}else zs(p,11)}else if((a.L||p.g==a)&&Bo(p),!E(h))for(P=p.Ba.g.parse(h),h=0;h<P.length;h++){let $e=P[h];const pt=$e[0];if(!(pt<=p.K))if(p.K=pt,$e=$e[1],p.I==2)if($e[0]=="c"){p.M=$e[1],p.ba=$e[2];const vn=$e[3];vn!=null&&(p.ka=vn,p.j.info("VER="+p.ka));const Gs=$e[4];Gs!=null&&(p.za=Gs,p.j.info("SVER="+p.za));const os=$e[5];os!=null&&typeof os=="number"&&os>0&&(g=1.5*os,p.O=g,p.j.info("backChannelRequestTimeoutMs_="+g)),g=p;const as=a.g;if(as){const Ho=as.g?as.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ho){var k=g.h;k.g||Ho.indexOf("spdy")==-1&&Ho.indexOf("quic")==-1&&Ho.indexOf("h2")==-1||(k.j=k.l,k.g=new Set,k.h&&($c(k,k.h),k.h=null))}if(g.G){const Gc=as.g?as.g.getResponseHeader("X-HTTP-Session-Id"):null;Gc&&(g.wa=Gc,qe(g.J,g.G,Gc))}}p.I=3,p.l&&p.l.ra(),p.aa&&(p.T=Date.now()-a.F,p.j.info("Handshake RTT: "+p.T+"ms")),g=p;var Y=a;if(g.na=vf(g,g.L?g.ba:null,g.W),Y.L){Kh(g.h,Y);var Ee=Y,ct=g.O;ct&&(Ee.H=ct),Ee.D&&(Mc(Ee),Oo(Ee)),g.g=Y}else pf(g);p.i.length>0&&$o(p)}else $e[0]!="stop"&&$e[0]!="close"||zs(p,7);else p.I==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?zs(p,7):Wc(p):$e[0]!="noop"&&p.l&&p.l.qa($e),p.A=0)}}li(4)}catch{}}var gv=class{constructor(a,h){this.g=a,this.map=h}};function qh(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function zh(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Gh(a){return a.h?1:a.g?a.g.size:0}function Uc(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function $c(a,h){a.g?a.g.add(h):a.h=h}function Kh(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}qh.prototype.cancel=function(){if(this.i=Qh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Qh(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const p of a.g.values())h=h.concat(p.G);return h}return _(a.i)}var Yh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _v(a,h){if(a){a=a.split("&");for(let p=0;p<a.length;p++){const g=a[p].indexOf("=");let P,k=null;g>=0?(P=a[p].substring(0,g),k=a[p].substring(g+1)):P=a[p],h(P,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function ss(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;a instanceof ss?(this.l=a.l,pi(this,a.j),this.o=a.o,this.g=a.g,mi(this,a.u),this.h=a.h,Bc(this,nf(a.i)),this.m=a.m):a&&(h=String(a).match(Yh))?(this.l=!1,pi(this,h[1]||"",!0),this.o=gi(h[2]||""),this.g=gi(h[3]||"",!0),mi(this,h[4]),this.h=gi(h[5]||"",!0),Bc(this,h[6]||"",!0),this.m=gi(h[7]||"")):(this.l=!1,this.i=new yi(null,this.l))}ss.prototype.toString=function(){const a=[];var h=this.j;h&&a.push(_i(h,Jh,!0),":");var p=this.g;return(p||h=="file")&&(a.push("//"),(h=this.o)&&a.push(_i(h,Jh,!0),"@"),a.push(fi(p).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.u,p!=null&&a.push(":",String(p))),(p=this.h)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(_i(p,p.charAt(0)=="/"?Ev:vv,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",_i(p,Iv)),a.join("")},ss.prototype.resolve=function(a){const h=yn(this);let p=!!a.j;p?pi(h,a.j):p=!!a.o,p?h.o=a.o:p=!!a.g,p?h.g=a.g:p=a.u!=null;var g=a.h;if(p)mi(h,a.u);else if(p=!!a.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var P=h.h.lastIndexOf("/");P!=-1&&(g=h.h.slice(0,P+1)+g)}if(P=g,P==".."||P==".")g="";else if(P.indexOf("./")!=-1||P.indexOf("/.")!=-1){g=P.lastIndexOf("/",0)==0,P=P.split("/");const k=[];for(let Y=0;Y<P.length;){const Ee=P[Y++];Ee=="."?g&&Y==P.length&&k.push(""):Ee==".."?((k.length>1||k.length==1&&k[0]!="")&&k.pop(),g&&Y==P.length&&k.push("")):(k.push(Ee),g=!0)}g=k.join("/")}else g=P}return p?h.h=g:p=a.i.toString()!=="",p?Bc(h,nf(a.i)):p=!!a.m,p&&(h.m=a.m),h};function yn(a){return new ss(a)}function pi(a,h,p){a.j=p?gi(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function mi(a,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);a.u=h}else a.u=null}function Bc(a,h,p){h instanceof yi?(a.i=h,Tv(a.i,a.l)):(p||(h=_i(h,wv)),a.i=new yi(h,a.l))}function qe(a,h,p){a.i.set(h,p)}function xo(a){return qe(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function gi(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function _i(a,h,p){return typeof a=="string"?(a=encodeURI(a).replace(h,yv),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function yv(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Jh=/[#\/\?@]/g,vv=/[#\?:]/g,Ev=/[#\?]/g,wv=/[#\?@]/g,Iv=/#/g;function yi(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function qs(a){a.g||(a.g=new Map,a.h=0,a.i&&_v(a.i,function(h,p){a.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=yi.prototype,t.add=function(a,h){qs(this),this.i=null,a=yr(this,a);let p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(h),this.h+=1,this};function Xh(a,h){qs(a),h=yr(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Zh(a,h){return qs(a),h=yr(a,h),a.g.has(h)}t.forEach=function(a,h){qs(this),this.g.forEach(function(p,g){p.forEach(function(P){a.call(h,P,g,this)},this)},this)};function ef(a,h){qs(a);let p=[];if(typeof h=="string")Zh(a,h)&&(p=p.concat(a.g.get(yr(a,h))));else for(a=Array.from(a.g.values()),h=0;h<a.length;h++)p=p.concat(a[h]);return p}t.set=function(a,h){return qs(this),this.i=null,a=yr(this,a),Zh(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=ef(this,a),a.length>0?String(a[0]):h):h};function tf(a,h,p){Xh(a,h),p.length>0&&(a.i=null,a.g.set(yr(a,h),_(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(let g=0;g<h.length;g++){var p=h[g];const P=fi(p);p=ef(this,p);for(let k=0;k<p.length;k++){let Y=P;p[k]!==""&&(Y+="="+fi(p[k])),a.push(Y)}}return this.i=a.join("&")};function nf(a){const h=new yi;return h.i=a.i,a.g&&(h.g=new Map(a.g),h.h=a.h),h}function yr(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function Tv(a,h){h&&!a.j&&(qs(a),a.i=null,a.g.forEach(function(p,g){const P=g.toLowerCase();g!=P&&(Xh(this,g),tf(this,P,p))},a)),a.j=h}function Av(a,h){const p=new hi;if(o.Image){const g=new Image;g.onload=f(rs,p,"TestLoadImage: loaded",!0,h,g),g.onerror=f(rs,p,"TestLoadImage: error",!1,h,g),g.onabort=f(rs,p,"TestLoadImage: abort",!1,h,g),g.ontimeout=f(rs,p,"TestLoadImage: timeout",!1,h,g),o.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else h(!1)}function Sv(a,h){const p=new hi,g=new AbortController,P=setTimeout(()=>{g.abort(),rs(p,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:g.signal}).then(k=>{clearTimeout(P),k.ok?rs(p,"TestPingServer: ok",!0,h):rs(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(P),rs(p,"TestPingServer: error",!1,h)})}function rs(a,h,p,g,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),g(p)}catch{}}function Cv(){this.g=new kt}function jc(a){this.i=a.Sb||null,this.h=a.ab||!1}d(jc,Kt),jc.prototype.g=function(){return new Mo(this.i,this.h)};function Mo(a,h){G.call(this),this.H=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Mo,G),t=Mo.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=h,this.readyState=1,Ei(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(h.body=a),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vi(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ei(this)),this.g&&(this.readyState=3,Ei(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;sf(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function sf(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?vi(this):Ei(this),this.readyState==3&&sf(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,vi(this))},t.Na=function(a){this.g&&(this.response=a,vi(this))},t.ga=function(){this.g&&vi(this)};function vi(a){a.readyState=4,a.l=null,a.j=null,a.B=null,Ei(a)}t.setRequestHeader=function(a,h){this.A.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=h.next();return a.join(`\r
`)};function Ei(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Mo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function rf(a){let h="";return Ht(a,function(p,g){h+=g,h+=":",h+=p,h+=`\r
`}),h}function Hc(a,h,p){e:{for(g in p){var g=!1;break e}g=!0}g||(p=rf(p),typeof a=="string"?p!=null&&fi(p):qe(a,h,p))}function et(a){G.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(et,G);var bv=/^https?$/i,Rv=["POST","PUT"];t=et.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,h,p,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Uh.g(),this.g.onreadystatechange=m(u(this.Ca,this));try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(k){of(this,k);return}if(a=p||"",p=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var P in g)p.set(P,g[P]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const k of g.keys())p.set(k,g.get(k));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(p.keys()).find(k=>k.toLowerCase()=="content-type"),P=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(Rv,h,void 0)>=0)||g||P||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[k,Y]of p)this.g.setRequestHeader(k,Y);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(k){of(this,k)}};function of(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.o=5,af(a),Fo(a)}function af(a){a.A||(a.A=!0,z(a,"complete"),z(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,z(this,"complete"),z(this,"abort"),Fo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fo(this,!0)),et.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?cf(this):this.Xa())},t.Xa=function(){cf(this)};function cf(a){if(a.h&&typeof i<"u"){if(a.v&&is(a)==4)setTimeout(a.Ca.bind(a),0);else if(z(a,"readystatechange"),is(a)==4){a.h=!1;try{const k=a.ca();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var g;if(g=k===0){let Y=String(a.D).match(Yh)[1]||null;!Y&&o.self&&o.self.location&&(Y=o.self.location.protocol.slice(0,-1)),g=!bv.test(Y?Y.toLowerCase():"")}p=g}if(p)z(a,"complete"),z(a,"success");else{a.o=6;try{var P=is(a)>2?a.g.statusText:""}catch{P=""}a.l=P+" ["+a.ca()+"]",af(a)}}finally{Fo(a)}}}}function Fo(a,h){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const p=a.g;a.g=null,h||z(a,"ready");try{p.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function is(a){return a.g?a.g.readyState:0}t.ca=function(){try{return is(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),Pt(h)}};function lf(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Pv(a){const h={};a=(a.g&&is(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(E(a[g]))continue;var p=dv(a[g]);const P=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const k=h[P]||[];h[P]=k,k.push(p)}_n(h,function(g){return g.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function wi(a,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||h}function uf(a){this.za=0,this.i=[],this.j=new hi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=wi("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=wi("baseRetryDelayMs",5e3,a),this.Za=wi("retryDelaySeedMs",1e4,a),this.Ta=wi("forwardChannelMaxRetries",2,a),this.va=wi("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new qh(a&&a.concurrentRequestLimit),this.Ba=new Cv,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=uf.prototype,t.ka=8,t.I=1,t.connect=function(a,h,p,g){Ut(0),this.W=a,this.H=h||{},p&&g!==void 0&&(this.H.OSID=p,this.H.OAID=g),this.F=this.X,this.J=vf(this,null,this.W),$o(this)};function Wc(a){if(hf(a),a.I==3){var h=a.V++,p=yn(a.J);if(qe(p,"SID",a.M),qe(p,"RID",h),qe(p,"TYPE","terminate"),Ii(a,p),h=new ns(a,a.j,h),h.M=2,h.A=xo(yn(p)),p=!1,o.navigator&&o.navigator.sendBeacon)try{p=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!p&&o.Image&&(new Image().src=h.A,p=!0),p||(h.g=Ef(h.j,null),h.g.ea(h.A)),h.F=Date.now(),Oo(h)}yf(a)}function Uo(a){a.g&&(zc(a),a.g.cancel(),a.g=null)}function hf(a){Uo(a),a.v&&(o.clearTimeout(a.v),a.v=null),Bo(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function $o(a){if(!zh(a.h)&&!a.m){a.m=!0;var h=a.Ea;Z||v(),ie||(Z(),ie=!0),S.add(h,a),a.D=0}}function kv(a,h){return Gh(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=h.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=ui(u(a.Ea,a,h),_f(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const P=new ns(this,this.j,a);let k=this.o;if(this.U&&(k?(k=Gt(k),Vn(k,this.U)):k=this.U),this.u!==null||this.R||(P.J=k,k=null),this.S)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var g=this.i[p];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(h+=g,h>4096){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=df(this,P,h),p=yn(this.J),qe(p,"RID",a),qe(p,"CVER",22),this.G&&qe(p,"X-HTTP-Session-Id",this.G),Ii(this,p),k&&(this.R?h="headers="+fi(rf(k))+"&"+h:this.u&&Hc(p,this.u,k)),$c(this.h,P),this.Ra&&qe(p,"TYPE","init"),this.S?(qe(p,"$req",h),qe(p,"SID","null"),P.U=!0,xc(P,p,null)):xc(P,p,h),this.I=2}}else this.I==3&&(a?ff(this,a):this.i.length==0||zh(this.h)||ff(this))};function ff(a,h){var p;h?p=h.l:p=a.V++;const g=yn(a.J);qe(g,"SID",a.M),qe(g,"RID",p),qe(g,"AID",a.K),Ii(a,g),a.u&&a.o&&Hc(g,a.u,a.o),p=new ns(a,a.j,p,a.D+1),a.u===null&&(p.J=a.o),h&&(a.i=h.G.concat(a.i)),h=df(a,p,1e3),p.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),$c(a.h,p),xc(p,g,h)}function Ii(a,h){a.H&&Ht(a.H,function(p,g){qe(h,g,p)}),a.l&&Ht({},function(p,g){qe(h,g,p)})}function df(a,h,p){p=Math.min(a.i.length,p);const g=a.l?u(a.l.Ka,a.l,a):null;e:{var P=a.i;let Ee=-1;for(;;){const ct=["count="+p];Ee==-1?p>0?(Ee=P[0].g,ct.push("ofs="+Ee)):Ee=0:ct.push("ofs="+Ee);let $e=!0;for(let pt=0;pt<p;pt++){var k=P[pt].g;const vn=P[pt].map;if(k-=Ee,k<0)Ee=Math.max(0,P[pt].g-100),$e=!1;else try{k="req"+k+"_"||"";try{var Y=vn instanceof Map?vn:Object.entries(vn);for(const[Gs,os]of Y){let as=os;c(os)&&(as=ke(os)),ct.push(k+Gs+"="+encodeURIComponent(as))}}catch(Gs){throw ct.push(k+"type="+encodeURIComponent("_badmap")),Gs}}catch{g&&g(vn)}}if($e){Y=ct.join("&");break e}}Y=void 0}return a=a.i.splice(0,p),h.G=a,Y}function pf(a){if(!a.g&&!a.v){a.Y=1;var h=a.Da;Z||v(),ie||(Z(),ie=!0),S.add(h,a),a.A=0}}function qc(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=ui(u(a.Da,a),_f(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,mf(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=ui(u(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ut(10),Uo(this),mf(this))};function zc(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function mf(a){a.g=new ns(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var h=yn(a.na);qe(h,"RID","rpc"),qe(h,"SID",a.M),qe(h,"AID",a.K),qe(h,"CI",a.F?"0":"1"),!a.F&&a.ia&&qe(h,"TO",a.ia),qe(h,"TYPE","xmlhttp"),Ii(a,h),a.u&&a.o&&Hc(h,a.u,a.o),a.O&&(a.g.H=a.O);var p=a.g;a=a.ba,p.M=1,p.A=xo(yn(h)),p.u=null,p.R=!0,jh(p,a)}t.Va=function(){this.C!=null&&(this.C=null,Uo(this),qc(this),Ut(19))};function Bo(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function gf(a,h){var p=null;if(a.g==h){Bo(a),zc(a),a.g=null;var g=2}else if(Uc(a.h,h))p=h.G,Kh(a.h,h),g=1;else return;if(a.I!=0){if(h.o)if(g==1){p=h.u?h.u.length:0,h=Date.now()-h.F;var P=a.D;g=Hs(),z(g,new Mh(g,p)),$o(a)}else pf(a);else if(P=h.m,P==3||P==0&&h.X>0||!(g==1&&kv(a,h)||g==2&&qc(a)))switch(p&&p.length>0&&(h=a.h,h.i=h.i.concat(p)),P){case 1:zs(a,5);break;case 4:zs(a,10);break;case 3:zs(a,6);break;default:zs(a,2)}}}function _f(a,h){let p=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(p*=2),p*h}function zs(a,h){if(a.j.info("Error code "+h),h==2){var p=u(a.bb,a),g=a.Ua;const P=!g;g=new ss(g||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||pi(g,"https"),xo(g),P?Av(g.toString(),p):Sv(g.toString(),p)}else Ut(2);a.I=0,a.l&&a.l.pa(h),yf(a),hf(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function yf(a){if(a.I=0,a.ja=[],a.l){const h=Qh(a.h);(h.length!=0||a.i.length!=0)&&(b(a.ja,h),b(a.ja,a.i),a.h.i.length=0,_(a.i),a.i.length=0),a.l.oa()}}function vf(a,h,p){var g=p instanceof ss?yn(p):new ss(p);if(g.g!="")h&&(g.g=h+"."+g.g),mi(g,g.u);else{var P=o.location;g=P.protocol,h=h?h+"."+P.hostname:P.hostname,P=+P.port;const k=new ss(null);g&&pi(k,g),h&&(k.g=h),P&&mi(k,P),p&&(k.h=p),g=k}return p=a.G,h=a.wa,p&&h&&qe(g,p,h),qe(g,"VER",a.ka),Ii(a,g),g}function Ef(a,h,p){if(h&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Aa&&!a.ma?new et(new jc({ab:p})):new et(a.ma),h.Fa(a.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function wf(){}t=wf.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function jo(){}jo.prototype.g=function(a,h){return new Yt(a,h)};function Yt(a,h){G.call(this),this.g=new uf(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(a?a["X-WebChannel-Client-Profile"]=h.sa:a={"X-WebChannel-Client-Profile":h.sa}),this.g.U=a,(a=h&&h.Qb)&&!E(a)&&(this.g.u=a),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!E(h)&&(this.g.G=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new vr(this)}d(Yt,G),Yt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Yt.prototype.close=function(){Wc(this.g)},Yt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.v&&(p={},p.__data__=ke(a),a=p);h.i.push(new gv(h.Ya++,a)),h.I==3&&$o(h)},Yt.prototype.N=function(){this.g.l=null,delete this.j,Wc(this.g),delete this.g,Yt.Z.N.call(this)};function If(a){gr.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const p in h){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}d(If,gr);function Tf(){vt.call(this),this.status=1}d(Tf,vt);function vr(a){this.g=a}d(vr,wf),vr.prototype.ra=function(){z(this.g,"a")},vr.prototype.qa=function(a){z(this.g,new If(a))},vr.prototype.pa=function(a){z(this.g,new Tf)},vr.prototype.oa=function(){z(this.g,"b")},jo.prototype.createWebChannel=jo.prototype.g,Yt.prototype.send=Yt.prototype.o,Yt.prototype.open=Yt.prototype.m,Yt.prototype.close=Yt.prototype.close,Ug=function(){return new jo},Fg=function(){return Hs()},Mg=dt,Kl={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Vo.NO_ERROR=0,Vo.TIMEOUT=8,Vo.HTTP_ERROR=6,aa=Vo,Fh.COMPLETE="complete",xg=Fh,Qt.EventType=ln,ln.OPEN="a",ln.CLOSE="b",ln.ERROR="c",ln.MESSAGE="d",G.prototype.listen=G.prototype.J,Ni=Qt,et.prototype.listenOnce=et.prototype.K,et.prototype.getLastError=et.prototype.Ha,et.prototype.getLastErrorCode=et.prototype.ya,et.prototype.getStatus=et.prototype.ca,et.prototype.getResponseJson=et.prototype.La,et.prototype.getResponseText=et.prototype.la,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Fa,Og=et}).apply(typeof Yo<"u"?Yo:typeof self<"u"?self:typeof window<"u"?window:{});const Ed="@firebase/firestore",wd="4.9.2";class Lt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lt.UNAUTHENTICATED=new Lt(null),Lt.GOOGLE_CREDENTIALS=new Lt("google-credentials-uid"),Lt.FIRST_PARTY=new Lt("first-party-uid"),Lt.MOCK_USER=new Lt("mock-user");let Zr="12.3.0";const cr=new Hu("@firebase/firestore");function Sr(){return cr.logLevel}function ne(t,...e){if(cr.logLevel<=Ae.DEBUG){const n=e.map(zu);cr.debug(`Firestore (${Zr}): ${t}`,...n)}}function Yn(t,...e){if(cr.logLevel<=Ae.ERROR){const n=e.map(zu);cr.error(`Firestore (${Zr}): ${t}`,...n)}}function jr(t,...e){if(cr.logLevel<=Ae.WARN){const n=e.map(zu);cr.warn(`Firestore (${Zr}): ${t}`,...n)}}function zu(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function pe(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,$g(t,s,n)}function $g(t,e,n){let s=`FIRESTORE (${Zr}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Yn(s),new Error(s)}function Oe(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||$g(e,r,s)}function ye(t,e){return t}const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends ts{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class bs{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class Bg{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class n0{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Lt.UNAUTHENTICATED)))}shutdown(){}}class s0{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class r0{constructor(e){this.t=e,this.currentUser=Lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Oe(this.o===void 0,42304);let s=this.i;const r=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let i=new bs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new bs,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const l=i;e.enqueueRetryable((async()=>{await l.promise,await r(this.currentUser)}))},c=l=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>c(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new bs)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Oe(typeof s.accessToken=="string",31837,{l:s}),new Bg(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string",2055,{h:e}),new Lt(e)}}class i0{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Lt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class o0{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new i0(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Lt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Id{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class a0{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,nn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Oe(this.o===void 0,3512);const s=i=>{i.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ne("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>s(i)))};const r=i=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>r(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Id(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Oe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Id(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function c0(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}class Gu{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=c0(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function Se(t,e){return t<e?-1:t>e?1:0}function Ql(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return ml(r)===ml(i)?Se(r,i):ml(r)?1:-1}return Se(t.length,e.length)}const l0=55296,u0=57343;function ml(t){const e=t.charCodeAt(0);return e>=l0&&e<=u0}function Hr(t,e,n){return t.length===e.length&&t.every(((s,r)=>n(s,e[r])))}const Td="__name__";class wn{constructor(e,n,s){n===void 0?n=0:n>e.length&&pe(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&pe(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return wn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof wn?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=wn.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return Se(e.length,n.length)}static compareSegments(e,n){const s=wn.isNumericId(e),r=wn.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?wn.extractNumericId(e).compare(wn.extractNumericId(n)):Ql(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Cs.fromString(e.substring(4,e.length-2))}}class Je extends wn{construct(e,n,s){return new Je(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new se(q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((r=>r.length>0)))}return new Je(n)}static emptyPath(){return new Je([])}}const h0=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends wn{construct(e,n,s){return new At(e,n,s)}static isValidIdentifier(e){return h0.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Td}static keyField(){return new At([Td])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new se(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const c=e[r];if(c==="\\"){if(r+1===e.length)throw new se(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new se(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=l,r+=2}else c==="`"?(o=!o,r++):c!=="."||o?(s+=c,r++):(i(),r++)}if(i(),o)throw new se(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(n)}static emptyPath(){return new At([])}}class ue{constructor(e){this.path=e}static fromPath(e){return new ue(Je.fromString(e))}static fromName(e){return new ue(Je.fromString(e).popFirst(5))}static empty(){return new ue(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ue(new Je(e.slice()))}}function f0(t,e,n){if(!n)throw new se(q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function d0(t,e,n,s){if(e===!0&&s===!0)throw new se(q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ad(t){if(!ue.isDocumentKey(t))throw new se(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function jg(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Ku(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":pe(12329,{type:typeof t})}function lr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new se(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ku(t);throw new se(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function at(t,e){const n={typeString:t};return e&&(n.value=e),n}function To(t,e){if(!jg(t))throw new se(q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new se(q.INVALID_ARGUMENT,n);return!0}const Sd=-62135596800,Cd=1e6;class ze{static now(){return ze.fromMillis(Date.now())}static fromDate(e){return ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Cd);return new ze(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new se(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new se(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Sd)throw new se(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Cd}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ze._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(To(e,ze._jsonSchema))return new ze(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Sd;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ze._jsonSchemaVersion="firestore/timestamp/1.0",ze._jsonSchema={type:at("string",ze._jsonSchemaVersion),seconds:at("number"),nanoseconds:at("number")};class ge{static fromTimestamp(e){return new ge(e)}static min(){return new ge(new ze(0,0))}static max(){return new ge(new ze(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ro=-1;function p0(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=ge.fromTimestamp(s===1e9?new ze(n+1,0):new ze(n,s));return new ks(r,ue.empty(),e)}function m0(t){return new ks(t.readTime,t.key,ro)}class ks{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ks(ge.min(),ue.empty(),ro)}static max(){return new ks(ge.max(),ue.empty(),ro)}}function g0(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ue.comparator(t.documentKey,e.documentKey),n!==0?n:Se(t.largestBatchId,e.largestBatchId))}const _0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class y0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ei(t){if(t.code!==q.FAILED_PRECONDITION||t.message!==_0)throw t;ne("LocalStore","Unexpectedly lost primary lease")}class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B(((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):B.reject(n)}static resolve(e){return new B(((n,s)=>{n(e)}))}static reject(e){return new B(((n,s)=>{s(e)}))}static waitFor(e){return new B(((n,s)=>{let r=0,i=0,o=!1;e.forEach((c=>{++r,c.next((()=>{++i,o&&i===r&&n()}),(l=>s(l)))})),o=!0,i===r&&n()}))}static or(e){let n=B.resolve(!1);for(const s of e)n=n.next((r=>r?B.resolve(r):s()));return n}static forEach(e,n){const s=[];return e.forEach(((r,i)=>{s.push(n.call(this,r,i))})),this.waitFor(s)}static mapArray(e,n){return new B(((s,r)=>{const i=e.length,o=new Array(i);let c=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next((f=>{o[u]=f,++c,c===i&&s(o)}),(f=>r(f)))}}))}static doWhile(e,n){return new B(((s,r)=>{const i=()=>{e()===!0?n().next((()=>{i()}),r):s()};i()}))}}function v0(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ti(t){return t.name==="IndexedDbTransactionError"}class fc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}fc.ce=-1;const Qu=-1;function dc(t){return t==null}function Na(t){return t===0&&1/t==-1/0}function E0(t){return typeof t=="number"&&Number.isInteger(t)&&!Na(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const Hg="";function w0(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=bd(e)),e=I0(t.get(n),e);return bd(e)}function I0(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case Hg:n+="";break;default:n+=i}}return n}function bd(t){return t+Hg+""}function Rd(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ms(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Wg(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Ze{constructor(e,n){this.comparator=e,this.root=n||wt.EMPTY}insert(e,n){return new Ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wt.BLACK,null,null))}remove(e){return new Ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jo(this.root,e,this.comparator,!0)}}class Jo{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wt{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??wt.RED,this.left=r??wt.EMPTY,this.right=i??wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new wt(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return wt.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw pe(27949);return e+(this.isRed()?0:1)}}wt.EMPTY=null,wt.RED=!0,wt.BLACK=!1;wt.EMPTY=new class{constructor(){this.size=0}get key(){throw pe(57766)}get value(){throw pe(16141)}get color(){throw pe(16727)}get left(){throw pe(29726)}get right(){throw pe(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new wt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ft{constructor(e){this.comparator=e,this.data=new Ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Pd(this.data.getIterator())}getIteratorFrom(e){return new Pd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new ft(this.comparator);return n.data=e,n}}class Pd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Xt{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new Xt([])}unionWith(e){let n=new ft(At.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Xt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Hr(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class qg extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new qg("Invalid base64 string: "+i):i}})(e);return new bt(n)}static fromUint8Array(e){const n=(function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i})(e);return new bt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const T0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ns(t){if(Oe(!!t,39018),typeof t=="string"){let e=0;const n=T0.exec(t);if(Oe(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:st(t.seconds),nanos:st(t.nanos)}}function st(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ds(t){return typeof t=="string"?bt.fromBase64String(t):bt.fromUint8Array(t)}const zg="server_timestamp",Gg="__type__",Kg="__previous_value__",Qg="__local_write_time__";function Yu(t){return(t?.mapValue?.fields||{})[Gg]?.stringValue===zg}function pc(t){const e=t.mapValue.fields[Kg];return Yu(e)?pc(e):e}function io(t){const e=Ns(t.mapValue.fields[Qg].timestampValue);return new ze(e.seconds,e.nanos)}class A0{constructor(e,n,s,r,i,o,c,l,u,f){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=f}}const Da="(default)";class oo{constructor(e,n){this.projectId=e,this.database=n||Da}static empty(){return new oo("","")}get isDefaultDatabase(){return this.database===Da}isEqual(e){return e instanceof oo&&e.projectId===this.projectId&&e.database===this.database}}const Yg="__type__",S0="__max__",Xo={mapValue:{}},Jg="__vector__",La="value";function Ls(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Yu(t)?4:b0(t)?9007199254740991:C0(t)?10:11:pe(28295,{value:t})}function Dn(t,e){if(t===e)return!0;const n=Ls(t);if(n!==Ls(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return io(t).isEqual(io(e));case 3:return(function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Ns(r.timestampValue),c=Ns(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(r,i){return Ds(r.bytesValue).isEqual(Ds(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(r,i){return st(r.geoPointValue.latitude)===st(i.geoPointValue.latitude)&&st(r.geoPointValue.longitude)===st(i.geoPointValue.longitude)})(t,e);case 2:return(function(r,i){if("integerValue"in r&&"integerValue"in i)return st(r.integerValue)===st(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=st(r.doubleValue),c=st(i.doubleValue);return o===c?Na(o)===Na(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return Hr(t.arrayValue.values||[],e.arrayValue.values||[],Dn);case 10:case 11:return(function(r,i){const o=r.mapValue.fields||{},c=i.mapValue.fields||{};if(Rd(o)!==Rd(c))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!Dn(o[l],c[l])))return!1;return!0})(t,e);default:return pe(52216,{left:t})}}function ao(t,e){return(t.values||[]).find((n=>Dn(n,e)))!==void 0}function Wr(t,e){if(t===e)return 0;const n=Ls(t),s=Ls(e);if(n!==s)return Se(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Se(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const c=st(i.integerValue||i.doubleValue),l=st(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1})(t,e);case 3:return kd(t.timestampValue,e.timestampValue);case 4:return kd(io(t),io(e));case 5:return Ql(t.stringValue,e.stringValue);case 6:return(function(i,o){const c=Ds(i),l=Ds(o);return c.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const c=i.split("/"),l=o.split("/");for(let u=0;u<c.length&&u<l.length;u++){const f=Se(c[u],l[u]);if(f!==0)return f}return Se(c.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const c=Se(st(i.latitude),st(o.latitude));return c!==0?c:Se(st(i.longitude),st(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Nd(t.arrayValue,e.arrayValue);case 10:return(function(i,o){const c=i.fields||{},l=o.fields||{},u=c[La]?.arrayValue,f=l[La]?.arrayValue,d=Se(u?.values?.length||0,f?.values?.length||0);return d!==0?d:Nd(u,f)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===Xo.mapValue&&o===Xo.mapValue)return 0;if(i===Xo.mapValue)return 1;if(o===Xo.mapValue)return-1;const c=i.fields||{},l=Object.keys(c),u=o.fields||{},f=Object.keys(u);l.sort(),f.sort();for(let d=0;d<l.length&&d<f.length;++d){const m=Ql(l[d],f[d]);if(m!==0)return m;const _=Wr(c[l[d]],u[f[d]]);if(_!==0)return _}return Se(l.length,f.length)})(t.mapValue,e.mapValue);default:throw pe(23264,{he:n})}}function kd(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Se(t,e);const n=Ns(t),s=Ns(e),r=Se(n.seconds,s.seconds);return r!==0?r:Se(n.nanos,s.nanos)}function Nd(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=Wr(n[r],s[r]);if(i)return i}return Se(n.length,s.length)}function qr(t){return Yl(t)}function Yl(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const s=Ns(n);return`time(${s.seconds},${s.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Ds(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return ue.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=Yl(i);return s+"]"})(t.arrayValue):"mapValue"in t?(function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${Yl(n.fields[o])}`;return r+"}"})(t.mapValue):pe(61005,{value:t})}function ca(t){switch(Ls(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=pc(t);return e?16+ca(e):16;case 5:return 2*t.stringValue.length;case 6:return Ds(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((r,i)=>r+ca(i)),0)})(t.arrayValue);case 10:case 11:return(function(s){let r=0;return Ms(s.fields,((i,o)=>{r+=i.length+ca(o)})),r})(t.mapValue);default:throw pe(13486,{value:t})}}function Jl(t){return!!t&&"integerValue"in t}function Ju(t){return!!t&&"arrayValue"in t}function Dd(t){return!!t&&"nullValue"in t}function Ld(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function la(t){return!!t&&"mapValue"in t}function C0(t){return(t?.mapValue?.fields||{})[Yg]?.stringValue===Jg}function Hi(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ms(t.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Hi(s))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Hi(t.arrayValue.values[n]);return e}return{...t}}function b0(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===S0}class qt{constructor(e){this.value=e}static empty(){return new qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!la(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hi(n)}setAll(e){let n=At.emptyPath(),s={},r=[];e.forEach(((o,c)=>{if(!n.isImmediateParentOf(c)){const l=this.getFieldsMap(n);this.applyChanges(l,s,r),s={},r=[],n=c.popLast()}o?s[c.lastSegment()]=Hi(o):r.push(c.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());la(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Dn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];la(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){Ms(n,((r,i)=>e[r]=i));for(const r of s)delete e[r]}clone(){return new qt(Hi(this.value))}}function Xg(t){const e=[];return Ms(t.fields,((n,s)=>{const r=new At([n]);if(la(s)){const i=Xg(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)})),new Xt(e)}class Ot{constructor(e,n,s,r,i,o,c){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Ot(e,0,ge.min(),ge.min(),ge.min(),qt.empty(),0)}static newFoundDocument(e,n,s,r){return new Ot(e,1,n,ge.min(),s,r,0)}static newNoDocument(e,n){return new Ot(e,2,n,ge.min(),ge.min(),qt.empty(),0)}static newUnknownDocument(e,n){return new Ot(e,3,n,ge.min(),ge.min(),qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ot&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ot(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Va{constructor(e,n){this.position=e,this.inclusive=n}}function Vd(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=ue.comparator(ue.fromName(o.referenceValue),n.key):s=Wr(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function Od(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Dn(t.position[n],e.position[n]))return!1;return!0}class Oa{constructor(e,n="asc"){this.field=e,this.dir=n}}function R0(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Zg{}class ut extends Zg{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new k0(e,n,s):n==="array-contains"?new L0(e,s):n==="in"?new V0(e,s):n==="not-in"?new O0(e,s):n==="array-contains-any"?new x0(e,s):new ut(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new N0(e,s):new D0(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Wr(n,this.value)):n!==null&&Ls(this.value)===Ls(n)&&this.matchesComparison(Wr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ln extends Zg{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ln(e,n)}matches(e){return e_(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function e_(t){return t.op==="and"}function t_(t){return P0(t)&&e_(t)}function P0(t){for(const e of t.filters)if(e instanceof Ln)return!1;return!0}function Xl(t){if(t instanceof ut)return t.field.canonicalString()+t.op.toString()+qr(t.value);if(t_(t))return t.filters.map((e=>Xl(e))).join(",");{const e=t.filters.map((n=>Xl(n))).join(",");return`${t.op}(${e})`}}function n_(t,e){return t instanceof ut?(function(s,r){return r instanceof ut&&s.op===r.op&&s.field.isEqual(r.field)&&Dn(s.value,r.value)})(t,e):t instanceof Ln?(function(s,r){return r instanceof Ln&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce(((i,o,c)=>i&&n_(o,r.filters[c])),!0):!1})(t,e):void pe(19439)}function s_(t){return t instanceof ut?(function(n){return`${n.field.canonicalString()} ${n.op} ${qr(n.value)}`})(t):t instanceof Ln?(function(n){return n.op.toString()+" {"+n.getFilters().map(s_).join(" ,")+"}"})(t):"Filter"}class k0 extends ut{constructor(e,n,s){super(e,n,s),this.key=ue.fromName(s.referenceValue)}matches(e){const n=ue.comparator(e.key,this.key);return this.matchesComparison(n)}}class N0 extends ut{constructor(e,n){super(e,"in",n),this.keys=r_("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class D0 extends ut{constructor(e,n){super(e,"not-in",n),this.keys=r_("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function r_(t,e){return(e.arrayValue?.values||[]).map((n=>ue.fromName(n.referenceValue)))}class L0 extends ut{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ju(n)&&ao(n.arrayValue,this.value)}}class V0 extends ut{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ao(this.value.arrayValue,n)}}class O0 extends ut{constructor(e,n){super(e,"not-in",n)}matches(e){if(ao(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ao(this.value.arrayValue,n)}}class x0 extends ut{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ju(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>ao(this.value.arrayValue,s)))}}class M0{constructor(e,n=null,s=[],r=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=c,this.Te=null}}function xd(t,e=null,n=[],s=[],r=null,i=null,o=null){return new M0(t,e,n,s,r,i,o)}function Xu(t){const e=ye(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Xl(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(i){return i.field.canonicalString()+i.dir})(s))).join(","),dc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>qr(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>qr(s))).join(",")),e.Te=n}return e.Te}function Zu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!R0(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!n_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Od(t.startAt,e.startAt)&&Od(t.endAt,e.endAt)}function Zl(t){return ue.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class mc{constructor(e,n=null,s=[],r=[],i=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function F0(t,e,n,s,r,i,o,c){return new mc(t,e,n,s,r,i,o,c)}function eh(t){return new mc(t)}function Md(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function U0(t){return t.collectionGroup!==null}function Wi(t){const e=ye(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new ft(At.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(c=c.add(u.field))}))})),c})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Oa(i,s))})),n.has(At.keyField().canonicalString())||e.Ie.push(new Oa(At.keyField(),s))}return e.Ie}function An(t){const e=ye(t);return e.Ee||(e.Ee=$0(e,Wi(t))),e.Ee}function $0(t,e){if(t.limitType==="F")return xd(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((r=>{const i=r.dir==="desc"?"asc":"desc";return new Oa(r.field,i)}));const n=t.endAt?new Va(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Va(t.startAt.position,t.startAt.inclusive):null;return xd(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function eu(t,e,n){return new mc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function gc(t,e){return Zu(An(t),An(e))&&t.limitType===e.limitType}function i_(t){return`${Xu(An(t))}|lt:${t.limitType}`}function Cr(t){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((r=>s_(r))).join(", ")}]`),dc(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((r=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(r))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((r=>qr(r))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((r=>qr(r))).join(",")),`Target(${s})`})(An(t))}; limitType=${t.limitType})`}function _c(t,e){return e.isFoundDocument()&&(function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):ue.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)})(t,e)&&(function(s,r){for(const i of Wi(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0})(t,e)&&(function(s,r){return!(s.startAt&&!(function(o,c,l){const u=Vd(o,c,l);return o.inclusive?u<=0:u<0})(s.startAt,Wi(s),r)||s.endAt&&!(function(o,c,l){const u=Vd(o,c,l);return o.inclusive?u>=0:u>0})(s.endAt,Wi(s),r))})(t,e)}function B0(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function o_(t){return(e,n)=>{let s=!1;for(const r of Wi(t)){const i=j0(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function j0(t,e,n){const s=t.field.isKeyField()?ue.comparator(e.key,n.key):(function(i,o,c){const l=o.data.field(i),u=c.data.field(i);return l!==null&&u!==null?Wr(l,u):pe(42886)})(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return pe(19790,{direction:t.dir})}}class dr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ms(this.inner,((n,s)=>{for(const[r,i]of s)e(r,i)}))}isEmpty(){return Wg(this.inner)}size(){return this.innerSize}}const H0=new Ze(ue.comparator);function Jn(){return H0}const a_=new Ze(ue.comparator);function Di(...t){let e=a_;for(const n of t)e=e.insert(n.key,n);return e}function c_(t){let e=a_;return t.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function er(){return qi()}function l_(){return qi()}function qi(){return new dr((t=>t.toString()),((t,e)=>t.isEqual(e)))}const W0=new Ze(ue.comparator),q0=new ft(ue.comparator);function Ce(...t){let e=q0;for(const n of t)e=e.add(n);return e}const z0=new ft(Se);function G0(){return z0}function th(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Na(e)?"-0":e}}function u_(t){return{integerValue:""+t}}function K0(t,e){return E0(e)?u_(e):th(t,e)}class yc{constructor(){this._=void 0}}function Q0(t,e,n){return t instanceof xa?(function(r,i){const o={fields:{[Gg]:{stringValue:zg},[Qg]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Yu(i)&&(i=pc(i)),i&&(o.fields[Kg]=i),{mapValue:o}})(n,e):t instanceof co?f_(t,e):t instanceof lo?d_(t,e):(function(r,i){const o=h_(r,i),c=Fd(o)+Fd(r.Ae);return Jl(o)&&Jl(r.Ae)?u_(c):th(r.serializer,c)})(t,e)}function Y0(t,e,n){return t instanceof co?f_(t,e):t instanceof lo?d_(t,e):n}function h_(t,e){return t instanceof Ma?(function(s){return Jl(s)||(function(i){return!!i&&"doubleValue"in i})(s)})(e)?e:{integerValue:0}:null}class xa extends yc{}class co extends yc{constructor(e){super(),this.elements=e}}function f_(t,e){const n=p_(e);for(const s of t.elements)n.some((r=>Dn(r,s)))||n.push(s);return{arrayValue:{values:n}}}class lo extends yc{constructor(e){super(),this.elements=e}}function d_(t,e){let n=p_(e);for(const s of t.elements)n=n.filter((r=>!Dn(r,s)));return{arrayValue:{values:n}}}class Ma extends yc{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Fd(t){return st(t.integerValue||t.doubleValue)}function p_(t){return Ju(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function J0(t,e){return t.field.isEqual(e.field)&&(function(s,r){return s instanceof co&&r instanceof co||s instanceof lo&&r instanceof lo?Hr(s.elements,r.elements,Dn):s instanceof Ma&&r instanceof Ma?Dn(s.Ae,r.Ae):s instanceof xa&&r instanceof xa})(t.transform,e.transform)}class X0{constructor(e,n){this.version=e,this.transformResults=n}}class Sn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Sn}static exists(e){return new Sn(void 0,e)}static updateTime(e){return new Sn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ua(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class vc{}function m_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new __(t.key,Sn.none()):new Ao(t.key,t.data,Sn.none());{const n=t.data,s=qt.empty();let r=new ft(At.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new Fs(t.key,s,new Xt(r.toArray()),Sn.none())}}function Z0(t,e,n){t instanceof Ao?(function(r,i,o){const c=r.value.clone(),l=$d(r.fieldTransforms,i,o.transformResults);c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):t instanceof Fs?(function(r,i,o){if(!ua(r.precondition,i))return void i.convertToUnknownDocument(o.version);const c=$d(r.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(g_(r)),l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):(function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function zi(t,e,n,s){return t instanceof Ao?(function(i,o,c,l){if(!ua(i.precondition,o))return c;const u=i.value.clone(),f=Bd(i.fieldTransforms,l,o);return u.setAll(f),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(t,e,n,s):t instanceof Fs?(function(i,o,c,l){if(!ua(i.precondition,o))return c;const u=Bd(i.fieldTransforms,l,o),f=o.data;return f.setAll(g_(i)),f.setAll(u),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((d=>d.field)))})(t,e,n,s):(function(i,o,c){return ua(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,n)}function e1(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=h_(s.transform,r||null);i!=null&&(n===null&&(n=qt.empty()),n.set(s.field,i))}return n||null}function Ud(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Hr(s,r,((i,o)=>J0(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ao extends vc{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Fs extends vc{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function g_(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}})),e}function $d(t,e,n){const s=new Map;Oe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,c=e.data.field(i.field);s.set(i.field,Y0(o,c,n[r]))}return s}function Bd(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,Q0(i,o,e))}return s}class __ extends vc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class t1 extends vc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class n1{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&Z0(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=zi(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=zi(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=l_();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(r.key)?null:c;const l=m_(o,c);l!==null&&s.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(ge.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ce())}isEqual(e){return this.batchId===e.batchId&&Hr(this.mutations,e.mutations,((n,s)=>Ud(n,s)))&&Hr(this.baseMutations,e.baseMutations,((n,s)=>Ud(n,s)))}}class nh{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){Oe(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=(function(){return W0})();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new nh(e,n,s,r)}}class s1{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class r1{constructor(e,n){this.count=e,this.unchangedNames=n}}var it,Pe;function i1(t){switch(t){case q.OK:return pe(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return pe(15467,{code:t})}}function y_(t){if(t===void 0)return Yn("GRPC error has no .code"),q.UNKNOWN;switch(t){case it.OK:return q.OK;case it.CANCELLED:return q.CANCELLED;case it.UNKNOWN:return q.UNKNOWN;case it.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case it.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case it.INTERNAL:return q.INTERNAL;case it.UNAVAILABLE:return q.UNAVAILABLE;case it.UNAUTHENTICATED:return q.UNAUTHENTICATED;case it.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case it.NOT_FOUND:return q.NOT_FOUND;case it.ALREADY_EXISTS:return q.ALREADY_EXISTS;case it.PERMISSION_DENIED:return q.PERMISSION_DENIED;case it.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case it.ABORTED:return q.ABORTED;case it.OUT_OF_RANGE:return q.OUT_OF_RANGE;case it.UNIMPLEMENTED:return q.UNIMPLEMENTED;case it.DATA_LOSS:return q.DATA_LOSS;default:return pe(39323,{code:t})}}(Pe=it||(it={}))[Pe.OK=0]="OK",Pe[Pe.CANCELLED=1]="CANCELLED",Pe[Pe.UNKNOWN=2]="UNKNOWN",Pe[Pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pe[Pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pe[Pe.NOT_FOUND=5]="NOT_FOUND",Pe[Pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pe[Pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pe[Pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pe[Pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pe[Pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pe[Pe.ABORTED=10]="ABORTED",Pe[Pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pe[Pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pe[Pe.INTERNAL=13]="INTERNAL",Pe[Pe.UNAVAILABLE=14]="UNAVAILABLE",Pe[Pe.DATA_LOSS=15]="DATA_LOSS";function o1(){return new TextEncoder}const a1=new Cs([4294967295,4294967295],0);function jd(t){const e=o1().encode(t),n=new Vg;return n.update(e),new Uint8Array(n.digest())}function Hd(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Cs([n,s],0),new Cs([r,i],0)]}class sh{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Li(`Invalid padding: ${n}`);if(s<0)throw new Li(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Li(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Li(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Cs.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(Cs.fromNumber(s)));return r.compare(a1)===1&&(r=new Cs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=jd(e),[s,r]=Hd(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new sh(i,r,n);return s.forEach((c=>o.insert(c))),o}insert(e){if(this.ge===0)return;const n=jd(e),[s,r]=Hd(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Li extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ec{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,So.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Ec(ge.min(),r,new Ze(Se),Jn(),Ce())}}class So{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new So(s,n,Ce(),Ce(),Ce())}}class ha{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class v_{constructor(e,n){this.targetId=e,this.Ce=n}}class E_{constructor(e,n,s=bt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class Wd{constructor(){this.ve=0,this.Fe=qd(),this.Me=bt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ce(),n=Ce(),s=Ce();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:pe(38017,{changeType:i})}})),new So(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=qd()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Oe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class c1{constructor(e){this.Ge=e,this.ze=new Map,this.je=Jn(),this.Je=Zo(),this.He=Zo(),this.Ye=new Ze(Se)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:pe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,r)=>{this.rt(r)&&n(r)}))}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(Zl(i))if(s===0){const o=new ue(i.path);this.et(n,o,Ot.newNoDocument(o,ge.min()))}else Oe(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const c=this.ut(e),l=c?this.ct(c,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,c;try{o=Ds(s).toUint8Array()}catch(l){if(l instanceof qg)return jr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new sh(o,r,i)}catch(l){return jr(l instanceof Li?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.ge===0?null:c}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach((i=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(n,i,null),r++)})),r}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const c=this.ot(o);if(c){if(i.current&&Zl(c.target)){const l=new ue(c.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Ot.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}}));let s=Ce();this.He.forEach(((i,o)=>{let c=!0;o.forEachWhile((l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(s=s.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const r=new Ec(e,n,this.Ye,this.je,s);return this.je=Jn(),this.Je=Zo(),this.He=Zo(),this.Ye=new Ze(Se),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Wd,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ft(Se),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ft(Se),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ne("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Wd),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Zo(){return new Ze(ue.comparator)}function qd(){return new Ze(ue.comparator)}const l1={asc:"ASCENDING",desc:"DESCENDING"},u1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},h1={and:"AND",or:"OR"};class f1{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function tu(t,e){return t.useProto3Json||dc(e)?e:{value:e}}function Fa(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function w_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function d1(t,e){return Fa(t,e.toTimestamp())}function Cn(t){return Oe(!!t,49232),ge.fromTimestamp((function(n){const s=Ns(n);return new ze(s.seconds,s.nanos)})(t))}function rh(t,e){return nu(t,e).canonicalString()}function nu(t,e){const n=(function(r){return new Je(["projects",r.projectId,"databases",r.database])})(t).child("documents");return e===void 0?n:n.child(e)}function I_(t){const e=Je.fromString(t);return Oe(b_(e),10190,{key:e.toString()}),e}function su(t,e){return rh(t.databaseId,e.path)}function gl(t,e){const n=I_(e);if(n.get(1)!==t.databaseId.projectId)throw new se(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new se(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ue(A_(n))}function T_(t,e){return rh(t.databaseId,e)}function p1(t){const e=I_(t);return e.length===4?Je.emptyPath():A_(e)}function ru(t){return new Je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function A_(t){return Oe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function zd(t,e,n){return{name:su(t,e),fields:n.value.mapValue.fields}}function m1(t,e){let n;if("targetChange"in e){e.targetChange;const s=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:pe(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=(function(u,f){return u.useProto3Json?(Oe(f===void 0||typeof f=="string",58123),bt.fromBase64String(f||"")):(Oe(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),bt.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(u){const f=u.code===void 0?q.UNKNOWN:y_(u.code);return new se(f,u.message||"")})(o);n=new E_(s,r,i,c||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=gl(t,s.document.name),i=Cn(s.document.updateTime),o=s.document.createTime?Cn(s.document.createTime):ge.min(),c=new qt({mapValue:{fields:s.document.fields}}),l=Ot.newFoundDocument(r,i,o,c),u=s.targetIds||[],f=s.removedTargetIds||[];n=new ha(u,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=gl(t,s.document),i=s.readTime?Cn(s.readTime):ge.min(),o=Ot.newNoDocument(r,i),c=s.removedTargetIds||[];n=new ha([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=gl(t,s.document),i=s.removedTargetIds||[];n=new ha([],i,r,null)}else{if(!("filter"in e))return pe(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new r1(r,i),c=s.targetId;n=new v_(c,o)}}return n}function g1(t,e){let n;if(e instanceof Ao)n={update:zd(t,e.key,e.value)};else if(e instanceof __)n={delete:su(t,e.key)};else if(e instanceof Fs)n={update:zd(t,e.key,e.data),updateMask:S1(e.fieldMask)};else{if(!(e instanceof t1))return pe(16599,{Vt:e.type});n={verify:su(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(i,o){const c=o.transform;if(c instanceof xa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof co)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof lo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ma)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw pe(20930,{transform:o.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(r,i){return i.updateTime!==void 0?{updateTime:d1(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:pe(27497)})(t,e.precondition)),n}function _1(t,e){return t&&t.length>0?(Oe(e!==void 0,14353),t.map((n=>(function(r,i){let o=r.updateTime?Cn(r.updateTime):Cn(i);return o.isEqual(ge.min())&&(o=Cn(i)),new X0(o,r.transformResults||[])})(n,e)))):[]}function y1(t,e){return{documents:[T_(t,e.path)]}}function v1(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=T_(t,r);const i=(function(u){if(u.length!==0)return C_(Ln.create(u,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(u){if(u.length!==0)return u.map((f=>(function(m){return{field:br(m.field),direction:I1(m.dir)}})(f)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=tu(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:r}}function E1(t){let e=p1(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){Oe(s===1,65062);const f=n.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=(function(d){const m=S_(d);return m instanceof Ln&&t_(m)?m.getFilters():[m]})(n.where));let o=[];n.orderBy&&(o=(function(d){return d.map((m=>(function(b){return new Oa(Rr(b.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(m)))})(n.orderBy));let c=null;n.limit&&(c=(function(d){let m;return m=typeof d=="object"?d.value:d,dc(m)?null:m})(n.limit));let l=null;n.startAt&&(l=(function(d){const m=!!d.before,_=d.values||[];return new Va(_,m)})(n.startAt));let u=null;return n.endAt&&(u=(function(d){const m=!d.before,_=d.values||[];return new Va(_,m)})(n.endAt)),F0(e,r,o,i,c,"F",l,u)}function w1(t,e){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe(28987,{purpose:r})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function S_(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Rr(n.unaryFilter.field);return ut.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=Rr(n.unaryFilter.field);return ut.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Rr(n.unaryFilter.field);return ut.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Rr(n.unaryFilter.field);return ut.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pe(61313);default:return pe(60726)}})(t):t.fieldFilter!==void 0?(function(n){return ut.create(Rr(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pe(58110);default:return pe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ln.create(n.compositeFilter.filters.map((s=>S_(s))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return pe(1026)}})(n.compositeFilter.op))})(t):pe(30097,{filter:t})}function I1(t){return l1[t]}function T1(t){return u1[t]}function A1(t){return h1[t]}function br(t){return{fieldPath:t.canonicalString()}}function Rr(t){return At.fromServerFormat(t.fieldPath)}function C_(t){return t instanceof ut?(function(n){if(n.op==="=="){if(Ld(n.value))return{unaryFilter:{field:br(n.field),op:"IS_NAN"}};if(Dd(n.value))return{unaryFilter:{field:br(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ld(n.value))return{unaryFilter:{field:br(n.field),op:"IS_NOT_NAN"}};if(Dd(n.value))return{unaryFilter:{field:br(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:br(n.field),op:T1(n.op),value:n.value}}})(t):t instanceof Ln?(function(n){const s=n.getFilters().map((r=>C_(r)));return s.length===1?s[0]:{compositeFilter:{op:A1(n.op),filters:s}}})(t):pe(54877,{filter:t})}function S1(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function b_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class Es{constructor(e,n,s,r,i=ge.min(),o=ge.min(),c=bt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new Es(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Es(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class C1{constructor(e){this.yt=e}}function b1(t){const e=E1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?eu(e,e.limit,"L"):e}class R1{constructor(){this.Cn=new P1}addToCollectionParentIndex(e,n){return this.Cn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(ks.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(ks.min())}updateCollectionGroup(e,n,s){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class P1{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new ft(Je.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new ft(Je.comparator)).toArray()}}const Gd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},R_=41943040;class Wt{static withCacheSize(e){return new Wt(e,Wt.DEFAULT_COLLECTION_PERCENTILE,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}Wt.DEFAULT_COLLECTION_PERCENTILE=10,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wt.DEFAULT=new Wt(R_,Wt.DEFAULT_COLLECTION_PERCENTILE,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wt.DISABLED=new Wt(-1,0,0);class zr{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new zr(0)}static cr(){return new zr(-1)}}const Kd="LruGarbageCollector",k1=1048576;function Qd([t,e],[n,s]){const r=Se(t,n);return r===0?Se(e,s):r}class N1{constructor(e){this.Ir=e,this.buffer=new ft(Qd),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Qd(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class D1{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ne(Kd,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ti(n)?ne(Kd,"Ignoring IndexedDB error during garbage collection: ",n):await ei(n)}await this.Vr(3e5)}))}}class L1{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return B.resolve(fc.ce);const s=new N1(n);return this.mr.forEachTarget(e,(r=>s.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>s.Ar(r))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(Gd)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Gd):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,o,c,l,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((d=>(d>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(e,r)))).next((d=>(s=d,c=Date.now(),this.removeTargets(e,s,n)))).next((d=>(i=d,l=Date.now(),this.removeOrphanedDocuments(e,s)))).next((d=>(u=Date.now(),Sr()<=Ae.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${r} in `+(c-o)+`ms
	Removed ${i} targets in `+(l-c)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-f}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:d}))))}}function V1(t,e){return new L1(t,e)}class O1{constructor(){this.changes=new dr((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ot.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?B.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class x1{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class M1{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((r=>(s=r,this.remoteDocumentCache.getEntry(e,n)))).next((r=>(s!==null&&zi(s.mutation,r,Xt.empty(),ze.now()),r)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Ce()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Ce()){const r=er();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,s).next((i=>{let o=Di();return i.forEach(((c,l)=>{o=o.insert(c,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const s=er();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Ce())))}populateOverlays(e,n,s){const r=[];return s.forEach((i=>{n.has(i)||r.push(i)})),this.documentOverlayCache.getOverlays(e,r).next((i=>{i.forEach(((o,c)=>{n.set(o,c)}))}))}computeViews(e,n,s,r){let i=Jn();const o=qi(),c=(function(){return qi()})();return n.forEach(((l,u)=>{const f=s.get(u.key);r.has(u.key)&&(f===void 0||f.mutation instanceof Fs)?i=i.insert(u.key,u):f!==void 0?(o.set(u.key,f.mutation.getFieldMask()),zi(f.mutation,u,f.mutation.getFieldMask(),ze.now())):o.set(u.key,Xt.empty())})),this.recalculateAndSaveOverlays(e,i).next((l=>(l.forEach(((u,f)=>o.set(u,f))),n.forEach(((u,f)=>c.set(u,new x1(f,o.get(u)??null)))),c)))}recalculateAndSaveOverlays(e,n){const s=qi();let r=new Ze(((o,c)=>o-c)),i=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const c of o)c.keys().forEach((l=>{const u=n.get(l);if(u===null)return;let f=s.get(l)||Xt.empty();f=c.applyToLocalView(u,f),s.set(l,f);const d=(r.get(c.batchId)||Ce()).add(l);r=r.insert(c.batchId,d)}))})).next((()=>{const o=[],c=r.getReverseIterator();for(;c.hasNext();){const l=c.getNext(),u=l.key,f=l.value,d=l_();f.forEach((m=>{if(!i.has(m)){const _=m_(n.get(m),s.get(m));_!==null&&d.set(m,_),i=i.add(m)}})),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return B.waitFor(o)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,r){return(function(o){return ue.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):U0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):B.resolve(er());let c=ro,l=i;return o.next((u=>B.forEach(u,((f,d)=>(c<d.largestBatchId&&(c=d.largestBatchId),i.get(f)?B.resolve():this.remoteDocumentCache.getEntry(e,f).next((m=>{l=l.insert(f,m)}))))).next((()=>this.populateOverlays(e,u,i))).next((()=>this.computeViews(e,l,u,Ce()))).next((f=>({batchId:c,changes:c_(f)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ue(n)).next((s=>{let r=Di();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=Di();return this.indexManager.getCollectionParents(e,i).next((c=>B.forEach(c,(l=>{const u=(function(d,m){return new mc(m,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,s,r).next((f=>{f.forEach(((d,m)=>{o=o.insert(d,m)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r)))).next((o=>{i.forEach(((l,u)=>{const f=u.getKey();o.get(f)===null&&(o=o.insert(f,Ot.newInvalidDocument(f)))}));let c=Di();return o.forEach(((l,u)=>{const f=i.get(l);f!==void 0&&zi(f.mutation,u,Xt.empty(),ze.now()),_c(n,u)&&(c=c.insert(l,u))})),c}))}}class F1{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return B.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:Cn(r.createTime)}})(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(r){return{name:r.name,query:b1(r.bundledQuery),readTime:Cn(r.readTime)}})(n)),B.resolve()}}class U1{constructor(){this.overlays=new Ze(ue.comparator),this.qr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const s=er();return B.forEach(n,(r=>this.getOverlay(e,r).next((i=>{i!==null&&s.set(r,i)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((r,i)=>{this.St(e,n,i)})),B.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(s)),B.resolve()}getOverlaysForCollection(e,n,s){const r=er(),i=n.length+1,o=new ue(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const l=c.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>s&&r.set(l.getKey(),l)}return B.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Ze(((u,f)=>u-f));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let f=i.get(u.largestBatchId);f===null&&(f=er(),i=i.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const c=er(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,f)=>c.set(u,f))),!(c.size()>=r)););return B.resolve(c)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new s1(n,s));let i=this.qr.get(n);i===void 0&&(i=Ce(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}class $1{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}class ih{constructor(){this.Qr=new ft(mt.$r),this.Ur=new ft(mt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new mt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new mt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new ue(new Je([])),s=new mt(n,e),r=new mt(n,e+1),i=[];return this.Ur.forEachInRange([s,r],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ue(new Je([])),s=new mt(n,e),r=new mt(n,e+1);let i=Ce();return this.Ur.forEachInRange([s,r],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new mt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class mt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ue.comparator(e.key,n.key)||Se(e.Yr,n.Yr)}static Kr(e,n){return Se(e.Yr,n.Yr)||ue.comparator(e.key,n.key)}}class B1{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ft(mt.$r)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new n1(i,n,s,r);this.mutationQueue.push(o);for(const c of r)this.Zr=this.Zr.add(new mt(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return B.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?Qu:this.tr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new mt(n,0),r=new mt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],(o=>{const c=this.Xr(o.Yr);i.push(c)})),B.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new ft(Se);return n.forEach((r=>{const i=new mt(r,0),o=new mt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(c=>{s=s.add(c.Yr)}))})),B.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;ue.isDocumentKey(i)||(i=i.child(""));const o=new mt(new ue(i),0);let c=new ft(Se);return this.Zr.forEachWhile((l=>{const u=l.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(c=c.add(l.Yr)),!0)}),o),B.resolve(this.ti(c))}ti(e){const n=[];return e.forEach((s=>{const r=this.Xr(s);r!==null&&n.push(r)})),n}removeMutationBatch(e,n){Oe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return B.forEach(n.mutations,(r=>{const i=new mt(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new mt(n,0),r=this.Zr.firstAfterOrEqual(s);return B.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class j1{constructor(e){this.ri=e,this.docs=(function(){return new Ze(ue.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return B.resolve(s?s.document.mutableCopy():Ot.newInvalidDocument(n))}getEntries(e,n){let s=Jn();return n.forEach((r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Ot.newInvalidDocument(r))})),B.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=Jn();const o=n.path,c=new ue(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){const{key:u,value:{document:f}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||g0(m0(f),s)<=0||(r.has(f.key)||_c(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return B.resolve(i)}getAllFromCollectionGroup(e,n,s,r){pe(9500)}ii(e,n){return B.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new H1(this)}getSize(e){return B.resolve(this.size)}}class H1 extends O1{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)})),B.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class W1{constructor(e){this.persistence=e,this.si=new dr((n=>Xu(n)),Zu),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.oi=0,this._i=new ih,this.targetCount=0,this.ai=zr.ur()}forEachTarget(e,n){return this.si.forEach(((s,r)=>n(r))),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),B.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new zr(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Pr(n),B.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach(((o,c)=>{c.sequenceNumber<=n&&s.get(c.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)})),B.waitFor(i).next((()=>r))}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return B.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),B.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach((o=>{i.push(r.markPotentiallyOrphaned(e,o))})),B.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return B.resolve(s)}containsKey(e,n){return B.resolve(this._i.containsKey(n))}}class P_{constructor(e,n){this.ui={},this.overlays={},this.ci=new fc(0),this.li=!1,this.li=!0,this.hi=new $1,this.referenceDelegate=e(this),this.Pi=new W1(this),this.indexManager=new R1,this.remoteDocumentCache=(function(r){return new j1(r)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new C1(n),this.Ii=new F1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new U1,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new B1(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){ne("MemoryPersistence","Starting transaction:",e);const r=new q1(this.ci.next());return this.referenceDelegate.Ei(),s(r).next((i=>this.referenceDelegate.di(r).next((()=>i)))).toPromise().then((i=>(r.raiseOnCommittedEvent(),i)))}Ai(e,n){return B.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class q1 extends y0{constructor(e){super(),this.currentSequenceNumber=e}}class oh{constructor(e){this.persistence=e,this.Ri=new ih,this.Vi=null}static mi(e){return new oh(e)}get fi(){if(this.Vi)return this.Vi;throw pe(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),B.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),B.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((r=>this.fi.add(r.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((r=>{r.forEach((i=>this.fi.add(i.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.fi,(s=>{const r=ue.fromPath(s);return this.gi(e,r).next((i=>{i||n.removeEntry(r,ge.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return B.or([()=>B.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Ua{constructor(e,n){this.persistence=e,this.pi=new dr((s=>w0(s.path)),((s,r)=>s.isEqual(r))),this.garbageCollector=V1(this,n)}static mi(e,n){return new Ua(e,n)}Ei(){}di(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((r=>s+r))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return B.forEach(this.pi,((s,r)=>this.br(e,s,r).next((i=>i?B.resolve():n(r)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,(o=>this.br(e,o,n).next((c=>{c||(s++,i.removeEntry(o,ge.min()))})))).next((()=>i.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),B.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ca(e.data.value)),n}br(e,n,s){return B.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return B.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class ah{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=Ce(),r=Ce();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new ah(e,n.fromCache,s,r)}}class z1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class G1{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return xI()?8:v0(Mt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,n,r,s).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new z1;return this.Ss(e,n,o).next((c=>{if(i.result=c,this.Vs)return this.bs(e,n,o,c.size)}))})).next((()=>i.result))}bs(e,n,s,r){return s.documentReadCount<this.fs?(Sr()<=Ae.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",Cr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),B.resolve()):(Sr()<=Ae.DEBUG&&ne("QueryEngine","Query:",Cr(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(Sr()<=Ae.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",Cr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,An(n))):B.resolve())}ys(e,n){if(Md(n))return B.resolve(null);let s=An(n);return this.indexManager.getIndexType(e,s).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=eu(n,null,"F"),s=An(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((i=>{const o=Ce(...i);return this.ps.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,s).next((l=>{const u=this.Ds(n,c);return this.Cs(n,u,o,l.readTime)?this.ys(e,eu(n,null,"F")):this.vs(e,u,n,l)}))))})))))}ws(e,n,s,r){return Md(n)||r.isEqual(ge.min())?B.resolve(null):this.ps.getDocuments(e,s).next((i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?B.resolve(null):(Sr()<=Ae.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Cr(n)),this.vs(e,o,n,p0(r,ro)).next((c=>c)))}))}Ds(e,n){let s=new ft(o_(e));return n.forEach(((r,i)=>{_c(e,i)&&(s=s.add(i))})),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return Sr()<=Ae.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",Cr(n)),this.ps.getDocumentsMatchingQuery(e,n,ks.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}const ch="LocalStore",K1=3e8;class Q1{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Ze(Se),this.xs=new dr((i=>Xu(i)),Zu),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new M1(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function Y1(t,e,n,s){return new Q1(t,e,n,s)}async function k_(t,e){const n=ye(t);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next((i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((i=>{const o=[],c=[];let l=Ce();for(const u of r){o.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}for(const u of i){c.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}return n.localDocuments.getDocuments(s,l).next((u=>({Ls:u,removedBatchIds:o,addedBatchIds:c})))}))}))}function J1(t,e){const n=ye(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,l,u,f){const d=u.batch,m=d.keys();let _=B.resolve();return m.forEach((b=>{_=_.next((()=>f.getEntry(l,b))).next((N=>{const L=u.docVersions.get(b);Oe(L!==null,48541),N.version.compareTo(L)<0&&(d.applyToRemoteDocument(N,u),N.isValidDocument()&&(N.setReadTime(u.commitVersion),f.addEntry(N)))}))})),_.next((()=>c.mutationQueue.removeMutationBatch(l,d)))})(n,s,e,i).next((()=>i.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(c){let l=Ce();for(let u=0;u<c.mutationResults.length;++u)c.mutationResults[u].transformResults.length>0&&(l=l.add(c.batch.mutations[u].key));return l})(e)))).next((()=>n.localDocuments.getDocuments(s,r)))}))}function N_(t){const e=ye(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function X1(t,e){const n=ye(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const c=[];e.targetChanges.forEach(((f,d)=>{const m=r.get(d);if(!m)return;c.push(n.Pi.removeMatchingKeys(i,f.removedDocuments,d).next((()=>n.Pi.addMatchingKeys(i,f.addedDocuments,d))));let _=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?_=_.withResumeToken(bt.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,s)),r=r.insert(d,_),(function(N,L,H){return N.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=K1?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(m,_,f)&&c.push(n.Pi.updateTargetData(i,_))}));let l=Jn(),u=Ce();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))})),c.push(Z1(i,o,e.documentUpdates).next((f=>{l=f.ks,u=f.qs}))),!s.isEqual(ge.min())){const f=n.Pi.getLastRemoteSnapshotVersion(i).next((d=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s)));c.push(f)}return B.waitFor(c).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,l,u))).next((()=>l))})).then((i=>(n.Ms=r,i)))}function Z1(t,e,n){let s=Ce(),r=Ce();return n.forEach((i=>s=s.add(i))),e.getEntries(t,s).next((i=>{let o=Jn();return n.forEach(((c,l)=>{const u=i.get(c);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(c)),l.isNoDocument()&&l.version.isEqual(ge.min())?(e.removeEntry(c,l.readTime),o=o.insert(c,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(c,l)):ne(ch,"Ignoring outdated watch update for ",c,". Current version:",u.version," Watch version:",l.version)})),{ks:o,qs:r}}))}function eA(t,e){const n=ye(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Qu),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function tA(t,e){const n=ye(t);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let r;return n.Pi.getTargetData(s,e).next((i=>i?(r=i,B.resolve(r)):n.Pi.allocateTargetId(s).next((o=>(r=new Es(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next((()=>r)))))))})).then((s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function iu(t,e,n){const s=ye(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,(o=>s.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!ti(o))throw o;ne(ch,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function Yd(t,e,n){const s=ye(t);let r=ge.min(),i=Ce();return s.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,u,f){const d=ye(l),m=d.xs.get(f);return m!==void 0?B.resolve(d.Ms.get(m)):d.Pi.getTargetData(u,f)})(s,o,An(e)).next((c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,c.targetId).next((l=>{i=l}))})).next((()=>s.Fs.getDocumentsMatchingQuery(o,e,n?r:ge.min(),n?i:Ce()))).next((c=>(nA(s,B0(e),c),{documents:c,Qs:i})))))}function nA(t,e,n){let s=t.Os.get(e)||ge.min();n.forEach(((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)})),t.Os.set(e,s)}class Jd{constructor(){this.activeTargetIds=G0()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sA{constructor(){this.Mo=new Jd,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Jd,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class rA{Oo(e){}shutdown(){}}const Xd="ConnectivityMonitor";class Zd{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ne(Xd,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ne(Xd,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let ea=null;function ou(){return ea===null?ea=(function(){return 268435456+Math.round(2147483648*Math.random())})():ea++,"0x"+ea.toString(16)}const _l="RestConnection",iA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class oA{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===Da?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const o=ou(),c=this.zo(e,n.toUriEncodedString());ne(_l,`Sending RPC '${e}' ${o}:`,c,s);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,r,i);const{host:u}=new URL(c),f=Jr(u);return this.Jo(e,c,l,s,f).then((d=>(ne(_l,`Received RPC '${e}' ${o}: `,d),d)),(d=>{throw jr(_l,`RPC '${e}' ${o} failed with error: `,d,"url: ",c,"request:",s),d}))}Ho(e,n,s,r,i,o){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Zr})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((r,i)=>e[i]=r)),s&&s.headers.forEach(((r,i)=>e[i]=r))}zo(e,n){const s=iA[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class aA{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Nt="WebChannelConnection";class cA extends oA{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=ou();return new Promise(((c,l)=>{const u=new Og;u.setWithCredentials(!0),u.listenOnce(xg.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case aa.NO_ERROR:const d=u.getResponseJson();ne(Nt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),c(d);break;case aa.TIMEOUT:ne(Nt,`RPC '${e}' ${o} timed out`),l(new se(q.DEADLINE_EXCEEDED,"Request time out"));break;case aa.HTTP_ERROR:const m=u.getStatus();if(ne(Nt,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const b=_?.error;if(b&&b.status&&b.message){const N=(function(H){const D=H.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(D)>=0?D:q.UNKNOWN})(b.status);l(new se(N,b.message))}else l(new se(q.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new se(q.UNAVAILABLE,"Connection failed."));break;default:pe(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{ne(Nt,`RPC '${e}' ${o} completed.`)}}));const f=JSON.stringify(r);ne(Nt,`RPC '${e}' ${o} sending request:`,r),u.send(n,"POST",f,s,15)}))}T_(e,n,s){const r=ou(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Ug(),c=Fg(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const f=i.join("");ne(Nt,`Creating RPC '${e}' stream ${r}: ${f}`,l);const d=o.createWebChannel(f,l);this.I_(d);let m=!1,_=!1;const b=new aA({Yo:L=>{_?ne(Nt,`Not sending because RPC '${e}' stream ${r} is closed:`,L):(m||(ne(Nt,`Opening RPC '${e}' stream ${r} transport.`),d.open(),m=!0),ne(Nt,`RPC '${e}' stream ${r} sending:`,L),d.send(L))},Zo:()=>d.close()}),N=(L,H,D)=>{L.listen(H,(V=>{try{D(V)}catch(M){setTimeout((()=>{throw M}),0)}}))};return N(d,Ni.EventType.OPEN,(()=>{_||(ne(Nt,`RPC '${e}' stream ${r} transport opened.`),b.o_())})),N(d,Ni.EventType.CLOSE,(()=>{_||(_=!0,ne(Nt,`RPC '${e}' stream ${r} transport closed`),b.a_(),this.E_(d))})),N(d,Ni.EventType.ERROR,(L=>{_||(_=!0,jr(Nt,`RPC '${e}' stream ${r} transport errored. Name:`,L.name,"Message:",L.message),b.a_(new se(q.UNAVAILABLE,"The operation could not be completed")))})),N(d,Ni.EventType.MESSAGE,(L=>{if(!_){const H=L.data[0];Oe(!!H,16349);const D=H,V=D?.error||D[0]?.error;if(V){ne(Nt,`RPC '${e}' stream ${r} received error:`,V);const M=V.status;let Z=(function(v){const y=it[v];if(y!==void 0)return y_(y)})(M),ie=V.message;Z===void 0&&(Z=q.INTERNAL,ie="Unknown error status: "+M+" with message "+V.message),_=!0,b.a_(new se(Z,ie)),d.close()}else ne(Nt,`RPC '${e}' stream ${r} received:`,H),b.u_(H)}})),N(c,Mg.STAT_EVENT,(L=>{L.stat===Kl.PROXY?ne(Nt,`RPC '${e}' stream ${r} detected buffering proxy`):L.stat===Kl.NOPROXY&&ne(Nt,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{b.__()}),0),b}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function yl(){return typeof document<"u"?document:null}function wc(t){return new f1(t,!0)}class D_{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&ne("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const ep="PersistentStream";class L_{constructor(e,n,s,r,i,o,c,l){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new D_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(Yn(n.toString()),Yn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,r])=>{this.D_===n&&this.G_(s,r)}),(s=>{e((()=>{const r=new se(q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{s((()=>this.z_(r)))})),this.stream.onMessage((r=>{s((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ne(ep,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ne(ep,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class lA extends L_{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=m1(this.serializer,e),s=(function(i){if(!("targetChange"in i))return ge.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ge.min():o.readTime?Cn(o.readTime):ge.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=ru(this.serializer),n.addTarget=(function(i,o){let c;const l=o.target;if(c=Zl(l)?{documents:y1(i,l)}:{query:v1(i,l).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=w_(i,o.resumeToken);const u=tu(i,o.expectedCount);u!==null&&(c.expectedCount=u)}else if(o.snapshotVersion.compareTo(ge.min())>0){c.readTime=Fa(i,o.snapshotVersion.toTimestamp());const u=tu(i,o.expectedCount);u!==null&&(c.expectedCount=u)}return c})(this.serializer,e);const s=w1(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=ru(this.serializer),n.removeTarget=e,this.q_(n)}}class uA extends L_{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Oe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Oe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=_1(e.writeResults,e.commitTime),s=Cn(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=ru(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>g1(this.serializer,s)))};this.q_(n)}}class hA{}class fA extends hA{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new se(q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,nu(n,s),r,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new se(q.UNKNOWN,i.toString())}))}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Ho(e,nu(n,s),r,o,c,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new se(q.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class dA{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Yn(n),this.aa=!1):ne("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const ur="RemoteStore";class pA{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{s.enqueueAndForget((async()=>{pr(this)&&(ne(ur,"Restarting streams for network reachability change."),await(async function(l){const u=ye(l);u.Ea.add(4),await Co(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Ic(u)})(this))}))})),this.Ra=new dA(s,r)}}async function Ic(t){if(pr(t))for(const e of t.da)await e(!0)}async function Co(t){for(const e of t.da)await e(!1)}function V_(t,e){const n=ye(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),fh(n)?hh(n):ni(n).O_()&&uh(n,e))}function lh(t,e){const n=ye(t),s=ni(n);n.Ia.delete(e),s.O_()&&O_(n,e),n.Ia.size===0&&(s.O_()?s.L_():pr(n)&&n.Ra.set("Unknown"))}function uh(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ni(t).Y_(e)}function O_(t,e){t.Va.Ue(e),ni(t).Z_(e)}function hh(t){t.Va=new c1({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ni(t).start(),t.Ra.ua()}function fh(t){return pr(t)&&!ni(t).x_()&&t.Ia.size>0}function pr(t){return ye(t).Ea.size===0}function x_(t){t.Va=void 0}async function mA(t){t.Ra.set("Online")}async function gA(t){t.Ia.forEach(((e,n)=>{uh(t,e)}))}async function _A(t,e){x_(t),fh(t)?(t.Ra.ha(e),hh(t)):t.Ra.set("Unknown")}async function yA(t,e,n){if(t.Ra.set("Online"),e instanceof E_&&e.state===2&&e.cause)try{await(async function(r,i){const o=i.cause;for(const c of i.targetIds)r.Ia.has(c)&&(await r.remoteSyncer.rejectListen(c,o),r.Ia.delete(c),r.Va.removeTarget(c))})(t,e)}catch(s){ne(ur,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await $a(t,s)}else if(e instanceof ha?t.Va.Ze(e):e instanceof v_?t.Va.st(e):t.Va.tt(e),!n.isEqual(ge.min()))try{const s=await N_(t.localStore);n.compareTo(s)>=0&&await(function(i,o){const c=i.Va.Tt(o);return c.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const f=i.Ia.get(u);f&&i.Ia.set(u,f.withResumeToken(l.resumeToken,o))}})),c.targetMismatches.forEach(((l,u)=>{const f=i.Ia.get(l);if(!f)return;i.Ia.set(l,f.withResumeToken(bt.EMPTY_BYTE_STRING,f.snapshotVersion)),O_(i,l);const d=new Es(f.target,l,u,f.sequenceNumber);uh(i,d)})),i.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(s){ne(ur,"Failed to raise snapshot:",s),await $a(t,s)}}async function $a(t,e,n){if(!ti(e))throw e;t.Ea.add(1),await Co(t),t.Ra.set("Offline"),n||(n=()=>N_(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ne(ur,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ic(t)}))}function M_(t,e){return e().catch((n=>$a(t,n,e)))}async function Tc(t){const e=ye(t),n=Vs(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Qu;for(;vA(e);)try{const r=await eA(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,EA(e,r)}catch(r){await $a(e,r)}F_(e)&&U_(e)}function vA(t){return pr(t)&&t.Ta.length<10}function EA(t,e){t.Ta.push(e);const n=Vs(t);n.O_()&&n.X_&&n.ea(e.mutations)}function F_(t){return pr(t)&&!Vs(t).x_()&&t.Ta.length>0}function U_(t){Vs(t).start()}async function wA(t){Vs(t).ra()}async function IA(t){const e=Vs(t);for(const n of t.Ta)e.ea(n.mutations)}async function TA(t,e,n){const s=t.Ta.shift(),r=nh.from(s,e,n);await M_(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await Tc(t)}async function AA(t,e){e&&Vs(t).X_&&await(async function(s,r){if((function(o){return i1(o)&&o!==q.ABORTED})(r.code)){const i=s.Ta.shift();Vs(s).B_(),await M_(s,(()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r))),await Tc(s)}})(t,e),F_(t)&&U_(t)}async function tp(t,e){const n=ye(t);n.asyncQueue.verifyOperationInProgress(),ne(ur,"RemoteStore received new credentials");const s=pr(n);n.Ea.add(3),await Co(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ic(n)}async function SA(t,e){const n=ye(t);e?(n.Ea.delete(2),await Ic(n)):e||(n.Ea.add(2),await Co(n),n.Ra.set("Unknown"))}function ni(t){return t.ma||(t.ma=(function(n,s,r){const i=ye(n);return i.sa(),new lA(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(t.datastore,t.asyncQueue,{Xo:mA.bind(null,t),t_:gA.bind(null,t),r_:_A.bind(null,t),H_:yA.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),fh(t)?hh(t):t.Ra.set("Unknown")):(await t.ma.stop(),x_(t))}))),t.ma}function Vs(t){return t.fa||(t.fa=(function(n,s,r){const i=ye(n);return i.sa(),new uA(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:wA.bind(null,t),r_:AA.bind(null,t),ta:IA.bind(null,t),na:TA.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Tc(t)):(await t.fa.stop(),t.Ta.length>0&&(ne(ur,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class dh{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new bs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,c=new dh(e,n,o,r,i);return c.start(s),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ph(t,e){if(Yn("AsyncQueue",`${e}: ${t}`),ti(t))return new se(q.UNAVAILABLE,`${e}: ${t}`);throw t}class Or{static emptySet(e){return new Or(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ue.comparator(n.key,s.key):(n,s)=>ue.comparator(n.key,s.key),this.keyedMap=Di(),this.sortedSet=new Ze(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Or)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Or;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class np{constructor(){this.ga=new Ze(ue.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):pe(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Gr{constructor(e,n,s,r,i,o,c,l,u){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach((c=>{o.push({type:0,doc:c})})),new Gr(e,n,Or.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}class CA{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class bA{constructor(){this.queries=sp(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=ye(n),i=r.queries;r.queries=sp(),i.forEach(((o,c)=>{for(const l of c.Sa)l.onError(s)}))})(this,new se(q.ABORTED,"Firestore shutting down"))}}function sp(){return new dr((t=>i_(t)),gc)}async function RA(t,e){const n=ye(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new CA,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const c=ph(o,`Initialization of query '${Cr(e.query)}' failed`);return void e.onError(c)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&mh(n)}async function PA(t,e){const n=ye(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function kA(t,e){const n=ye(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const c of o.Sa)c.Fa(r)&&(s=!0);o.wa=r}}s&&mh(n)}function NA(t,e,n){const s=ye(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function mh(t){t.Ca.forEach((e=>{e.next()}))}var au,rp;(rp=au||(au={})).Ma="default",rp.Cache="cache";class DA{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Gr(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Gr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==au.Cache}}class $_{constructor(e){this.key=e}}class B_{constructor(e){this.key=e}}class LA{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ce(),this.mutatedKeys=Ce(),this.eu=o_(e),this.tu=new Or(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new np,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,c=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((f,d)=>{const m=r.get(f),_=_c(this.query,d)?d:null,b=!!m&&this.mutatedKeys.has(m.key),N=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let L=!1;m&&_?m.data.isEqual(_.data)?b!==N&&(s.track({type:3,doc:_}),L=!0):this.su(m,_)||(s.track({type:2,doc:_}),L=!0,(l&&this.eu(_,l)>0||u&&this.eu(_,u)<0)&&(c=!0)):!m&&_?(s.track({type:0,doc:_}),L=!0):m&&!_&&(s.track({type:1,doc:m}),L=!0,(l||u)&&(c=!0)),L&&(_?(o=o.add(_),i=N?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),s.track({type:1,doc:f})}return{tu:o,iu:s,Cs:c,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((f,d)=>(function(_,b){const N=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe(20277,{Rt:L})}};return N(_)-N(b)})(f.type,d.type)||this.eu(f.doc,d.doc))),this.ou(s),r=r??!1;const c=n&&!r?this._u():[],l=this.Xa.size===0&&this.current&&!r?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new Gr(this.query,e.tu,i,o,e.mutatedKeys,l===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new np,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ce(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new B_(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new $_(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ce();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Gr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const gh="SyncEngine";class VA{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class OA{constructor(e){this.key=e,this.hu=!1}}class xA{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new dr((c=>i_(c)),gc),this.Iu=new Map,this.Eu=new Set,this.du=new Ze(ue.comparator),this.Au=new Map,this.Ru=new ih,this.Vu={},this.mu=new Map,this.fu=zr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function MA(t,e,n=!0){const s=G_(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await j_(s,e,n,!0),r}async function FA(t,e){const n=G_(t);await j_(n,e,!0,!1)}async function j_(t,e,n,s){const r=await tA(t.localStore,An(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return s&&(c=await UA(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&V_(t.remoteStore,r),c}async function UA(t,e,n,s,r){t.pu=(d,m,_)=>(async function(N,L,H,D){let V=L.view.ru(H);V.Cs&&(V=await Yd(N.localStore,L.query,!1).then((({documents:S})=>L.view.ru(S,V))));const M=D&&D.targetChanges.get(L.targetId),Z=D&&D.targetMismatches.get(L.targetId)!=null,ie=L.view.applyChanges(V,N.isPrimaryClient,M,Z);return op(N,L.targetId,ie.au),ie.snapshot})(t,d,m,_);const i=await Yd(t.localStore,e,!0),o=new LA(e,i.Qs),c=o.ru(i.documents),l=So.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),u=o.applyChanges(c,t.isPrimaryClient,l);op(t,n,u.au);const f=new VA(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function $A(t,e,n){const s=ye(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter((o=>!gc(o,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await iu(s.localStore,r.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(r.targetId),n&&lh(s.remoteStore,r.targetId),cu(s,r.targetId)})).catch(ei)):(cu(s,r.targetId),await iu(s.localStore,r.targetId,!0))}async function BA(t,e){const n=ye(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),lh(n.remoteStore,s.targetId))}async function jA(t,e,n){const s=QA(t);try{const r=await(function(o,c){const l=ye(o),u=ze.now(),f=c.reduce(((_,b)=>_.add(b.key)),Ce());let d,m;return l.persistence.runTransaction("Locally write mutations","readwrite",(_=>{let b=Jn(),N=Ce();return l.Ns.getEntries(_,f).next((L=>{b=L,b.forEach(((H,D)=>{D.isValidDocument()||(N=N.add(H))}))})).next((()=>l.localDocuments.getOverlayedDocuments(_,b))).next((L=>{d=L;const H=[];for(const D of c){const V=e1(D,d.get(D.key).overlayedDocument);V!=null&&H.push(new Fs(D.key,V,Xg(V.value.mapValue),Sn.exists(!0)))}return l.mutationQueue.addMutationBatch(_,u,H,c)})).next((L=>{m=L;const H=L.applyToLocalDocumentSet(d,N);return l.documentOverlayCache.saveOverlays(_,L.batchId,H)}))})).then((()=>({batchId:m.batchId,changes:c_(d)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),(function(o,c,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new Ze(Se)),u=u.insert(c,l),o.Vu[o.currentUser.toKey()]=u})(s,r.batchId,n),await bo(s,r.changes),await Tc(s.remoteStore)}catch(r){const i=ph(r,"Failed to persist write");n.reject(i)}}async function H_(t,e){const n=ye(t);try{const s=await X1(n.localStore,e);e.targetChanges.forEach(((r,i)=>{const o=n.Au.get(i);o&&(Oe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?Oe(o.hu,14607):r.removedDocuments.size>0&&(Oe(o.hu,42227),o.hu=!1))})),await bo(n,s,e)}catch(s){await ei(s)}}function ip(t,e,n){const s=ye(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach(((i,o)=>{const c=o.view.va(e);c.snapshot&&r.push(c.snapshot)})),(function(o,c){const l=ye(o);l.onlineState=c;let u=!1;l.queries.forEach(((f,d)=>{for(const m of d.Sa)m.va(c)&&(u=!0)})),u&&mh(l)})(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function HA(t,e,n){const s=ye(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new Ze(ue.comparator);o=o.insert(i,Ot.newNoDocument(i,ge.min()));const c=Ce().add(i),l=new Ec(ge.min(),new Map,new Ze(Se),o,c);await H_(s,l),s.du=s.du.remove(i),s.Au.delete(e),_h(s)}else await iu(s.localStore,e,!1).then((()=>cu(s,e,n))).catch(ei)}async function WA(t,e){const n=ye(t),s=e.batch.batchId;try{const r=await J1(n.localStore,e);q_(n,s,null),W_(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await bo(n,r)}catch(r){await ei(r)}}async function qA(t,e,n){const s=ye(t);try{const r=await(function(o,c){const l=ye(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let f;return l.mutationQueue.lookupMutationBatch(u,c).next((d=>(Oe(d!==null,37113),f=d.keys(),l.mutationQueue.removeMutationBatch(u,d)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,f,c))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f))).next((()=>l.localDocuments.getDocuments(u,f)))}))})(s.localStore,e);q_(s,e,n),W_(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await bo(s,r)}catch(r){await ei(r)}}function W_(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function q_(t,e,n){const s=ye(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function cu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((s=>{t.Ru.containsKey(s)||z_(t,s)}))}function z_(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(lh(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),_h(t))}function op(t,e,n){for(const s of n)s instanceof $_?(t.Ru.addReference(s.key,e),zA(t,s)):s instanceof B_?(ne(gh,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||z_(t,s.key)):pe(19791,{wu:s})}function zA(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(ne(gh,"New document in limbo: "+n),t.Eu.add(s),_h(t))}function _h(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ue(Je.fromString(e)),s=t.fu.next();t.Au.set(s,new OA(n)),t.du=t.du.insert(n,s),V_(t.remoteStore,new Es(An(eh(n.path)),s,"TargetPurposeLimboResolution",fc.ce))}}async function bo(t,e,n){const s=ye(t),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach(((c,l)=>{o.push(s.pu(l,e,n).then((u=>{if((u||n)&&s.isPrimaryClient){const f=u?!u.fromCache:n?.targetChanges.get(l.targetId)?.current;s.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){r.push(u);const f=ah.As(l.targetId,u);i.push(f)}})))})),await Promise.all(o),s.Pu.H_(r),await(async function(l,u){const f=ye(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(d=>B.forEach(u,(m=>B.forEach(m.Es,(_=>f.persistence.referenceDelegate.addReference(d,m.targetId,_))).next((()=>B.forEach(m.ds,(_=>f.persistence.referenceDelegate.removeReference(d,m.targetId,_)))))))))}catch(d){if(!ti(d))throw d;ne(ch,"Failed to update sequence numbers: "+d)}for(const d of u){const m=d.targetId;if(!d.fromCache){const _=f.Ms.get(m),b=_.snapshotVersion,N=_.withLastLimboFreeSnapshotVersion(b);f.Ms=f.Ms.insert(m,N)}}})(s.localStore,i))}async function GA(t,e){const n=ye(t);if(!n.currentUser.isEqual(e)){ne(gh,"User change. New user:",e.toKey());const s=await k_(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((c=>{c.forEach((l=>{l.reject(new se(q.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await bo(n,s.Ls)}}function KA(t,e){const n=ye(t),s=n.Au.get(e);if(s&&s.hu)return Ce().add(s.key);{let r=Ce();const i=n.Iu.get(e);if(!i)return r;for(const o of i){const c=n.Tu.get(o);r=r.unionWith(c.view.nu)}return r}}function G_(t){const e=ye(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=H_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=HA.bind(null,e),e.Pu.H_=kA.bind(null,e.eventManager),e.Pu.yu=NA.bind(null,e.eventManager),e}function QA(t){const e=ye(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qA.bind(null,e),e}class Ba{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=wc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Y1(this.persistence,new G1,e.initialUser,this.serializer)}Cu(e){return new P_(oh.mi,this.serializer)}Du(e){return new sA}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ba.provider={build:()=>new Ba};class YA extends Ba{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Oe(this.persistence.referenceDelegate instanceof Ua,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new D1(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Wt.withCacheSize(this.cacheSizeBytes):Wt.DEFAULT;return new P_((s=>Ua.mi(s,n)),this.serializer)}}class lu{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>ip(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=GA.bind(null,this.syncEngine),await SA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new bA})()}createDatastore(e){const n=wc(e.databaseInfo.databaseId),s=(function(i){return new cA(i)})(e.databaseInfo);return(function(i,o,c,l){return new fA(i,o,c,l)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,r,i,o,c){return new pA(s,r,i,o,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>ip(this.syncEngine,n,0)),(function(){return Zd.v()?new Zd:new rA})())}createSyncEngine(e,n){return(function(r,i,o,c,l,u,f){const d=new xA(r,i,o,c,l,u);return f&&(d.gu=!0),d})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=ye(n);ne(ur,"RemoteStore shutting down."),s.Ea.add(5),await Co(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}lu.provider={build:()=>new lu};class JA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Yn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Os="FirestoreClient";class XA{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=Lt.UNAUTHENTICATED,this.clientId=Gu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,(async o=>{ne(Os,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(s,(o=>(ne(Os,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=ph(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function vl(t,e){t.asyncQueue.verifyOperationInProgress(),ne(Os,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener((async r=>{s.isEqual(r)||(await k_(e.localStore,r),s=r)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function ap(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ZA(t);ne(Os,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((s=>tp(e.remoteStore,s))),t.setAppCheckTokenChangeListener(((s,r)=>tp(e.remoteStore,r))),t._onlineComponents=e}async function ZA(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ne(Os,"Using user provided OfflineComponentProvider");try{await vl(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(r){return r.name==="FirebaseError"?r.code===q.FAILED_PRECONDITION||r.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;jr("Error using user provided cache. Falling back to memory cache: "+n),await vl(t,new Ba)}}else ne(Os,"Using default OfflineComponentProvider"),await vl(t,new YA(void 0));return t._offlineComponents}async function K_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ne(Os,"Using user provided OnlineComponentProvider"),await ap(t,t._uninitializedComponentsProvider._online)):(ne(Os,"Using default OnlineComponentProvider"),await ap(t,new lu))),t._onlineComponents}function eS(t){return K_(t).then((e=>e.syncEngine))}async function tS(t){const e=await K_(t),n=e.eventManager;return n.onListen=MA.bind(null,e.syncEngine),n.onUnlisten=$A.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=FA.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=BA.bind(null,e.syncEngine),n}function nS(t,e,n={}){const s=new bs;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,c,l,u){const f=new JA({next:m=>{f.Nu(),o.enqueueAndForget((()=>PA(i,d)));const _=m.docs.has(c);!_&&m.fromCache?u.reject(new se(q.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&l&&l.source==="server"?u.reject(new se(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),d=new DA(eh(c.path),f,{includeMetadataChanges:!0,qa:!0});return RA(i,d)})(await tS(t),t.asyncQueue,e,n,s))),s.promise}function Q_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const cp=new Map;const Y_="firestore.googleapis.com",lp=!0;class up{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new se(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Y_,this.ssl=lp}else this.host=e.host,this.ssl=e.ssl??lp;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=R_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<k1)throw new se(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}d0("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Q_(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new se(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new se(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new se(q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,r){return s.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yh{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new up({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new up(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new n0;switch(s.type){case"firstParty":return new o0(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new se(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=cp.get(n);s&&(ne("ComponentProvider","Removing Datastore"),cp.delete(n),s.terminate())})(this),Promise.resolve()}}function sS(t,e,n,s={}){t=lr(t,yh);const r=Jr(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;r&&(Cg(`https://${c}`),bg("Firestore",!0)),i.host!==Y_&&i.host!==c&&jr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:c,ssl:r,emulatorOptions:s};if(!or(l,o)&&(t._setSettings(l),s.mockUserToken)){let u,f;if(typeof s.mockUserToken=="string")u=s.mockUserToken,f=Lt.MOCK_USER;else{u=bI(s.mockUserToken,t._app?.options.projectId);const d=s.mockUserToken.sub||s.mockUserToken.user_id;if(!d)throw new se(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Lt(d)}t._authCredentials=new s0(new Bg(u,f))}}class vh{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new vh(this.firestore,e,this._query)}}class ht{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new uo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ht(this.firestore,e,this._key)}toJSON(){return{type:ht._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(To(n,ht._jsonSchema))return new ht(e,s||null,new ue(Je.fromString(n.referencePath)))}}ht._jsonSchemaVersion="firestore/documentReference/1.0",ht._jsonSchema={type:at("string",ht._jsonSchemaVersion),referencePath:at("string")};class uo extends vh{constructor(e,n,s){super(e,n,eh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ht(this.firestore,null,new ue(e))}withConverter(e){return new uo(this.firestore,e,this._path)}}function ja(t,e,...n){if(t=Ft(t),arguments.length===1&&(e=Gu.newId()),f0("doc","path",e),t instanceof yh){const s=Je.fromString(e,...n);return Ad(s),new ht(t,null,new ue(s))}{if(!(t instanceof ht||t instanceof uo))throw new se(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Je.fromString(e,...n));return Ad(s),new ht(t.firestore,t instanceof uo?t.converter:null,new ue(s))}}const hp="AsyncQueue";class fp{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new D_(this,"async_queue_retry"),this._c=()=>{const s=yl();s&&ne(hp,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=yl();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=yl();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new bs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ti(e))throw e;ne(hp,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Yn("INTERNAL UNHANDLED ERROR: ",dp(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=dh.createAndSchedule(this,e,n,s,(i=>this.hc(i)));return this.tc.push(r),r}uc(){this.nc&&pe(47125,{Pc:dp(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function dp(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Ac extends yh{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new fp,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fp(e),this._firestoreClient=void 0,await e}}}function rS(t,e){const n=typeof t=="object"?t:Ng(),s=typeof t=="string"?t:Da,r=qu(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=SI("firestore");i&&sS(r,...i)}return r}function J_(t){if(t._terminated)throw new se(q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||iS(t),t._firestoreClient}function iS(t){const e=t._freezeSettings(),n=(function(r,i,o,c){return new A0(r,i,o,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,Q_(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new XA(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(r){const i=r?._online.build();return{_offline:r?._offline.build(i),_online:i}})(t._componentsProvider))}class sn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sn(bt.fromBase64String(e))}catch(n){throw new se(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new sn(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:sn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(To(e,sn._jsonSchema))return sn.fromBase64String(e.bytes)}}sn._jsonSchemaVersion="firestore/bytes/1.0",sn._jsonSchema={type:at("string",sn._jsonSchemaVersion),bytes:at("string")};class Sc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new se(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Eh{constructor(e){this._methodName=e}}class bn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new se(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new se(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:bn._jsonSchemaVersion}}static fromJSON(e){if(To(e,bn._jsonSchema))return new bn(e.latitude,e.longitude)}}bn._jsonSchemaVersion="firestore/geoPoint/1.0",bn._jsonSchema={type:at("string",bn._jsonSchemaVersion),latitude:at("number"),longitude:at("number")};class Rn{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Rn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(To(e,Rn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Rn(e.vectorValues);throw new se(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Rn._jsonSchemaVersion="firestore/vectorValue/1.0",Rn._jsonSchema={type:at("string",Rn._jsonSchemaVersion),vectorValues:at("object")};const oS=/^__.*__$/;class aS{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Fs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ao(e,this.data,n,this.fieldTransforms)}}class X_{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Fs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Z_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe(40011,{Ac:t})}}class wh{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new wh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ha(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Z_(this.Ac)&&oS.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class cS{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||wc(e)}Cc(e,n,s,r=!1){return new wh({Ac:e,methodName:n,Dc:s,path:At.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ey(t){const e=t._freezeSettings(),n=wc(t._databaseId);return new cS(t._databaseId,!!e.ignoreUndefinedProperties,n)}function lS(t,e,n,s,r,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);Ih("Data must be an object, but it was:",o,s);const c=ty(s,o);let l,u;if(i.merge)l=new Xt(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const d of i.mergeFields){const m=uu(e,d,n);if(!o.contains(m))throw new se(q.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);sy(f,m)||f.push(m)}l=new Xt(f),u=o.fieldTransforms.filter((d=>l.covers(d.field)))}else l=null,u=o.fieldTransforms;return new aS(new qt(c),l,u)}class Cc extends Eh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Cc}}function uS(t,e,n,s){const r=t.Cc(1,e,n);Ih("Data must be an object, but it was:",r,s);const i=[],o=qt.empty();Ms(s,((l,u)=>{const f=Th(e,l,n);u=Ft(u);const d=r.yc(f);if(u instanceof Cc)i.push(f);else{const m=bc(u,d);m!=null&&(i.push(f),o.set(f,m))}}));const c=new Xt(i);return new X_(o,c,r.fieldTransforms)}function hS(t,e,n,s,r,i){const o=t.Cc(1,e,n),c=[uu(e,s,n)],l=[r];if(i.length%2!=0)throw new se(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)c.push(uu(e,i[m])),l.push(i[m+1]);const u=[],f=qt.empty();for(let m=c.length-1;m>=0;--m)if(!sy(u,c[m])){const _=c[m];let b=l[m];b=Ft(b);const N=o.yc(_);if(b instanceof Cc)u.push(_);else{const L=bc(b,N);L!=null&&(u.push(_),f.set(_,L))}}const d=new Xt(u);return new X_(f,d,o.fieldTransforms)}function bc(t,e){if(ny(t=Ft(t)))return Ih("Unsupported field value:",e,t),ty(t,e);if(t instanceof Eh)return(function(s,r){if(!Z_(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,r){const i=[];let o=0;for(const c of s){let l=bc(c,r.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}})(t,e)}return(function(s,r){if((s=Ft(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return K0(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=ze.fromDate(s);return{timestampValue:Fa(r.serializer,i)}}if(s instanceof ze){const i=new ze(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Fa(r.serializer,i)}}if(s instanceof bn)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof sn)return{bytesValue:w_(r.serializer,s._byteString)};if(s instanceof ht){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:rh(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Rn)return(function(o,c){return{mapValue:{fields:{[Yg]:{stringValue:Jg},[La]:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw c.Sc("VectorValues must only contain numeric values.");return th(c.serializer,u)}))}}}}}})(s,r);throw r.Sc(`Unsupported field value: ${Ku(s)}`)})(t,e)}function ty(t,e){const n={};return Wg(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ms(t,((s,r)=>{const i=bc(r,e.mc(s));i!=null&&(n[s]=i)})),{mapValue:{fields:n}}}function ny(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ze||t instanceof bn||t instanceof sn||t instanceof ht||t instanceof Eh||t instanceof Rn)}function Ih(t,e,n){if(!ny(n)||!jg(n)){const s=Ku(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function uu(t,e,n){if((e=Ft(e))instanceof Sc)return e._internalPath;if(typeof e=="string")return Th(t,e);throw Ha("Field path arguments must be of type string or ",t,!1,void 0,n)}const fS=new RegExp("[~\\*/\\[\\]]");function Th(t,e,n){if(e.search(fS)>=0)throw Ha(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Sc(...e.split("."))._internalPath}catch{throw Ha(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ha(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${s}`),o&&(l+=` in document ${r}`),l+=")"),new se(q.INVALID_ARGUMENT,c+t+l)}function sy(t,e){return t.some((n=>n.isEqual(e)))}class ry{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(iy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class dS extends ry{data(){return super.data()}}function iy(t,e){return typeof e=="string"?Th(t,e):e instanceof Sc?e._internalPath:e._delegate._internalPath}class pS{convertValue(e,n="none"){switch(Ls(e)){case 0:return null;case 1:return e.booleanValue;case 2:return st(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ds(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw pe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Ms(e,((r,i)=>{s[r]=this.convertValue(i,n)})),s}convertVectorValue(e){const n=e.fields?.[La].arrayValue?.values?.map((s=>st(s.doubleValue)));return new Rn(n)}convertGeoPoint(e){return new bn(st(e.latitude),st(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=pc(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(io(e));default:return null}}convertTimestamp(e){const n=Ns(e);return new ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Je.fromString(e);Oe(b_(s),9688,{name:e});const r=new oo(s.get(1),s.get(3)),i=new ue(s.popFirst(5));return r.isEqual(n)||Yn(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}function mS(t,e,n){let s;return s=t?t.toFirestore(e):e,s}class Vi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ir extends ry{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new fa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(iy("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ir._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ir._jsonSchemaVersion="firestore/documentSnapshot/1.0",ir._jsonSchema={type:at("string",ir._jsonSchemaVersion),bundleSource:at("string","DocumentSnapshot"),bundleName:at("string"),bundle:at("string")};class fa extends ir{data(e={}){return super.data(e)}}class Gi{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Vi(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new fa(this._firestore,this._userDataWriter,s.key,s,new Vi(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new se(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map((c=>{const l=new fa(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Vi(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((c=>i||c.type!==3)).map((c=>{const l=new fa(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Vi(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,f=-1;return c.type!==0&&(u=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:gS(c.type),doc:l,oldIndex:u,newIndex:f}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Gi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Gu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function gS(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe(61501,{type:t})}}function _S(t){t=lr(t,ht);const e=lr(t.firestore,Ac);return nS(J_(e),t._key).then((n=>ES(e,t,n)))}Gi._jsonSchemaVersion="firestore/querySnapshot/1.0",Gi._jsonSchema={type:at("string",Gi._jsonSchemaVersion),bundleSource:at("string","QuerySnapshot"),bundleName:at("string"),bundle:at("string")};class yS extends pS{constructor(e){super(),this.firestore=e}convertBytes(e){return new sn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ht(this.firestore,null,n)}}function vS(t,e,n){t=lr(t,ht);const s=lr(t.firestore,Ac),r=mS(t.converter,e);return oy(s,[lS(ey(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Sn.none())])}function pp(t,e,n,...s){t=lr(t,ht);const r=lr(t.firestore,Ac),i=ey(r);let o;return o=typeof(e=Ft(e))=="string"||e instanceof Sc?hS(i,"updateDoc",t._key,e,n,s):uS(i,"updateDoc",t._key,e),oy(r,[o.toMutation(t._key,Sn.exists(!0))])}function oy(t,e){return(function(s,r){const i=new bs;return s.asyncQueue.enqueueAndForget((async()=>jA(await eS(s),r,i))),i.promise})(J_(t),e)}function ES(t,e,n){const s=n.docs.get(e._key),r=new yS(t);return new ir(t,r,e._key,s,new Vi(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){Zr=r})(Xr),Br(new ar("firestore",((s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),c=new Ac(new r0(s.getProvider("auth-internal")),new a0(o,s.getProvider("app-check-internal")),(function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new se(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oo(u.options.projectId,f)})(o,r),o);return i={useFetchStreams:n,...i},c._setSettings(i),c}),"PUBLIC").setMultipleInstances(!0)),Ss(Ed,wd,e),Ss(Ed,wd,"esm2020")})();const wS={apiKey:"AIzaSyDapqMH_oM7h6CDKM0laMGrLIlDVDyb_gY",authDomain:"hometv-c10f8.firebaseapp.com",projectId:"hometv-c10f8",storageBucket:"hometv-c10f8.appspot.com",messagingSenderId:"452296723769",appId:"1:452296723769:web:982a4288b9cf4e189bace8"},IS=kg(wS),Wa=rS(IS);function ay(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const TS=ay,cy=new wo("auth","Firebase",ay());const qa=new Hu("@firebase/auth");function AS(t,...e){qa.logLevel<=Ae.WARN&&qa.warn(`Auth (${Xr}): ${t}`,...e)}function da(t,...e){qa.logLevel<=Ae.ERROR&&qa.error(`Auth (${Xr}): ${t}`,...e)}function pn(t,...e){throw Ah(t,...e)}function Pn(t,...e){return Ah(t,...e)}function ly(t,e,n){const s={...TS(),[e]:n};return new wo("auth","Firebase",s).create(e,{appName:t.name})}function qn(t){return ly(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ah(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return cy.create(t,...e)}function de(t,e,...n){if(!t)throw Ah(e,...n)}function Hn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw da(e),new Error(e)}function Xn(t,e){t||Hn(e)}function hu(){return typeof self<"u"&&self.location?.href||""}function SS(){return mp()==="http:"||mp()==="https:"}function mp(){return typeof self<"u"&&self.location?.protocol||null}function CS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(SS()||LI()||"connection"in navigator)?navigator.onLine:!0}function bS(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Ro{constructor(e,n){this.shortDelay=e,this.longDelay=n,Xn(n>e,"Short delay should be less than long delay!"),this.isMobile=kI()||VI()}get(){return CS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Sh(t,e){Xn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class uy{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const RS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const PS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],kS=new Ro(3e4,6e4);function Us(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function $s(t,e,n,s,r={}){return hy(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const c=Io({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...i};return DI()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Jr(t.emulatorConfig.host)&&(u.credentials="include"),uy.fetch()(await fy(t,t.config.apiHost,n,c),u)})}async function hy(t,e,n){t._canInitEmulator=!1;const s={...RS,...e};try{const r=new DS(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw ta(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[l,u]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ta(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw ta(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw ta(t,"user-disabled",o);const f=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw ly(t,f,u);pn(t,f)}}catch(r){if(r instanceof ts)throw r;pn(t,"network-request-failed",{message:String(r)})}}async function Po(t,e,n,s,r={}){const i=await $s(t,e,n,s,r);return"mfaPendingCredential"in i&&pn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function fy(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?Sh(t.config,r):`${t.config.apiScheme}://${r}`;return PS.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function NS(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class DS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Pn(this.auth,"network-request-failed")),kS.get())})}}function ta(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=Pn(t,e,s);return r.customData._tokenResponse=n,r}function gp(t){return t!==void 0&&t.enterprise!==void 0}class LS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return NS(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function VS(t,e){return $s(t,"GET","/v2/recaptchaConfig",Us(t,e))}async function OS(t,e){return $s(t,"POST","/v1/accounts:delete",e)}async function za(t,e){return $s(t,"POST","/v1/accounts:lookup",e)}function Ki(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xS(t,e=!1){const n=Ft(t),s=await n.getIdToken(e),r=Ch(s);de(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i?.sign_in_provider;return{claims:r,token:s,authTime:Ki(El(r.auth_time)),issuedAtTime:Ki(El(r.iat)),expirationTime:Ki(El(r.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function El(t){return Number(t)*1e3}function Ch(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return da("JWT malformed, contained fewer than 3 sections"),null;try{const r=Ig(n);return r?JSON.parse(r):(da("Failed to decode base64 JWT payload"),null)}catch(r){return da("Caught error parsing JWT payload as JSON",r?.toString()),null}}function _p(t){const e=Ch(t);return de(e,"internal-error"),de(typeof e.exp<"u","internal-error"),de(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ho(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof ts&&MS(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function MS({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class FS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class fu{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ki(this.lastLoginAt),this.creationTime=Ki(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ga(t){const e=t.auth,n=await t.getIdToken(),s=await ho(t,za(e,{idToken:n}));de(s?.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=r.providerUserInfo?.length?dy(r.providerUserInfo):[],o=$S(t.providerData,i),c=t.isAnonymous,l=!(t.email&&r.passwordHash)&&!o?.length,u=c?l:!1,f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new fu(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function US(t){const e=Ft(t);await Ga(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $S(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function dy(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function BS(t,e){const n=await hy(t,{},async()=>{const s=Io({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await fy(t,r,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:c,body:s};return t.emulatorConfig&&Jr(t.emulatorConfig.host)&&(l.credentials="include"),uy.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function jS(t,e){return $s(t,"POST","/v2/accounts:revokeToken",Us(t,e))}class xr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){de(e.idToken,"internal-error"),de(typeof e.idToken<"u","internal-error"),de(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_p(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){de(e.length!==0,"internal-error");const n=_p(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(de(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await BS(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new xr;return s&&(de(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(de(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(de(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xr,this.toJSON())}_performRefresh(){return Hn("not implemented")}}function ls(t,e){de(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class un{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new FS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new fu(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await ho(this,this.stsTokenManager.getToken(this.auth,e));return de(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return xS(this,e)}reload(){return US(this)}_assign(e){this!==e&&(de(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new un({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Ga(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nn(this.auth.app))return Promise.reject(qn(this.auth));const e=await this.getIdToken();return await ho(this,OS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:d,emailVerified:m,isAnonymous:_,providerData:b,stsTokenManager:N}=n;de(d&&N,e,"internal-error");const L=xr.fromJSON(this.name,N);de(typeof d=="string",e,"internal-error"),ls(s,e.name),ls(r,e.name),de(typeof m=="boolean",e,"internal-error"),de(typeof _=="boolean",e,"internal-error"),ls(i,e.name),ls(o,e.name),ls(c,e.name),ls(l,e.name),ls(u,e.name),ls(f,e.name);const H=new un({uid:d,auth:e,email:r,emailVerified:m,displayName:s,isAnonymous:_,photoURL:o,phoneNumber:i,tenantId:c,stsTokenManager:L,createdAt:u,lastLoginAt:f});return b&&Array.isArray(b)&&(H.providerData=b.map(D=>({...D}))),l&&(H._redirectEventId=l),H}static async _fromIdTokenResponse(e,n,s=!1){const r=new xr;r.updateFromServerResponse(n);const i=new un({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await Ga(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];de(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?dy(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!i?.length,c=new xr;c.updateFromIdToken(s);const l=new un({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new fu(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(l,u),l}}const yp=new Map;function Wn(t){Xn(t instanceof Function,"Expected a class definition");let e=yp.get(t);return e?(Xn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,yp.set(t,e),e)}class py{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}py.type="NONE";const vp=py;function pa(t,e,n){return`firebase:${t}:${e}:${n}`}class Mr{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=pa(this.userKey,r.apiKey,i),this.fullPersistenceKey=pa("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await za(this.auth,{idToken:e}).catch(()=>{});return n?un._fromGetAccountInfoResponse(this.auth,n,e):null}return un._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Mr(Wn(vp),e,s);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=r[0]||Wn(vp);const o=pa(s,e.config.apiKey,e.name);let c=null;for(const u of n)try{const f=await u._get(o);if(f){let d;if(typeof f=="string"){const m=await za(e,{idToken:f}).catch(()=>{});if(!m)break;d=await un._fromGetAccountInfoResponse(e,m,f)}else d=un._fromJSON(e,f);u!==i&&(c=d),i=u;break}}catch{}const l=r.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Mr(i,e,s):(i=l[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Mr(i,e,s))}}function Ep(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yy(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(my(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ey(e))return"Blackberry";if(wy(e))return"Webos";if(gy(e))return"Safari";if((e.includes("chrome/")||_y(e))&&!e.includes("edge/"))return"Chrome";if(vy(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function my(t=Mt()){return/firefox\//i.test(t)}function gy(t=Mt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _y(t=Mt()){return/crios\//i.test(t)}function yy(t=Mt()){return/iemobile/i.test(t)}function vy(t=Mt()){return/android/i.test(t)}function Ey(t=Mt()){return/blackberry/i.test(t)}function wy(t=Mt()){return/webos/i.test(t)}function bh(t=Mt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function HS(t=Mt()){return bh(t)&&!!window.navigator?.standalone}function WS(){return OI()&&document.documentMode===10}function Iy(t=Mt()){return bh(t)||vy(t)||wy(t)||Ey(t)||/windows phone/i.test(t)||yy(t)}function Ty(t,e=[]){let n;switch(t){case"Browser":n=Ep(Mt());break;case"Worker":n=`${Ep(Mt())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Xr}/${s}`}class qS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,c)=>{try{const l=e(i);o(l)}catch(l){c(l)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function zS(t,e={}){return $s(t,"GET","/v2/passwordPolicy",Us(t,e))}const GS=6;class KS{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??GS,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class QS{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wp(this),this.idTokenSubscription=new wp(this),this.beforeStateQueue=new qS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cy,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Wn(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Mr.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await za(this,{idToken:e}),s=await un._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(nn(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=s?._redirectEventId,c=await this.tryRedirectSignIn(e);(!i||i===o)&&c?.user&&(s=c.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ga(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=bS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nn(this.app))return Promise.reject(qn(this));const n=e?Ft(e):null;return n&&de(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&de(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nn(this.app)?Promise.reject(qn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nn(this.app)?Promise.reject(qn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await zS(this),n=new KS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wo("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await jS(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Wn(e)||this._popupRedirectResolver;de(n,this,"argument-error"),this.redirectPersistenceManager=await Mr.create(this,[Wn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,s,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ty(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&AS(`Error while retrieving App Check token: ${e.error}`),e?.token}}function mr(t){return Ft(t)}class wp{constructor(e){this.auth=e,this.observer=null,this.addObserver=HI(n=>this.observer=n)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Rc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function YS(t){Rc=t}function Ay(t){return Rc.loadJS(t)}function JS(){return Rc.recaptchaEnterpriseScript}function XS(){return Rc.gapiScript}function ZS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class eC{constructor(){this.enterprise=new tC}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class tC{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const nC="recaptcha-enterprise",Sy="NO_RECAPTCHA";class sC{constructor(e){this.type=nC,this.auth=mr(e)}async verify(e="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,c)=>{VS(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const u=new LS(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{c(l)})})}function r(i,o,c){const l=window.grecaptcha;gp(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(Sy)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new eC().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{s(this.auth).then(c=>{if(!n&&gp(window.grecaptcha))r(c,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=JS();l.length!==0&&(l+=c),Ay(l).then(()=>{r(c,i,o)}).catch(u=>{o(u)})}}).catch(c=>{o(c)})})}}async function Ip(t,e,n,s=!1,r=!1){const i=new sC(t);let o;if(r)o=Sy;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const l=c.phoneEnrollmentInfo.phoneNumber,u=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const l=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return s?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function du(t,e,n,s,r){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Ip(t,e,n,n==="getOobCode");return s(t,i)}else return s(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Ip(t,e,n,n==="getOobCode");return s(t,o)}else return Promise.reject(i)})}function rC(t,e){const n=qu(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(or(i,e??{}))return r;pn(r,"already-initialized")}return n.initialize({options:e})}function iC(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Wn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function oC(t,e,n){const s=mr(t);de(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=Cy(e),{host:o,port:c}=aC(e),l=c===null?"":`:${c}`,u={url:`${i}//${o}${l}/`},f=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){de(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),de(or(u,s.config.emulator)&&or(f,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=f,s.settings.appVerificationDisabledForTesting=!0,Jr(o)?(Cg(`${i}//${o}${l}`),bg("Auth",!0)):cC()}function Cy(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function aC(t){const e=Cy(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:Tp(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:Tp(o)}}}function Tp(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function cC(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class Rh{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Hn("not implemented")}_getIdTokenResponse(e){return Hn("not implemented")}_linkToIdToken(e,n){return Hn("not implemented")}_getReauthenticationResolver(e){return Hn("not implemented")}}async function lC(t,e){return $s(t,"POST","/v1/accounts:signUp",e)}async function uC(t,e){return Po(t,"POST","/v1/accounts:signInWithPassword",Us(t,e))}async function hC(t,e){return Po(t,"POST","/v1/accounts:signInWithEmailLink",Us(t,e))}async function fC(t,e){return Po(t,"POST","/v1/accounts:signInWithEmailLink",Us(t,e))}class fo extends Rh{constructor(e,n,s,r=null){super("password",s),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new fo(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new fo(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return du(e,n,"signInWithPassword",uC);case"emailLink":return hC(e,{email:this._email,oobCode:this._password});default:pn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return du(e,s,"signUpPassword",lC);case"emailLink":return fC(e,{idToken:n,email:this._email,oobCode:this._password});default:pn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Fr(t,e){return Po(t,"POST","/v1/accounts:signInWithIdp",Us(t,e))}const dC="http://localhost";class hr extends Rh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new hr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):pn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new hr(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Fr(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Fr(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Fr(e,n)}buildRequest(){const e={requestUri:dC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Io(n)}return e}}function pC(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function mC(t){const e=Pi(ki(t)).link,n=e?Pi(ki(e)).deep_link_id:null,s=Pi(ki(t)).deep_link_id;return(s?Pi(ki(s)).link:null)||s||n||e||t}class Ph{constructor(e){const n=Pi(ki(e)),s=n.apiKey??null,r=n.oobCode??null,i=pC(n.mode??null);de(s&&r&&i,"argument-error"),this.apiKey=s,this.operation=i,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=mC(e);try{return new Ph(n)}catch{return null}}}class si{constructor(){this.providerId=si.PROVIDER_ID}static credential(e,n){return fo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Ph.parseLink(n);return de(s,"argument-error"),fo._fromEmailAndCode(e,s.code,s.tenantId)}}si.PROVIDER_ID="password";si.EMAIL_PASSWORD_SIGN_IN_METHOD="password";si.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class by{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ko extends by{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class gs extends ko{constructor(){super("facebook.com")}static credential(e){return hr._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gs.credential(e.oauthAccessToken)}catch{return null}}}gs.FACEBOOK_SIGN_IN_METHOD="facebook.com";gs.PROVIDER_ID="facebook.com";class _s extends ko{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return hr._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return _s.credential(n,s)}catch{return null}}}_s.GOOGLE_SIGN_IN_METHOD="google.com";_s.PROVIDER_ID="google.com";class ys extends ko{constructor(){super("github.com")}static credential(e){return hr._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ys.credential(e.oauthAccessToken)}catch{return null}}}ys.GITHUB_SIGN_IN_METHOD="github.com";ys.PROVIDER_ID="github.com";class vs extends ko{constructor(){super("twitter.com")}static credential(e,n){return hr._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return vs.credential(n,s)}catch{return null}}}vs.TWITTER_SIGN_IN_METHOD="twitter.com";vs.PROVIDER_ID="twitter.com";async function gC(t,e){return Po(t,"POST","/v1/accounts:signUp",Us(t,e))}class fr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await un._fromIdTokenResponse(e,s,r),o=Ap(s);return new fr({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=Ap(s);return new fr({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function Ap(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Ka extends ts{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,Ka.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new Ka(e,n,s,r)}}function Ry(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ka._fromErrorAndOperation(t,i,e,s):i})}async function _C(t,e,n=!1){const s=await ho(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return fr._forOperation(t,"link",s)}async function yC(t,e,n=!1){const{auth:s}=t;if(nn(s.app))return Promise.reject(qn(s));const r="reauthenticate";try{const i=await ho(t,Ry(s,r,e,t),n);de(i.idToken,s,"internal-error");const o=Ch(i.idToken);de(o,s,"internal-error");const{sub:c}=o;return de(t.uid===c,s,"user-mismatch"),fr._forOperation(t,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&pn(s,"user-mismatch"),i}}async function Py(t,e,n=!1){if(nn(t.app))return Promise.reject(qn(t));const s="signIn",r=await Ry(t,s,e),i=await fr._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}async function vC(t,e){return Py(mr(t),e)}async function ky(t){const e=mr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function EC(t,e,n){if(nn(t.app))return Promise.reject(qn(t));const s=mr(t),o=await du(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",gC).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&ky(t),l}),c=await fr._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(c.user),c}function wC(t,e,n){return nn(t.app)?Promise.reject(qn(t)):vC(Ft(t),si.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&ky(t),s})}function IC(t,e,n,s){return Ft(t).onIdTokenChanged(e,n,s)}function TC(t,e,n){return Ft(t).beforeAuthStateChanged(e,n)}function AC(t,e,n,s){return Ft(t).onAuthStateChanged(e,n,s)}function SC(t){return Ft(t).signOut()}const Qa="__sak";class Ny{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Qa,"1"),this.storage.removeItem(Qa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const CC=1e3,bC=10;class Dy extends Ny{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Iy(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,l)=>{this.notifyListeners(o,l)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);WS()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,bC):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},CC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Dy.type="LOCAL";const RC=Dy;class Ly extends Ny{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Ly.type="SESSION";const Vy=Ly;function PC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Pc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new Pc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const c=Array.from(o).map(async u=>u(n.origin,i)),l=await PC(c);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Pc.receivers=[];function kh(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}class kC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((c,l)=>{const u=kh("",20);r.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(d){const m=d;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(m.data.response);break;default:clearTimeout(f),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function kn(){return window}function NC(t){kn().location.href=t}function Oy(){return typeof kn().WorkerGlobalScope<"u"&&typeof kn().importScripts=="function"}async function DC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function LC(){return navigator?.serviceWorker?.controller||null}function VC(){return Oy()?self:null}const xy="firebaseLocalStorageDb",OC=1,Ya="firebaseLocalStorage",My="fbase_key";class No{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function kc(t,e){return t.transaction([Ya],e?"readwrite":"readonly").objectStore(Ya)}function xC(){const t=indexedDB.deleteDatabase(xy);return new No(t).toPromise()}function pu(){const t=indexedDB.open(xy,OC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Ya,{keyPath:My})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Ya)?e(s):(s.close(),await xC(),e(await pu()))})})}async function Sp(t,e,n){const s=kc(t,!0).put({[My]:e,value:n});return new No(s).toPromise()}async function MC(t,e){const n=kc(t,!1).get(e),s=await new No(n).toPromise();return s===void 0?null:s.value}function Cp(t,e){const n=kc(t,!0).delete(e);return new No(n).toPromise()}const FC=800,UC=3;class Fy{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await pu(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>UC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Oy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pc._getInstance(VC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await DC(),!this.activeServiceWorker)return;this.sender=new kC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||LC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await pu();return await Sp(e,Qa,"1"),await Cp(e,Qa),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Sp(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>MC(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Cp(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=kc(r,!1).getAll();return new No(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),FC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Fy.type="LOCAL";const $C=Fy;new Ro(3e4,6e4);function BC(t,e){return e?Wn(e):(de(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Nh extends Rh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Fr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Fr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function jC(t){return Py(t.auth,new Nh(t),t.bypassAuthState)}function HC(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),yC(n,new Nh(t),t.bypassAuthState)}async function WC(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),_C(n,new Nh(t),t.bypassAuthState)}class Uy{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jC;case"linkViaPopup":case"linkViaRedirect":return WC;case"reauthViaPopup":case"reauthViaRedirect":return HC;default:pn(this.auth,"internal-error")}}resolve(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const qC=new Ro(2e3,1e4);class kr extends Uy{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,kr.currentPopupAction&&kr.currentPopupAction.cancel(),kr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return de(e,this.auth,"internal-error"),e}async onExecution(){Xn(this.filter.length===1,"Popup operations only handle one event");const e=kh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Pn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Pn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,kr.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qC.get())};e()}}kr.currentPopupAction=null;const zC="pendingRedirect",ma=new Map;class GC extends Uy{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=ma.get(this.auth._key());if(!e){try{const s=await KC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}ma.set(this.auth._key(),e)}return this.bypassAuthState||ma.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function KC(t,e){const n=JC(e),s=YC(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function QC(t,e){ma.set(t._key(),e)}function YC(t){return Wn(t._redirectPersistence)}function JC(t){return pa(zC,t.config.apiKey,t.name)}async function XC(t,e,n=!1){if(nn(t.app))return Promise.reject(qn(t));const s=mr(t),r=BC(s,e),o=await new GC(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}const ZC=600*1e3;class eb{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tb(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!$y(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Pn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ZC&&this.cachedEventUids.clear(),this.cachedEventUids.has(bp(e))}saveEventToCache(e){this.cachedEventUids.add(bp(e)),this.lastProcessedEventTime=Date.now()}}function bp(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function $y({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function tb(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $y(t);default:return!1}}async function nb(t,e={}){return $s(t,"GET","/v1/projects",e)}const sb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rb=/^https?/;async function ib(t){if(t.config.emulator)return;const{authorizedDomains:e}=await nb(t);for(const n of e)try{if(ob(n))return}catch{}pn(t,"unauthorized-domain")}function ob(t){const e=hu(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!rb.test(n))return!1;if(sb.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}const ab=new Ro(3e4,6e4);function Rp(){const t=kn().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function cb(t){return new Promise((e,n)=>{function s(){Rp(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Rp(),n(Pn(t,"network-request-failed"))},timeout:ab.get()})}if(kn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(kn().gapi?.load)s();else{const r=ZS("iframefcb");return kn()[r]=()=>{gapi.load?s():n(Pn(t,"network-request-failed"))},Ay(`${XS()}?onload=${r}`).catch(i=>n(i))}}).catch(e=>{throw ga=null,e})}let ga=null;function lb(t){return ga=ga||cb(t),ga}const ub=new Ro(5e3,15e3),hb="__/auth/iframe",fb="emulator/auth/iframe",db={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mb(t){const e=t.config;de(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Sh(e,fb):`https://${t.config.authDomain}/${hb}`,s={apiKey:e.apiKey,appName:t.name,v:Xr},r=pb.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${Io(s).slice(1)}`}async function gb(t){const e=await lb(t),n=kn().gapi;return de(n,t,"internal-error"),e.open({where:document.body,url:mb(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:db,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=Pn(t,"network-request-failed"),c=kn().setTimeout(()=>{i(o)},ub.get());function l(){kn().clearTimeout(c),r(s)}s.ping(l).then(l,()=>{i(o)})}))}const _b={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yb=500,vb=600,Eb="_blank",wb="http://localhost";class Pp{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ib(t,e,n,s=yb,r=vb){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let c="";const l={..._b,width:s.toString(),height:r.toString(),top:i,left:o},u=Mt().toLowerCase();n&&(c=_y(u)?Eb:n),my(u)&&(e=e||wb,l.scrollbars="yes");const f=Object.entries(l).reduce((m,[_,b])=>`${m}${_}=${b},`,"");if(HS(u)&&c!=="_self")return Tb(e||"",c),new Pp(null);const d=window.open(e||"",c,f);de(d,t,"popup-blocked");try{d.focus()}catch{}return new Pp(d)}function Tb(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const Ab="__/auth/handler",Sb="emulator/auth/handler",Cb=encodeURIComponent("fac");async function kp(t,e,n,s,r,i){de(t.config.authDomain,t,"auth-domain-config-required"),de(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Xr,eventId:r};if(e instanceof by){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",jI(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,d]of Object.entries({}))o[f]=d}if(e instanceof ko){const f=e.getScopes().filter(d=>d!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const l=await t._getAppCheckToken(),u=l?`#${Cb}=${encodeURIComponent(l)}`:"";return`${bb(t)}?${Io(c).slice(1)}${u}`}function bb({config:t}){return t.emulator?Sh(t,Sb):`https://${t.authDomain}/${Ab}`}const wl="webStorageSupport";class Rb{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vy,this._completeRedirectFn=XC,this._overrideRedirectResult=QC}async _openPopup(e,n,s,r){Xn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await kp(e,n,s,hu(),r);return Ib(e,i,kh())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await kp(e,n,s,hu(),r);return NC(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(Xn(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await gb(e),s=new eb(e);return n.register("authEvent",r=>(de(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(wl,{type:wl},r=>{const i=r?.[0]?.[wl];i!==void 0&&n(!!i),pn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ib(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Iy()||gy()||bh()}}const Pb=Rb;var Np="@firebase/auth",Dp="1.11.1";class kb{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Nb(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Db(t){Br(new ar("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=s.options;de(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ty(t)},u=new QS(s,r,i,l);return iC(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Br(new ar("auth-internal",e=>{const n=mr(e.getProvider("auth").getImmediate());return(s=>new kb(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ss(Np,Dp,Nb(t)),Ss(Np,Dp,"esm2020")}const Lb=300,Vb=Sg("authIdTokenMaxAge")||Lb;let Lp=null;const Ob=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>Vb)return;const r=n?.token;Lp!==r&&(Lp=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function xb(t=Ng()){const e=qu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=rC(t,{popupRedirectResolver:Pb,persistence:[$C,RC,Vy]}),s=Sg("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=Ob(i.toString());TC(n,o,()=>o(n.currentUser)),IC(n,c=>o(c))}}const r=Tg("auth");return r&&oC(n,`http://${r}`),n}function Mb(){return document.getElementsByTagName("head")?.[0]??document}YS({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=Pn("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",Mb().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Db("Browser");const Vp=async function(t){const e=ja(Wa,"users",t),n=await _S(e);return n.exists()?n.data():null},Fb=async function(t,e){await vS(ja(Wa,"users",e),{name:t.user_name||"",email:t.email||"",favorites:[],api_key:t.api_key||""})},Il=function(t){switch(t){case"auth/wrong-password":return" ";case"auth/internal-error":return" ";case"auth/invalid-email":return" email";case"auth/user-not-found":return"  ";case"auth/weak-password":return"   6 ";default:return" "}},Ub=[""," ","","","","-","","","","",""," ","-","","",""],ri="404dc583-7efc-4c93-8f21-a782f977b9e7",By="https://kinopoiskapiunofficial.tech/api/",$b="TOP_POPULAR_ALL",Do=`${By}v2.2/films`,Bb=`${By}v2.1/films`,jb=async()=>await(await fetch(`${Do}/filters`,{headers:{"X-API-KEY":ri,"Content-Type":"application/json"}})).json(),ii=async t=>{const e=await fetch(`${Do}/${t}`,{headers:{"X-API-KEY":ri,"Content-Type":"application/json"}});if(!e.ok)throw new Error("Error load film info");return await e.json()},Hb=async t=>{const e=await fetch(`${Do}/${t}/similars`,{headers:{"X-API-KEY":ri,"Content-Type":"application/json"}});if(!e.ok)throw new Error("Not found");return await e.json()},Wb=async t=>{const e=await fetch(`${Bb}/${t}/sequels_and_prequels`,{headers:{"X-API-KEY":ri,"Content-Type":"application/json"}});if(!e.ok)throw new Error("Not found");return await e.json()},qb=async(t=1)=>{const e=new URL(`${Do}/collections`);e.searchParams.set("type",$b),e.searchParams.set("page",t);const n=await fetch(e.toString(),{headers:{"X-API-KEY":ri,"Content-Type":"application/json"}});if(!n.ok)throw new Error("Error load collections");return n.json()},zb=async t=>{const e=new URL(Do);return Object.entries(t).forEach(([s,r])=>{e.searchParams.set(s,r)}),(await fetch(e.toString(),{headers:{"X-API-KEY":ri,"Content-Type":"application/json"}})).json()},Gb=(t,e)=>{const n=Number(e?.kinopoiskId??e?.filmId),s={...e,sortTime:Date.now()};return t.some(i=>Number(i?.kinopoiskId??i?.filmId)===n)?t:[...t,s]},na=(t,e)=>{const n=Number(e?.kinopoiskId??e?.filmId),s={...e,sortTime:Date.now()};return t.some(i=>Number(i?.kinopoiskId??i?.filmId)===n)?t:[s,...t]},sa=(t,e)=>{const n=Number(e);return t.filter(s=>Number(s?.kinopoiskId??s?.filmId)!==n)},xe=pI("filmStore",{state:()=>({user:null,apiKey:"404dc583-7efc-4c93-8f21-a782f977b9e7",apiAloha:"e7b61f129f4a392ac4bf6726a9dd6a",apiHDBV:"8a22f8e7684404c3815e3ffa940f00a0",auth:xb(),errorMessage:"",pageNum:1,limit:20,genreIdStore:null,genreListStore:[],searchQueryStore:"",filters:null,filmPageId:0,favorites:[],currentFocusIndex:-1,films:[],focusIds:{},isShowLastSearchList:!1,lastSearchList:[],lastViews:[],watchingList:[],watchList:[],waitingList:[],skippedIds:new Set}),getters:{filterGenres(){if(!this.genreListStore.length)return[];this.genreListStore=this.genreListStore.filter(t=>{if(Ub.indexOf(t.genre)===-1)return t})},favoriteList(){return this.favorites}},actions:{setGenreId(t){this.genreIdStore=t},setFilmPageId(t){this.filmPageId=t},setShowLastSearchList(t){this.isShowLastSearchList=t},async getGenreList(){if(localStorage.getItem("genres"))return this.genreListStore=JSON.parse(localStorage.getItem("genres")),this.genreListStore;try{const t=await jb();return this.filters=t,this.genreListStore=t.genres,this.filterGenres,localStorage.setItem("genres",JSON.stringify(this.genreListStore)),this.genreListStore}catch(t){console.error("Error load genres",t)}},async addFavorite(t){if(!(!this.user||!t))try{const e=await this.safeUpdateUserData("favorites",n=>Gb(n,t));e&&(this.favorites=e)}catch(e){console.warn("   : "+e)}},async removeFavorite(t){if(!(!this.user||!t))try{const e=await this.safeUpdateUserData("favorites",n=>sa(n,t));e&&(this.favorites=e)}catch(e){console.warn("   : "+e)}},async addLastSearchList(t){if(!(!t||!this.user))try{const e=await this.safeUpdateUserData("lastSearchList",n=>{const s=n.filter(r=>r.value.toLowerCase()!==t.toLowerCase());return[{id:Date.now(),value:t},...s].slice(0,30)});e&&(this.lastSearchList=e)}catch(e){console.error("   : "+e)}},async addLastViews(t){if(!(!t||!this.user))try{const e=await this.safeUpdateUserData("lastViews",n=>na(n,t));e&&(this.lastViews=e.slice(0,40))}catch(e){console.error("    : "+e)}},async addSkip(t){if(!(!this.user||!t))try{const e=await this.safeUpdateUserData("skippedIds",n=>{const s=new Set(n);return s.add(t),Array.from(s).slice(0,100)});e&&(this.skippedIds=new Set(e))}catch(e){console.error("   : "+e)}},async removeSkip(t){if(!(!this.user||!t))try{const e=await this.safeUpdateUserData("skippedIds",n=>{const s=new Set(n);return s.delete(t),Array.from(s)});e&&(this.skippedIds=new Set(e))}catch(e){console.error("   : "+e)}},async addWatching(t){if(!(!t||!this.user))try{const e=await this.safeUpdateUserData("watchingList",n=>na(n,t));e&&(this.watchingList=e)}catch(e){console.error("    : "+e)}},async removeWatching(t){if(!(!this.user||!t))try{const e=await this.safeUpdateUserData("watchingList",n=>sa(n,t));e&&(this.watchingList=e)}catch(e){console.warn("    : "+e)}},async addWatchList(t){if(!(!t||!this.user))try{const e=await this.safeUpdateUserData("watchList",n=>na(n,t));e&&(this.watchList=e)}catch(e){console.error("    : "+e)}},async removeWatchList(t){if(!(!this.user||!t))try{const e=await this.safeUpdateUserData("watchList",n=>sa(n,t));e&&(this.watchList=e)}catch(e){console.warn("    : "+e)}},async addWaitList(t){if(!(!t||!this.user))try{const e=await this.safeUpdateUserData("waitingList",n=>na(n,t));e&&(this.waitingList=e)}catch(e){console.error("    : "+e)}},async removeWaitList(t){if(!(!this.user||!t))try{const e=await this.safeUpdateUserData("waitingList",n=>sa(n,t));e&&(this.waitingList=e)}catch(e){console.warn("    : "+e)}},isSkipped(t){return this.skippedIds.has(t)},async authWithEmailAndPassword(t){await wC(this.auth,t.email,t.password).then(()=>{this.getUserData()}).catch(e=>{this.errorMessage=Il(e.code)})},async createAuthWithEmailAndPassword(t){await EC(this.auth,t.email,t.password).then(async e=>{this.user=await e.user,await Fb(t,this.user.uid),await this.getUserData()}).catch(e=>{this.errorMessage=Il(e.code)})},async editAuthNameOrApiKey(t){try{if(this.user){const e=ja(Wa,"users",this.user.uid);await pp(e,{name:t.userName||"",api_key:t.apiKey||this.apiKey})}await this.getUserData()}catch(e){this.errorMessage=Il(e.code)}},async authLogout(){SC(this.auth).then(async()=>{this.removeUserData()}).catch(t=>{alert(" logout: "+t)})},async authChange(t){AC(this.auth,async e=>{e?(this.user=e,this.getUserData(t)):this.removeUserData(t)})},async getUserData(t){let e=await Vp(this.user.uid);this.user.name=e?.name||"",this.user.email=e?.email??"",this.favorites=(e?.favorites??[]).sort((n,s)=>(s?.sortTime??0)-(n?.sortTime??0)),this.watchingList=(e?.watchingList??[]).sort((n,s)=>(s?.sortTime??0)-(n?.sortTime??0)),this.watchList=(e?.watchList??[]).sort((n,s)=>(s?.sortTime??0)-(n?.sortTime??0)),this.waitingList=(e?.waitingList??[]).sort((n,s)=>(s?.sortTime??0)-(n?.sortTime??0)),this.lastSearchList=(e?.lastSearchList||[]).slice(0,30),this.lastViews=(e?.lastViews??[]).slice(0,40).sort((n,s)=>(s?.sortTime??0)-(n?.sortTime??0)),this.skippedIds=new Set((e?.skippedIds??[]).slice(0,100)),e?.api_key&&(this.apiKey=e.api_key),typeof t=="function"&&t()},removeUserData(t){this.user=null,this.favorites=[],typeof t=="function"&&t()},searchQueryWithGenre(){let t={};return this.searchQueryStore&&(t.q=this.searchQueryStore),this.genreIdStore&&(t.genres=this.genreIdStore),t},setCurrentFocus(t){this.currentFocusIndex=t},setFocusIds(t){this.focusIds={...this.focusIds,[t]:this.currentFocusIndex}},setMountedCurrentFocus(t){this.setCurrentFocus(this.focusIds[t])},async searchPageTitle(){let t=this.genreIdStore?await this.genreListStore.filter(e=>+e.id==+this.genreIdStore)[0].genre:null;return this.searchQueryStore&&this.genreIdStore?`   "${this.searchQueryStore}",  "${t}"`:this.searchQueryStore&&!this.genreIdStore?`   "${this.searchQueryStore}"`:this.genreIdStore&&!this.searchQueryStore?`   "${t}"`:"    "},async safeUpdateUserData(t,e){if(!this.user)return console.warn(" "),null;try{const s=(await Vp(this.user.uid))?.[t]||[],r=e(s),i=ja(Wa,"users",this.user.uid);return await pp(i,{[t]:r}),r}catch(n){throw console.error(`  ${t}:`,n),n}}}});const Pr=typeof document<"u";function jy(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Kb(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&jy(t.default)}const Le=Object.assign;function Tl(t,e){const n={};for(const s in e){const r=e[s];n[s]=mn(r)?r.map(t):t(r)}return n}const Qi=()=>{},mn=Array.isArray;function Op(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}const Hy=/#/g,Qb=/&/g,Yb=/\//g,Jb=/=/g,Xb=/\?/g,Wy=/\+/g,Zb=/%5B/g,eR=/%5D/g,qy=/%5E/g,tR=/%60/g,zy=/%7B/g,nR=/%7C/g,Gy=/%7D/g,sR=/%20/g;function Dh(t){return t==null?"":encodeURI(""+t).replace(nR,"|").replace(Zb,"[").replace(eR,"]")}function rR(t){return Dh(t).replace(zy,"{").replace(Gy,"}").replace(qy,"^")}function mu(t){return Dh(t).replace(Wy,"%2B").replace(sR,"+").replace(Hy,"%23").replace(Qb,"%26").replace(tR,"`").replace(zy,"{").replace(Gy,"}").replace(qy,"^")}function iR(t){return mu(t).replace(Jb,"%3D")}function oR(t){return Dh(t).replace(Hy,"%23").replace(Xb,"%3F")}function aR(t){return oR(t).replace(Yb,"%2F")}function po(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const cR=/\/$/,lR=t=>t.replace(cR,"");function Al(t,e,n="/"){let s,r={},i="",o="";const c=e.indexOf("#");let l=e.indexOf("?");return l=c>=0&&l>c?-1:l,l>=0&&(s=e.slice(0,l),i=e.slice(l,c>0?c:e.length),r=t(i.slice(1))),c>=0&&(s=s||e.slice(0,c),o=e.slice(c,e.length)),s=dR(s??e,n),{fullPath:s+i+o,path:s,query:r,hash:po(o)}}function uR(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function xp(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function hR(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&Kr(e.matched[s],n.matched[r])&&Ky(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Kr(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Ky(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!fR(t[n],e[n]))return!1;return!0}function fR(t,e){return mn(t)?Mp(t,e):mn(e)?Mp(e,t):t===e}function Mp(t,e){return mn(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function dR(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,c;for(o=0;o<s.length;o++)if(c=s[o],c!==".")if(c==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const us={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let gu=(function(t){return t.pop="pop",t.push="push",t})({}),Sl=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function pR(t){if(!t)if(Pr){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),lR(t)}const mR=/^[^#]+#/;function gR(t,e){return t.replace(mR,"#")+e}function _R(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const Nc=()=>({left:window.scrollX,top:window.scrollY});function yR(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=_R(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Fp(t,e){return(history.state?history.state.position-e:-1)+t}const _u=new Map;function vR(t,e){_u.set(t,e)}function ER(t){const e=_u.get(t);return _u.delete(t),e}function wR(t){return typeof t=="string"||t&&typeof t=="object"}function Qy(t){return typeof t=="string"||typeof t=="symbol"}let tt=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const Yy=Symbol("");tt.MATCHER_NOT_FOUND+"",tt.NAVIGATION_GUARD_REDIRECT+"",tt.NAVIGATION_ABORTED+"",tt.NAVIGATION_CANCELLED+"",tt.NAVIGATION_DUPLICATED+"";function Qr(t,e){return Le(new Error,{type:t,[Yy]:!0},e)}function Mn(t,e){return t instanceof Error&&Yy in t&&(e==null||!!(t.type&e))}const IR=["params","query","hash"];function TR(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of IR)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function AR(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const r=n[s].replace(Wy," "),i=r.indexOf("="),o=po(i<0?r:r.slice(0,i)),c=i<0?null:po(r.slice(i+1));if(o in e){let l=e[o];mn(l)||(l=e[o]=[l]),l.push(c)}else e[o]=c}return e}function Up(t){let e="";for(let n in t){const s=t[n];if(n=iR(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(mn(s)?s.map(r=>r&&mu(r)):[s&&mu(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function SR(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=mn(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const CR=Symbol(""),$p=Symbol(""),Dc=Symbol(""),Lh=Symbol(""),yu=Symbol("");function Ci(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function ps(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((c,l)=>{const u=m=>{m===!1?l(Qr(tt.NAVIGATION_ABORTED,{from:n,to:e})):m instanceof Error?l(m):wR(m)?l(Qr(tt.NAVIGATION_GUARD_REDIRECT,{from:e,to:m})):(o&&s.enterCallbacks[r]===o&&typeof m=="function"&&o.push(m),c())},f=i(()=>t.call(s&&s.instances[r],e,n,u));let d=Promise.resolve(f);t.length<3&&(d=d.then(u)),d.catch(m=>l(m))})}function Cl(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const c in o.components){let l=o.components[c];if(!(e!=="beforeRouteEnter"&&!o.instances[c]))if(jy(l)){const u=(l.__vccOpts||l)[e];u&&i.push(ps(u,n,s,o,c,r))}else{let u=l();i.push(()=>u.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${c}" at "${o.path}"`);const d=Kb(f)?f.default:f;o.mods[c]=f,o.components[c]=d;const m=(d.__vccOpts||d)[e];return m&&ps(m,n,s,o,c,r)()}))}}return i}function bR(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const c=e.matched[o];c&&(t.matched.find(u=>Kr(u,c))?s.push(c):n.push(c));const l=t.matched[o];l&&(e.matched.find(u=>Kr(u,l))||r.push(l))}return[n,s,r]}let RR=()=>location.protocol+"//"+location.host;function Jy(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let o=r.includes(t.slice(i))?t.slice(i).length:1,c=r.slice(o);return c[0]!=="/"&&(c="/"+c),xp(c,"")}return xp(n,t)+s+r}function PR(t,e,n,s){let r=[],i=[],o=null;const c=({state:m})=>{const _=Jy(t,location),b=n.value,N=e.value;let L=0;if(m){if(n.value=_,e.value=m,o&&o===b){o=null;return}L=N?m.position-N.position:0}else s(_);r.forEach(H=>{H(n.value,b,{delta:L,type:gu.pop,direction:L?L>0?Sl.forward:Sl.back:Sl.unknown})})};function l(){o=n.value}function u(m){r.push(m);const _=()=>{const b=r.indexOf(m);b>-1&&r.splice(b,1)};return i.push(_),_}function f(){if(document.visibilityState==="hidden"){const{history:m}=window;if(!m.state)return;m.replaceState(Le({},m.state,{scroll:Nc()}),"")}}function d(){for(const m of i)m();i=[],window.removeEventListener("popstate",c),window.removeEventListener("pagehide",f),document.removeEventListener("visibilitychange",f)}return window.addEventListener("popstate",c),window.addEventListener("pagehide",f),document.addEventListener("visibilitychange",f),{pauseListeners:l,listen:u,destroy:d}}function Bp(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?Nc():null}}function kR(t){const{history:e,location:n}=window,s={value:Jy(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,f){const d=t.indexOf("#"),m=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+l:RR()+t+l;try{e[f?"replaceState":"pushState"](u,"",m),r.value=u}catch(_){console.error(_),n[f?"replace":"assign"](m)}}function o(l,u){i(l,Le({},e.state,Bp(r.value.back,l,r.value.forward,!0),u,{position:r.value.position}),!0),s.value=l}function c(l,u){const f=Le({},r.value,e.state,{forward:l,scroll:Nc()});i(f.current,f,!0),i(l,Le({},Bp(s.value,l,null),{position:f.position+1},u),!1),s.value=l}return{location:s,state:r,push:c,replace:o}}function NR(t){t=pR(t);const e=kR(t),n=PR(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=Le({location:"",base:t,go:s,createHref:gR.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}let tr=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var lt=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(lt||{});const DR={type:tr.Static,value:""},LR=/[a-zA-Z0-9_]/;function VR(t){if(!t)return[[]];if(t==="/")return[[DR]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(_){throw new Error(`ERR (${n})/"${u}": ${_}`)}let n=lt.Static,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let c=0,l,u="",f="";function d(){u&&(n===lt.Static?i.push({type:tr.Static,value:u}):n===lt.Param||n===lt.ParamRegExp||n===lt.ParamRegExpEnd?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:tr.Param,value:u,regexp:f,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function m(){u+=l}for(;c<t.length;){if(l=t[c++],l==="\\"&&n!==lt.ParamRegExp){s=n,n=lt.EscapeNext;continue}switch(n){case lt.Static:l==="/"?(u&&d(),o()):l===":"?(d(),n=lt.Param):m();break;case lt.EscapeNext:m(),n=s;break;case lt.Param:l==="("?n=lt.ParamRegExp:LR.test(l)?m():(d(),n=lt.Static,l!=="*"&&l!=="?"&&l!=="+"&&c--);break;case lt.ParamRegExp:l===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+l:n=lt.ParamRegExpEnd:f+=l;break;case lt.ParamRegExpEnd:d(),n=lt.Static,l!=="*"&&l!=="?"&&l!=="+"&&c--,f="";break;default:e("Unknown state");break}}return n===lt.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),d(),o(),r}const jp="[^/]+?",OR={sensitive:!1,strict:!1,start:!0,end:!0};var Bt=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(Bt||{});const xR=/[.+*?^${}()[\]/\\]/g;function MR(t,e){const n=Le({},OR,e),s=[];let r=n.start?"^":"";const i=[];for(const u of t){const f=u.length?[]:[Bt.Root];n.strict&&!u.length&&(r+="/");for(let d=0;d<u.length;d++){const m=u[d];let _=Bt.Segment+(n.sensitive?Bt.BonusCaseSensitive:0);if(m.type===tr.Static)d||(r+="/"),r+=m.value.replace(xR,"\\$&"),_+=Bt.Static;else if(m.type===tr.Param){const{value:b,repeatable:N,optional:L,regexp:H}=m;i.push({name:b,repeatable:N,optional:L});const D=H||jp;if(D!==jp){_+=Bt.BonusCustomRegExp;try{`${D}`}catch(M){throw new Error(`Invalid custom RegExp for param "${b}" (${D}): `+M.message)}}let V=N?`((?:${D})(?:/(?:${D}))*)`:`(${D})`;d||(V=L&&u.length<2?`(?:/${V})`:"/"+V),L&&(V+="?"),r+=V,_+=Bt.Dynamic,L&&(_+=Bt.BonusOptional),N&&(_+=Bt.BonusRepeatable),D===".*"&&(_+=Bt.BonusWildcard)}f.push(_)}s.push(f)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=Bt.BonusStrict}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function c(u){const f=u.match(o),d={};if(!f)return null;for(let m=1;m<f.length;m++){const _=f[m]||"",b=i[m-1];d[b.name]=_&&b.repeatable?_.split("/"):_}return d}function l(u){let f="",d=!1;for(const m of t){(!d||!f.endsWith("/"))&&(f+="/"),d=!1;for(const _ of m)if(_.type===tr.Static)f+=_.value;else if(_.type===tr.Param){const{value:b,repeatable:N,optional:L}=_,H=b in u?u[b]:"";if(mn(H)&&!N)throw new Error(`Provided param "${b}" is an array but it is not repeatable (* or + modifiers)`);const D=mn(H)?H.join("/"):H;if(!D)if(L)m.length<2&&(f.endsWith("/")?f=f.slice(0,-1):d=!0);else throw new Error(`Missing required param "${b}"`);f+=D}}return f||"/"}return{re:o,score:s,keys:i,parse:c,stringify:l}}function FR(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===Bt.Static+Bt.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Bt.Static+Bt.Segment?1:-1:0}function Xy(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=FR(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(Hp(s))return 1;if(Hp(r))return-1}return r.length-s.length}function Hp(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const UR={strict:!1,end:!0,sensitive:!1};function $R(t,e,n){const s=MR(VR(t.path),n),r=Le(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function BR(t,e){const n=[],s=new Map;e=Op(UR,e);function r(d){return s.get(d)}function i(d,m,_){const b=!_,N=qp(d);N.aliasOf=_&&_.record;const L=Op(e,d),H=[N];if("alias"in d){const M=typeof d.alias=="string"?[d.alias]:d.alias;for(const Z of M)H.push(qp(Le({},N,{components:_?_.record.components:N.components,path:Z,aliasOf:_?_.record:N})))}let D,V;for(const M of H){const{path:Z}=M;if(m&&Z[0]!=="/"){const ie=m.record.path,S=ie[ie.length-1]==="/"?"":"/";M.path=m.record.path+(Z&&S+Z)}if(D=$R(M,m,L),_?_.alias.push(D):(V=V||D,V!==D&&V.alias.push(D),b&&d.name&&!zp(D)&&o(d.name)),Zy(D)&&l(D),N.children){const ie=N.children;for(let S=0;S<ie.length;S++)i(ie[S],D,_&&_.children[S])}_=_||D}return V?()=>{o(V)}:Qi}function o(d){if(Qy(d)){const m=s.get(d);m&&(s.delete(d),n.splice(n.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=n.indexOf(d);m>-1&&(n.splice(m,1),d.record.name&&s.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function c(){return n}function l(d){const m=WR(d,n);n.splice(m,0,d),d.record.name&&!zp(d)&&s.set(d.record.name,d)}function u(d,m){let _,b={},N,L;if("name"in d&&d.name){if(_=s.get(d.name),!_)throw Qr(tt.MATCHER_NOT_FOUND,{location:d});L=_.record.name,b=Le(Wp(m.params,_.keys.filter(V=>!V.optional).concat(_.parent?_.parent.keys.filter(V=>V.optional):[]).map(V=>V.name)),d.params&&Wp(d.params,_.keys.map(V=>V.name))),N=_.stringify(b)}else if(d.path!=null)N=d.path,_=n.find(V=>V.re.test(N)),_&&(b=_.parse(N),L=_.record.name);else{if(_=m.name?s.get(m.name):n.find(V=>V.re.test(m.path)),!_)throw Qr(tt.MATCHER_NOT_FOUND,{location:d,currentLocation:m});L=_.record.name,b=Le({},m.params,d.params),N=_.stringify(b)}const H=[];let D=_;for(;D;)H.unshift(D.record),D=D.parent;return{name:L,path:N,params:b,matched:H,meta:HR(H)}}t.forEach(d=>i(d));function f(){n.length=0,s.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:f,getRoutes:c,getRecordMatcher:r}}function Wp(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function qp(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:jR(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function jR(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function zp(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function HR(t){return t.reduce((e,n)=>Le(e,n.meta),{})}function WR(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;Xy(t,e[i])<0?s=i:n=i+1}const r=qR(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function qR(t){let e=t;for(;e=e.parent;)if(Zy(e)&&Xy(t,e)===0)return e}function Zy({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Gp(t){const e=Ct(Dc),n=Ct(Lh),s=Ie(()=>{const l=oe(t.to);return e.resolve(l)}),r=Ie(()=>{const{matched:l}=s.value,{length:u}=l,f=l[u-1],d=n.matched;if(!f||!d.length)return-1;const m=d.findIndex(Kr.bind(null,f));if(m>-1)return m;const _=Kp(l[u-2]);return u>1&&Kp(f)===_&&d[d.length-1].path!==_?d.findIndex(Kr.bind(null,l[u-2])):m}),i=Ie(()=>r.value>-1&&YR(n.params,s.value.params)),o=Ie(()=>r.value>-1&&r.value===n.matched.length-1&&Ky(n.params,s.value.params));function c(l={}){if(QR(l)){const u=e[oe(t.replace)?"replace":"push"](oe(t.to)).catch(Qi);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:s,href:Ie(()=>s.value.href),isActive:i,isExactActive:o,navigate:c}}function zR(t){return t.length===1?t[0]:t}const GR=Bm({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Gp,setup(t,{slots:e}){const n=yo(Gp(t)),{options:s}=Ct(Dc),r=Ie(()=>({[Qp(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Qp(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&zR(e.default(n));return t.custom?i:ju("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),KR=GR;function QR(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function YR(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!mn(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function Kp(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Qp=(t,e,n)=>t??e??n,JR=Bm({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=Ct(yu),r=Ie(()=>t.route||s.value),i=Ct($p,0),o=Ie(()=>{let u=oe(i);const{matched:f}=r.value;let d;for(;(d=f[u])&&!d.components;)u++;return u}),c=Ie(()=>r.value.matched[o.value]);ra($p,Ie(()=>o.value+1)),ra(CR,c),ra(yu,r);const l=me();return fn(()=>[l.value,c.value,t.name],([u,f,d],[m,_,b])=>{f&&(f.instances[d]=u,_&&_!==f&&u&&u===m&&(f.leaveGuards.size||(f.leaveGuards=_.leaveGuards),f.updateGuards.size||(f.updateGuards=_.updateGuards))),u&&f&&(!_||!Kr(f,_)||!m)&&(f.enterCallbacks[d]||[]).forEach(N=>N(u))},{flush:"post"}),()=>{const u=r.value,f=t.name,d=c.value,m=d&&d.components[f];if(!m)return Yp(n.default,{Component:m,route:u});const _=d.props[f],b=_?_===!0?u.params:typeof _=="function"?_(u):_:null,L=ju(m,Le({},b,e,{onVnodeUnmounted:H=>{H.component.isUnmounted&&(d.instances[f]=null)},ref:l}));return Yp(n.default,{Component:L,route:u})||L}}});function Yp(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const XR=JR;function ZR(t){const e=BR(t.routes,t),n=t.parseQuery||AR,s=t.stringifyQuery||Up,r=t.history,i=Ci(),o=Ci(),c=Ci(),l=lE(us);let u=us;Pr&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=Tl.bind(null,U=>""+U),d=Tl.bind(null,aR),m=Tl.bind(null,po);function _(U,te){let X,ae;return Qy(U)?(X=e.getRecordMatcher(U),ae=te):ae=U,e.addRoute(ae,X)}function b(U){const te=e.getRecordMatcher(U);te&&e.removeRoute(te)}function N(){return e.getRoutes().map(U=>U.record)}function L(U){return!!e.getRecordMatcher(U)}function H(U,te){if(te=Le({},te||l.value),typeof U=="string"){const R=Al(n,U,te.path),$=e.resolve({path:R.path},te),j=r.createHref(R.fullPath);return Le(R,$,{params:m($.params),hash:po(R.hash),redirectedFrom:void 0,href:j})}let X;if(U.path!=null)X=Le({},U,{path:Al(n,U.path,te.path).path});else{const R=Le({},U.params);for(const $ in R)R[$]==null&&delete R[$];X=Le({},U,{params:d(R)}),te.params=d(te.params)}const ae=e.resolve(X,te),Te=U.hash||"";ae.params=f(m(ae.params));const w=uR(s,Le({},U,{hash:rR(Te),path:ae.path})),C=r.createHref(w);return Le({fullPath:w,hash:Te,query:s===Up?SR(U.query):U.query||{}},ae,{redirectedFrom:void 0,href:C})}function D(U){return typeof U=="string"?Al(n,U,l.value.path):Le({},U)}function V(U,te){if(u!==U)return Qr(tt.NAVIGATION_CANCELLED,{from:te,to:U})}function M(U){return S(U)}function Z(U){return M(Le(D(U),{replace:!0}))}function ie(U,te){const X=U.matched[U.matched.length-1];if(X&&X.redirect){const{redirect:ae}=X;let Te=typeof ae=="function"?ae(U,te):ae;return typeof Te=="string"&&(Te=Te.includes("?")||Te.includes("#")?Te=D(Te):{path:Te},Te.params={}),Le({query:U.query,hash:U.hash,params:Te.path!=null?{}:U.params},Te)}}function S(U,te){const X=u=H(U),ae=l.value,Te=U.state,w=U.force,C=U.replace===!0,R=ie(X,ae);if(R)return S(Le(D(R),{state:typeof R=="object"?Le({},Te,R.state):Te,force:w,replace:C}),te||X);const $=X;$.redirectedFrom=te;let j;return!w&&hR(s,ae,X)&&(j=Qr(tt.NAVIGATION_DUPLICATED,{to:$,from:ae}),Gt(ae,ae,!0,!1)),(j?Promise.resolve(j):I($,ae)).catch(F=>Mn(F)?Mn(F,tt.NAVIGATION_GUARD_REDIRECT)?F:_n(F):Re(F,$,ae)).then(F=>{if(F){if(Mn(F,tt.NAVIGATION_GUARD_REDIRECT))return S(Le({replace:C},D(F.to),{state:typeof F.to=="object"?Le({},Te,F.to.state):Te,force:w}),te||$)}else F=T($,ae,!0,C,Te);return A($,ae,F),F})}function v(U,te){const X=V(U,te);return X?Promise.reject(X):Promise.resolve()}function y(U){const te=an.values().next().value;return te&&typeof te.runWithContext=="function"?te.runWithContext(U):U()}function I(U,te){let X;const[ae,Te,w]=bR(U,te);X=Cl(ae.reverse(),"beforeRouteLeave",U,te);for(const R of ae)R.leaveGuards.forEach($=>{X.push(ps($,U,te))});const C=v.bind(null,U,te);return X.push(C),Rt(X).then(()=>{X=[];for(const R of i.list())X.push(ps(R,U,te));return X.push(C),Rt(X)}).then(()=>{X=Cl(Te,"beforeRouteUpdate",U,te);for(const R of Te)R.updateGuards.forEach($=>{X.push(ps($,U,te))});return X.push(C),Rt(X)}).then(()=>{X=[];for(const R of w)if(R.beforeEnter)if(mn(R.beforeEnter))for(const $ of R.beforeEnter)X.push(ps($,U,te));else X.push(ps(R.beforeEnter,U,te));return X.push(C),Rt(X)}).then(()=>(U.matched.forEach(R=>R.enterCallbacks={}),X=Cl(w,"beforeRouteEnter",U,te,y),X.push(C),Rt(X))).then(()=>{X=[];for(const R of o.list())X.push(ps(R,U,te));return X.push(C),Rt(X)}).catch(R=>Mn(R,tt.NAVIGATION_CANCELLED)?R:Promise.reject(R))}function A(U,te,X){c.list().forEach(ae=>y(()=>ae(U,te,X)))}function T(U,te,X,ae,Te){const w=V(U,te);if(w)return w;const C=te===us,R=Pr?history.state:{};X&&(ae||C?r.replace(U.fullPath,Le({scroll:C&&R&&R.scroll},Te)):r.push(U.fullPath,Te)),l.value=U,Gt(U,te,X,C),_n()}let E;function be(){E||(E=r.listen((U,te,X)=>{if(!cn.listening)return;const ae=H(U),Te=ie(ae,cn.currentRoute.value);if(Te){S(Le(Te,{replace:!0,force:!0}),ae).catch(Qi);return}u=ae;const w=l.value;Pr&&vR(Fp(w.fullPath,X.delta),Nc()),I(ae,w).catch(C=>Mn(C,tt.NAVIGATION_ABORTED|tt.NAVIGATION_CANCELLED)?C:Mn(C,tt.NAVIGATION_GUARD_REDIRECT)?(S(Le(D(C.to),{force:!0}),ae).then(R=>{Mn(R,tt.NAVIGATION_ABORTED|tt.NAVIGATION_DUPLICATED)&&!X.delta&&X.type===gu.pop&&r.go(-1,!1)}).catch(Qi),Promise.reject()):(X.delta&&r.go(-X.delta,!1),Re(C,ae,w))).then(C=>{C=C||T(ae,w,!1),C&&(X.delta&&!Mn(C,tt.NAVIGATION_CANCELLED)?r.go(-X.delta,!1):X.type===gu.pop&&Mn(C,tt.NAVIGATION_ABORTED|tt.NAVIGATION_DUPLICATED)&&r.go(-1,!1)),A(ae,w,C)}).catch(Qi)}))}let Ye=Ci(),Me=Ci(),ve;function Re(U,te,X){_n(U);const ae=Me.list();return ae.length?ae.forEach(Te=>Te(U,te,X)):console.error(U),Promise.reject(U)}function Ht(){return ve&&l.value!==us?Promise.resolve():new Promise((U,te)=>{Ye.add([U,te])})}function _n(U){return ve||(ve=!U,be(),Ye.list().forEach(([te,X])=>U?X(U):te()),Ye.reset()),U}function Gt(U,te,X,ae){const{scrollBehavior:Te}=t;if(!Pr||!Te)return Promise.resolve();const w=!X&&ER(Fp(U.fullPath,0))||(ae||!X)&&history.state&&history.state.scroll||null;return Lu().then(()=>Te(U,te,w)).then(C=>C&&yR(C)).catch(C=>Re(C,U,te))}const yt=U=>r.go(U);let Vn;const an=new Set,cn={currentRoute:l,listening:!0,addRoute:_,removeRoute:b,clearRoutes:e.clearRoutes,hasRoute:L,getRoutes:N,resolve:H,options:t,push:M,replace:Z,go:yt,back:()=>yt(-1),forward:()=>yt(1),beforeEach:i.add,beforeResolve:o.add,afterEach:c.add,onError:Me.add,isReady:Ht,install(U){U.component("RouterLink",KR),U.component("RouterView",XR),U.config.globalProperties.$router=cn,Object.defineProperty(U.config.globalProperties,"$route",{enumerable:!0,get:()=>oe(l)}),Pr&&!Vn&&l.value===us&&(Vn=!0,M(r.location).catch(ae=>{}));const te={};for(const ae in us)Object.defineProperty(te,ae,{get:()=>l.value[ae],enumerable:!0});U.provide(Dc,cn),U.provide(Lh,bm(te)),U.provide(yu,l);const X=U.unmount;an.add(U),U.unmount=function(){an.delete(U),an.size<1&&(u=us,E&&E(),E=null,l.value=us,Vn=!1,ve=!1),X()}}};function Rt(U){return U.reduce((te,X)=>te.then(()=>y(X)),Promise.resolve())}return cn}function gn(){return Ct(Dc)}function Bs(t){return Ct(Lh)}const re=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n},e2={},t2={viewBox:"0 0 576 512",xmlns:"http://www.w3.org/2000/svg"};function n2(t,e){return O(),K("svg",t2,[...e[0]||(e[0]=[x("path",{fill:"currentColor",d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},null,-1)])])}const s2=re(e2,[["render",n2]]),r2=["type"],i2={__name:"ButtonBlue",props:{type:{type:String,default:"button"},class:{type:String,default:""},size:{type:Number,default:16},border:{type:Boolean,default:!1},isOpen:{type:Boolean,default:!1}},setup(t){const e=t,n=Ie(()=>({"--svg-size":`${e.size}px`}));return(s,r)=>(O(),K("button",{style:_o(n.value),type:e.type,class:Ge(["button",e.class,{border:e.border,isOpen:e.isOpen}])},[Ll(s.$slots,"default",{},void 0)],14,r2))}},Zt=re(i2,[["__scopeId","data-v-32682832"]]),o2={__name:"HomeButton",setup(t){const e=gn(),n=xe(),s=()=>{n.pageNum=1,n.genreIdStore=null,e.push({name:"home"})};return(r,i)=>(O(),Ue(Zt,{onClick:s,size:18},{default:je(()=>[Q(s2),i[0]||(i[0]=Qe("Home",-1))]),_:1}))}},a2={},c2={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 496 512"};function l2(t,e){return O(),K("svg",c2,[...e[0]||(e[0]=[x("path",{fill:"currentColor",d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"},null,-1)])])}const u2=re(a2,[["render",l2]]),h2={name:"IconGoogle"},f2={class:"icon-google"};function d2(t,e,n,s,r,i){return O(),K("span",f2)}const p2=re(h2,[["render",d2],["__scopeId","data-v-e8f2dc2a"]]),m2={class:"registration--form"},g2={key:0,class:"err-string"},_2={class:"btns"},y2={__name:"RegistrationComponent",emits:["setForm"],setup(t,{emit:e}){const n=e,s=xe(),r=me(""),i=me(""),o=me(""),c=me(""),l=async()=>{await s.createAuthWithEmailAndPassword({email:r.value,password:i.value,user_name:o.value,api_key:c.value})},u=()=>{n("setForm","sign")},f=()=>{console.warn("ok")};return(d,m)=>(O(),K("div",m2,[m[5]||(m[5]=x("h3",{class:"name"},"",-1)),x("p",null,[gt(x("input",{type:"text",placeholder:"","onUpdate:modelValue":m[0]||(m[0]=_=>r.value=_)},null,512),[[jn,r.value]])]),x("p",null,[gt(x("input",{type:"text",placeholder:"","onUpdate:modelValue":m[1]||(m[1]=_=>o.value=_)},null,512),[[jn,o.value]])]),x("p",null,[gt(x("input",{type:"text",placeholder:"Api ","onUpdate:modelValue":m[2]||(m[2]=_=>c.value=_)},null,512),[[jn,c.value]]),m[4]||(m[4]=x("small",null,[x("a",{target:"_blank",href:"https://kinopoiskapiunofficial.tech/signup"},"  API")],-1))]),x("p",null,[gt(x("input",{type:"password",placeholder:"Password","onUpdate:modelValue":m[3]||(m[3]=_=>i.value=_)},null,512),[[jn,i.value]])]),oe(s).errorMessage?(O(),K("p",g2,nt(oe(s).errorMessage),1)):Ke("",!0),x("div",_2,[x("button",{class:"reg",onClick:Nn(l,["prevent"])},""),x("button",{class:"sign",onClick:Nn(u,["prevent"])},""),Q(p2,{onClick:f})])]))}},v2=re(y2,[["__scopeId","data-v-08b0bcdd"]]),E2={class:"registration--form"},w2={key:0,class:"err-string"},I2={class:"btns"},T2={__name:"SignInComponent",emits:["setForm"],setup(t,{emit:e}){const n=e,s=me(""),r=me(""),i=xe(),o=async()=>{await i.authWithEmailAndPassword({email:s.value,password:r.value})},c=()=>{n("setForm","reg")};return(l,u)=>(O(),K("div",E2,[u[2]||(u[2]=x("h3",{class:"name"},"",-1)),x("p",null,[gt(x("input",{type:"text",placeholder:"Email","onUpdate:modelValue":u[0]||(u[0]=f=>s.value=f)},null,512),[[jn,s.value]])]),x("p",null,[gt(x("input",{type:"password",placeholder:"Password","onUpdate:modelValue":u[1]||(u[1]=f=>r.value=f)},null,512),[[jn,r.value]])]),oe(i).errorMessage?(O(),K("p",w2,nt(oe(i).errorMessage),1)):Ke("",!0),x("div",I2,[x("button",{class:"sign",onClick:Nn(o,["prevent"])},""),x("button",{class:"reg",onClick:Nn(c,["prevent"])},"")])]))}},A2=re(T2,[["__scopeId","data-v-a2d42fb1"]]),S2={},C2={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640"};function b2(t,e){return O(),K("svg",C2,[...e[0]||(e[0]=[x("path",{fill:"currentColor",d:"M535.6 85.7C513.7 63.8 478.3 63.8 456.4 85.7L432 110.1L529.9 208L554.3 183.6C576.2 161.7 576.2 126.3 554.3 104.4L535.6 85.7zM236.4 305.7C230.3 311.8 225.6 319.3 222.9 327.6L193.3 416.4C190.4 425 192.7 434.5 199.1 441C205.5 447.5 215 449.7 223.7 446.8L312.5 417.2C320.7 414.5 328.2 409.8 334.4 403.7L496 241.9L398.1 144L236.4 305.7zM160 128C107 128 64 171 64 224L64 480C64 533 107 576 160 576L416 576C469 576 512 533 512 480L512 384C512 366.3 497.7 352 480 352C462.3 352 448 366.3 448 384L448 480C448 497.7 433.7 512 416 512L160 512C142.3 512 128 497.7 128 480L128 224C128 206.3 142.3 192 160 192L256 192C273.7 192 288 177.7 288 160C288 142.3 273.7 128 256 128L160 128z"},null,-1)])])}const R2=re(S2,[["render",b2]]),P2={class:"registration--form"},k2={class:"heading"},N2={class:"name"},D2={key:0,class:"container"},L2={class:"btns"},V2={__name:"LogoutComponent",setup(t){const e=xe(),n=me(!1),s=me(e.user.name),r=me(e.apiKey),i=async()=>{s.value.length<3||(n.value=!1,await e.editAuthNameOrApiKey({userName:s.value,apiKey:r.value}))},o=()=>{n.value=!n.value},c=async()=>{await e.authLogout()};return(l,u)=>(O(),K("div",P2,[x("h3",k2,[u[2]||(u[2]=Qe("   : ",-1)),x("strong",N2,nt(oe(e).user.name),1),x("button",{class:"edit",onClick:o},[Q(R2)])]),n.value?(O(),K("div",D2,[x("p",null,[gt(x("input",{type:"text",placeholder:"","onUpdate:modelValue":u[0]||(u[0]=f=>s.value=f)},null,512),[[jn,s.value]])]),x("p",null,[gt(x("input",{type:"text",placeholder:"Api ","onUpdate:modelValue":u[1]||(u[1]=f=>r.value=f)},null,512),[[jn,r.value]])]),x("button",{onClick:i},"")])):Ke("",!0),x("div",L2,[x("button",{class:"reg",onClick:Nn(c,["prevent"])},"")])]))}},O2=re(V2,[["__scopeId","data-v-a4df64c2"]]),x2={__name:"PopupContainer",props:{width:{type:String,default:"auto"},position:{type:String,default:"left",validator:t=>["left","right","center"].includes(t)},maxWidth:{type:String,default:"400px"},buttonClass:{type:[String,Array,Object],default:""}},emits:["open","close","toggle"],setup(t,{expose:e,emit:n}){const s=t,r=n,i=me(!1),o=me(null),c=Ie(()=>({width:s.width,maxWidth:s.maxWidth})),l=()=>{i.value=!i.value,r("toggle",i.value),i.value?r("open"):r("close")},u=()=>{i.value&&(i.value=!1,r("close"))},f=m=>{i.value&&o.value&&!o.value.contains(m.target)&&u()},d=m=>{m.key==="Escape"&&i.value&&u()};return zt(()=>{document.addEventListener("click",f),document.addEventListener("keydown",d)}),Ou(()=>{document.removeEventListener("click",f),document.removeEventListener("keydown",d)}),e({open:()=>{i.value=!0,r("open")},close:u,toggle:l}),(m,_)=>(O(),K("div",{class:"popup-container",ref_key:"containerRef",ref:o},[Q(Zt,{onClick:l,size:30,class:Ge(["trigger",t.buttonClass]),isOpen:i.value},{default:je(()=>[Ll(m.$slots,"icon",{},void 0,!0)]),_:3},8,["class","isOpen"]),Q(Lw,{name:"popup"},{default:je(()=>[i.value?(O(),K("div",{key:0,class:Ge(["popup-content",`position-${t.position}`]),style:_o(c.value)},[Ll(m.$slots,"content",{},void 0,!0)],6)):Ke("",!0)]),_:3})],512))}},Vh=re(x2,[["__scopeId","data-v-a3a927bb"]]),M2={class:"registration-wrap--pop"},F2={__name:"RegistrationWrap",setup(t){const e=xe(),n=me("sign"),s=Ct("emitter"),r=o=>{e.errorMessage="",n.value=o},i=()=>{s.emit("setUserData")};return zt(async()=>{await e.authChange(i),await s.emit("setUserData")}),(o,c)=>(O(),Ue(Vh,{position:"right",maxWidth:"auto",class:"popup"},{icon:je(()=>[Q(u2,{class:"icon"})]),content:je(()=>[x("div",M2,[oe(e).user?(O(),Ue(O2,{key:0})):n.value==="sign"?(O(),Ue(A2,{key:1,onSetForm:r})):n.value==="reg"?(O(),Ue(v2,{key:2,onSetForm:r})):Ke("",!0)])]),_:1}))}},U2=re(F2,[["__scopeId","data-v-89c6b8a9"]]),$2={},B2={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640"};function j2(t,e){return O(),K("svg",B2,[...e[0]||(e[0]=[x("path",{fill:"currentColor",d:"M96 160C96 124.7 124.7 96 160 96L480 96C515.3 96 544 124.7 544 160L544 480C544 515.3 515.3 544 480 544L160 544C124.7 544 96 515.3 96 480L96 160zM144 432L144 464C144 472.8 151.2 480 160 480L192 480C200.8 480 208 472.8 208 464L208 432C208 423.2 200.8 416 192 416L160 416C151.2 416 144 423.2 144 432zM448 416C439.2 416 432 423.2 432 432L432 464C432 472.8 439.2 480 448 480L480 480C488.8 480 496 472.8 496 464L496 432C496 423.2 488.8 416 480 416L448 416zM144 304L144 336C144 344.8 151.2 352 160 352L192 352C200.8 352 208 344.8 208 336L208 304C208 295.2 200.8 288 192 288L160 288C151.2 288 144 295.2 144 304zM448 288C439.2 288 432 295.2 432 304L432 336C432 344.8 439.2 352 448 352L480 352C488.8 352 496 344.8 496 336L496 304C496 295.2 488.8 288 480 288L448 288zM144 176L144 208C144 216.8 151.2 224 160 224L192 224C200.8 224 208 216.8 208 208L208 176C208 167.2 200.8 160 192 160L160 160C151.2 160 144 167.2 144 176zM448 160C439.2 160 432 167.2 432 176L432 208C432 216.8 439.2 224 448 224L480 224C488.8 224 496 216.8 496 208L496 176C496 167.2 488.8 160 480 160L448 160z"},null,-1)])])}const ev=re($2,[["render",j2]]),H2={__name:"LastViewButton",setup(t){const e=gn(),n=xe(),s=()=>{n.pageNum=1,n.genreIdStore=null,e.push({name:"lastViews"})};return(r,i)=>(O(),Ue(Zt,{onClick:s,size:26},{default:je(()=>[Q(ev)]),_:1}))}},W2={},q2={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"};function z2(t,e){return O(),K("svg",q2,[...e[0]||(e[0]=[x("path",{fill:"currentColor",d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},null,-1)])])}const Lc=re(W2,[["render",z2]]),G2={__name:"FavoriteButton",setup(t){const e=gn(),n=xe(),s=Ie(()=>n.favoriteList.length),r=Ie(()=>n.user===null?"disabled":""),i=()=>{n.pageNum=1,n.genreIdStore=null,e.push({name:"favorite"})};return(o,c)=>(O(),Ue(Zt,{onClick:i,class:Ge(r.value),size:18},{default:je(()=>[Q(Lc),Qe(nt(s.value),1)]),_:1},8,["class"]))}},K2=re(G2,[["__scopeId","data-v-d99dd994"]]),Q2={__name:"SearchPopup",setup(t){const e=xe(),n=gn(),s=i=>{e.pageNum=1,e.searchQueryStore=i,n.push({name:"searchPage",query:{q:e.searchQueryStore}}),e.setShowLastSearchList(!1)},r=()=>{e.setShowLastSearchList(!1)};return(i,o)=>oe(e).lastSearchList.length?(O(),K("div",{key:0,class:Ge(["search-popup",{opened:oe(e).isShowLastSearchList}])},[x("button",{type:"button",class:"close-list",onClick:r},""),x("ul",null,[(O(!0),K(De,null,Ps(oe(e).lastSearchList,c=>(O(),K("li",{key:c.id},[Q(Zt,{onClick:l=>s(c.value)},{default:je(()=>[Qe(nt(c.value),1)]),_:2},1032,["onClick"])]))),128))])],2)):Ke("",!0)}},Y2=re(Q2,[["__scopeId","data-v-af99dc44"]]),J2={class:"input-wrap"},X2={__name:"SearchForm",props:{visibleSearch:{type:Boolean,default:!1}},setup(t){const e=t,n=Bs(),s=gn(),r=xe();zt(()=>{r.searchQueryStore=i.value});const i=Ie(()=>n.query.q),o=me(null),c=async()=>{r.addLastSearchList(r.searchQueryStore),r.pageNum=1,s.push({name:"searchPage",query:r.searchQueryWithGenre()}),r.setShowLastSearchList(!1)},l=()=>{r.setShowLastSearchList(!0)},u=()=>{r.searchQueryStore="",o.value.focus()};return(f,d)=>(O(),K("form",{action:"#",class:Ge(["search-form",{show:e.visibleSearch}]),onSubmit:Nn(c,["prevent"])},[x("div",J2,[gt(x("input",{ref_key:"searchInput",ref:o,autocomplete:"off",type:"text",onKeyup:nI(c,["enter"]),onFocus:l,placeholder:"  / ID ","onUpdate:modelValue":d[0]||(d[0]=m=>oe(r).searchQueryStore=m),name:"keyword"},null,544),[[jn,oe(r).searchQueryStore,void 0,{trim:!0}]]),Q(Zt,{class:Ge(["clear-input",{show:oe(r).searchQueryStore}]),onClick:u},{default:je(()=>[...d[1]||(d[1]=[Qe("",-1)])]),_:1},8,["class"])]),Q(Zt,{type:"submit",border:!0},{default:je(()=>[...d[2]||(d[2]=[Qe("",-1)])]),_:1}),Q(Y2)],34))}},Z2=re(X2,[["__scopeId","data-v-84c0a647"]]),eP={},tP={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"};function nP(t,e){return O(),K("svg",tP,[...e[0]||(e[0]=[x("path",{fill:"currentColor",d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM184 296c0 13.3 10.7 24 24 24s24-10.7 24-24l0-64 64 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-64 0 0-64c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 64-64 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l64 0 0 64z"},null,-1)])])}const sP=re(eP,[["render",nP]]),rP={},iP={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"};function oP(t,e){return O(),K("svg",iP,[...e[0]||(e[0]=[x("path",{fill:"currentColor",d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM136 184c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0z"},null,-1)])])}const aP=re(rP,[["render",oP]]),cP={},lP={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640"};function uP(t,e){return O(),K("svg",lP,[...e[0]||(e[0]=[x("path",{fill:"currentColor",d:"M96 320C96 289.1 121.1 264 152 264C182.9 264 208 289.1 208 320C208 350.9 182.9 376 152 376C121.1 376 96 350.9 96 320zM264 320C264 289.1 289.1 264 320 264C350.9 264 376 289.1 376 320C376 350.9 350.9 376 320 376C289.1 376 264 350.9 264 320zM488 264C518.9 264 544 289.1 544 320C544 350.9 518.9 376 488 376C457.1 376 432 350.9 432 320C432 289.1 457.1 264 488 264z"},null,-1)])])}const hP=re(cP,[["render",uP]]),fP={},dP={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"};function pP(t,e){return O(),K("svg",dP,[...e[0]||(e[0]=[x("path",{fill:"currentColor",d:"M142.9 142.9c-17.5 17.5-30.1 38-37.8 59.8c-5.9 16.7-24.2 25.4-40.8 19.5s-25.4-24.2-19.5-40.8C55.6 150.7 73.2 122 97.6 97.6c87.2-87.2 228.3-87.5 315.8-1L455 55c6.9-6.9 17.2-8.9 26.2-5.2s14.8 12.5 14.8 22.2l0 128c0 13.3-10.7 24-24 24l-8.4 0c0 0 0 0 0 0L344 224c-9.7 0-18.5-5.8-22.2-14.8s-1.7-19.3 5.2-26.2l41.1-41.1c-62.6-61.5-163.1-61.2-225.3 1zM16 312c0-13.3 10.7-24 24-24l7.6 0 .7 0L168 288c9.7 0 18.5 5.8 22.2 14.8s1.7 19.3-5.2 26.2l-41.1 41.1c62.6 61.5 163.1 61.2 225.3-1c17.5-17.5 30.1-38 37.8-59.8c5.9-16.7 24.2-25.4 40.8-19.5s25.4 24.2 19.5 40.8c-10.8 30.6-28.4 59.3-52.9 83.8c-87.2 87.2-228.3 87.5-315.8 1L57 457c-6.9 6.9-17.2 8.9-26.2 5.2S16 449.7 16 440l0-119.6 0-.7 0-7.6z"},null,-1)])])}const mP=re(fP,[["render",pP]]),gP={},_P={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640"};function yP(t,e){return O(),K("svg",_P,[...e[0]||(e[0]=[x("path",{fill:"currentColor",d:"M64 320C64 178.6 178.6 64 320 64C461.4 64 576 178.6 576 320C576 461.4 461.4 576 320 576C178.6 576 64 461.4 64 320zM252.3 211.1C244.7 215.3 240 223.4 240 232L240 408C240 416.7 244.7 424.7 252.3 428.9C259.9 433.1 269.1 433 276.6 428.4L420.6 340.4C427.7 336 432.1 328.3 432.1 319.9C432.1 311.5 427.7 303.8 420.6 299.4L276.6 211.4C269.2 206.9 259.9 206.7 252.3 210.9z"},null,-1)])])}const tv=re(gP,[["render",yP]]),vP={},EP={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640"};function wP(t,e){return O(),K("svg",EP,[...e[0]||(e[0]=[x("path",{fill:"currentColor",d:"M320 64C461.4 64 576 178.6 576 320C576 461.4 461.4 576 320 576C178.6 576 64 461.4 64 320C64 178.6 178.6 64 320 64zM296 184L296 320C296 328 300 335.5 306.7 340L402.7 404C413.7 411.4 428.6 408.4 436 397.3C443.4 386.2 440.4 371.4 429.3 364L344 307.2L344 184C344 170.7 333.3 160 320 160C306.7 160 296 170.7 296 184z"},null,-1)])])}const nv=re(vP,[["render",wP]]),IP={},TP={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640"};function AP(t,e){return O(),K("svg",TP,[...e[0]||(e[0]=[x("path",{fill:"currentColor",d:"M533.6 96.5C523.3 88.1 508.2 89.7 499.8 100C491.4 110.3 493 125.4 503.3 133.8C557.5 177.8 592 244.8 592 320C592 395.2 557.5 462.2 503.3 506.3C493 514.7 491.5 529.8 499.8 540.1C508.1 550.4 523.3 551.9 533.6 543.6C598.5 490.7 640 410.2 640 320C640 229.8 598.5 149.2 533.6 96.5zM473.1 171C462.8 162.6 447.7 164.2 439.3 174.5C430.9 184.8 432.5 199.9 442.8 208.3C475.3 234.7 496 274.9 496 320C496 365.1 475.3 405.3 442.8 431.8C432.5 440.2 431 455.3 439.3 465.6C447.6 475.9 462.8 477.4 473.1 469.1C516.3 433.9 544 380.2 544 320.1C544 260 516.3 206.3 473.1 171.1zM412.6 245.5C402.3 237.1 387.2 238.7 378.8 249C370.4 259.3 372 274.4 382.3 282.8C393.1 291.6 400 305 400 320C400 335 393.1 348.4 382.3 357.3C372 365.7 370.5 380.8 378.8 391.1C387.1 401.4 402.3 402.9 412.6 394.6C434.1 376.9 448 350.1 448 320C448 289.9 434.1 263.1 412.6 245.5zM80 416L128 416L262.1 535.2C268.5 540.9 276.7 544 285.2 544C304.4 544 320 528.4 320 509.2L320 130.8C320 111.6 304.4 96 285.2 96C276.7 96 268.5 99.1 262.1 104.8L128 224L80 224C53.5 224 32 245.5 32 272L32 368C32 394.5 53.5 416 80 416z"},null,-1)])])}const sv=re(IP,[["render",AP]]),Ir={ArrowDown:"ArrowDown",ArrowUp:"ArrowUp",ArrowRight:"ArrowRight",ArrowLeft:"ArrowLeft",Enter:"Enter",NumpadEnter:"Enter"},bl={desktop:1024,tablet:768,mobile:480},Jp={Alloha:(t,e)=>`https://harald-as.newplayjj.com/?kp=${t}&token=${e}`,Collaps:t=>`https://api.atomics.ws/embed/kp/${t}`,VideoCDN:t=>`https://p.lumex.space/j3mqebEPqCLB?domain=nayteruz.github.io&kp_id=${t}`,Coll:async t=>{const e=`https://api.bhcesh.me/list?token=4c250f7ac0a8c8a658c789186b9a58a5&kinopoisk_id=${t}`;try{const s=await(await fetch(e)).json();if(Array.isArray(s.results)&&s.results.length>0&&s.results?.[0].iframe_url)return s.results?.[0].iframe_url}catch(n){console.error("HDVB error:",n)}return null},kodi:async t=>{const e=`https://kodikapi.com/search?token=41dd95f84c21719b09d6c71182237a25&kinopoisk_id=${t}`;try{const s=await(await fetch(e)).json();if(Array.isArray(s.results)&&s.results.length>0&&s.results?.[0].link)return s.results?.[0].link}catch(n){console.error("HDVB error:",n)}return null},HDVB:async(t,e)=>{const n=`https://apivb.com/api/videos.json?id_kp=${t}&token=${e}`;try{const r=await(await fetch(n)).json();if(Array.isArray(r)&&r.length>0&&r[0].iframe_url)return r[0].iframe_url}catch(s){console.error("HDVB error:",s)}return null},Kodik:t=>`https:////kodik.cc/find-player?kinopoiskID=${t}`,:t=>`https://api.atomics.ws/embed/trailer-kp/${t}`},oi={MAIN:"  ",LAST_VIEWS:" ",FAVORITE:" /  ",WATCHING:" ",WATCH_LIST:"  ",WAIT_LIST:"    "},ot={HOME:{path:"/",name:"home"},FILM_PAGE:{path:"/film/:id",name:"filmPage"},SEARCH:{path:"/search",name:"searchPage"},FAVORITES:{path:"/favorites",name:"favorite"},LAST_VIEWS:{path:"/last-views",name:"lastViews"},WATCHING:{path:"/watching",name:"watchingNow"},WATCH_LIST:{path:"/watch-list",name:"watchList"},WAITING_LIST:{path:"/waiting-list",name:"waitingList"}},SP={class:"list"},CP={__name:"MenuPopup",setup(t){const e=()=>{document.location.reload()};return(n,s)=>{const r=Mu("router-link");return O(),Ue(Vh,{class:"popup",position:"right"},{icon:je(()=>[Q(hP)]),content:je(()=>[x("ul",SP,[x("li",null,[Q(r,{to:oe(ot).WATCHING.path,class:"item"},{default:je(()=>[Q(tv),s[0]||(s[0]=Qe(" ",-1))]),_:1},8,["to"])]),x("li",null,[Q(r,{to:oe(ot).WATCH_LIST.path,class:"item"},{default:je(()=>[Q(sv),s[1]||(s[1]=Qe(" ",-1))]),_:1},8,["to"])]),x("li",null,[Q(r,{to:oe(ot).WAITING_LIST.path,class:"item"},{default:je(()=>[Q(nv),s[2]||(s[2]=Qe(" ",-1))]),_:1},8,["to"])]),x("li",null,[Q(r,{to:oe(ot).LAST_VIEWS.path,class:"item"},{default:je(()=>[Q(ev),s[3]||(s[3]=Qe("",-1))]),_:1},8,["to"])]),x("li",null,[x("div",{class:"item",onClick:e},[Q(mP),s[4]||(s[4]=Qe(" ",-1))])])])]),_:1})}}},bP=re(CP,[["__scopeId","data-v-eb4ff941"]]),RP={__name:"HeaderFilm",setup(t){const e=Bs(),n=Ie(()=>e.query.q),s=me(!!(n.value|e.name==="searchPage")),r=()=>{s.value=!s.value};return(i,o)=>(O(),K("header",null,[Q(o2),Q(H2),Q(K2),Q(Z2,{visibleSearch:s.value},null,8,["visibleSearch"]),Q(U2),Q(bP),Q(Zt,{onClick:r,size:20,class:Ge(["search-popup-btn",{opened:s.value}])},{default:je(()=>[s.value?(O(),Ue(aP,{key:0})):(O(),Ue(sP,{key:1}))]),_:1},8,["class"])]))}},PP=re(RP,[["__scopeId","data-v-0948d27c"]]),kP={class:"genres-wrap"},NP={class:"genres"},DP=["onClick"],LP={__name:"GenreList",setup(t){const e=Bs(),n=gn(),s=xe(),r=Ie(()=>e.query.genres),i=c=>{+s.genreIdStore==+c?s.genreIdStore=null:s.genreIdStore=c,s.pageNum=1,n.push({name:"searchPage",query:s.searchQueryWithGenre()})};async function o(){await s.getGenreList()}return zt(async()=>{s.genreIdStore=r.value,await o()}),(c,l)=>(O(),K("div",kP,[x("ul",NP,[(O(!0),K(De,null,Ps(oe(s).genreListStore,u=>(O(),K("li",{class:Ge({active:+u.id==+oe(s).genreIdStore}),key:u.id},[x("span",{onClick:f=>i(u.id)},nt(u.genre),9,DP)],2))),128))])]))}},VP=re(LP,[["__scopeId","data-v-4244b635"]]),OP={__name:"ToTop",setup(t){const e=()=>{window.scrollTo({top:0,behavior:"smooth"})};return(n,s)=>(O(),K("button",{class:"button",onClick:e}))}},xP=re(OP,[["__scopeId","data-v-9be23ada"]]),MP={__name:"NavigationByKeys",setup(t){const e=gn(),n=xe(),s=me(0),r=me(n.films.length),i=me(e.currentRoute.value.href||document.location.pathname),o=()=>{n.currentFocusIndex===-1?n.currentFocusIndex=0:n.currentFocusIndex=Math.min(r.value-1,n.currentFocusIndex+s.value)},c=()=>{n.currentFocusIndex=Math.max(0,n.currentFocusIndex-s.value)},l=()=>{n.currentFocusIndex=Math.min(r.value-1,n.currentFocusIndex+1)},u=()=>{n.currentFocusIndex=Math.max(0,n.currentFocusIndex-1)},f=()=>{const _=n.currentFocusIndex;if(_===-1)return;const b=n.films[_].filmId||n.films[_].kinopoiskId;e.push(`/film/${b}`)},d=_=>{switch(_.key){case Ir.ArrowDown:o();break;case Ir.ArrowUp:c();break;case Ir.ArrowRight:l();break;case Ir.ArrowLeft:u();break;case Ir.Enter:case Ir.NumpadEnter:f();break}},m=()=>{window.innerWidth>bl.desktop?s.value=5:window.innerWidth>bl.tablet?s.value=4:window.innerWidth>bl.mobile?s.value=3:s.value=2};return fn(()=>n.films,_=>{r.value=_.length}),zt(()=>{window.removeEventListener("keydown",d),e.currentRoute.value.name!=="filmPage"&&(window.addEventListener("keydown",d),setTimeout(()=>{if(e.currentRoute.value.name!=="filmPage")if(window.scrollY===0){const _=e.currentRoute.value.href||document.location.pathname;n.focusIds={...n.focusIds,[_]:-1},n.currentFocusIndex=-1}else n.currentFocusIndex=n.focusIds[i.value]||-1},1),m())}),Yr(()=>{window.removeEventListener("keydown",d),e.currentRoute.value&&(n.focusIds={...n.focusIds,[i.value]:n.currentFocusIndex})}),(_,b)=>(O(),K("div"))}},FP={class:"wrapper"},UP={class:"content"},$P={__name:"App",setup(t){const e=xe(),n=s=>{s.target.closest(".search-form")||e.setShowLastSearchList(!1)};return zt(()=>{document.addEventListener("click",n)}),Yr(()=>{document.removeEventListener("click",n)}),(s,r)=>{const i=Mu("RouterView");return O(),K("div",FP,[(O(),Ue(PP,{key:s.$route.fullPath})),Q(VP),x("main",UP,[Q(i,null,{default:je(({Component:o})=>[(O(),Ue(bE,{include:"MainList"},[(O(),Ue(FE(o),{key:s.$route.fullPath}))],1024))]),_:1})]),Q(xP),(O(),Ue(MP,{key:s.$route.fullPath}))])}}},rv=t=>{const e=t?.nameRu||t?.nameEn||t?.nameOriginal||" ",n=t?.year||"";return`${e} ${n?`(${n})`:""}`},BP=t=>{const e=t?.rating||t?.ratingKinopoisk||t?.ratingImdb;return typeof e=="number"?e.toFixed(1):""},Lo=(t,e)=>!Array.isArray(t)||t.length===0||!e?!1:new Map(t.map(s=>[Number(s?.kinopoiskId??s?.filmId),s])).has(Number(e)),jP={class:"favorite-icon"},HP={key:0,class:"loading-round"},WP={__name:"FavoriteActionButton",props:{filmId:Number},setup(t){const e=t,n=me(!1),s=xe(),r=Ie(()=>Lo(s.favorites,e.filmId));async function i(){if(!s.user){alert(" ");return}if(n.value=!0,r.value)await s.removeFavorite(e.filmId);else{const o=await ii(e.filmId);await s.addFavorite(await o)}n.value=!1}return(o,c)=>(O(),K("span",jP,[n.value?(O(),K("span",HP)):Ke("",!0),Q(Lc,{class:Ge({active:r.value}),onClick:Nn(i,["prevent"])},null,8,["class"])]))}},iv=re(WP,[["__scopeId","data-v-f229c551"]]),qP={},zP={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640"};function GP(t,e){return O(),K("svg",zP,[...e[0]||(e[0]=[x("path",{fill:"currentColor",d:"M320 96C239.2 96 174.5 132.8 127.4 176.6C80.6 220.1 49.3 272 34.4 307.7C31.1 315.6 31.1 324.4 34.4 332.3C49.3 368 80.6 420 127.4 463.4C174.5 507.1 239.2 544 320 544C400.8 544 465.5 507.2 512.6 463.4C559.4 419.9 590.7 368 605.6 332.3C608.9 324.4 608.9 315.6 605.6 307.7C590.7 272 559.4 220 512.6 176.6C465.5 132.9 400.8 96 320 96zM176 320C176 240.5 240.5 176 320 176C399.5 176 464 240.5 464 320C464 399.5 399.5 464 320 464C240.5 464 176 399.5 176 320zM320 256C320 291.3 291.3 320 256 320C244.5 320 233.7 317 224.3 311.6C223.3 322.5 224.2 333.7 227.2 344.8C240.9 396 293.6 426.4 344.8 412.7C396 399 426.4 346.3 412.7 295.1C400.5 249.4 357.2 220.3 311.6 224.3C316.9 233.6 320 244.4 320 256z"},null,-1)])])}const KP=re(qP,[["render",GP]]),QP={},YP={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640"};function JP(t,e){return O(),K("svg",YP,[...e[0]||(e[0]=[x("path",{fill:"currentColor",d:"M73 39.1C63.6 29.7 48.4 29.7 39.1 39.1C29.8 48.5 29.7 63.7 39 73.1L567 601.1C576.4 610.5 591.6 610.5 600.9 601.1C610.2 591.7 610.3 576.5 600.9 567.2L504.5 470.8C507.2 468.4 509.9 466 512.5 463.6C559.3 420.1 590.6 368.2 605.5 332.5C608.8 324.6 608.8 315.8 605.5 307.9C590.6 272.2 559.3 220.2 512.5 176.8C465.4 133.1 400.7 96.2 319.9 96.2C263.1 96.2 214.3 114.4 173.9 140.4L73 39.1zM236.5 202.7C260 185.9 288.9 176 320 176C399.5 176 464 240.5 464 320C464 351.1 454.1 379.9 437.3 403.5L402.6 368.8C415.3 347.4 419.6 321.1 412.7 295.1C399 243.9 346.3 213.5 295.1 227.2C286.5 229.5 278.4 232.9 271.1 237.2L236.4 202.5zM357.3 459.1C345.4 462.3 332.9 464 320 464C240.5 464 176 399.5 176 320C176 307.1 177.7 294.6 180.9 282.7L101.4 203.2C68.8 240 46.4 279 34.5 307.7C31.2 315.6 31.2 324.4 34.5 332.3C49.4 368 80.7 420 127.5 463.4C174.6 507.1 239.3 544 320.1 544C357.4 544 391.3 536.1 421.6 523.4L357.4 459.2z"},null,-1)])])}const XP=re(QP,[["render",JP]]),ZP={class:"icon-wrapper"},e4={__name:"WatchActionButton",props:{filmId:Number},setup(t){const e=t,n=xe(),s=Ie(()=>n.isSkipped(e.filmId)),r=()=>{s.value?n.removeSkip(e.filmId):n.addSkip(e.filmId)};return(i,o)=>(O(),K("span",ZP,[s.value?(O(),Ue(XP,{key:0,class:"unwatch",onClick:Nn(r,["prevent"])})):(O(),Ue(KP,{key:1,onClick:Nn(r,["prevent"])}))]))}},ov=re(e4,[["__scopeId","data-v-69ce7b7b"]]),t4={},n4={height:"16",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg"};function s4(t,e){return O(),K("svg",n4,[...e[0]||(e[0]=[x("path",{fill:"currentColor",d:"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z",class:"star"},null,-1)])])}const r4=re(t4,[["render",s4]]),i4={key:0,class:"rating"},o4={__name:"FilmRating",props:{filmInfo:Object,isRating:{type:Boolean,default:!0}},setup(t){const e=t,n=Ie(()=>BP(e.filmInfo));return(s,r)=>t.isRating?(O(),K("span",i4,[Q(r4,{class:"star"}),Qe(nt(n.value),1)])):Ke("",!0)}},av=re(o4,[["__scopeId","data-v-87429142"]]),a4=["href"],c4={class:"icon-actions"},l4={class:"image-wrapper"},u4=["src","alt"],h4={class:"name-wrapper"},f4={__name:"FilmItem",props:{itemFilm:Object,currentIndex:Number,isRating:{type:Boolean,default:!0}},setup(t){const e=t,n=gn(),s=xe(),r=me(null),i=Ie(()=>e.currentIndex===s.currentFocusIndex),o=Ie(()=>rv(e.itemFilm)),c=me(!1),l=e.itemFilm.filmId||e.itemFilm.kinopoiskId,u=Ie(()=>s.isSkipped(l)),f=()=>{n.push(`/film/${l}`)},d=()=>{c.value=!0},m=()=>{c.value=!1};return fn(i,()=>{if(i.value&&r.value){const _=r.value.getBoundingClientRect(),b=document.documentElement.scrollTop,N=b+window.innerHeight,L=_.bottom+b;(_.top<0||L>N)&&window.scrollTo(0,b+_.top-80)}}),(_,b)=>(O(),K("li",{class:Ge(["card",{focused:i.value|c.value,unwatch:u.value}]),onMouseover:d,onMouseleave:m,tabindex:"0",ref_key:"itemRef",ref:r},[x("a",{href:`/film/${oe(l)}`,class:"card-link",onClick:Nn(f,["prevent"])},null,8,a4),x("div",c4,[Q(iv,{class:"favorite",filmId:oe(l)},null,8,["filmId"]),Q(ov,{class:"watch",filmId:oe(l)},null,8,["filmId"]),Q(av,{filmInfo:e.itemFilm,isRating:e.isRating},null,8,["filmInfo","isRating"])]),x("div",l4,[b[0]||(b[0]=x("svg",{xmlns:"http://www.w3.org/2000/svg",width:"360",height:"540"},null,-1)),x("img",{src:t.itemFilm.posterUrlPreview,alt:e.itemFilm.nameRu},null,8,u4)]),x("div",h4,[x("h3",null,nt(o.value),1)])],34))}},d4=re(f4,[["__scopeId","data-v-e5372f13"]]),p4={};function m4(t,e){return O(),K(De,null,Ps(20,n=>x("li",{class:"films__item preload-card",key:n},[...e[0]||(e[0]=[x("div",{class:"item__image"},[x("svg",{xmlns:"http://www.w3.org/2000/svg",width:"360",height:"540"})],-1)])])),64)}const g4=re(p4,[["render",m4],["__scopeId","data-v-aadc4565"]]),_4={key:0,class:"films__list"},y4={key:1,class:"not-found"},v4={__name:"FilmList",props:{showPreload:{type:Boolean,default:!1},items:{type:Array,default:()=>[]},isRating:{type:Boolean,default:!0}},setup(t){const e=xe(),n=Ct("emitter"),s=t,r=me(!1);return n.on("isLoading",i=>{r.value=i}),zt(()=>{e.hasFilmList=!0}),Yr(()=>{e.hasFilmList=!1}),(i,o)=>(O(),K("div",{class:Ge(["films__wrap",{loading:r.value}])},[s.items.length?(O(),K("ul",_4,[(O(!0),K(De,null,Ps(s.items,(c,l)=>(O(),Ue(d4,{itemFilm:c,key:c.filmId||c.kinopoiskId,currentIndex:l,isRating:s.isRating},null,8,["itemFilm","currentIndex","isRating"]))),128)),s.showPreload?(O(),Ue(g4,{key:0})):Ke("",!0)])):(O(),K("h2",y4,"  "))],2))}},js=re(v4,[["__scopeId","data-v-e083caa1"]]),E4={},w4={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512"};function I4(t,e){return O(),K("svg",w4,[...e[0]||(e[0]=[x("path",{d:"M31.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34z"},null,-1)])])}const Xp=re(E4,[["render",I4],["__scopeId","data-v-f06fdeaf"]]),T4={},A4={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"};function S4(t,e){return O(),K("svg",A4,[...e[0]||(e[0]=[x("path",{d:"M223.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L319.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L393.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34zm-192 34l136 136c9.4 9.4 24.6 9.4 33.9 0l22.6-22.6c9.4-9.4 9.4-24.6 0-33.9L127.9 256l96.4-96.4c9.4-9.4 9.4-24.6 0-33.9L201.7 103c-9.4-9.4-24.6-9.4-33.9 0l-136 136c-9.5 9.4-9.5 24.6-.1 34z"},null,-1)])])}const Zp=re(T4,[["render",S4],["__scopeId","data-v-ad51d4f5"]]),C4={class:"pagination"},b4=["onClick"],R4={__name:"PaginationList",props:["total"],setup(t){const e=xe(),n=Ct("emitter"),s=Ie(()=>e.pageNum),r=t,i=c=>{let l=[];if(r.total>6){if(s.value===1)return[1,2,3,"...",c];if(s.value>1&&s.value<3)return[1,2,3,"...",c];if(s.value===3)return[1,2,3,4,"...",c];if(s.value>3&&s.value<c-2)return[1,"...",s.value-1,s.value,s.value+1,"...",c];if(s.value===c-2)return[1,"...",s.value-1,s.value,s.value+1,c];if(s.value===c-1)return[1,"...",s.value-1,s.value,c];if(s.value===c)return[1,"...",s.value-2,s.value-1,c]}else for(let u=1;u<=c;u++)l.push(u);return l},o=(c,l="")=>{if(c==="...")return;let u;l==="prev"?u=e.pageNum-1:l==="next"?u=e.pageNum+1:l==="prevAll"?u=1:l==="nextAll"?u=r.total:u=c,e.pageNum=u,n.emit("clickPage",u)};return(c,l)=>(O(),K("div",C4,[x("ul",null,[gt(x("li",{class:"pg first",onClick:l[0]||(l[0]=u=>o(null,"prevAll"))},[x("span",null,[Q(Zp)])],512),[[Qo,oe(e).pageNum>1]]),gt(x("li",{class:"pg prev",onClick:l[1]||(l[1]=u=>o(null,"prev"))},[x("span",null,[Q(Xp)])],512),[[Qo,oe(e).pageNum>1]]),(O(!0),K(De,null,Ps(i(t.total),u=>(O(),K("li",{key:u},[x("span",{class:Ge({active:oe(e).pageNum===u}),onClick:f=>o(u)},nt(u),11,b4)]))),128)),gt(x("li",{class:"pg next",onClick:l[2]||(l[2]=u=>o(null,"next"))},[x("span",null,[Q(Xp)])],512),[[Qo,oe(e).pageNum<r.total]]),gt(x("li",{class:"pg last",onClick:l[3]||(l[3]=u=>o(null,"nextAll"))},[x("span",null,[Q(Zp)])],512),[[Qo,oe(e).pageNum<r.total]])])]))}},Ja=re(R4,[["__scopeId","data-v-edfaf1b2"]]),P4={key:0,ref:"observer",class:"observer"},k4={__name:"MainList",setup(t){const e=xe(),n=Ct("emitter"),s=gn(),r=me([]),i=me(0),o=me(!1),c=async()=>{try{return qb(e.pageNum)}catch(d){console.error("Error load films",d)}};async function l(d,m=""){m==="loading"&&n.emit("isLoading",!0),o.value=m==="preload",e.pageNum=d||e.pageNum;const _=await c();i.value=_.totalPages,m==="preload"?r.value=[...r.value,..._.items]:(r.value=[],r.value=_.items),o.value=!1,m==="loading"&&await _.items&&n.emit("isLoading",!1)}function u(){l(e.pageNum+1,"preload")}function f(){l(e.pageNum,"loading")}return n.on("clickPage",f),fn(()=>r.value,()=>{e.films=r.value}),fn(()=>s.currentRoute.value.href,()=>{e.films=r.value}),zt(()=>{l()}),(d,m)=>{const _=Zi("title"),b=Zi("intersection");return O(),K(De,null,[gt((O(),K("h1",null,[Qe(nt(oe(oi).MAIN),1)])),[[_]]),Q(Ja,{total:i.value},null,8,["total"]),Q(js,{items:r.value,showPreload:o.value},null,8,["items","showPreload"]),Q(Ja,{total:i.value},null,8,["total"]),oe(e).pageNum<i.value?gt((O(),K("div",P4,null,512)),[[b,{getMoreFilms:u}]]):Ke("",!0)],64)}}},N4=re(k4,[["__scopeId","data-v-a13e747c"]]),D4=["src"],L4={__name:"FilmPlayerClub",setup(t){const n=Bs().params.id;return(s,r)=>(O(),K("div",null,[x("iframe",{src:`//496622434375553.svetacdn.in/fcvcbl7auqJG?kp_id=${oe(n)}`,width:"100%",height:"495",allowfullscreen:""},null,8,D4)]))}},V4=re(L4,[["__scopeId","data-v-e9926cdc"]]),O4={class:"player-container"},x4={class:"player-select"},M4={class:"player-name-list"},F4=["onClick"],U4={key:0},$4=["src","title"],B4={key:1},j4={__name:"PlayersList",setup(t){const e=xe(),s=Bs().params.id,r=me(null),i=me(-1),o=Object.keys(Jp),c=me([]),l=f=>{i.value=f};async function u(){e.setFilmPageId(s);const f=await Promise.all(Object.entries(Jp).map(async([d,m])=>{let _=e.apiKey;d==="Alloha"&&(_=e.apiAloha),d==="HDVB"&&(_=e.apiHDBV),d!=="Alloha"&&d!=="HDVB"&&(_=void 0);let b=typeof m=="function"?await m(s,_):null;return{name:d,iframeSrc:b}}));c.value=f.filter(d=>d.iframeSrc),c.value.length>0&&(i.value=0)}return zt(()=>{r.value&&u()}),(f,d)=>(O(),K("div",null,[x("div",O4,[x("div",x4,[x("div",M4,[(O(!0),K(De,null,Ps(oe(o),(m,_)=>(O(),K("button",{key:m,class:Ge({"select-button":!0,active:_===i.value}),onClick:b=>l(_)},nt(m),11,F4))),128))])]),x("div",{ref_key:"playerList",ref:r,class:"player-list"},[(O(!0),K(De,null,Ps(c.value,(m,_)=>(O(),K("div",{key:m.name,class:Ge({"player-item":!0,active:_===i.value})},[_===i.value?(O(),K("div",U4,[m.iframeSrc?(O(),K("iframe",{key:0,src:m.iframeSrc,allowfullscreen:"",loading:"lazy",title:` ${m.name}   ID ${oe(s)}`},null,8,$4)):(O(),K("div",B4," ..."))])):Ke("",!0)],2))),128))],512)])]))}},H4=re(j4,[["__scopeId","data-v-6550976b"]]),W4={key:0,class:"loading-round"},q4={__name:"ActionFavorite",props:{filmId:String},setup(t){const e=t,n=xe(),s=Ie(()=>Lo(n.favorites,e.filmId)),r=me(!1);async function i(){if(!n.user){alert(" ");return}if(r.value=!0,s.value)await n.removeFavorite(e.filmId);else{const o=await ii(e.filmId);await n.addFavorite(await o)}r.value=!1}return(o,c)=>(O(),Ue(Zt,{class:Ge(["button",{selected:s.value}]),size:20,onClick:i,disabled:r.value},{default:je(()=>[r.value?(O(),K("span",W4)):Ke("",!0),Q(Lc),c[0]||(c[0]=Qe("  ",-1))]),_:1},8,["class","disabled"]))}},z4=re(q4,[["__scopeId","data-v-5d682216"]]),G4={key:0,class:"loading-round"},K4={__name:"ActionWatching",props:{filmId:String},setup(t){const e=t,n=xe(),s=Ie(()=>Lo(n.watchingList,e.filmId)),r=me(!1);async function i(){if(!n.user){alert(" ");return}if(r.value=!0,s.value)await n.removeWatching(e.filmId);else{const o=await ii(e.filmId);await n.addWatching(await o)}r.value=!1}return(o,c)=>(O(),Ue(Zt,{class:Ge(["button",{selected:s.value}]),size:20,onClick:i,disabled:r.value},{default:je(()=>[r.value?(O(),K("span",G4)):Ke("",!0),Q(tv),c[0]||(c[0]=Qe("   ",-1))]),_:1},8,["class","disabled"]))}},Q4=re(K4,[["__scopeId","data-v-6a5754e5"]]),Y4={key:0,class:"loading-round"},J4={__name:"ActionWatchList",props:{filmId:String},setup(t){const e=t,n=xe(),s=Ie(()=>Lo(n.watchList,e.filmId)),r=me(!1);async function i(){if(!n.user){alert(" ");return}if(r.value=!0,s.value)await n.removeWatchList(e.filmId);else{const o=await ii(e.filmId);await n.addWatchList(await o)}r.value=!1}return(o,c)=>(O(),Ue(Zt,{class:Ge(["button",{selected:s.value}]),size:20,onClick:i,disabled:r.value},{default:je(()=>[r.value?(O(),K("span",Y4)):Ke("",!0),Q(sv),c[0]||(c[0]=Qe("   ",-1))]),_:1},8,["class","disabled"]))}},X4=re(J4,[["__scopeId","data-v-7dbec7d7"]]),Z4={key:0,class:"loading-round"},ek={__name:"ActionWaitingList",props:{filmId:String},setup(t){const e=t,n=xe(),s=Ie(()=>Lo(n.waitingList,e.filmId)),r=me(!1);async function i(){if(!n.user){alert(" ");return}if(r.value=!0,s.value)await n.removeWaitList(e.filmId);else{const o=await ii(e.filmId);await n.addWaitList(await o)}r.value=!1}return(o,c)=>(O(),Ue(Zt,{class:Ge(["button",{selected:s.value}]),size:20,onClick:i,disabled:r.value},{default:je(()=>[r.value?(O(),K("span",Z4)):Ke("",!0),Q(nv),c[0]||(c[0]=Qe("   ",-1))]),_:1},8,["class","disabled"]))}},tk=re(ek,[["__scopeId","data-v-8665eff3"]]),nk={class:"list"},sk={__name:"FilmActionList",setup(t){const n=Bs().params.id;return(s,r)=>(O(),Ue(Vh,{class:"popup",position:"right",maxWidth:"auto",buttonClass:"buttonTrigger"},{icon:je(()=>[Q(Lc,{class:"icon"})]),content:je(()=>[x("ul",nk,[x("li",null,[Q(z4,{filmId:oe(n),class:"item"},null,8,["filmId"])]),x("li",null,[Q(Q4,{filmId:oe(n),class:"item"},null,8,["filmId"])]),x("li",null,[Q(X4,{filmId:oe(n),class:"item"},null,8,["filmId"])]),x("li",null,[Q(tk,{filmId:oe(n),class:"item"},null,8,["filmId"])])])]),_:1}))}},rk=re(sk,[["__scopeId","data-v-c558699a"]]),ik={class:"tab-titles"},ok={class:"actions"},ak={__name:"FilmPlayerSelect",setup(t){const e=me(0);return(n,s)=>(O(),K(De,null,[x("ul",ik,[x("li",{class:Ge({selected:e.value===1}),onClick:s[0]||(s[0]=r=>e.value=1)},"  ",2),x("li",{class:Ge({selected:e.value===5}),onClick:s[1]||(s[1]=r=>e.value=5)},"Lumex",2),x("li",ok,[Q(rk)])]),e.value===1?(O(),Ue(H4,{key:0})):Ke("",!0),e.value===5?(O(),Ue(V4,{key:1})):Ke("",!0)],64))}},ck=re(ak,[["__scopeId","data-v-7a9636a7"]]),lk={},uk={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"};function hk(t,e){return O(),K("svg",uk,[...e[0]||(e[0]=[x("path",{fill:"currentColor",d:"M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"},null,-1)])])}const fk=re(lk,[["render",hk]]),dk={__name:"ButtonBack",setup(t){const e=gn(),n=()=>{e.go(-1)};return(s,r)=>(O(),Ue(Zt,{onClick:n,size:18,class:"back"},{default:je(()=>[Q(fk),r[0]||(r[0]=Qe("",-1))]),_:1}))}},pk=re(dk,[["__scopeId","data-v-1edf2875"]]),mk={class:"image"},gk={class:"icon-actions"},_k=["src"],yk={__name:"FilmImage",props:{filmInfo:Object},setup(t){const e=t,n=Ie(()=>e.filmInfo),s=Ie(()=>e.filmInfo?.kinopoiskId??e.filmInfo?.filmId);return(r,i)=>(O(),K("div",mk,[x("div",gk,[Q(iv,{class:"favorite",filmId:s.value},null,8,["filmId"]),Q(ov,{class:"watch",filmId:s.value},null,8,["filmId"]),Q(av,{filmInfo:e.filmInfo,class:"rating"},null,8,["filmInfo"])]),n.value?.posterUrl?(O(),K("img",{key:0,src:n.value?.posterUrl,alt:"filmTitle"},null,8,_k)):Ke("",!0)]))}},vk=re(yk,[["__scopeId","data-v-15680dd1"]]),Ek={class:"genres"},wk=["onClick"],Ik={__name:"FilmGenres",props:{genres:Array,title:String},setup(t){const e=gn(),n=t,s=Ie(()=>n.genres.map(i=>i.genre)),r=i=>{const c=JSON.parse(localStorage.getItem("genres")).filter(l=>l.genre===i)[0].id;window.scrollTo(0,0),e.push({name:"searchPage",query:{genres:c}})};return(i,o)=>(O(),K("div",Ek,[x("h3",null,nt(n.title),1),x("ul",null,[(O(!0),K(De,null,Ps(s.value,c=>(O(),K("li",{key:c},[x("span",{onClick:l=>r(c)},nt(c),9,wk)]))),128))])]))}},Tk=re(Ik,[["__scopeId","data-v-e0e923cf"]]),Ak={class:"film__wrap"},Sk={class:"film__note"},Ck={class:"film__btns"},bk={class:"film__description"},Rk={key:0,class:"film__similar"},Pk={__name:"FilmPage",setup(t){const e=xe(),n=Bs(),s=me([]),r=me([]),i=Ie(()=>rv(s.value)),o=async()=>{try{const f=ii(n.params.id);s.value=await f,e.authChange().then(()=>{e.addLastViews(s.value)})}catch(f){console.error("Error load film info",f),s.value=[]}},c=async()=>{try{const d=(await Hb(n.params.id)).items||[];r.value=d}catch(f){console.error("Error load similars",f),r.value=[]}},l=async()=>{try{const d=(await Wb(n.params.id)).items||[];r.value=[...d,...r.value]}catch(f){console.error("Error load sequels and prequels",f)}},u=Ie(()=>e.isSkipped(s.value?.kinopoiskId??s.value?.filmId));return zt(()=>{o(),c(),l()}),(f,d)=>{const m=Zi("title");return O(),K(De,null,[Q(pk),gt((O(),K("h1",null,[Qe(nt(i.value),1)])),[[m]]),x("div",Ak,[Q(vk,{filmInfo:s.value,class:Ge({unwatch:u.value})},null,8,["filmInfo","class"]),x("div",Sk,[x("div",Ck,[Q(ck)]),x("div",bk,[d[0]||(d[0]=x("h3",null,":",-1)),Qe(" "+nt(s.value.description),1)]),Q(Tk,{genres:s.value.genres||[],title:""},null,8,["genres"]),r.value.length>0?(O(),K("div",Rk,[d[1]||(d[1]=x("h3",null," ",-1)),Q(js,{items:r.value,isRating:!1},null,8,["items"])])):Ke("",!0)])])],64)}}},kk=re(Pk,[["__scopeId","data-v-8e14fdee"]]),Nk={key:0,ref:"observer",class:"observer"},Dk={__name:"SearchPage",setup(t){const e=Bs(),n=me([]),s=Ct("emitter"),r=xe(),i=me(0),o=me(!1),c=Ie(()=>e.query.q),l=Ie(()=>e.query.genres),u=me(""),f=async()=>{const b={};r.searchQueryStore&&(b.keyword=r.searchQueryStore),r.genreIdStore&&(b.genres=r.genreIdStore),r.pageNum&&(b.page=r.pageNum);try{return zb(b)}catch(N){console.error("Error load films",N)}},d=async(b=!1,N)=>{if(r.pageNum=N||r.pageNum,r.genreIdStore||r.searchQueryStore||b){o.value=!0;const L=await f();i.value=L.totalPages,b?n.value=[...n.value,...L.items]:(n.value=[],n.value=L.items),o.value=!1}},m=()=>{d(!0,r.pageNum+1)},_=()=>{d(!1,r.pageNum)};return s.on("clickPage",_),zt(async()=>{r.searchQueryStore=c.value,r.genreIdStore=l.value,await d(!1,1),s.on("searchSubmit",()=>{d(!1,1)}),u.value=await r.searchPageTitle()}),(b,N)=>{const L=Zi("title"),H=Zi("intersection");return O(),K(De,null,[gt((O(),K("h1",null,[Qe(nt(u.value),1)])),[[L]]),Q(Ja,{total:i.value,onClickPage:d},null,8,["total"]),Q(js,{items:n.value,showPreload:o.value},null,8,["items","showPreload"]),Q(Ja,{total:i.value,onClickPage:d},null,8,["total"]),oe(r).pageNum<i.value?gt((O(),K("div",Nk,null,512)),[[H,{getMoreFilms:m}]]):Ke("",!0)],64)}}},Lk={};function Vk(t,e){const n=Mu("router-link");return O(),K(De,null,[e[2]||(e[2]=x("h1",null,"  ",-1)),x("p",null,[e[1]||(e[1]=Qe("  ",-1)),Q(n,{to:"/"},{default:je(()=>[...e[0]||(e[0]=[Qe("",-1)])]),_:1})]),e[3]||(e[3]=x("br",null,null,-1))],64)}const Ok=re(Lk,[["render",Vk],["__scopeId","data-v-1dfddbdd"]]),xk={key:0},Mk={__name:"FavoritePage",setup(t){const e=xe(),n=me(!1);return fn(()=>e.favorites,()=>{e.films=e.favorites}),(s,r)=>(O(),K(De,null,[x("h1",null,nt(oe(oi).FAVORITE),1),Q(js,{items:oe(e).favoriteList,showPreload:n.value},null,8,["items","showPreload"]),oe(e).favorites.length===0?(O(),K("h3",xk," ")):Ke("",!0)],64))}},Fk=re(Mk,[["__scopeId","data-v-14a01f40"]]),Uk={key:0},$k={__name:"LastViews",setup(t){const e=xe(),n=me(!1);return(s,r)=>(O(),K(De,null,[x("h1",null,nt(oe(oi).LAST_VIEWS),1),Q(js,{items:oe(e).lastViews,showPreload:n.value},null,8,["items","showPreload"]),oe(e).lastViews.length===0?(O(),K("h3",Uk," ")):Ke("",!0)],64))}},Bk=re($k,[["__scopeId","data-v-2ed07b17"]]),jk={key:0},Hk={__name:"WatchingPage",setup(t){const e=xe(),n=me(!1);return(s,r)=>(O(),K(De,null,[x("h1",null,nt(oe(oi).WATCHING),1),Q(js,{items:oe(e).watchingList,showPreload:n.value},null,8,["items","showPreload"]),oe(e).watchingList.length===0?(O(),K("h3",jk," ")):Ke("",!0)],64))}},Wk=re(Hk,[["__scopeId","data-v-53c27b14"]]),qk={key:0},zk={__name:"WatchListPage",setup(t){const e=xe(),n=me(!1);return(s,r)=>(O(),K(De,null,[x("h1",null,nt(oe(oi).WATCH_LIST),1),Q(js,{items:oe(e).watchList,showPreload:n.value},null,8,["items","showPreload"]),oe(e).watchList.length===0?(O(),K("h3",qk," ")):Ke("",!0)],64))}},Gk=re(zk,[["__scopeId","data-v-ade64c8a"]]),Kk={key:0},Qk={__name:"WaitListPage",setup(t){const e=xe(),n=me(!1);return(s,r)=>(O(),K(De,null,[x("h1",null,nt(oe(oi).WAIT_LIST),1),Q(js,{items:oe(e).waitingList,showPreload:n.value},null,8,["items","showPreload"]),oe(e).waitingList.length===0?(O(),K("h3",Kk," ")):Ke("",!0)],64))}},Yk=re(Qk,[["__scopeId","data-v-c855731e"]]),Jk=ZR({history:NR("/hometv"),routes:[{path:ot.HOME.path,name:ot.HOME.name,component:N4},{path:ot.FILM_PAGE.path,name:ot.FILM_PAGE.name,component:kk},{path:ot.SEARCH.path,name:ot.SEARCH.name,component:Dk},{path:ot.FAVORITES.path,name:ot.FAVORITES.name,component:Fk},{path:ot.LAST_VIEWS.path,name:ot.LAST_VIEWS.name,component:Bk},{path:ot.WATCHING.path,name:ot.WATCHING.name,component:Wk},{path:ot.WATCH_LIST.path,name:ot.WATCH_LIST.name,component:Gk},{path:ot.WAITING_LIST.path,name:ot.WAITING_LIST.name,component:Yk},{path:"/:pathMatch(.*)*",component:Ok}]});function Xk(t){return{all:t=t||new Map,on:function(e,n){var s=t.get(e);s?s.push(n):t.set(e,[n])},off:function(e,n){var s=t.get(e);s&&(n?s.splice(s.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var s=t.get(e);s&&s.slice().map(function(r){r(n)}),(s=t.get("*"))&&s.slice().map(function(r){r(e,n)})}}}var Zk=function(){return!!(window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))},vu;typeof window<"u"&&(typeof Promise<"u"?vu=new Promise(function(t){return window.addEventListener("load",t)}):vu={then:function(t){return window.addEventListener("load",t)}});function eN(t,e){e===void 0&&(e={});var n=e.registrationOptions;n===void 0&&(n={}),delete e.registrationOptions;var s=function(r){for(var i=[],o=arguments.length-1;o-- >0;)i[o]=arguments[o+1];e&&e[r]&&e[r].apply(e,i)};"serviceWorker"in navigator&&vu.then(function(){Zk()?(tN(t,s,n),navigator.serviceWorker.ready.then(function(r){s("ready",r)}).catch(function(r){return mo(s,r)})):(cv(t,s,n),navigator.serviceWorker.ready.then(function(r){s("ready",r)}).catch(function(r){return mo(s,r)}))})}function mo(t,e){navigator.onLine||t("offline"),t("error",e)}function cv(t,e,n){navigator.serviceWorker.register(t,n).then(function(s){if(e("registered",s),s.waiting){e("updated",s);return}s.onupdatefound=function(){e("updatefound",s);var r=s.installing;r.onstatechange=function(){r.state==="installed"&&(navigator.serviceWorker.controller?e("updated",s):e("cached",s))}}}).catch(function(s){return mo(e,s)})}function tN(t,e,n){fetch(t).then(function(s){s.status===404?(e("error",new Error("Service worker not found at "+t)),em()):s.headers.get("content-type").indexOf("javascript")===-1?(e("error",new Error("Expected "+t+" to have javascript content-type, but received "+s.headers.get("content-type"))),em()):cv(t,e,n)}).catch(function(s){return mo(e,s)})}function em(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()}).catch(function(t){return mo(emit,t)})}eN("/hometv/service-worker.js",{ready(){console.log(`App is being served from cache by a service worker.
For more details, visit https://goo.gl/AFskqB`)},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});const nN=Xk(),ai=iI($P);ai.directive("intersection",mI);ai.directive("title",gI);ai.use(cI());ai.use(Jk);ai.provide("emitter",nN);ai.mount("#app");
