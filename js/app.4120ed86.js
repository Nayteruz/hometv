(function(){"use strict";var e={4881:function(e,t,i){var n=i(9242),a=i(7139),r={name:"intersection",mounted(e,t){const i={rootMargin:"0px",threshold:1},n=e=>{e[0].isIntersecting&&t.value.getMoreFilms()},a=new IntersectionObserver(n,i);a.observe(e)}};const o=function(e){document.title=e};var s={mounted:(e,t)=>o(t.value||e.innerText),beforeUpdate:(e,t)=>o(t.value||e.innerText),updated:(e,t)=>o(t.value||e.innerText)},l=i(3396),c=i(4275),u=i(6035),m={apiKey:"AIzaSyDapqMH_oM7h6CDKM0laMGrLIlDVDyb_gY",authDomain:"hometv-c10f8.firebaseapp.com",projectId:"hometv-c10f8",storageBucket:"hometv-c10f8.appspot.com",messagingSenderId:"452296723769",appId:"1:452296723769:web:982a4288b9cf4e189bace8"};const p=(0,c.ZF)(m),d=(0,u.ad)(p);var v=i(8176);const g=async function(e){const t=(0,u.JU)(d,"users",e),i=await(0,u.QT)(t);return i.exists()?i.data():null},f=async function(e,t){await(0,u.pl)((0,u.JU)(d,"users",t),{name:e.user_name||"",email:e.email||"",favorites:[],api_key:e.api_key||""})},h=function(e){switch(e){case"auth/wrong-password":return"Неверный пароль";case"auth/internal-error":return"Неизвестная ошибка";case"auth/invalid-email":return"Недопустимый email";case"auth/user-not-found":return"Пользователь не найден";case"auth/weak-password":return"Пароль не менее 6 символов";default:return"Ошибка авторизации"}},w=["","для взрослых","мюзикл","спорт","церемония","фильм-нуар","биография","вестерн","короткометражка","документальный","документальный","реальное ТВ","ток-шоу","концерт","игра","новости"],y=(0,a.Q_)("filmStore",{state:()=>({user:null,apiKey:"404dc583-7efc-4c93-8f21-a782f977b9e7",apiAloha:"e7b61f129f4a392ac4bf6726a9dd6a",apiHDBV:"8a22f8e7684404c3815e3ffa940f00a0",auth:(0,v.v0)(),errorMessage:"",pageNum:1,limit:20,genreIdStore:null,genreListStore:[],searchQueryStore:"",filters:null,filmPageId:0,favorites:[],currentFocusIndex:-1,films:[],focusIds:{},isShowLastSearchList:!1,lastSearchList:[]}),getters:{filterGenres(){if(!this.genreListStore.length)return[];this.genreListStore=this.genreListStore.filter((e=>{if(-1===w.indexOf(e.genre))return e}))}},actions:{setGenreId(e){this.genreIdStore=e},setFilmPageId(e){this.filmPageId=e},setShowLastSearchList(e){this.isShowLastSearchList=e},async getGenreList(){if(localStorage.getItem("genres"))return this.genreListStore=JSON.parse(localStorage.getItem("genres")),this.genreListStore;try{const e=await fetch("https://kinopoiskapiunofficial.tech/api/v2.2/films/filters",{headers:{"X-API-KEY":this.apiKey,"Content-Type":"application/json"}}),t=await e.json();return this.filters=t,this.genreListStore=t.genres,this.filterGenres,localStorage.setItem("genres",JSON.stringify(this.genreListStore)),this.genreListStore}catch(e){console.error("Error load genres",e)}},checkFavoriteStore(e){let t=this.isCheckFilm(!0,e);return!!t.length},async addFavorite(e){const t={...e,sortTime:Date.now()};try{const e=(0,u.JU)(d,"users",this.user.uid);await(0,u.r7)(e,{favorites:[...this.favorites,t]})}catch(i){this.user?console.log("Ошибка добавления в избранное: "+i):console.log("Необходимо авторизоваться")}this.favorites=[...this.favorites,t]},async removeFavorite(e){let t=this.isCheckFilm(!1,e);try{const e=(0,u.JU)(d,"users",this.user.uid);await(0,u.r7)(e,{favorites:[...t]})}catch(i){this.user?console.log("Ошибка удаления из избранного: "+i):console.log("Необходимо авторизоваться")}this.favorites=[...t]},async addLastSearchList(e){if(!e)return;const t=this.lastSearchList.find((t=>t.value.toLowerCase()===e.toLowerCase()));if(!t)try{if(this.user){const t=(0,u.JU)(d,"users",this.user.uid),i=[{id:Date.now(),value:e},...this.lastSearchList];i.length>30&&i.pop(),await(0,u.r7)(t,{lastSearchList:[...i]})}}catch(i){console.log("Ошибка добавления в поиск: "+i)}},async authWithEmailAndPassword(e){await(0,v.e5)(this.auth,e.email,e.password).then((()=>{this.getUserData()})).catch((e=>{this.errorMessage=h(e.code)}))},async createAuthWithEmailAndPassword(e){await(0,v.Xb)(this.auth,e.email,e.password).then((async t=>{this.user=await t.user,await f(e,this.user.uid),await this.getUserData()})).catch((e=>{this.errorMessage=h(e.code)}))},async authLogout(){(0,v.w7)(this.auth).then((async()=>{this.removeUserData()})).catch((e=>{alert("Ошибка logout: "+e)}))},async authChange(e){(0,v.Aj)(this.auth,(async t=>{t?(this.user=t,this.getUserData(e)):this.removeUserData(e)}))},async getUserData(e){let t=await g(this.user.uid);this.user.name=t?.name||"",this.user.email=t?.email??"";const i=t?.favorites??[],n=i.sort(((e,t)=>(t.sortTime??0)-(e.sortTime??0)));this.favorites=n,this.lastSearchList=t?.lastSearchList||[],t?.api_key&&(this.apiKey=t.api_key),"function"===typeof e&&e()},removeUserData(e){this.user=null,this.favorites=[],"function"===typeof e&&e()},isCheckFilm(e,t){return this.favorites.filter((i=>{let n=i?.kinopoiskId??i?.filmId,a=t?.kinopoiskId??t?.filmId;return n===a&&e?i:n===a||e?void 0:i}))},searchQueryWithGenre(){let e={};return this.searchQueryStore&&(e.q=this.searchQueryStore),this.genreIdStore&&(e.genres=this.genreIdStore),e},setCurrentFocus(e){this.currentFocusIndex=e},setFocusIds(e){this.focusIds={...this.focusIds,[e]:this.currentFocusIndex}},setMountedCurrentFocus(e){this.setCurrentFocus(this.focusIds[e])}}});var _=i(2268);const k=e=>((0,l.dD)("data-v-5fe4eeb2"),e=e(),(0,l.Cn)(),e),S={class:"input-wrap"},I=k((()=>(0,l._)("button",{type:"submit"},"Найти",-1))),F=["onClick"];function b(e,t,i,a,r,o){const s=(0,l.up)("RegistrationWrap");return(0,l.wg)(),(0,l.iD)("header",null,[(0,l._)("a",{class:"home",onClick:t[0]||(t[0]=(...e)=>a.goHome&&a.goHome(...e)),href:"#"},"Home"),(0,l._)("a",{href:"#",class:(0,_.C_)(["favorites",{disabled:!1===a.isUser}]),onClick:t[1]||(t[1]=t=>e.$router.push({name:"favorite"}))},(0,_.zw)(a.filmStore.favorites.length),3),(0,l._)("form",{action:"#",class:(0,_.C_)({show:a.isSearchVisible,"search-form":!0}),onSubmit:t[7]||(t[7]=(0,n.iM)(((...e)=>a.searchSubmit&&a.searchSubmit(...e)),["prevent"]))},[(0,l._)("div",S,[(0,l.wy)((0,l._)("input",{ref:"searchInput",autocomplete:"off",type:"text",onKeyup:t[2]||(t[2]=(0,n.D2)(((...e)=>a.searchSubmit&&a.searchSubmit(...e)),["enter"])),onFocus:t[3]||(t[3]=(...e)=>a.showLastList&&a.showLastList(...e)),placeholder:"Название фильма / ID КиноПоиск","onUpdate:modelValue":t[4]||(t[4]=e=>a.filmStore.searchQueryStore=e),name:"keyword"},null,544),[[n.nr,a.filmStore.searchQueryStore,void 0,{trim:!0}]]),(0,l._)("span",{onClick:t[5]||(t[5]=(0,n.iM)(((...e)=>a.clearInput&&a.clearInput(...e)),["prevent"])),class:(0,_.C_)({"clear-input":!0,show:a.filmStore.searchQueryStore})},"×",2)]),I,a.filmStore.lastSearchList.length?((0,l.wg)(),(0,l.iD)("div",{key:0,class:(0,_.C_)({"search-popup":!0,opened:a.filmStore.isShowLastSearchList})},[(0,l._)("button",{type:"button",class:"close-list",onClick:t[6]||(t[6]=(...e)=>a.hideLastList&&a.hideLastList(...e))},"×"),(0,l._)("ul",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.filmStore.lastSearchList,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e.id},[(0,l._)("span",{onClick:t=>a.clickLastSearch(e.value)},(0,_.zw)(e.value),9,F)])))),128))])],2)):(0,l.kq)("",!0)],34),(0,l.Wm)(s),(0,l._)("button",{class:"reload-page",onClick:t[8]||(t[8]=(...e)=>a.reloadPage&&a.reloadPage(...e))}),(0,l._)("button",{type:"button",onClick:t[9]||(t[9]=(...e)=>a.toggleSearch&&a.toggleSearch(...e)),class:(0,_.C_)({"search-popup-btn":!0,opened:a.isSearchVisible})},null,2)])}const L={class:"registration-wrap"},C={key:0,class:"registration-wrap--pop"};function D(e,t,i,n,a,r){const o=(0,l.up)("IconUser"),s=(0,l.up)("LogoutComponent"),c=(0,l.up)("SignInComponent"),u=(0,l.up)("RegistrationComponent");return(0,l.wg)(),(0,l.iD)("div",L,[(0,l.Wm)(o,{onClick:n.togglePop},null,8,["onClick"]),n.isVisible?((0,l.wg)(),(0,l.iD)("div",C,[n.filmStore.user?((0,l.wg)(),(0,l.j4)(s,{key:0,onSetForm:n.setForm},null,8,["onSetForm"])):"sign"===n.formView?((0,l.wg)(),(0,l.j4)(c,{key:1,onSetForm:n.setForm},null,8,["onSetForm"])):"reg"===n.formView?((0,l.wg)(),(0,l.j4)(u,{key:2,onSetForm:n.setForm},null,8,["onSetForm"])):(0,l.kq)("",!0)])):(0,l.kq)("",!0)])}const P=e=>((0,l.dD)("data-v-7c148641"),e=e(),(0,l.Cn)(),e),x={class:"icon icon-user"},H=P((()=>(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 496 512"},[(0,l._)("path",{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"})],-1))),j=[H];function N(e,t){return(0,l.wg)(),(0,l.iD)("span",x,j)}var M=i(89);const U={},A=(0,M.Z)(U,[["render",N],["__scopeId","data-v-7c148641"]]);var q=A,K=i(4870);const T=e=>((0,l.dD)("data-v-797a52f5"),e=e(),(0,l.Cn)(),e),W={class:"registration--form"},E=T((()=>(0,l._)("h3",null,"Регистрация",-1))),Z=T((()=>(0,l._)("small",null,[(0,l._)("a",{href:"https://kinopoiskapiunofficial.tech/signup"},"зарегистрироваться")],-1))),Q={key:0,class:"err-string"},V={class:"btns"};function z(e,t,i,a,r,o){const s=(0,l.up)("IconGoogle");return(0,l.wg)(),(0,l.iD)("div",W,[E,(0,l._)("p",null,[(0,l.wy)((0,l._)("input",{type:"text",placeholder:"Email","onUpdate:modelValue":t[0]||(t[0]=e=>a.email=e)},null,512),[[n.nr,a.email]])]),(0,l._)("p",null,[(0,l.wy)((0,l._)("input",{type:"text",placeholder:"Name","onUpdate:modelValue":t[1]||(t[1]=e=>a.user_name=e)},null,512),[[n.nr,a.user_name]])]),(0,l._)("p",null,[(0,l.wy)((0,l._)("input",{type:"text",placeholder:"Api key","onUpdate:modelValue":t[2]||(t[2]=e=>a.api_key=e)},null,512),[[n.nr,a.api_key]]),Z]),(0,l._)("p",null,[(0,l.wy)((0,l._)("input",{type:"password",placeholder:"Password","onUpdate:modelValue":t[3]||(t[3]=e=>a.password=e)},null,512),[[n.nr,a.password]])]),a.filmStore.errorMessage?((0,l.wg)(),(0,l.iD)("p",Q,(0,_.zw)(a.filmStore.errorMessage),1)):(0,l.kq)("",!0),(0,l._)("div",V,[(0,l._)("button",{class:"reg",onClick:t[4]||(t[4]=(0,n.iM)(((...e)=>a.register&&a.register(...e)),["prevent"]))},"Регистрация"),(0,l._)("button",{class:"sign",onClick:t[5]||(t[5]=(0,n.iM)(((...e)=>a.setFormView&&a.setFormView(...e)),["prevent"]))},"Войти"),(0,l.Wm)(s,{onClick:a.signWithGoogle},null,8,["onClick"])])])}const $={class:"icon-google"};function B(e,t,i,n,a,r){return(0,l.wg)(),(0,l.iD)("span",$)}var R={name:"IconGoogle"};const O=(0,M.Z)(R,[["render",B],["__scopeId","data-v-103616a1"]]);var Y=O,G={name:"RegistrationComponent",components:{IconGoogle:Y},setup(e,{emit:t}){const i=y(),n=(0,K.iH)(""),a=(0,K.iH)(""),r=(0,K.iH)(""),o=(0,K.iH)("");async function s(){await i.createAuthWithEmailAndPassword({email:n.value,password:a.value,user_name:r.value,api_key:o.value})}function l(){t("setForm","sign")}function c(){console.log("ok")}return{email:n,user_name:r,password:a,api_key:o,filmStore:i,register:s,signWithGoogle:c,setFormView:l}}};const J=(0,M.Z)(G,[["render",z],["__scopeId","data-v-797a52f5"]]);var X=J;const ee=e=>((0,l.dD)("data-v-2a7fea74"),e=e(),(0,l.Cn)(),e),te={class:"registration--form"},ie=ee((()=>(0,l._)("h3",{class:"name"},"Авторизация",-1))),ne={key:0,class:"err-string"},ae={class:"btns"};function re(e,t,i,a,r,o){return(0,l.wg)(),(0,l.iD)("div",te,[ie,(0,l._)("p",null,[(0,l.wy)((0,l._)("input",{type:"text",placeholder:"Email","onUpdate:modelValue":t[0]||(t[0]=e=>a.email=e)},null,512),[[n.nr,a.email]])]),(0,l._)("p",null,[(0,l.wy)((0,l._)("input",{type:"password",placeholder:"Password","onUpdate:modelValue":t[1]||(t[1]=e=>a.password=e)},null,512),[[n.nr,a.password]])]),a.filmStore.errorMessage?((0,l.wg)(),(0,l.iD)("p",ne,(0,_.zw)(a.filmStore.errorMessage),1)):(0,l.kq)("",!0),(0,l._)("div",ae,[(0,l._)("button",{class:"sign",onClick:t[2]||(t[2]=(0,n.iM)(((...e)=>a.signIn&&a.signIn(...e)),["prevent"]))},"Войти"),(0,l._)("button",{class:"reg",onClick:t[3]||(t[3]=(0,n.iM)(((...e)=>a.setFormView&&a.setFormView(...e)),["prevent"]))},"Регистрация")])])}var oe={name:"SignInComponent",setup(e,{emit:t}){const i=(0,K.iH)(""),n=(0,K.iH)(""),a=(0,K.iH)(""),r=y();async function o(){await r.authWithEmailAndPassword({email:i.value,password:n.value})}function s(){t("setForm","reg")}return{email:i,password:n,errMsg:a,signIn:o,setFormView:s,filmStore:r}}};const se=(0,M.Z)(oe,[["render",re],["__scopeId","data-v-2a7fea74"]]);var le=se;const ce={class:"registration--form"},ue=(0,l.Uk)("Вы вошли как: "),me={class:"btns"};function pe(e,t,i,a,r,o){return(0,l.wg)(),(0,l.iD)("div",ce,[(0,l._)("h3",null,[ue,(0,l._)("strong",null,(0,_.zw)(a.filmStore.user.name),1)]),(0,l._)("div",me,[(0,l._)("button",{class:"reg",onClick:t[0]||(t[0]=(0,n.iM)(((...e)=>a.logout&&a.logout(...e)),["prevent"]))},"Выйти")])])}var de={name:"LogoutComponent",setup(){const e=y();async function t(){await e.authLogout()}return{logout:t,filmStore:e}}};const ve=(0,M.Z)(de,[["render",pe]]);var ge=ve,fe={name:"RegistrationWrap",components:{IconUser:q,RegistrationComponent:X,SignInComponent:le,LogoutComponent:ge},setup(){const e=y(),t=(0,K.iH)(!1),i=(0,K.iH)("sign"),n=(0,l.f3)("emitter");function a(){t.value=!t.value}function r(t){e.errorMessage="",i.value=t}function o(){n.emit("setUserData")}return(0,l.bv)((async()=>{await e.authChange(o),await n.emit("setUserData")})),{isVisible:t,setForm:r,togglePop:a,formView:i,filmStore:e}}};const he=(0,M.Z)(fe,[["render",D],["__scopeId","data-v-5736bec0"]]);var we=he,ye=i(678),_e={components:{RegistrationWrap:we},setup(){const e=(0,ye.yj)(),t=(0,ye.tv)(),i=y(),n=(0,l.Fl)((()=>null!==i.user)),a=(0,l.Fl)((()=>e.query.q)),r=(0,K.iH)(!!(a.value|"searchPage"===e.name)),o=(0,K.iH)(null),s=async()=>{i.addLastSearchList(i.searchQueryStore),i.pageNum=1,t.push({name:"searchPage",query:i.searchQueryWithGenre()}),i.setShowLastSearchList(!1)};function c(){i.searchQueryStore="",o.value.focus()}function u(){i.pageNum=1,i.genreIdStore=null,t.push({name:"home"})}(0,l.bv)((()=>{i.searchQueryStore=a.value}));const m=()=>{document.location.reload()},p=()=>{r.value=!r.value},d=e=>{i.pageNum=1,i.searchQueryStore=e,t.push({name:"searchPage",query:{q:i.searchQueryStore}}),i.setShowLastSearchList(!1)},v=()=>{i.setShowLastSearchList(!0)},g=()=>{i.setShowLastSearchList(!1)};return{searchSubmit:s,goHome:u,filmStore:i,isUser:n,clearInput:c,toggleSearch:p,isSearchVisible:r,searchInput:o,reloadPage:m,clickLastSearch:d,showLastList:v,hideLastList:g}}};const ke=(0,M.Z)(_e,[["render",b],["__scopeId","data-v-5fe4eeb2"]]);var Se=ke;const Ie={class:"genres-wrap"},Fe={class:"genres"},be=["onClick"];function Le(e,t,i,n,a,r){return(0,l.wg)(),(0,l.iD)("div",Ie,[(0,l._)("ul",Fe,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.filmStore.genreListStore,(e=>((0,l.wg)(),(0,l.iD)("li",{class:(0,_.C_)({active:+e.id===+n.filmStore.genreIdStore}),key:e.id},[(0,l._)("span",{onClick:t=>n.setGenre(e.id)},(0,_.zw)(e.genre),9,be)],2)))),128))])])}var Ce={name:"GenreList",setup(){const e=(0,ye.yj)(),t=(0,ye.tv)(),i=y(),n=(0,l.Fl)((()=>e.query.genres)),a=e=>{+i.genreIdStore===+e?i.genreIdStore=null:i.genreIdStore=e,i.pageNum=1,t.push({name:"searchPage",query:i.searchQueryWithGenre()})};async function r(){await i.getGenreList()}return(0,l.bv)((async()=>{i.genreIdStore=n.value,await r()})),{filmStore:i,setGenre:a,routeGenre:n}}};const De=(0,M.Z)(Ce,[["render",Le],["__scopeId","data-v-3609dcc8"]]);var Pe=De;function xe(e,t,i,n,a,r){return(0,l.wg)(),(0,l.iD)("div",{class:"event__top",onClick:t[0]||(t[0]=(...e)=>n.onTop&&n.onTop(...e))})}var He={setup(){function e(){window.scrollTo({top:0,behavior:"smooth"})}return{onTop:e}}};const je=(0,M.Z)(He,[["render",xe],["__scopeId","data-v-b067bd64"]]);var Ne=je;const Me={ArrowDown:"ArrowDown",ArrowUp:"ArrowUp",ArrowRight:"ArrowRight",ArrowLeft:"ArrowLeft",Enter:"Enter",NumpadEnter:"Enter"},Ue={desktop:1024,tablet:768,mobile:480},Ae={Alloha:(e,t)=>`https://harald-as.newplayjj.com/?kp=${e}&token=${t}`,Collaps:e=>`https://api.atomics.ws/embed/kp/${e}`,VideoCDN:e=>`https://p.lumex.space/j3mqebEPqCLB?domain=nayteruz.github.io&kp_id=${e}`,HDVB:async(e,t)=>{const i=`https://apivb.com/api/videos.json?id_kp=${e}&token=${t}`;try{const e=await fetch(i),t=await e.json();if(Array.isArray(t)&&t.length>0&&t[0].iframe_url)return t[0].iframe_url}catch(n){console.error("HDVB error:",n)}return null},Kodik:e=>`https:////kodik.cc/find-player?kinopoiskID=${e}`,"Трейлер":e=>`https://api.atomics.ws/embed/trailer-kp/${e}`};var qe={setup(e){const t=(0,ye.tv)(),i=y(),n=(0,K.iH)(0),a=(0,K.iH)(i.films.length),r=(0,K.iH)(t.currentRoute.value.href||document.location.pathname),o=()=>{-1===i.currentFocusIndex?i.currentFocusIndex=0:i.currentFocusIndex=Math.min(a.value-1,i.currentFocusIndex+n.value)},s=()=>{i.currentFocusIndex=Math.max(0,i.currentFocusIndex-n.value)},c=()=>{i.currentFocusIndex=Math.min(a.value-1,i.currentFocusIndex+1)},u=()=>{i.currentFocusIndex=Math.max(0,i.currentFocusIndex-1)},m=()=>{const e=i.currentFocusIndex;if(-1===e)return;const n=i.films[e].filmId||i.films[e].kinopoiskId;t.push(`/film/${n}`)},p=e=>{switch(e.key){case Me.ArrowDown:o();break;case Me.ArrowUp:s();break;case Me.ArrowRight:c();break;case Me.ArrowLeft:u();break;case Me.Enter:case Me.NumpadEnter:m();break}},d=()=>{window.innerWidth>Ue.desktop?n.value=5:window.innerWidth>Ue.tablet?n.value=4:window.innerWidth>Ue.mobile?n.value=3:n.value=2};return(0,l.YP)((()=>i.films),(e=>{a.value=e.length})),(0,l.bv)((()=>{window.removeEventListener("keydown",p),"filmPage"!==t.currentRoute.value.name&&(window.addEventListener("keydown",p),setTimeout((()=>{if("filmPage"!==t.currentRoute.value.name)if(0===window.scrollY){const e=t.currentRoute.value.href||document.location.pathname;i.focusIds={...i.focusIds,[e]:-1},i.currentFocusIndex=-1}else i.currentFocusIndex=i.focusIds[r.value]||-1}),1),d())})),(0,l.Jd)((()=>{window.removeEventListener("keydown",p),t.currentRoute.value&&(i.focusIds={...i.focusIds,[r.value]:i.currentFocusIndex})})),(e,t)=>((0,l.wg)(),(0,l.iD)("div"))}};const Ke=qe;var Te=Ke,We={setup(e){const t=y(),i=e=>{e.target.closest(".search-form")||t.setShowLastSearchList(!1)};return(e,t)=>{const n=(0,l.up)("RouterView");return(0,l.wg)(),(0,l.iD)("div",{class:"wrapper",onClick:i},[((0,l.wg)(),(0,l.j4)(Se,{key:e.$route.fullPath})),(0,l.Wm)(Pe),(0,l.Wm)(n,null,{default:(0,l.w5)((({Component:t})=>[((0,l.wg)(),(0,l.j4)(l.Ob,{include:"MainList"},[((0,l.wg)(),(0,l.j4)((0,l.LL)(t),{key:e.$route.fullPath}))],1024))])),_:1}),(0,l.Wm)(Ne),((0,l.wg)(),(0,l.j4)(Te,{key:e.$route.fullPath}))])}}};const Ee=We;var Ze=Ee;const Qe={class:"list"},Ve=(0,l.Uk)("Список последних новинок"),ze=[Ve],$e={key:0,ref:"observer",class:"observer"};function Be(e,t,i,n,a,r){const o=(0,l.up)("PaginationList"),s=(0,l.up)("FilmList"),c=(0,l.Q2)("title"),u=(0,l.Q2)("intersection");return(0,l.wg)(),(0,l.iD)("div",Qe,[(0,l.wy)(((0,l.wg)(),(0,l.iD)("h1",null,ze)),[[c]]),(0,l.Wm)(o,{total:n.totalPages},null,8,["total"]),(0,l.Wm)(s,{items:n.films,showPreload:n.showPreload},null,8,["items","showPreload"]),(0,l.Wm)(o,{total:n.totalPages},null,8,["total"]),n.filmStore.pageNum<n.totalPages?(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",$e,null,512)),[[u,{getMoreFilms:n.getMoreFilms}]]):(0,l.kq)("",!0)])}const Re={class:"favorite-icon"},Oe={key:0,class:"loading-round"};function Ye(e,t,i,a,r,o){const s=(0,l.up)("IconFavorite");return(0,l.wg)(),(0,l.iD)("span",Re,[a.isShow?((0,l.wg)(),(0,l.iD)("span",Oe)):(0,l.kq)("",!0),(0,l.Wm)(s,{class:(0,_.C_)({active:a.isFavorite}),onClick:(0,n.iM)(a.toggleFavorite,["prevent"])},null,8,["class","onClick"])])}const Ge={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},Je=(0,l._)("path",{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},null,-1),Xe=[Je];function et(e,t){return(0,l.wg)(),(0,l.iD)("svg",Ge,Xe)}const tt={},it=(0,M.Z)(tt,[["render",et]]);var nt=it,at={name:"FavoriteBtn",components:{IconFavorite:nt},props:["itemFilm"],setup(e){const t=(0,K.iH)(!1),i=(0,K.iH)(!1),n=(0,l.f3)("emitter"),a=y();function r(){t.value=a.checkFavoriteStore(e.itemFilm)}async function o(){a.user?(i.value=!0,t.value?(await a.removeFavorite(e.itemFilm),t.value=!1):(await a.addFavorite(e.itemFilm),t.value=!0),i.value=!1):alert("Необходима авторизация")}return(0,l.bv)((()=>{r()})),n.on("setUserData",r),{isFavorite:t,isShow:i,toggleFavorite:o}}};const rt=(0,M.Z)(at,[["render",Ye],["__scopeId","data-v-ef9ed76c"]]);var ot=rt;const st=e=>((0,l.dD)("data-v-4786d702"),e=e(),(0,l.Cn)(),e),lt=["href","onClick"],ct={class:"item__image"},ut=st((()=>(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"360",height:"540"},null,-1))),mt=["src","alt"],pt={key:0,class:"item__rating"},dt={class:"item__options"},vt={class:"name"},gt={key:0,class:"year"};var ft={props:["itemFilm","currentIndex"],setup(e){const t=e,i=(0,ye.tv)(),a=y(),r=(0,K.iH)(null),o=(0,l.Fl)((()=>t.currentIndex===a.currentFocusIndex)),s=(0,K.iH)(!1),c=(0,l.Fl)((()=>t.itemFilm?.rating||t.itemFilm?.ratingKinopoisk||t.itemFilm?.ratingImdb||null)),u=(0,l.Fl)((()=>t.itemFilm?.nameRu||t.itemFilm?.nameEn||t.itemFilm?.nameOriginal||"Без названия")),m=()=>{i.push(`/film/${t.itemFilm.filmId||t.itemFilm.kinopoiskId}`)},p=()=>{s.value=!0},d=()=>{s.value=!1};return(0,l.YP)(o,(()=>{if(o.value&&r.value){const e=r.value.getBoundingClientRect(),t=document.documentElement.scrollTop,i=t+window.innerHeight,n=e.bottom+t;(e.top<0||n>i)&&window.scrollTo(0,t+e.top-80)}})),(i,a)=>((0,l.wg)(),(0,l.iD)("li",{class:(0,_.C_)({films__item:!0,focused:(0,K.SU)(o)|s.value}),onMouseover:p,onMouseleave:d,tabindex:"0",ref_key:"itemRef",ref:r},[(0,l._)("a",{href:`/film/${e.itemFilm.filmId||e.itemFilm.kinopoiskId}`,class:"item__link",onClick:(0,n.iM)(m,["prevent"])},null,8,lt),(0,l.Wm)(ot,{class:"favorite",itemFilm:e.itemFilm},null,8,["itemFilm"]),(0,l._)("div",ct,[ut,(0,l._)("img",{src:e.itemFilm.posterUrlPreview,alt:t.itemFilm.nameRu},null,8,mt)]),(0,K.SU)(c)?((0,l.wg)(),(0,l.iD)("span",pt,(0,_.zw)((0,K.SU)(c)),1)):(0,l.kq)("",!0),(0,l._)("div",dt,[(0,l._)("ul",null,[(0,l._)("li",vt,(0,_.zw)((0,K.SU)(u)),1),e.itemFilm.year?((0,l.wg)(),(0,l.iD)("li",gt,(0,_.zw)(e.itemFilm.year)+" г.",1)):(0,l.kq)("",!0)])])],34))}};const ht=(0,M.Z)(ft,[["__scopeId","data-v-4786d702"]]);var wt=ht;const yt=e=>((0,l.dD)("data-v-b8e77c20"),e=e(),(0,l.Cn)(),e),_t=yt((()=>(0,l._)("div",{class:"item__image"},[(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"360",height:"540"})],-1))),kt=[_t];function St(e,t){return(0,l.wg)(),(0,l.iD)(l.HY,null,(0,l.Ko)(20,(e=>(0,l._)("li",{class:"films__item preload-card",key:e},kt))),64)}const It={},Ft=(0,M.Z)(It,[["render",St],["__scopeId","data-v-b8e77c20"]]);var bt=Ft;const Lt={class:"films__list"};var Ct={props:["showPreload","items"],setup(e){const t=y(),i=(0,l.f3)("emitter"),n=(0,K.iH)(!1);return i.on("isLoading",(e=>{n.value=e})),(0,l.bv)((()=>{t.hasFilmList=!0})),(0,l.Jd)((()=>{t.hasFilmList=!1})),(t,i)=>((0,l.wg)(),(0,l.iD)("div",{class:(0,_.C_)(["films__wrap",{loading:n.value}])},[(0,l._)("ul",Lt,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.items,((e,t)=>((0,l.wg)(),(0,l.j4)(wt,{itemFilm:e,key:e.filmId||e.kinopoiskId,currentIndex:t},null,8,["itemFilm","currentIndex"])))),128)),e.showPreload?((0,l.wg)(),(0,l.j4)(bt,{key:0})):(0,l.kq)("",!0)])],2))}};const Dt=(0,M.Z)(Ct,[["__scopeId","data-v-012cabd8"]]);var Pt=Dt;const xt=e=>((0,l.dD)("data-v-4b5bec86"),e=e(),(0,l.Cn)(),e),Ht={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512"},jt=xt((()=>(0,l._)("path",{d:"M31.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34z"},null,-1))),Nt=[jt];function Mt(e,t){return(0,l.wg)(),(0,l.iD)("svg",Ht,Nt)}const Ut={},At=(0,M.Z)(Ut,[["render",Mt],["__scopeId","data-v-4b5bec86"]]);var qt=At;const Kt=e=>((0,l.dD)("data-v-d0a52dfc"),e=e(),(0,l.Cn)(),e),Tt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},Wt=Kt((()=>(0,l._)("path",{d:"M223.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L319.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L393.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34zm-192 34l136 136c9.4 9.4 24.6 9.4 33.9 0l22.6-22.6c9.4-9.4 9.4-24.6 0-33.9L127.9 256l96.4-96.4c9.4-9.4 9.4-24.6 0-33.9L201.7 103c-9.4-9.4-24.6-9.4-33.9 0l-136 136c-9.5 9.4-9.5 24.6-.1 34z"},null,-1))),Et=[Wt];function Zt(e,t){return(0,l.wg)(),(0,l.iD)("svg",Tt,Et)}const Qt={},Vt=(0,M.Z)(Qt,[["render",Zt],["__scopeId","data-v-d0a52dfc"]]);var zt=Vt;const $t={class:"pagination"},Bt=["onClick"];var Rt={props:["total"],setup(e){const t=e,i=y(),a=(0,l.f3)("emitter"),r=(0,l.Fl)((()=>i.pageNum)),o=e=>{let i=[];if(t.total>6){if(1===r.value)return[1,2,3,"...",e];if(r.value>1&&r.value<3)return[1,2,3,"...",e];if(3===r.value)return[1,2,3,4,"...",e];if(r.value>3&&r.value<e-2)return[1,"...",r.value-1,r.value,r.value+1,"...",e];if(r.value===e-2)return[1,"...",r.value-1,r.value,r.value+1,e];if(r.value===e-1)return[1,"...",r.value-1,r.value,e];if(r.value===e)return[1,"...",r.value-2,r.value-1,e]}else for(let t=1;t<=e;t++)i.push(t);return i},s=(e,n="")=>{if("..."===e)return;let r;r="prev"===n?i.pageNum-1:"next"===n?i.pageNum+1:"prevAll"===n?1:"nextAll"===n?t.total:e,i.pageNum=r,a.emit("clickPage",r)};return(a,r)=>((0,l.wg)(),(0,l.iD)("div",$t,[(0,l._)("ul",null,[(0,l.wy)((0,l._)("li",{class:"pg first",onClick:r[0]||(r[0]=e=>s(null,"prevAll"))},[(0,l._)("span",null,[(0,l.Wm)(zt)])],512),[[n.F8,(0,K.SU)(i).pageNum>1]]),(0,l.wy)((0,l._)("li",{class:"pg prev",onClick:r[1]||(r[1]=e=>s(null,"prev"))},[(0,l._)("span",null,[(0,l.Wm)(qt)])],512),[[n.F8,(0,K.SU)(i).pageNum>1]]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o(e.total),(e=>((0,l.wg)(),(0,l.iD)("li",{key:e},[(0,l._)("span",{class:(0,_.C_)({active:(0,K.SU)(i).pageNum===e}),onClick:t=>s(e)},(0,_.zw)(e),11,Bt)])))),128)),(0,l.wy)((0,l._)("li",{class:"pg next",onClick:r[2]||(r[2]=e=>s(null,"next"))},[(0,l._)("span",null,[(0,l.Wm)(qt)])],512),[[n.F8,(0,K.SU)(i).pageNum<t.total]]),(0,l.wy)((0,l._)("li",{class:"pg last",onClick:r[3]||(r[3]=e=>s(null,"nextAll"))},[(0,l._)("span",null,[(0,l.Wm)(zt)])],512),[[n.F8,(0,K.SU)(i).pageNum<t.total]])])]))}};const Ot=(0,M.Z)(Rt,[["__scopeId","data-v-1a020d4e"]]);var Yt=Ot,Gt={name:"MainList",components:{PaginationList:Yt,FilmList:Pt},setup(){const e=y(),t=(0,l.f3)("emitter"),i=(0,ye.tv)(),n=(0,K.iH)([]),a=(0,K.iH)("TOP_POPULAR_ALL"),r=(0,K.iH)(0),o=(0,K.iH)(!1);async function s(){try{const t="https://kinopoiskapiunofficial.tech/api/v2.2/films/collections?type="+a.value+"&page="+e.pageNum,i=await fetch(t,{headers:{"X-API-KEY":e.apiKey,"Content-Type":"application/json"}});return i.json()}catch(t){console.error("Error load films",t)}}async function c(i,a=""){"loading"===a&&t.emit("isLoading",!0),o.value="preload"===a,e.pageNum=i||e.pageNum;const l=await s();r.value=l.totalPages,"preload"===a?n.value=[...n.value,...l.items]:(n.value=[],n.value=l.items),o.value=!1,"loading"===a&&await l.items&&t.emit("isLoading",!1)}function u(){c(e.pageNum+1,"preload")}function m(){c(e.pageNum,"loading")}return t.on("clickPage",m),(0,l.YP)((()=>n.value),(()=>{e.films=n.value})),(0,l.YP)((()=>i.currentRoute.value.href),(()=>{e.films=n.value})),(0,l.bv)((()=>{c()})),{films:n,showPreload:o,totalPages:r,filmStore:e,getListFilms:c,getMoreFilms:u}}};const Jt=(0,M.Z)(Gt,[["render",Be],["__scopeId","data-v-bb9292f2"]]);var Xt=Jt;const ei=e=>((0,l.dD)("data-v-1f63e932"),e=e(),(0,l.Cn)(),e),ti=(0,l.Uk)("Назад"),ii={class:"film__wrap"},ni={class:"film__image"},ai=["src"],ri={key:1,class:"film__rating"},oi={class:"film__note"},si={class:"film__btns"},li={class:"film__description"},ci=ei((()=>(0,l._)("h3",null,"Описание:",-1))),ui={class:"film__genres"},mi=ei((()=>(0,l._)("h3",null,"Жанры",-1))),pi=["onClick"],di={key:0,class:"film__similar"},vi=ei((()=>(0,l._)("h3",null,"Похожие фильмы",-1)));function gi(e,t,i,a,r,o){const s=(0,l.up)("IconLeftArrow"),c=(0,l.up)("FavoriteBtn"),u=(0,l.up)("FilmPageDialog"),m=(0,l.up)("FilmList"),p=(0,l.Q2)("title");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("button",{class:"back-to-list",onClick:t[0]||(t[0]=(0,n.iM)(((...e)=>a.goToList&&a.goToList(...e)),["prevent"]))},[(0,l.Wm)(s),ti]),(0,l.wy)(((0,l.wg)(),(0,l.iD)("h1",null,[(0,l.Uk)((0,_.zw)(a.filmTitle),1)])),[[p]]),(0,l._)("div",ii,[(0,l._)("div",ni,[(0,l.Wm)(c,{class:"favorite",itemFilm:a.filmInfo},null,8,["itemFilm"]),a.filmInfo?.posterUrl?((0,l.wg)(),(0,l.iD)("img",{key:0,src:a.filmInfo?.posterUrl,alt:"filmTitle"},null,8,ai)):(0,l.kq)("",!0),a.filmRating?((0,l.wg)(),(0,l.iD)("span",ri,(0,_.zw)(a.filmRating),1)):(0,l.kq)("",!0)]),(0,l._)("div",oi,[(0,l._)("div",si,[(0,l.Wm)(u,{itemFilm:a.filmInfo},null,8,["itemFilm"])]),(0,l._)("div",li,[ci,(0,l.Uk)(" "+(0,_.zw)(a.filmInfo.description),1)]),(0,l._)("div",ui,[mi,(0,l._)("ul",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.filmInfo.genres,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e},[(0,l._)("span",{onClick:t=>a.setGenre(e.genre)},(0,_.zw)(e.genre),9,pi)])))),128))])]),a.similars.length>0?((0,l.wg)(),(0,l.iD)("div",di,[vi,(0,l.Wm)(m,{items:a.similars},null,8,["items"])])):(0,l.kq)("",!0)])])],64)}const fi=e=>((0,l.dD)("data-v-49730664"),e=e(),(0,l.Cn)(),e),hi={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},wi=fi((()=>(0,l._)("path",{d:"M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"},null,-1))),yi=[wi];function _i(e,t){return(0,l.wg)(),(0,l.iD)("svg",hi,yi)}const ki={},Si=(0,M.Z)(ki,[["render",_i],["__scopeId","data-v-49730664"]]);var Ii=Si;const Fi={class:"tab-titles"};function bi(e,t,i,n,a,r){const o=(0,l.up)("PlayersList"),s=(0,l.up)("FilmKinoTop"),c=(0,l.up)("FilmKinoBD"),u=(0,l.up)("FilmKinoBoxTab"),m=(0,l.up)("FilmPlayerClub");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("ul",Fi,[(0,l._)("li",{class:(0,_.C_)({selected:1===n.playerNum}),onClick:t[0]||(t[0]=e=>n.playerNum=1)},"Multiple",2),(0,l._)("li",{class:(0,_.C_)({selected:2===n.playerNum}),onClick:t[1]||(t[1]=e=>n.playerNum=2)},"Kinotop",2),(0,l._)("li",{class:(0,_.C_)({selected:4===n.playerNum}),onClick:t[2]||(t[2]=e=>n.playerNum=4)},"KinoBox",2),(0,l._)("li",{class:(0,_.C_)({selected:5===n.playerNum}),onClick:t[3]||(t[3]=e=>n.playerNum=5)},"Lumex",2)]),1===n.playerNum?((0,l.wg)(),(0,l.j4)(o,{key:0})):(0,l.kq)("",!0),2===n.playerNum?((0,l.wg)(),(0,l.j4)(s,{key:1})):(0,l.kq)("",!0),3===n.playerNum?((0,l.wg)(),(0,l.j4)(c,{key:2})):(0,l.kq)("",!0),4===n.playerNum?((0,l.wg)(),(0,l.j4)(u,{key:3})):(0,l.kq)("",!0),5===n.playerNum?((0,l.wg)(),(0,l.j4)(m,{key:4})):(0,l.kq)("",!0)],64)}const Li={class:"kinobox_player film__init",ref:"player_init_item"};function Ci(e,t,i,n,a,r){return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",Li,null,512)])}var Di={name:"FilmKinoBoxTab",setup(){const e=y(),t=(0,ye.yj)(),i=(0,K.iH)(null);function n(i){e.setFilmPageId(t.params.id);let n=document.createElement("script");n.type="text/javascript",n.src="//kinobox.tv/kinobox.min.js",i.value.appendChild(n),setTimeout((()=>{new Kinobox(".kinobox_player",{search:{kinopoisk:t.params.id}}).init()}),1e3)}return(0,l.bv)((()=>{n(i)})),{player_init_item:i}}};const Pi=(0,M.Z)(Di,[["render",Ci]]);var xi=Pi;const Hi=["src"];function ji(e,t,i,n,a,r){return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("iframe",{src:`//496622434375553.svetacdn.in/fcvcbl7auqJG?kp_id=${n.filmId}`,width:"100%",height:"495",allowfullscreen:""},null,8,Hi)])}var Ni={name:"FilmPlayerClub",setup(){const e=(0,ye.yj)(),t=e.params.id;return{filmId:t}}};const Mi=(0,M.Z)(Ni,[["render",ji],["__scopeId","data-v-744b4860"]]);var Ui=Mi;const Ai={class:"film__init",ref:"player_init_item"};function qi(e,t,i,n,a,r){return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",Ai,null,512)])}var Ki={name:"FilmKinoTopTab",setup(){const e=(0,ye.yj)(),t=(0,K.iH)(null);function i(t){t.value.innerHTML="";let i=document.createElement("div");i.setAttribute("data-kinopoisk",e.params.id),i.setAttribute("id","kinoplayertop");let n=document.createElement("script");n.type="text/javascript",n.src="//kinoplayer.top/top.js",t.value.appendChild(i),t.value.appendChild(n),setTimeout((()=>{runKinoplayertop()}),500)}return(0,l.bv)((()=>{i(t)})),{player_init_item:t}}};const Ti=(0,M.Z)(Ki,[["render",qi]]);var Wi=Ti;const Ei={ref:"playerContainer"};function Zi(e,t,i,n,a,r){return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",Ei,null,512)])}var Qi={name:"FilmKinoBD",setup(){const e=y(),t=(0,ye.yj)(),i=t.params.id,n=(0,K.iH)(null);let a=null;function r(){e.setFilmPageId(i),n.value.innerHTML=`\n          <div data-kinopoisk="${i}" id="kinobd"></div>\n        `,a=document.createElement("script"),a.src="https://kinobd.net/js/player_.js",a.async=!0,a.onerror=()=>console.error("Failed to load player script"),document.body.appendChild(a)}function o(){a&&document.body.contains(a)&&document.body.removeChild(a),n.value&&(n.value.innerHTML="")}return(0,l.bv)((()=>{n.value&&r()})),(0,l.Jd)((()=>{o()})),{playerContainer:n,filmId:i}}};const Vi=(0,M.Z)(Qi,[["render",Zi]]);var zi=Vi;const $i={class:"player-container"},Bi={class:"player-select"},Ri={class:"player-name-list"},Oi=["onClick"],Yi={ref:"playerList",class:"player-list"},Gi={key:0},Ji=["src","title"],Xi={key:1};function en(e,t,i,n,a,r){return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",$i,[(0,l._)("div",Bi,[(0,l._)("div",Ri,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.playerNames,((e,t)=>((0,l.wg)(),(0,l.iD)("button",{key:e,class:(0,_.C_)({"select-button":!0,active:t===n.selectedIndex}),onClick:e=>n.selectPlayer(t)},(0,_.zw)(e),11,Oi)))),128))])]),(0,l._)("div",Yi,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.playersData,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{key:e.name,class:(0,_.C_)({"player-item":!0,active:t===n.selectedIndex})},[t===n.selectedIndex?((0,l.wg)(),(0,l.iD)("div",Gi,[e.iframeSrc?((0,l.wg)(),(0,l.iD)("iframe",{key:0,src:e.iframeSrc,allowfullscreen:"",loading:"lazy",title:`Плеер ${e.name} для КиноПоиск ID ${n.filmId}`},null,8,Ji)):((0,l.wg)(),(0,l.iD)("div",Xi,"Загрузка плеера..."))])):(0,l.kq)("",!0)],2)))),128))],512)])])}var tn={name:"PlayersList",setup(){const e=y(),t=(0,ye.yj)(),i=t.params.id,n=(0,K.iH)(null),a=(0,K.iH)(-1),r=Object.keys(Ae),o=(0,K.iH)([]),s=e=>{a.value=e};async function c(){e.setFilmPageId(i);const t=await Promise.all(Object.entries(Ae).map((async([t,n])=>{let a=e.apiKey;"Alloha"===t&&(a=e.apiAloha),"HDVB"===t&&(a=e.apiHDBV),"Alloha"!==t&&"HDVB"!==t&&(a=void 0);let r="function"===typeof n?await n(i,a):null;return{name:t,iframeSrc:r}})));o.value=t.filter((e=>e.iframeSrc)),o.value.length>0&&(a.value=0)}return(0,l.bv)((()=>{n.value&&c()})),{filmId:i,playerNames:r,selectedIndex:a,selectPlayer:s,playerList:n,playersData:o}}};const nn=(0,M.Z)(tn,[["render",en],["__scopeId","data-v-d224dc3e"]]);var an=nn,rn={name:"FilmPageDialog",props:["itemFilm"],components:{FilmKinoTop:Wi,FilmKinoBoxTab:xi,FilmPlayerClub:Ui,FilmKinoBD:zi,PlayersList:an},setup(){const e=y(),t=(0,K.iH)(0);return{filmStore:e,playerNum:t}}};const on=(0,M.Z)(rn,[["render",bi],["__scopeId","data-v-0c96ae00"]]);var sn=on,ln={name:"FilmPage",components:{FilmList:Pt,FilmPageDialog:sn,FavoriteBtn:ot,IconLeftArrow:Ii},setup(){const e=y(),t=(0,ye.yj)(),i=(0,ye.tv)(),n=(0,K.iH)([]),a=(0,K.iH)(""),r=(0,K.iH)([]),o=(0,K.iH)(a.value),s=(0,l.Fl)((()=>{const e=n.value?.rating||n.value?.ratingKinopoisk||n.value?.ratingImdb||null;return e?e.toFixed(1):e}));async function c(){try{const i=await fetch("https://kinopoiskapiunofficial.tech/api/v2.2/films/"+t.params.id,{headers:{"X-API-KEY":e.apiKey,"Content-Type":"application/json"}}),a=i.json();n.value=await a,p()}catch(i){console.error("Error load film info",i),n.value=[]}}async function u(){try{const i=await fetch("https://kinopoiskapiunofficial.tech/api/v2.2/films/"+t.params.id+"/similars",{headers:{"X-API-KEY":e.apiKey,"Content-Type":"application/json"}}),n=await i.json(),a=n.items||[];r.value=a}catch(i){console.error("Error load similars",i),r.value=[]}}async function m(){try{const i=await fetch("https://kinopoiskapiunofficial.tech/api/v2.1/films/"+t.params.id+"/sequels_and_prequels",{headers:{"X-API-KEY":e.apiKey,"Content-Type":"application/json"}}),n=await i.json();r.value=[...n,...r.value]}catch(i){console.error("Error load sequels and prequels",i)}}function p(){a.value=n.value?.nameRu||n.value?.nameEn||n.value?.nameOriginal||"Без названия",a.value+=` (${n.value.year})`}function d(e){let t=JSON.parse(localStorage.getItem("genres")),n=t.filter((t=>t.genre===e))[0].id;window.scrollTo(0,0),i.push({name:"searchPage",query:{genres:n}})}const v=()=>{i.go(-1)};return(0,l.bv)((()=>{c(),u(),m()})),{filmTitle:a,filmInfo:n,similars:r,setGenre:d,title:o,goToList:v,IconLeftArrow:Ii,filmRating:s}}};const cn=(0,M.Z)(ln,[["render",gi],["__scopeId","data-v-1f63e932"]]);var un=cn;const mn={class:"list"},pn={key:0,ref:"observer",class:"observer"};function dn(e,t,i,n,a,r){const o=(0,l.up)("PaginationList"),s=(0,l.up)("FilmList"),c=(0,l.Q2)("title"),u=(0,l.Q2)("intersection");return(0,l.wg)(),(0,l.iD)("div",mn,[(0,l.wy)(((0,l.wg)(),(0,l.iD)("h1",null,[(0,l.Uk)((0,_.zw)(n.titlePage),1)])),[[c]]),(0,l.Wm)(o,{total:n.totalPages,onClickPage:n.getListFilms},null,8,["total","onClickPage"]),(0,l.Wm)(s,{items:n.films,showPreload:n.showPreload},null,8,["items","showPreload"]),(0,l.Wm)(o,{total:n.totalPages,onClickPage:n.getListFilms},null,8,["total","onClickPage"]),n.filmStore.pageNum<n.totalPages?(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",pn,null,512)),[[u,{getMoreFilms:n.getMoreFilms}]]):(0,l.kq)("",!0)])}var vn={components:{FilmList:Pt,PaginationList:Yt},setup(){const e=(0,ye.yj)(),t=(0,K.iH)([]),i=(0,l.f3)("emitter"),n=y(),a=(0,K.iH)(0),r=(0,K.iH)(""),o=(0,K.iH)(!1),s=(0,l.Fl)((()=>e.query.q)),c=(0,l.Fl)((()=>e.query.genres));async function u(){let e="https://kinopoiskapiunofficial.tech/api/v2.2/films";n.searchQueryStore&&(e+=`?keyword=${n.searchQueryStore}`),n.genreIdStore&&(e+=`&genres=${n.genreIdStore}`),n.pageNum&&(e+=`&page=${n.pageNum}`);try{const t=await fetch(e,{headers:{"X-API-KEY":n.apiKey,"Content-Type":"application/json"}});return t.json()}catch(t){console.error("Error load films",t)}}async function m(e=!1,i){if(await v(),n.pageNum=i||n.pageNum,n.genreIdStore||n.searchQueryStore||e){o.value=!0;const i=await u();a.value=i.totalPages,e?t.value=[...t.value,...i.items]:(t.value=[],t.value=i.items),o.value=!1}}function p(){m(!0,n.pageNum+1)}function d(){m(!1,n.pageNum)}async function v(){let e=n.genreIdStore?await n.genreListStore.filter((e=>+e.id===+n.genreIdStore))[0].genre:null;n.searchQueryStore&&n.genreIdStore?r.value=`Поиск по слову "${n.searchQueryStore}", жанр "${e}"`:n.searchQueryStore&&!n.genreIdStore?r.value=`Поиск по слову "${n.searchQueryStore}"`:n.genreIdStore&&!n.searchQueryStore?r.value=`Поиск по жанру "${e}"`:r.value="Ничего не указано для поиска"}return i.on("clickPage",d),(0,l.bv)((async()=>{n.searchQueryStore=s.value,n.genreIdStore=c.value,await m(!1,1),i.on("searchSubmit",(()=>{m(!1,1)}))})),{films:t,titlePage:r,filmStore:n,totalPages:a,showPreload:o,getListFilms:m,getMoreFilms:p}}};const gn=(0,M.Z)(vn,[["render",dn],["__scopeId","data-v-49e8475d"]]);var fn=gn;const hn=e=>((0,l.dD)("data-v-0f8f1a9e"),e=e(),(0,l.Cn)(),e),wn=hn((()=>(0,l._)("h1",null,"Страница не найдена",-1))),yn=(0,l.Uk)("Перейти на "),_n=(0,l.Uk)("главную"),kn=hn((()=>(0,l._)("br",null,null,-1)));function Sn(e,t){const i=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)(l.HY,null,[wn,(0,l._)("p",null,[yn,(0,l.Wm)(i,{to:"/"},{default:(0,l.w5)((()=>[_n])),_:1})]),kn],64)}const In={},Fn=(0,M.Z)(In,[["render",Sn],["__scopeId","data-v-0f8f1a9e"]]);var bn=Fn;const Ln=e=>((0,l.dD)("data-v-273e45c6"),e=e(),(0,l.Cn)(),e),Cn={class:"list"},Dn=Ln((()=>(0,l._)("h1",null,"Избранные фильмы/мультики и тд",-1))),Pn={key:0};function xn(e,t,i,n,a,r){const o=(0,l.up)("FilmList");return(0,l.wg)(),(0,l.iD)("div",Cn,[Dn,(0,l.Wm)(o,{items:n.filmStore.favorites,showPreload:n.showPreload},null,8,["items","showPreload"]),0===n.filmStore.favorites.length?((0,l.wg)(),(0,l.iD)("h3",Pn,"Список пуст")):(0,l.kq)("",!0)])}var Hn={name:"FavoritePage",components:{FilmList:Pt},setup(){const e=y(),t=(0,K.iH)(!1);return(0,l.YP)((()=>e.favorites),(()=>{e.films=e.favorites})),{filmStore:e,showPreload:t}}};const jn=(0,M.Z)(Hn,[["render",xn],["__scopeId","data-v-273e45c6"]]);var Nn=jn;const Mn=(0,ye.p7)({history:(0,ye.PO)("/hometv"),routes:[{path:"/",name:"home",component:Xt},{path:"/film/:id",name:"filmPage",component:un},{path:"/search",name:"searchPage",component:fn},{path:"/favorites",name:"favorite",component:Nn},{path:"/:pathMatch(.*)*",component:bn}]});var Un=Mn,An=i(1373),qn=i(5431);(0,qn.z)("/hometv/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});const Kn=(0,An.Z)(),Tn=(0,n.ri)(Ze);Tn.directive("intersection",r),Tn.directive("title",s),Tn.use((0,a.WB)()),Tn.use(Un),Tn.provide("emitter",Kn),Tn.mount("#app")}},t={};function i(n){var a=t[n];if(void 0!==a)return a.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,i),r.exports}i.m=e,function(){var e=[];i.O=function(t,n,a,r){if(!n){var o=1/0;for(u=0;u<e.length;u++){n=e[u][0],a=e[u][1],r=e[u][2];for(var s=!0,l=0;l<n.length;l++)(!1&r||o>=r)&&Object.keys(i.O).every((function(e){return i.O[e](n[l])}))?n.splice(l--,1):(s=!1,r<o&&(o=r));if(s){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,a,r]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,r,o=n[0],s=n[1],l=n[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(a in s)i.o(s,a)&&(i.m[a]=s[a]);if(l)var u=l(i)}for(t&&t(n);c<o.length;c++)r=o[c],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(u)},n=self["webpackChunkhomefilmtv"]=self["webpackChunkhomefilmtv"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=i.O(void 0,[998],(function(){return i(4881)}));n=i.O(n)})();
//# sourceMappingURL=app.4120ed86.js.map