(function(){"use strict";var e={1777:function(e,t,i){var s=i(9242),n=i(3766),r={name:"intersection",mounted(e,t){const i={rootMargin:"0px",threshold:1},s=e=>{e[0].isIntersecting&&t.value.getPosts()},n=new IntersectionObserver(s,i);n.observe(e)}};const a=function(e){document.title=e};var o={mounted:(e,t)=>a(t.value||e.innerText),beforeUpdate:(e,t)=>a(t.value||e.innerText),updated:(e,t)=>a(t.value||e.innerText)},l=i(3396);const c={class:"wrapper"};function u(e,t,i,s,n,r){const a=(0,l.up)("HeaderFilm"),o=(0,l.up)("GenreList"),u=(0,l.up)("RouterView"),h=(0,l.up)("ToTop");return(0,l.wg)(),(0,l.iD)("div",c,[((0,l.wg)(),(0,l.j4)(a,{key:e.$route.fullPath,onSeachSubmit:e.onSubmitSearch},null,8,["onSeachSubmit"])),(0,l.Wm)(o),((0,l.wg)(),(0,l.j4)(u,{key:e.$route.fullPath})),(0,l.Wm)(h)])}const h=e=>((0,l.dD)("data-v-6f05f52f"),e=e(),(0,l.Cn)(),e),m=h((()=>(0,l._)("button",{type:"submit"},"Найти",-1)));function p(e,t,i,n,r,a){return(0,l.wg)(),(0,l.iD)("header",null,[(0,l._)("a",{class:"home",onClick:t[0]||(t[0]=(...e)=>a.redirectToMain&&a.redirectToMain(...e)),href:"#"},"Home"),(0,l._)("form",{action:"",onSubmit:t[5]||(t[5]=(0,s.iM)(((...e)=>a.searchSubmit&&a.searchSubmit(...e)),["prevent"]))},[(0,l.wy)((0,l._)("input",{type:"text",onKeyup:t[1]||(t[1]=(0,s.D2)((0,s.iM)(((...e)=>a.searchSubmit&&a.searchSubmit(...e)),["stop"]),["enter"])),onKeydown:t[2]||(t[2]=(0,s.D2)((0,s.iM)(((...e)=>a.searchSubmit&&a.searchSubmit(...e)),["stop"]),["enter"])),onChange:t[3]||(t[3]=(0,s.iM)((()=>{}),["stop"])),placeholder:"Название фильма / ID КиноПоиск","onUpdate:modelValue":t[4]||(t[4]=e=>r.searchQuery=e),name:"keyword"},null,544),[[s.nr,r.searchQuery]]),m],32)])}const d=(0,n.Q_)({id:"filmStore",state:()=>({apiKey:"404dc583-7efc-4c93-8f21-a782f977b9e7",pageNum:1,limit:20,searchQueryStore:""}),getters:{},actions:{setPageNum(e=1){this.pageNum=e},setSearchQueryStore(e){this.searchQueryStore=e}}});var g={data(){return{searchQuery:""}},methods:{searchSubmit(){this.setPageNum(1),this.emitter.emit("searchSubmit"),this.$router.push({path:"/film-search",query:{q:this.searchQuery}})},...(0,n.nv)(d,["setSearchQueryStore","setPageNum"]),redirectToMain(){this.setPageNum(1),this.$router.push("/")}},mounted(){this.emitter.on("search-query",(e=>{this.searchQuery=e}))},computed:{...(0,n.rn)(d,["searchQueryStore"])}},f=i(89);const v=(0,f.Z)(g,[["render",p],["__scopeId","data-v-6f05f52f"]]);var w=v,_=i(7139);const y={class:"genres-wrap"},P={class:"genres"},k=["onClick"];function I(e,t,i,s,n,r){return(0,l.wg)(),(0,l.iD)("div",y,[(0,l._)("ul",P,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.genresFiltered,(e=>((0,l.wg)(),(0,l.iD)("li",{class:(0,_.C_)({active:+e.id===+n.activeGenreId}),key:e.id},[(0,l._)("span",{onClick:t=>r.setGenre(e)},(0,_.zw)(e.genre),9,k)],2)))),128))])])}var b=i(6265),C=i.n(b),D={data(){return{filters:[],genresFiltered:[],activeGenreId:void 0}},methods:{...(0,n.nv)(d,["setPageNum"]),setGenre(e){let t={};this.$route.query.q&&(t.q=this.$route.query.q),this.$route.query.genres&&+this.$route.query.genres===+e.id||(t.genres=e.id),this.setPageNum(1),this.$router.push({path:"/film-search",query:t})},getGenreList:async function(){if(localStorage.getItem("filters"))this.filters=JSON.parse(localStorage.getItem("filters"));else{const e=await C().get("https://kinopoiskapiunofficial.tech/api/v2.2/films/filters",{headers:{"X-API-KEY":this.apiKey,"Content-Type":"application/json"}});this.filters=e.data,localStorage.setItem("filters",JSON.stringify(this.filters))}this.filterGenres()},filterGenres(){this.genresFiltered=this.filters.genres.filter((e=>{if(""!==e.genre&&"для взрослых"!==e.genre&&"мюзикл"!==e.genre&&"спорт"!==e.genre&&"церемония"!==e.genre&&"фильм-нуар"!==e.genre&&"биография"!==e.genre&&"вестерн"!==e.genre&&"короткометражка"!==e.genre&&"документальный"!==e.genre&&"реальное ТВ"!==e.genre&&"ток-шоу"!==e.genre&&"концерт"!==e.genre&&"игра"!==e.genre&&"новости"!==e.genre)return e}))}},computed:{...(0,n.rn)(d,["apiKey"])},created(){this.getGenreList()},updated(){this.activeGenreId=this.$route.query.genres}};const S=(0,f.Z)(D,[["render",I],["__scopeId","data-v-e565514a"]]);var T=S;function F(e,t,i,s,n,r){return(0,l.wg)(),(0,l.iD)("div",{class:"event__top",onClick:t[0]||(t[0]=(...e)=>r.eventTop&&r.eventTop(...e))})}var N={methods:{eventTop(){window.scrollTo({top:0,behavior:"smooth"})}}};const K=(0,f.Z)(N,[["render",F],["__scopeId","data-v-019695b4"]]);var $=K,q={components:{HeaderFilm:w,GenreList:T,ToTop:$}};const Q=(0,f.Z)(q,[["render",u]]);var G=Q,O=i(678);const L=(0,l.Uk)("Список последних новинок"),j=[L],M={key:0,ref:"observer",class:"observer"};function Y(e,t,i,s,n,r){const a=(0,l.up)("PaginationList"),o=(0,l.up)("FIlmItem"),c=(0,l.Q2)("title"),u=(0,l.Q2)("intersection");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.wy)(((0,l.wg)(),(0,l.iD)("h1",null,j)),[[c]]),(0,l.Wm)(a,{total:n.totalPages,onClickPage:r.getListFilms},null,8,["total","onClickPage"]),(0,l.Wm)(o,{items:n.films,showPreload:n.showPreload},null,8,["items","showPreload"]),(0,l.Wm)(a,{total:n.totalPages,onClickPage:r.getListFilms},null,8,["total","onClickPage"]),e.pageNum<n.totalPages?(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",M,null,512)),[[u,{getPosts:r.getMoreFilms}]]):(0,l.kq)("",!0)],64)}const A=e=>((0,l.dD)("data-v-3bf601a4"),e=e(),(0,l.Cn)(),e),E={class:"films__wrap"},H={class:"films__list"},U=["onClick"],Z={class:"item__image"},x=A((()=>(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"360",height:"540"},null,-1))),W=["src","alt"],z={key:0,class:"item__rating"},X={class:"item__options"},R={class:"name"},J={key:0,class:"year"};function B(e,t,i,s,n,r){const a=(0,l.up)("PreloadCards");return(0,l.wg)(),(0,l.iD)("div",E,[(0,l._)("ul",H,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.items,((t,i)=>((0,l.wg)(),(0,l.iD)("li",{class:"films__item",key:i,onClick:i=>e.$router.push(`/film/${t.filmId||t.kinopoiskId}`)},[(0,l._)("div",Z,[x,(0,l._)("img",{src:t.posterUrlPreview,alt:t.nameRu},null,8,W)]),"null"!==t.rating&&void 0!==t.rating?((0,l.wg)(),(0,l.iD)("span",z,(0,_.zw)("null"===t.rating?"нет":t.rating),1)):(0,l.kq)("",!0),(0,l._)("div",X,[(0,l._)("ul",null,[(0,l._)("li",R,(0,_.zw)(t?.nameRu||t?.nameEn||t?.nameOriginal||"Без названия"),1),t.year?((0,l.wg)(),(0,l.iD)("li",J,(0,_.zw)(t.year)+" г.",1)):(0,l.kq)("",!0)])])],8,U)))),128)),i.showPreload?((0,l.wg)(),(0,l.j4)(a,{key:0})):(0,l.kq)("",!0)])])}const V=e=>((0,l.dD)("data-v-08f2e64b"),e=e(),(0,l.Cn)(),e),ee=V((()=>(0,l._)("div",{class:"item__image"},[(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"360",height:"540"})],-1))),te=[ee];function ie(e,t){return(0,l.wg)(),(0,l.iD)(l.HY,null,(0,l.Ko)(20,(e=>(0,l._)("li",{class:"films__item preload-card",key:e},te))),64)}const se={},ne=(0,f.Z)(se,[["render",ie],["__scopeId","data-v-08f2e64b"]]);var re=ne,ae={components:{PreloadCards:re},props:["items","showPreload"]};const oe=(0,f.Z)(ae,[["render",B],["__scopeId","data-v-3bf601a4"]]);var le=oe;const ce={class:"pagination"},ue=["onClick"];function he(e,t,i,s,n,r){return(0,l.wg)(),(0,l.iD)("div",ce,[(0,l._)("ul",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.total,(t=>((0,l.wg)(),(0,l.iD)("li",{key:t},[(0,l._)("span",{class:(0,_.C_)({active:e.pageNum===t}),onClick:e=>r.emitPage(t)},(0,_.zw)(t),11,ue)])))),128))])])}var me={props:["total"],methods:{...(0,n.nv)(d,["setPageNum"]),emitPage(e){this.$emit("clickPage",e),this.setPageNum(e)}},computed:{...(0,n.rn)(d,["pageNum"])}};const pe=(0,f.Z)(me,[["render",he],["__scopeId","data-v-73b438fc"]]);var de=pe,ge={components:{PaginationList:de,FIlmItem:le},data(){return{films:[],default_type:"TOP_100_POPULAR_FILMS",totalPages:0,showPreload:!1}},methods:{...(0,n.nv)(d,["setPageNum"]),getListFilms:async function(e=1){this.showPreload=!0,this.films=[];const t=await C().get("https://kinopoiskapiunofficial.tech/api/v2.2/films/top",{headers:{"X-API-KEY":this.apiKey,"Content-Type":"application/json"},params:{type:this.default_type,page:e}});this.totalPages=t.data?.pagesCount,this.films=t.data?.films,this.showPreload=!1},getMoreFilms:async function(){this.showPreload=!0,this.setPageNum(this.pageNum+1);const e=await C().get("https://kinopoiskapiunofficial.tech/api/v2.2/films/top",{headers:{"X-API-KEY":this.apiKey,"Content-Type":"application/json"},params:{type:this.default_type,page:this.pageNum}});this.films=[...this.films,...e.data?.films],this.showPreload=!1}},computed:{...(0,n.rn)(d,["apiKey","pageNum"])},created(){this.getListFilms()}};const fe=(0,f.Z)(ge,[["render",Y],["__scopeId","data-v-f3167ba6"]]);var ve=fe;const we=e=>((0,l.dD)("data-v-a93defe0"),e=e(),(0,l.Cn)(),e),_e={class:"film__wrap"},ye={class:"film__image"},Pe=["src"],ke={class:"film__note"},Ie={class:"film__btns"},be={class:"film__description"},Ce=we((()=>(0,l._)("h3",null,"Описание:",-1))),De={class:"film__genres"},Se=we((()=>(0,l._)("h3",null,"Жанры",-1))),Te=["onClick"],Fe={key:0,class:"film__similar"},Ne=we((()=>(0,l._)("h3",null,"Похожие фильмы",-1)));function Ke(e,t,i,s,n,r){const a=(0,l.up)("FilmPageDialog"),o=(0,l.up)("FIlmItem"),c=(0,l.Q2)("title");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.wy)(((0,l.wg)(),(0,l.iD)("h1",null,[(0,l.Uk)((0,_.zw)(n.filmTitle),1)])),[[c]]),(0,l._)("div",_e,[(0,l._)("div",ye,[n.filmInfo?.posterUrl?((0,l.wg)(),(0,l.iD)("img",{key:0,src:n.filmInfo?.posterUrl,alt:"filmTitle"},null,8,Pe)):(0,l.kq)("",!0)]),(0,l._)("div",ke,[(0,l._)("div",Ie,[(0,l.Wm)(a,{film_id:n.filmInfo.kinopoiskId},null,8,["film_id"])]),(0,l._)("div",be,[Ce,(0,l.Uk)(" "+(0,_.zw)(n.filmInfo.description),1)]),(0,l._)("div",De,[Se,(0,l._)("ul",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.filmInfo.genres,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e},[(0,l._)("span",{onClick:t=>r.setGenre(e.genre)},(0,_.zw)(e.genre),9,Te)])))),128))])]),n.similars.length>0?((0,l.wg)(),(0,l.iD)("div",Fe,[Ne,(0,l.Wm)(o,{items:n.similars},null,8,["items"])])):(0,l.kq)("",!0)])])],64)}const $e={class:"film__init",ref:"film__init"};function qe(e,t,i,s,n,r){return(0,l.wg)(),(0,l.iD)("div",$e,null,512)}var Qe={props:["film_id"],methods:{mountInit(){setTimeout((()=>{let e=document.createElement("div");e.setAttribute("data-resize","1"),e.setAttribute("data-tv","1"),e.setAttribute("data-kinopoisk",this.film_id),e.setAttribute("id","yohoho");let t=document.createElement("script");t.type="text/javascript",t.src="//yohoho.cc/yo.js",this.$refs.film__init.appendChild(e),this.$refs.film__init.appendChild(t)}),10)}},mounted(){this.mountInit()},beforeUpdate(){this.$refs.film__init.innerHTML=""},updated(){this.mountInit()}};const Ge=(0,f.Z)(Qe,[["render",qe],["__scopeId","data-v-7ac3bf39"]]);var Oe=Ge,Le={components:{FIlmItem:le,FilmPageDialog:Oe},data(){return{filmInfo:[],filmTitle:"",similars:[],dialog:!1,title:this.filmTitle}},methods:{getFilmInfo:async function(){const e=await C().get("https://kinopoiskapiunofficial.tech/api/v2.2/films/"+this.$route.params.id,{headers:{"X-API-KEY":this.apiKey,"Content-Type":"application/json"}});this.filmInfo=e.data,this.getNameFilm()},getSimilars:async function(){const e=await C().get("https://kinopoiskapiunofficial.tech/api/v2.2/films/"+this.$route.params.id+"/similars",{headers:{"X-API-KEY":this.apiKey,"Content-Type":"application/json"}});this.similars=e.data?.items},getNameFilm(){this.filmTitle=this.filmInfo?.nameRu||this.filmInfo?.nameEn||this.filmInfo?.nameOriginal||"Без названия",this.filmTitle+=` (${this.filmInfo.year})`},setGenre(e){let t=JSON.parse(localStorage.getItem("filters")).genres,i=t.filter((t=>t.genre===e))[0].id;window.scrollTo(0,0),this.$router.push({path:"/film-search",query:{genres:i}})}},computed:{...(0,n.rn)(d,["apiKey"])},mounted(){this.getFilmInfo(),this.getSimilars()}};const je=(0,f.Z)(Le,[["render",Ke],["__scopeId","data-v-a93defe0"]]);var Me=je;const Ye={key:0,ref:"observer",class:"observer"};function Ae(e,t,i,s,n,r){const a=(0,l.up)("PaginationList"),o=(0,l.up)("FIlmItem"),c=(0,l.Q2)("title"),u=(0,l.Q2)("intersection");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.wy)(((0,l.wg)(),(0,l.iD)("h1",null,[(0,l.Uk)((0,_.zw)(n.titlePage),1)])),[[c]]),(0,l.Wm)(a,{total:n.totalPages,onClickPage:r.getListFilms},null,8,["total","onClickPage"]),(0,l.Wm)(o,{items:n.films,showPreload:n.showPreload},null,8,["items","showPreload"]),(0,l.Wm)(a,{total:n.totalPages,onClickPage:r.getListFilms},null,8,["total","onClickPage"]),e.pageNum<n.totalPages?(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",Ye,null,512)),[[u,{getPosts:r.getMoreFilms}]]):(0,l.kq)("",!0)],64)}var Ee={components:{FIlmItem:le,PaginationList:de},data(){return{films:[],searchQuery:this.$route.query.q,searchGenre:this.$route.query.genres,totalPages:0,titlePage:"",showPreload:!1}},methods:{...(0,n.nv)(d,["setPageNum"]),getListFilms:async function(e=1){if(this.setPageTitle(),this.searchQuery||this.searchGenre){this.showPreload=!0,this.films=[];const t=await C().get("https://kinopoiskapiunofficial.tech/api/v2.2/films",{headers:{"X-API-KEY":this.apiKey,"Content-Type":"application/json"},params:{keyword:this.searchQuery,genres:this.searchGenre,page:e}});this.totalPages=t.data?.totalPages,this.films=t.data?.items,this.showPreload=!1}},getMoreFilms:async function(){this.showPreload=!0,this.setPageNum(this.pageNum+1);const e=await C().get("https://kinopoiskapiunofficial.tech/api/v2.2/films/top",{headers:{"X-API-KEY":this.apiKey,"Content-Type":"application/json"},params:{type:this.default_type,page:this.pageNum}});this.films=[...this.films,...e.data?.films],this.showPreload=!1},setPageTitle(){let e=JSON.parse(localStorage.getItem("filters")).genres;if(this.searchQuery&&this.searchGenre){let t=e.filter((e=>e.id==this.searchGenre))[0].genre;this.titlePage=`Поиск по слову "${this.searchQuery}", жанр "${t}"`}else if(this.searchQuery&&!this.searchGenre)this.titlePage=`Поиск по слову "${this.searchQuery}"`;else if(this.searchGenre&&!this.searchQuery){let t=e.filter((e=>e.id==this.searchGenre))[0].genre;this.titlePage=`Поиск по жанру "${t}"`}else this.titlePage="Ничего не указано для поиска"}},computed:{...(0,n.rn)(d,["apiKey","pageNum"])},mounted(){this.emitter.emit("search-query",this.searchQuery),this.emitter.on("searchSubmit",(()=>{this.getListFilms(1)}))},created(){this.getListFilms(1)}};const He=(0,f.Z)(Ee,[["render",Ae]]);var Ue=He;const Ze=e=>((0,l.dD)("data-v-f2d8208e"),e=e(),(0,l.Cn)(),e),xe=Ze((()=>(0,l._)("h1",null,"Страница не найдена",-1))),We=(0,l.Uk)("Перейти на "),ze=(0,l.Uk)("главную"),Xe=Ze((()=>(0,l._)("br",null,null,-1)));function Re(e,t,i,s,n,r){const a=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)(l.HY,null,[xe,(0,l._)("p",null,[We,(0,l.Wm)(a,{to:"/"},{default:(0,l.w5)((()=>[ze])),_:1})]),Xe],64)}var Je={};const Be=(0,f.Z)(Je,[["render",Re],["__scopeId","data-v-f2d8208e"]]);var Ve=Be;const et=(0,O.p7)({history:(0,O.PO)("/hometv"),routes:[{path:"/",name:"home",component:ve},{path:"/film/:id",name:"filmName",component:Me},{path:"/film-search",name:"search",component:Ue},{path:"/:pathMatch(.*)*",component:Ve}]});var tt=et,it=i(1373),st=i(9907);(0,st.z)("/hometv/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});const nt=(0,it.Z)(),rt=(0,s.ri)(G);rt.directive("intersection",r),rt.directive("title",o),rt.use((0,n.WB)()),rt.use(tt),rt.config.globalProperties.emitter=nt,rt.mount("#app")}},t={};function i(s){var n=t[s];if(void 0!==n)return n.exports;var r=t[s]={exports:{}};return e[s](r,r.exports,i),r.exports}i.m=e,function(){var e=[];i.O=function(t,s,n,r){if(!s){var a=1/0;for(u=0;u<e.length;u++){s=e[u][0],n=e[u][1],r=e[u][2];for(var o=!0,l=0;l<s.length;l++)(!1&r||a>=r)&&Object.keys(i.O).every((function(e){return i.O[e](s[l])}))?s.splice(l--,1):(o=!1,r<a&&(a=r));if(o){e.splice(u--,1);var c=n();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[s,n,r]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,s){var n,r,a=s[0],o=s[1],l=s[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(n in o)i.o(o,n)&&(i.m[n]=o[n]);if(l)var u=l(i)}for(t&&t(s);c<a.length;c++)r=a[c],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(u)},s=self["webpackChunkvue_with_pwa"]=self["webpackChunkvue_with_pwa"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=i.O(void 0,[998],(function(){return i(1777)}));s=i.O(s)})();
//# sourceMappingURL=app.e6b8fffa.js.map
