(function(){"use strict";var e={3126:function(e,t,i){var n=i(9242),a=i(3766),r={name:"intersection",mounted(e,t){const i={rootMargin:"0px",threshold:1},n=e=>{e[0].isIntersecting&&t.value.getMoreFilms()},a=new IntersectionObserver(n,i);a.observe(e)}};const o=function(e){document.title=e};var s={mounted:(e,t)=>o(t.value||e.innerText),beforeUpdate:(e,t)=>o(t.value||e.innerText),updated:(e,t)=>o(t.value||e.innerText)},l=i(3396);const u={class:"wrapper"};function c(e,t,i,n,a,r){const o=(0,l.up)("HeaderFilm"),s=(0,l.up)("GenreList"),c=(0,l.up)("RouterView"),m=(0,l.up)("ToTop");return(0,l.wg)(),(0,l.iD)("div",u,[((0,l.wg)(),(0,l.j4)(o,{key:e.$route.fullPath})),(0,l.Wm)(s),((0,l.wg)(),(0,l.j4)(c,{key:e.$route.fullPath})),(0,l.Wm)(m)])}var m=i(7139);const p=["onSubmit"];function d(e,t,i,a,r,o){const s=(0,l.up)("RegistrationWrap");return(0,l.wg)(),(0,l.iD)("header",null,[(0,l._)("a",{class:"home",onClick:t[0]||(t[0]=t=>e.$router.push({name:"home"})),href:"#"},"Home"),(0,l._)("a",{href:"#",class:"favorites",onClick:t[1]||(t[1]=t=>e.$router.push({name:"favorite"}))},(0,m.zw)(a.filmStore.favorites.length),1),(0,l._)("form",{action:"#",onSubmit:(0,n.iM)((e=>null),["prevent"])},[(0,l.wy)((0,l._)("input",{autocomplete:"off",type:"text",onKeyup:t[2]||(t[2]=(0,n.D2)((0,n.iM)(((...e)=>a.searchSubmit&&a.searchSubmit(...e)),["stop"]),["enter"])),onKeydown:t[3]||(t[3]=(0,n.D2)((0,n.iM)(((...e)=>a.searchSubmit&&a.searchSubmit(...e)),["stop"]),["enter"])),onChange:t[4]||(t[4]=(0,n.iM)((()=>{}),["stop"])),placeholder:"Название фильма / ID КиноПоиск","onUpdate:modelValue":t[5]||(t[5]=e=>a.filmStore.searchQueryStore=e),name:"keyword"},null,544),[[n.nr,a.filmStore.searchQueryStore,void 0,{trim:!0}]]),(0,l._)("button",{type:"submit",onClick:t[6]||(t[6]=(0,n.iM)(((...e)=>a.searchSubmit&&a.searchSubmit(...e)),["prevent"]))},"Найти")],40,p),(0,l.Wm)(s)])}var g=i(6265),v=i.n(g),f=i(4275),h=i(6035),w={apiKey:"AIzaSyDapqMH_oM7h6CDKM0laMGrLIlDVDyb_gY",authDomain:"hometv-c10f8.firebaseapp.com",projectId:"hometv-c10f8",storageBucket:"hometv-c10f8.appspot.com",messagingSenderId:"452296723769",appId:"1:452296723769:web:982a4288b9cf4e189bace8"};const _=(0,f.ZF)(w),y=(0,h.ad)(_);var k=i(8176);const F=async function(e){const t=(0,h.JU)(y,"users",e),i=await(0,h.QT)(t);return i.exists()?i.data():null},I=async function(e,t){await(0,h.pl)((0,h.JU)(y,"users",t),{name:e.user_name||"",email:e.email||"",favorites:[],api_key:e.api_key||""})},S=function(e){switch(e){case"auth/wrong-password":return"Неверный пароль";case"auth/internal-error":return"Неизвестная ошибка";case"auth/invalid-email":return"Недопустимый email";case"auth/user-not-found":return"Пользователь не найден";case"auth/weak-password":return"Пароль не менее 6 символов";default:return"Ошибка авторизации"}},b=["","для взрослых","мюзикл","спорт","церемония","фильм-нуар","биография","вестерн","короткометражка","документальный","документальный","реальное ТВ","ток-шоу","концерт","игра","новости"],C=(0,a.Q_)({id:"filmStore",state:()=>({user:null,apiKey:"404dc583-7efc-4c93-8f21-a782f977b9e7",auth:(0,k.v0)(),errorMessage:"",pageNum:1,limit:20,genreIdStore:null,genreListStore:[],searchQueryStore:"",filters:null,favorites:[]}),getters:{filterGenres(){if(!this.genreListStore.length)return[];this.genreListStore=this.genreListStore.filter((e=>{if(-1===b.indexOf(e.genre))return e}))}},actions:{async getGenreList(){return localStorage.getItem("genres")?(this.genreListStore=JSON.parse(localStorage.getItem("genres")),this.genreListStore):(await v().get("https://kinopoiskapiunofficial.tech/api/v2.2/films/filters",{headers:{"X-API-KEY":this.apiKey,"Content-Type":"application/json"}}).then((e=>{this.filters=e.data,this.genreListStore=e.data.genres,this.filterGenres,localStorage.setItem("genres",JSON.stringify(this.genreListStore))})),this.genreListStore)},checkFavoriteStore(e){let t=this.isCheckFilm(!0,e);return!!t.length},async addFavorite(e){try{const t=(0,h.JU)(y,"users",this.user.uid);await(0,h.r7)(t,{favorites:[...this.favorites,e]})}catch(t){this.user?alert("Ошибка добавления в избранное: "+t):alert("Необходимо авторизоваться")}this.favorites=[...this.favorites,e]},async removeFavorite(e){let t=this.isCheckFilm(!1,e);try{const e=(0,h.JU)(y,"users",this.user.uid);await(0,h.r7)(e,{favorites:[...t]})}catch(i){this.user?alert("Ошибка удаления из избранного: "+i):alert("Необходимо авторизоваться")}this.favorites=[...t]},async authWithEmailAndPassword(e){await(0,k.e5)(this.auth,e.email,e.password).then((()=>{this.getUserData()})).catch((e=>{this.errorMessage=S(e.code)}))},async createAuthWithEmailAndPassword(e){await(0,k.Xb)(this.auth,e.email,e.password).then((async t=>{this.user=await t.user,await I(e,this.user.uid),await this.getUserData()})).catch((e=>{this.errorMessage=S(e.code)}))},async authLogout(){(0,k.w7)(this.auth).then((async()=>{this.removeUserData()})).catch((e=>{alert("Ошибка logout: "+e)}))},async authChange(e){(0,k.Aj)(this.auth,(async t=>{t?(this.user=t,this.getUserData(e)):this.removeUserData(e)}))},async getUserData(e){let t=await F(this.user.uid);this.user.name=t?.name||"",this.user.email=t?.email??"",this.favorites=t?.favorites??[],t?.api_key&&(this.apiKey=t.api_key),"function"===typeof e&&e()},removeUserData(e){this.user=null,this.favorites=[],"function"===typeof e&&e()},isCheckFilm(e,t){return this.favorites.filter((i=>{let n=i?.kinopoiskId??i?.filmId,a=t?.kinopoiskId??t?.filmId;return n===a&&e?i:n===a||e?void 0:i}))}}}),P={class:"registration-wrap"},D={key:0,class:"registration-wrap--pop"};function H(e,t,i,n,a,r){const o=(0,l.up)("IconUser"),s=(0,l.up)("LogoutComponent"),u=(0,l.up)("SignInComponent"),c=(0,l.up)("RegistrationComponent");return(0,l.wg)(),(0,l.iD)("div",P,[(0,l.Wm)(o,{onClick:n.togglePop},null,8,["onClick"]),n.isVisible?((0,l.wg)(),(0,l.iD)("div",D,[n.filmStore.user?((0,l.wg)(),(0,l.j4)(s,{key:0,onSetForm:n.setForm},null,8,["onSetForm"])):"sign"===n.formView?((0,l.wg)(),(0,l.j4)(u,{key:1,onSetForm:n.setForm},null,8,["onSetForm"])):"reg"===n.formView?((0,l.wg)(),(0,l.j4)(c,{key:2,onSetForm:n.setForm},null,8,["onSetForm"])):(0,l.kq)("",!0)])):(0,l.kq)("",!0)])}const M={class:"icon icon-user"},L=(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 496 512"},[(0,l._)("path",{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"})],-1),U=[L];function j(e,t){return(0,l.wg)(),(0,l.iD)("span",M,U)}var T=i(89);const N={},q=(0,T.Z)(N,[["render",j]]);var W=q,K=i(4870);const Y=e=>((0,l.dD)("data-v-4909460b"),e=e(),(0,l.Cn)(),e),Z={class:"registration--form"},A=Y((()=>(0,l._)("h3",null,"Регистрация",-1))),x=Y((()=>(0,l._)("small",null,[(0,l._)("a",{href:"https://kinopoiskapiunofficial.tech/signup"},"зарегистрироваться")],-1))),O={key:0,class:"err-string"},z={class:"btns"};function E(e,t,i,a,r,o){const s=(0,l.up)("IconGoogle");return(0,l.wg)(),(0,l.iD)("div",Z,[A,(0,l._)("p",null,[(0,l.wy)((0,l._)("input",{type:"text",placeholder:"Email","onUpdate:modelValue":t[0]||(t[0]=e=>a.email=e)},null,512),[[n.nr,a.email]])]),(0,l._)("p",null,[(0,l.wy)((0,l._)("input",{type:"text",placeholder:"Name","onUpdate:modelValue":t[1]||(t[1]=e=>a.user_name=e)},null,512),[[n.nr,a.user_name]])]),(0,l._)("p",null,[(0,l.wy)((0,l._)("input",{type:"text",placeholder:"Api key","onUpdate:modelValue":t[2]||(t[2]=e=>a.api_key=e)},null,512),[[n.nr,a.api_key]]),x]),(0,l._)("p",null,[(0,l.wy)((0,l._)("input",{type:"password",placeholder:"Password","onUpdate:modelValue":t[3]||(t[3]=e=>a.password=e)},null,512),[[n.nr,a.password]])]),a.filmStore.errorMessage?((0,l.wg)(),(0,l.iD)("p",O,(0,m.zw)(a.filmStore.errorMessage),1)):(0,l.kq)("",!0),(0,l._)("div",z,[(0,l._)("button",{class:"reg",onClick:t[4]||(t[4]=(0,n.iM)(((...e)=>a.register&&a.register(...e)),["prevent"]))},"Регистрация"),(0,l._)("button",{class:"sign",onClick:t[5]||(t[5]=(0,n.iM)(((...e)=>a.setFormView&&a.setFormView(...e)),["prevent"]))},"Войти"),(0,l.Wm)(s,{onClick:a.signWithGoogle},null,8,["onClick"])])])}const V={class:"icon-google"};function G(e,t,i,n,a,r){return(0,l.wg)(),(0,l.iD)("span",V)}var Q={name:"IconGoogle"};const R=(0,T.Z)(Q,[["render",G],["__scopeId","data-v-103616a1"]]);var $=R,B={name:"RegistrationComponent",components:{IconGoogle:$},setup(e,{emit:t}){const i=C(),n=(0,K.iH)(""),a=(0,K.iH)(""),r=(0,K.iH)(""),o=(0,K.iH)("");async function s(){await i.createAuthWithEmailAndPassword({email:n.value,password:a.value,user_name:r.value,api_key:o.value})}function l(){t("setForm","sign")}function u(){console.log("ok")}return{email:n,user_name:r,password:a,api_key:o,filmStore:i,register:s,signWithGoogle:u,setFormView:l}}};const J=(0,T.Z)(B,[["render",E],["__scopeId","data-v-4909460b"]]);var X=J;const ee=e=>((0,l.dD)("data-v-105d9081"),e=e(),(0,l.Cn)(),e),te={class:"registration--form"},ie=ee((()=>(0,l._)("h3",{class:"name"},"Авторизация",-1))),ne={key:0,class:"err-string"},ae={class:"btns"};function re(e,t,i,a,r,o){return(0,l.wg)(),(0,l.iD)("div",te,[ie,(0,l._)("p",null,[(0,l.wy)((0,l._)("input",{type:"text",placeholder:"Email","onUpdate:modelValue":t[0]||(t[0]=e=>a.email=e)},null,512),[[n.nr,a.email]])]),(0,l._)("p",null,[(0,l.wy)((0,l._)("input",{type:"password",placeholder:"Password","onUpdate:modelValue":t[1]||(t[1]=e=>a.password=e)},null,512),[[n.nr,a.password]])]),a.filmStore.errorMessage?((0,l.wg)(),(0,l.iD)("p",ne,(0,m.zw)(a.filmStore.errorMessage),1)):(0,l.kq)("",!0),(0,l._)("div",ae,[(0,l._)("button",{class:"sign",onClick:t[2]||(t[2]=(0,n.iM)(((...e)=>a.signIn&&a.signIn(...e)),["prevent"]))},"Войти"),(0,l._)("button",{class:"reg",onClick:t[3]||(t[3]=(0,n.iM)(((...e)=>a.setFormView&&a.setFormView(...e)),["prevent"]))},"Регистрация")])])}var oe={name:"SignInComponent",setup(e,{emit:t}){const i=(0,K.iH)(""),n=(0,K.iH)(""),a=(0,K.iH)(""),r=C();async function o(){await r.authWithEmailAndPassword({email:i.value,password:n.value})}function s(){t("setForm","reg")}return{email:i,password:n,errMsg:a,signIn:o,setFormView:s,filmStore:r}}};const se=(0,T.Z)(oe,[["render",re],["__scopeId","data-v-105d9081"]]);var le=se;const ue={class:"registration--form"},ce=(0,l.Uk)("Вы вошли как: "),me={class:"btns"};function pe(e,t,i,a,r,o){return(0,l.wg)(),(0,l.iD)("div",ue,[(0,l._)("h3",null,[ce,(0,l._)("strong",null,(0,m.zw)(a.filmStore.user.name),1)]),(0,l._)("div",me,[(0,l._)("button",{class:"reg",onClick:t[0]||(t[0]=(0,n.iM)(((...e)=>a.logout&&a.logout(...e)),["prevent"]))},"Выйти")])])}var de={name:"LogoutComponent",setup(){const e=C();async function t(){await e.authLogout()}return{logout:t,filmStore:e}}};const ge=(0,T.Z)(de,[["render",pe]]);var ve=ge,fe={name:"RegistrationWrap",components:{IconUser:W,RegistrationComponent:X,SignInComponent:le,LogoutComponent:ve},setup(){const e=C(),t=(0,K.iH)(!1),i=(0,K.iH)("sign"),n=(0,l.f3)("emitter");function a(){t.value=!t.value}function r(t){e.errorMessage="",i.value=t}function o(){n.emit("setUserData")}return(0,l.bv)((async()=>{await e.authChange(o),await n.emit("setUserData")})),{isVisible:t,setForm:r,togglePop:a,formView:i,filmStore:e}}};const he=(0,T.Z)(fe,[["render",H],["__scopeId","data-v-a4303992"]]);var we=he,_e=i(678),ye={components:{RegistrationWrap:we},setup(){const e=(0,_e.yj)(),t=(0,_e.tv)(),i=C(),n=(0,K.iH)(""),a=(0,l.Fl)((()=>e.query.q));function r(){let e={};i.searchQueryStore&&(e.q=i.searchQueryStore),i.genreIdStore&&(e.genres=i.genreIdStore),i.pageNum=1,t.push({name:"searchPage",query:e})}return(0,l.YP)(a,(e=>{i.searchQueryStore=e})),{searchQuery:n,searchSubmit:r,filmStore:i}}};const ke=(0,T.Z)(ye,[["render",d],["__scopeId","data-v-1606ec54"]]);var Fe=ke;const Ie={class:"genres-wrap"},Se={class:"genres"},be=["onClick"];function Ce(e,t,i,n,a,r){return(0,l.wg)(),(0,l.iD)("div",Ie,[(0,l._)("ul",Se,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.filmStore.genreListStore,(e=>((0,l.wg)(),(0,l.iD)("li",{class:(0,m.C_)({active:+e.id===+n.routeGenreId}),key:e.id},[(0,l._)("span",{onClick:t=>n.setGenre(e)},(0,m.zw)(e.genre),9,be)],2)))),128))])])}var Pe={name:"GenreList",setup(){const e=C(),t=(0,_e.yj)(),i=(0,_e.tv)(),n=(0,l.Fl)((()=>t.query.genres));function a(t){let n={};e.searchQueryStore&&(n.q=e.searchQueryStore),e.genreIdStore&&+e.genreIdStore===+t.id||(n.genres=t.id),e.pageNum=1,e.genreIdStore=n.genres,i.push({name:"searchPage",query:n})}async function r(){await e.getGenreList()}return(0,l.YP)(n,(t=>{e.genreIdStore=t})),(0,l.bv)((async()=>{await r()})),{filmStore:e,routeGenreId:n,setGenre:a}}};const De=(0,T.Z)(Pe,[["render",Ce],["__scopeId","data-v-614ac7e4"]]);var He=De;function Me(e,t,i,n,a,r){return(0,l.wg)(),(0,l.iD)("div",{class:"event__top",onClick:t[0]||(t[0]=(...e)=>n.eventTop&&n.eventTop(...e))})}var Le={setup(){function e(){window.scrollTo({top:0,behavior:"smooth"})}return{eventTop:e}}};const Ue=(0,T.Z)(Le,[["render",Me],["__scopeId","data-v-93d00da6"]]);var je=Ue,Te={components:{HeaderFilm:Fe,GenreList:He,ToTop:je}};const Ne=(0,T.Z)(Te,[["render",c]]);var qe=Ne;const We=(0,l.Uk)("Список последних новинок"),Ke=[We],Ye={key:0,ref:"observer",class:"observer"};function Ze(e,t,i,n,a,r){const o=(0,l.up)("PaginationList"),s=(0,l.up)("FIlmItem"),u=(0,l.Q2)("title"),c=(0,l.Q2)("intersection");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.wy)(((0,l.wg)(),(0,l.iD)("h1",null,Ke)),[[u]]),(0,l.Wm)(o,{total:n.totalPages},null,8,["total"]),(0,l.Wm)(s,{items:n.films,showPreload:n.showPreload},null,8,["items","showPreload"]),(0,l.Wm)(o,{total:n.totalPages},null,8,["total"]),n.filmStore.pageNum<n.totalPages?(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",Ye,null,512)),[[c,{getMoreFilms:n.getMoreFilms}]]):(0,l.kq)("",!0)],64)}const Ae={class:"films__wrap"},xe={class:"films__list"};function Oe(e,t,i,n,a,r){const o=(0,l.up)("FilmItemItem"),s=(0,l.up)("PreloadCards");return(0,l.wg)(),(0,l.iD)("div",Ae,[(0,l._)("ul",xe,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.items,(e=>((0,l.wg)(),(0,l.j4)(o,{itemFilm:e,key:e},null,8,["itemFilm"])))),128)),i.showPreload?((0,l.wg)(),(0,l.j4)(s,{key:0})):(0,l.kq)("",!0)])])}const ze=e=>((0,l.dD)("data-v-3e126046"),e=e(),(0,l.Cn)(),e),Ee={class:"films__item"},Ve={class:"item__image"},Ge=ze((()=>(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"360",height:"540"},null,-1))),Qe=["src","alt"],Re={key:0,class:"item__rating"},$e={class:"item__options"},Be={class:"name"},Je={key:0,class:"year"};function Xe(e,t,i,n,a,r){const o=(0,l.up)("FavoriteBtn");return(0,l.wg)(),(0,l.iD)("li",Ee,[(0,l._)("a",{href:"#",class:"item__link",onClick:t[0]||(t[0]=t=>e.$router.push(`/film/${i.itemFilm.filmId||i.itemFilm.kinopoiskId}`))}),(0,l.Wm)(o,{class:"favorite",itemFilm:i.itemFilm},null,8,["itemFilm"]),(0,l._)("div",Ve,[Ge,(0,l._)("img",{src:i.itemFilm.posterUrlPreview,alt:i.itemFilm.nameRu},null,8,Qe)]),"null"!==i.itemFilm.rating&&void 0!==i.itemFilm.rating?((0,l.wg)(),(0,l.iD)("span",Re,(0,m.zw)("null"===i.itemFilm.rating?"нет":i.itemFilm.rating),1)):(0,l.kq)("",!0),(0,l._)("div",$e,[(0,l._)("ul",null,[(0,l._)("li",Be,(0,m.zw)(i.itemFilm?.nameRu||i.itemFilm?.nameEn||i.itemFilm?.nameOriginal||"Без названия"),1),i.itemFilm.year?((0,l.wg)(),(0,l.iD)("li",Je,(0,m.zw)(i.itemFilm.year)+" г.",1)):(0,l.kq)("",!0)])])])}const et={class:"favorite-icon"},tt={key:0,class:"loading-round"};function it(e,t,i,a,r,o){const s=(0,l.up)("IconFavorite");return(0,l.wg)(),(0,l.iD)("span",et,[a.isShow?((0,l.wg)(),(0,l.iD)("span",tt)):(0,l.kq)("",!0),(0,l.Wm)(s,{class:(0,m.C_)({active:a.isFavorite}),onClick:(0,n.iM)(a.toggleFavorite,["prevent"])},null,8,["class","onClick"])])}const nt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},at=(0,l._)("path",{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},null,-1),rt=[at];function ot(e,t,i,n,a,r){return(0,l.wg)(),(0,l.iD)("svg",nt,rt)}var st={name:"FavoriteIcon"};const lt=(0,T.Z)(st,[["render",ot]]);var ut=lt,ct={name:"FavoriteBtn",components:{IconFavorite:ut},props:["itemFilm"],setup(e){const t=(0,K.iH)(!1),i=(0,K.iH)(!1),n=(0,l.f3)("emitter"),a=C();function r(){t.value=a.checkFavoriteStore(e.itemFilm)}async function o(){i.value=!0,t.value?(await a.removeFavorite(e.itemFilm),t.value=!1):(await a.addFavorite(e.itemFilm),t.value=!0),i.value=!1}return(0,l.bv)((()=>{r()})),n.on("setUserData",r),{isFavorite:t,isShow:i,toggleFavorite:o}}};const mt=(0,T.Z)(ct,[["render",it],["__scopeId","data-v-4ce68668"]]);var pt=mt,dt={name:"FilmItemItem",props:["itemFilm"],components:{FavoriteBtn:pt}};const gt=(0,T.Z)(dt,[["render",Xe],["__scopeId","data-v-3e126046"]]);var vt=gt;const ft=e=>((0,l.dD)("data-v-08f2e64b"),e=e(),(0,l.Cn)(),e),ht=ft((()=>(0,l._)("div",{class:"item__image"},[(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"360",height:"540"})],-1))),wt=[ht];function _t(e,t){return(0,l.wg)(),(0,l.iD)(l.HY,null,(0,l.Ko)(20,(e=>(0,l._)("li",{class:"films__item preload-card",key:e},wt))),64)}const yt={},kt=(0,T.Z)(yt,[["render",_t],["__scopeId","data-v-08f2e64b"]]);var Ft=kt,It={components:{PreloadCards:Ft,FilmItemItem:vt},props:["items","showPreload"]};const St=(0,T.Z)(It,[["render",Oe],["__scopeId","data-v-7e3a4b86"]]);var bt=St;const Ct={class:"pagination"},Pt=["onClick"];function Dt(e,t,i,n,a,r){return(0,l.wg)(),(0,l.iD)("div",Ct,[(0,l._)("ul",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.total,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e},[(0,l._)("span",{class:(0,m.C_)({active:n.filmStore.pageNum===e}),onClick:t=>n.emitPage(e)},(0,m.zw)(e),11,Pt)])))),128))])])}var Ht={props:["total"],setup(){const e=C(),t=(0,l.f3)("emitter");function i(i){e.pageNum=i,t.emit("clickPage",i)}return{emitPage:i,filmStore:e}}};const Mt=(0,T.Z)(Ht,[["render",Dt],["__scopeId","data-v-94d9e44a"]]);var Lt=Mt,Ut={name:"MainList",components:{PaginationList:Lt,FIlmItem:bt},setup(){const e=C(),t=(0,l.f3)("emitter"),i=(0,K.iH)([]),n=(0,K.iH)("TOP_100_POPULAR_FILMS"),a=(0,K.iH)(0),r=(0,K.iH)(!1);async function o(){return await v().get("https://kinopoiskapiunofficial.tech/api/v2.2/films/top",{headers:{"X-API-KEY":e.apiKey,"Content-Type":"application/json"},params:{type:n.value,page:e.pageNum}})}async function s(t=!1,n){r.value=!0,e.pageNum=n||e.pageNum;const s=await o();a.value=s.data?.pagesCount,t?i.value=[...i.value,...s.data?.films]:(i.value=[],i.value=s.data?.films),r.value=!1}function u(){s(!0,e.pageNum+1)}function c(){s(!1,e.pageNum)}return t.on("clickPage",c),(0,l.bv)((()=>{s()})),{films:i,showPreload:r,totalPages:a,filmStore:e,getListFilms:s,getMoreFilms:u}}};const jt=(0,T.Z)(Ut,[["render",Ze],["__scopeId","data-v-a28cd7d8"]]);var Tt=jt;const Nt=e=>((0,l.dD)("data-v-d1c32872"),e=e(),(0,l.Cn)(),e),qt={class:"film__wrap"},Wt={class:"film__image"},Kt=["src"],Yt={class:"film__note"},Zt={class:"film__btns"},At={class:"film__description"},xt=Nt((()=>(0,l._)("h3",null,"Описание:",-1))),Ot={class:"film__genres"},zt=Nt((()=>(0,l._)("h3",null,"Жанры",-1))),Et=["onClick"],Vt={key:0,class:"film__similar"},Gt=Nt((()=>(0,l._)("h3",null,"Похожие фильмы",-1)));function Qt(e,t,i,n,a,r){const o=(0,l.up)("FavoriteBtn"),s=(0,l.up)("FilmPageDialog"),u=(0,l.up)("FIlmItem"),c=(0,l.Q2)("title");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.wy)(((0,l.wg)(),(0,l.iD)("h1",null,[(0,l.Uk)((0,m.zw)(n.filmTitle),1)])),[[c]]),(0,l._)("div",qt,[(0,l._)("div",Wt,[(0,l.Wm)(o,{class:"favorite",itemFilm:n.filmInfo},null,8,["itemFilm"]),n.filmInfo?.posterUrl?((0,l.wg)(),(0,l.iD)("img",{key:0,src:n.filmInfo?.posterUrl,alt:"filmTitle"},null,8,Kt)):(0,l.kq)("",!0)]),(0,l._)("div",Yt,[(0,l._)("div",Zt,[(0,l.Wm)(s,{itemFilm:n.filmInfo},null,8,["itemFilm"])]),(0,l._)("div",At,[xt,(0,l.Uk)(" "+(0,m.zw)(n.filmInfo.description),1)]),(0,l._)("div",Ot,[zt,(0,l._)("ul",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.filmInfo.genres,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e},[(0,l._)("span",{onClick:t=>n.setGenre(e.genre)},(0,m.zw)(e.genre),9,Et)])))),128))])]),n.similars.length>0?((0,l.wg)(),(0,l.iD)("div",Vt,[Gt,(0,l.Wm)(u,{items:n.similars},null,8,["items"])])):(0,l.kq)("",!0)])])],64)}const Rt={class:"tab-titles"};function $t(e,t,i,n,a,r){const o=(0,l.up)("FilmYohohoTab"),s=(0,l.up)("FilmKinoTop");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("ul",Rt,[(0,l._)("li",{class:(0,m.C_)({selected:1===n.playerNum}),onClick:t[0]||(t[0]=e=>n.playerNum=1)},"Плеер 1",2),(0,l._)("li",{class:(0,m.C_)({selected:2===n.playerNum}),onClick:t[1]||(t[1]=e=>n.playerNum=2)},"Плеер 2",2)]),1===n.playerNum?((0,l.wg)(),(0,l.j4)(o,{key:0})):(0,l.kq)("",!0),2===n.playerNum?((0,l.wg)(),(0,l.j4)(s,{key:1})):(0,l.kq)("",!0)],64)}const Bt={class:"film__init",ref:"player_init_item"};function Jt(e,t,i,n,a,r){return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",Bt,null,512)])}var Xt={name:"FilmYohohoTab",setup(){const e=(0,_e.yj)(),t=(0,K.iH)(null);function i(t){let i=document.createElement("div");i.setAttribute("data-resize","1"),i.setAttribute("data-tv","1"),i.setAttribute("data-kinopoisk",e?.params?.id),i.setAttribute("id","yohoho");let n=document.createElement("script");n.type="text/javascript",n.src="//yohoho.cc/yo.js",t.value.appendChild(i),t.value.appendChild(n)}return(0,l.bv)((()=>{i(t)})),{player_init_item:t}}};const ei=(0,T.Z)(Xt,[["render",Jt]]);var ti=ei;const ii={class:"film__init",ref:"player_init_item"};function ni(e,t,i,n,a,r){return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",ii,null,512)])}var ai={name:"FilmYohohoTab",setup(){const e=(0,_e.yj)(),t=(0,K.iH)(null);function i(t){t.value.innerHTML="";let i=document.createElement("div");i.setAttribute("data-kinopoisk",e.params.id),i.setAttribute("id","kinoplayertop");let n=document.createElement("script");n.type="text/javascript",n.src="//kinoplayer.top/top.js",t.value.appendChild(i),t.value.appendChild(n),setTimeout((()=>{runKinoplayertop()}),500)}return(0,l.bv)((()=>{i(t)})),{player_init_item:t}}};const ri=(0,T.Z)(ai,[["render",ni]]);var oi=ri,si={name:"FilmPageDialog",props:["itemFilm"],components:{FilmYohohoTab:ti,FilmKinoTop:oi},setup(){const e=C(),t=(0,K.iH)(1);return{filmStore:e,playerNum:t}}};const li=(0,T.Z)(si,[["render",$t],["__scopeId","data-v-94379896"]]);var ui=li,ci={name:"FilmPage",components:{FIlmItem:bt,FilmPageDialog:ui,FavoriteBtn:pt},setup(){const e=C(),t=(0,_e.yj)(),i=(0,_e.tv)(),n=(0,K.iH)([]),a=(0,K.iH)(""),r=(0,K.iH)([]),o=(0,K.iH)(a.value);function s(){v().get("https://kinopoiskapiunofficial.tech/api/v2.2/films/"+t.params.id,{headers:{"X-API-KEY":e.apiKey,"Content-Type":"application/json"}}).then((e=>{n.value=e.data,m()})).catch((()=>({data:[]})))}function u(){v().get("https://kinopoiskapiunofficial.tech/api/v2.2/films/"+t.params.id+"/similars",{headers:{"X-API-KEY":e.apiKey,"Content-Type":"application/json"}}).then((e=>{r.value=e.data?.items})).catch((()=>({data:[]})))}function c(){v().get("https://kinopoiskapiunofficial.tech/api/v2.1/films/"+t.params.id+"/sequels_and_prequels",{headers:{"X-API-KEY":e.apiKey,"Content-Type":"application/json"}}).then((e=>{r.value=[...e?.data,...r.value]})).catch((()=>({data:[]})))}function m(){a.value=n.value?.nameRu||n.value?.nameEn||n.value?.nameOriginal||"Без названия",a.value+=` (${n.value.year})`}function p(e){let t=JSON.parse(localStorage.getItem("genres")),n=t.filter((t=>t.genre===e))[0].id;window.scrollTo(0,0),i.push({name:"searchPage",query:{genres:n}})}return(0,l.bv)((()=>{s(),u(),c()})),{filmTitle:a,filmInfo:n,similars:r,setGenre:p,title:o}}};const mi=(0,T.Z)(ci,[["render",Qt],["__scopeId","data-v-d1c32872"]]);var pi=mi;const di={key:0,ref:"observer",class:"observer"};function gi(e,t,i,n,a,r){const o=(0,l.up)("PaginationList"),s=(0,l.up)("FIlmItem"),u=(0,l.Q2)("title"),c=(0,l.Q2)("intersection");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.wy)(((0,l.wg)(),(0,l.iD)("h1",null,[(0,l.Uk)((0,m.zw)(n.titlePage),1)])),[[u]]),(0,l.Wm)(o,{total:n.totalPages,onClickPage:n.getListFilms},null,8,["total","onClickPage"]),(0,l.Wm)(s,{items:n.films,showPreload:n.showPreload},null,8,["items","showPreload"]),(0,l.Wm)(o,{total:n.totalPages,onClickPage:n.getListFilms},null,8,["total","onClickPage"]),n.filmStore.pageNum<n.totalPages?(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",di,null,512)),[[c,{getMoreFilms:n.getMoreFilms}]]):(0,l.kq)("",!0)],64)}var vi={components:{FIlmItem:bt,PaginationList:Lt},setup(){const e=(0,_e.yj)(),t=(0,K.iH)([]),i=(0,l.f3)("emitter"),n=C(),a=(0,K.iH)(0),r=(0,K.iH)(""),o=(0,K.iH)(!1),s=(0,l.Fl)((()=>e.query.q)),u=(0,l.Fl)((()=>e.query.genres));async function c(){return await v().get("https://kinopoiskapiunofficial.tech/api/v2.2/films",{headers:{"X-API-KEY":n.apiKey,"Content-Type":"application/json"},params:{keyword:s.value,genres:u.value,page:n.pageNum}})}async function m(e=!1,i){if(g(),n.pageNum=i||n.pageNum,u.value||s.value||e){o.value=!0;const i=await c();a.value=i.data?.totalPages,e?t.value=[...t.value,...i.data?.items]:(t.value=[],t.value=i.data?.items),o.value=!1}}function p(){m(!0,n.pageNum+1)}function d(){m(!1,n.pageNum)}async function g(){let e=u.value?await n.genreListStore.filter((e=>+e.id===+u.value))[0].genre:null;s.value&&u.value?r.value=`Поиск по слову "${s.value}", жанр "${e}"`:s.value&&!u.value?r.value=`Поиск по слову "${s.value}"`:u.value&&!s.value?r.value=`Поиск по жанру "${e}"`:r.value="Ничего не указано для поиска"}return(0,l.YP)(u,(e=>{n.genreIdStore=e})),(0,l.YP)(s,(e=>{n.searchQueryStore=e})),i.on("clickPage",d),(0,l.bv)((async()=>{await m(!1,1),i.on("searchSubmit",(()=>{m(!1,1)}))})),{films:t,titlePage:r,filmStore:n,totalPages:a,showPreload:o,getListFilms:m,getMoreFilms:p}}};const fi=(0,T.Z)(vi,[["render",gi]]);var hi=fi;const wi=e=>((0,l.dD)("data-v-4d7e4948"),e=e(),(0,l.Cn)(),e),_i=wi((()=>(0,l._)("h1",null,"Страница не найдена",-1))),yi=(0,l.Uk)("Перейти на "),ki=(0,l.Uk)("главную"),Fi=wi((()=>(0,l._)("br",null,null,-1)));function Ii(e,t){const i=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)(l.HY,null,[_i,(0,l._)("p",null,[yi,(0,l.Wm)(i,{to:"/"},{default:(0,l.w5)((()=>[ki])),_:1})]),Fi],64)}const Si={},bi=(0,T.Z)(Si,[["render",Ii],["__scopeId","data-v-4d7e4948"]]);var Ci=bi;const Pi=e=>((0,l.dD)("data-v-555573f0"),e=e(),(0,l.Cn)(),e),Di=Pi((()=>(0,l._)("h1",null,"Избранные фильмы/мультики и тд",-1))),Hi={key:0};function Mi(e,t,i,n,a,r){const o=(0,l.up)("FIlmItem");return(0,l.wg)(),(0,l.iD)(l.HY,null,[Di,(0,l.Wm)(o,{items:n.filmStore.favorites,showPreload:n.showPreload},null,8,["items","showPreload"]),0===n.filmStore.favorites.length?((0,l.wg)(),(0,l.iD)("h3",Hi,"Список пуст")):(0,l.kq)("",!0)],64)}var Li={name:"FavoritePage",components:{FIlmItem:bt},setup(){const e=C(),t=(0,K.iH)(!1);return{filmStore:e,showPreload:t}}};const Ui=(0,T.Z)(Li,[["render",Mi],["__scopeId","data-v-555573f0"]]);var ji=Ui;const Ti=(0,_e.p7)({history:(0,_e.PO)("/hometv"),routes:[{path:"/",name:"home",component:Tt},{path:"/film/:id",name:"filmName",component:pi},{path:"/search",name:"searchPage",component:hi},{path:"/favorites",name:"favorite",component:ji},{path:"/:pathMatch(.*)*",component:Ci}]});var Ni=Ti,qi=i(1373),Wi=i(9907);(0,Wi.z)("/hometv/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});const Ki=(0,qi.Z)(),Yi=(0,n.ri)(qe);Yi.directive("intersection",r),Yi.directive("title",s),Yi.use((0,a.WB)()),Yi.use(Ni),Yi.provide("emitter",Ki),Yi.mount("#app")}},t={};function i(n){var a=t[n];if(void 0!==a)return a.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,i),r.exports}i.m=e,function(){var e=[];i.O=function(t,n,a,r){if(!n){var o=1/0;for(c=0;c<e.length;c++){n=e[c][0],a=e[c][1],r=e[c][2];for(var s=!0,l=0;l<n.length;l++)(!1&r||o>=r)&&Object.keys(i.O).every((function(e){return i.O[e](n[l])}))?n.splice(l--,1):(s=!1,r<o&&(o=r));if(s){e.splice(c--,1);var u=a();void 0!==u&&(t=u)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[n,a,r]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,r,o=n[0],s=n[1],l=n[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(a in s)i.o(s,a)&&(i.m[a]=s[a]);if(l)var c=l(i)}for(t&&t(n);u<o.length;u++)r=o[u],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(c)},n=self["webpackChunkvue_with_pwa"]=self["webpackChunkvue_with_pwa"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=i.O(void 0,[998],(function(){return i(3126)}));n=i.O(n)})();
//# sourceMappingURL=app.b3f1c8de.js.map